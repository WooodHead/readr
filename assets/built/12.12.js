webpackJsonp([12],{160:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.common=t.usersSelector=t.booksSelector=t.booksSearchAsOptions=t.authorsAsOptions=t.doubanBooksAsOptions=t.searchBooksSelector=t.queryAuthorsSelector=t.queryDoubanBooksSelector=void 0;var o=n(161);Object.keys(o).forEach(function(e){"default"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})});var u=n(162),a=r(o),i=t.queryDoubanBooksSelector=function(e){return(0,u.createSelector)((0,o.selectPaginatedEntities)({entitiesName:"doubanBooks",paginationName:"doubanBooks",paginationQuery:e}),function(e){return e})},c=t.queryAuthorsSelector=function(e){return(0,o.selectPaginatedEntities)({entitiesName:"authors",paginationName:"authors",paginationQuery:e})},l=t.searchBooksSelector=function(e){return(0,o.selectPaginatedEntities)({entitiesName:"books",paginationName:"books",paginationQuery:e})};t.doubanBooksAsOptions=function(e){return(0,u.createSelector)(i(e),function(e){return e.map(function(e){return{name:e.title,value:e.id,additional:{description:e.summary,cover:e.images.large,author:e.author.join(", ")}}})})},t.authorsAsOptions=function(e){return(0,u.createSelector)(c(e),function(e){return e.map(function(e){return{name:e.name,value:e.id}})})},t.booksSearchAsOptions=function(e){return(0,u.createSelector)(l(e),function(e){return e.map(function(e){return{name:e.title,value:e.id}})})},t.booksSelector=(0,u.createSelector)((0,o.selectPaginatedEntities)({entitiesName:"books",paginationName:"books",paginationKey:"default"}),function(e){return e}),t.usersSelector=(0,o.selectPaginatedEntities)({entitiesName:"users",paginationName:"users",paginationKey:"default"});t.common=a},161:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.selectPaginatedEntities=t.paginationLinkSelector=void 0;var o=n(162),u=n(18),a=r(u),i=function(e){return function(t){return t.entities[e]||{}}},c=function(e){var t=arguments.length<=1||void 0===arguments[1]?"default":arguments[1];return function(n){return a["default"].get(n.pagination,e+"."+t+".ids",[])}},l=(t.paginationLinkSelector=function(e){var t=arguments.length<=1||void 0===arguments[1]?"default":arguments[1];return function(n){return a["default"].pick(a["default"].get(n.pagination,e+"."+t,{}),["next","last"])}},function(e,t){return function(n){return a["default"].get(n.pagination,[e,"query",t,"ids"],[])}});t.selectPaginatedEntities=function(e){var t=e.entitiesName,n=e.paginationName,r=e.paginationKey,u=e.paginationQuery,a=void 0;return a=u?l(n,u):c(n,r),(0,o.createSelector)(i(t),a,function(e,t){return t.map(function(t){return e[t]})})}},162:function(e,t){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t){return e===t}function o(e){var t=arguments.length<=1||void 0===arguments[1]?r:arguments[1],n=null,o=null;return function(){for(var r=arguments.length,u=Array(r),a=0;r>a;a++)u[a]=arguments[a];return null!==n&&n.length===u.length&&u.every(function(e,r){return t(e,n[r])})?o:(o=e.apply(void 0,u),n=u,o)}}function u(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every(function(e){return"function"==typeof e})){var n=t.map(function(e){return typeof e}).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, "+("instead received the following types: ["+n+"]"))}return t}function a(e){for(var t=arguments.length,r=Array(t>1?t-1:0),o=1;t>o;o++)r[o-1]=arguments[o];return function(){for(var t=arguments.length,o=Array(t),a=0;t>a;a++)o[a]=arguments[a];var i=0,c=o.pop(),l=u(o),f=e.apply(void 0,[function(){return i++,c.apply(void 0,arguments)}].concat(r)),s=function(e,t){for(var r=arguments.length,o=Array(r>2?r-2:0),u=2;r>u;u++)o[u-2]=arguments[u];var a=l.map(function(n){return n.apply(void 0,[e,t].concat(o))});return f.apply(void 0,n(a))};return s.resultFunc=c,s.recomputations=function(){return i},s.resetRecomputations=function(){return i=0},s}}function i(){return a(o).apply(void 0,arguments)}function c(e){var t=arguments.length<=1||void 0===arguments[1]?i:arguments[1];if("object"!=typeof e)throw new Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);var n=Object.keys(e);return t(n.map(function(t){return e[t]}),function(){for(var e=arguments.length,t=Array(e),r=0;e>r;r++)t[r]=arguments[r];return t.reduce(function(e,t,r){return e[n[r]]=t,e},{})})}t.__esModule=!0,t.defaultMemoize=o,t.createSelectorCreator=a,t.createSelector=i,t.createStructuredSelector=c},225:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function c(e,t){return{bookListNewest:_.booksSelector(e),routing:e.routing.locationBeforeTransitions}}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},s=n(3),p=o(s),d=n(7),y=n(134),m=o(y),b=n(226),h=o(b),g=n(119),v=o(g),k=n(160),_=r(k),O=n(8),j=n(82),w=o(j),S=n(229),E=o(S),P=n(234),M=r(P),N=function(e,t,n,r){var o,u=arguments.length,a=3>u?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":f(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(a=(3>u?o(a):u>3?o(t,n,a):o(t,n))||a);return u>3&&a&&Object.defineProperty(t,n,a),a},C=n(236),R=function(e){function t(e){return u(this,t),a(this,Object.getPrototypeOf(t).call(this,e))}return i(t,e),l(t,[{key:"deleteBook",value:function(e,t){var n=this;this.props.openConfirmModal({title:"确认删除",content:"将删除《"+t+"》",onConfirm:function(){v["default"].deleteBook(e).then(function(e){n.props.closeConfirmModal(),n.props.sendNotification("删除成功！"),n.props.fetchBooks({merge:!1})})}})}},{key:"loadBooks",value:function(){var e=arguments.length<=0||void 0===arguments[0]?this.props:arguments[0];this.props.fetchBooks({page:e.routing.query.page||"1",merge:!1})}},{key:"componentWillReceiveProps",value:function(e,t){var n=this;M.onRoutingChange(function(t){document.body.scrollTop=0,n.loadBooks(e)})(e,this.props)}},{key:"componentDidMount",value:function(){this.loadBooks()}},{key:"render",value:function(){var e=this,t=this.props.bookListNewest?this.props.bookListNewest:null;return p["default"].createElement(m["default"],{title:"书籍管理",bodyClass:"manage-books"},p["default"].createElement(E["default"],{pagination:{name:"books"}},p["default"].createElement(h["default"],{data:t.map(function(e){return Object.assign({},e,{authors:e.authors?e.authors.map(function(e){return e.name}).join(", "):"未知作者"})}),header:[{key:"id",name:"ID"},{key:"title",name:"书名"},{key:"dateCreated",name:"创建日期"},{key:"authors",name:"作者"}],actions:[{name:"删除",fn:function(t){e.deleteBook(t.id,t.title)}}]})))}}],[{key:"fetchData",value:function(e){var t=e.store,n=e.query;return t.dispatch((0,O.fetchBooks)({page:n.page}))}}]),t}(s.Component);R=N([(0,w["default"])(C,{allowMultiple:!0})],R),t["default"]=(0,d.connect)(c,{fetchBooks:O.fetchBooks,sendNotification:O.sendNotification,openConfirmModal:O.openConfirmModal,closeConfirmModal:O.closeConfirmModal})(R)},226:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(227),u=r(o);t["default"]=u["default"]},227:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},l=n(3),f=r(l),s=n(18),p=r(s),d=n(80),y=r(d),m=n(82),b=r(m),h=function(e,t,n,r){var o,u=arguments.length,a=3>u?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(a=(3>u?o(a):u>3?o(t,n,a):o(t,n))||a);return u>3&&a&&Object.defineProperty(t,n,a),a},g=n(228),v=function(e){function t(e){return o(this,t),u(this,Object.getPrototypeOf(t).call(this,e))}return a(t,e),i(t,[{key:"render",value:function(){var e=this.props,t=e.header,n=e.data,r=(e.enableTooltip,e.style),o=e.actions,u=e.operationLabel;o=o||[],t||(t=0!==n.length&&p["default"].keys(n[0]).map(function(e){return{key:e,name:e}})||[]);var a=(0,y["default"])({"info-table":!0,"info-table--no-header":!t});return f["default"].createElement("table",{styleName:a,style:r||{}},f["default"].createElement("tbody",null,t?f["default"].createElement("tr",null,t.map(function(e,t){return f["default"].createElement("th",{key:t},e.name)}),0!==o.length&&f["default"].createElement("th",null,u||"操作")):f["default"].createElement("tr",null),n.map(function(e,r){return f["default"].createElement("tr",{key:r},p["default"].map(t,function(t,n){return f["default"].createElement("td",{key:n},e[t.key]&&e[t.key].toString())}),0!==o.length&&f["default"].createElement("td",{styleName:"actions"},0!==o.length&&o.map(function(e,t){return f["default"].createElement("div",{styleName:"action",key:t,onClick:function(t){e.fn(n[r])}},e.name)})))})))}}]),t}(l.Component);v=h([(0,b["default"])(g)],v),t["default"]=v},228:function(e,t){e.exports={"info-table--no-header":"info-table--no-header_2v3xx","info-table":"info-table_B7JYU",actions:"actions_pR_Nz",action:"action_3DLKy"}},229:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(230),u=r(o);t["default"]=u["default"]},230:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(3),f=o(l),s=n(231),p=o(s),d=n(7),y=n(160),m=r(y),b=function(e){function t(e){return u(this,t),a(this,Object.getPrototypeOf(t).call(this,e))}return i(t,e),c(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.routing,r=e.paginationLinks,o=r.next,u=r.last,a=u&&u.page||1,i=o?o.page-1:a;return f["default"].createElement("div",null,t,f["default"].createElement(p["default"],{all:a,current:i,url:{pathname:n.pathname,query:n.query||{}}}))}}]),t}(l.Component),h=function(e,t){var n=t.pagination,r=n.name,o=n.key;return{routing:e.routing.locationBeforeTransitions||{},paginationLinks:m.paginationLinkSelector(r,o)(e)}};t["default"]=(0,d.connect)(h,{})(b)},231:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(232),u=r(o);t["default"]=u["default"]},232:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},l=n(3),f=r(l),s=n(4),p=n(18),d=r(p),y=n(16),m=r(y),b=n(82),h=r(b),g=function(e,t,n,r){var o,u=arguments.length,a=3>u?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(a=(3>u?o(a):u>3?o(t,n,a):o(t,n))||a);return u>3&&a&&Object.defineProperty(t,n,a),a},v=n(233),k=function(e){function t(e){return o(this,t),u(this,Object.getPrototypeOf(t).call(this,e))}return a(t,e),i(t,[{key:"parseUrl",value:function(e,t,n){var r=this.props.urlStyle?this.props.urlStyle:"query";if("query"===r){var o=m["default"].parseFormData(d["default"].omit(t,["page"]));return""+e+(o?"?"+o+"&":"?")+"page="+n}var u=m["default"].parseFormData(t);return e+"/page/"+n+"?"+u}},{key:"render",value:function(){var e=this,t=this.props.range?this.props.range:3,n=this.props.all-1,r=parseInt(this.props.current)-1,o=r-t,u=r+t,a=!1,i=!1,l=[],p=this.props.url;if("number"!=typeof this.props.all)throw new Error("all 必须为 number 类型！");"number"!=typeof r&&console.error("页码必须为数字，却得到 "+("undefined"==typeof r?"undefined":c(r))),(r>u||0>r)&&console.error("页码不能大于所有页面数目或小于 1！"),2*t+1>=n?(u=n,o=0):(u>=n?(u=n,o=n-(2*t+1)):i=!0,0>=o?(o=0,u=2*t+1):a=!0);for(var d=o;u>=d;d++)l=l.concat([{pageNum:d+1,isCurrent:d===r}]);if(a){var y=[{pageNum:1},{isSpread:!0}];l=y.concat(l)}if(i){var m=[{isSpread:!0},{pageNum:n+1}];l=l.concat(m)}return 1!==this.props.all&&f["default"].createElement("div",{styleName:"paginator"},f["default"].createElement("ul",null,l.map(function(t,n){return t.isCurrent?f["default"].createElement("li",{key:n,styleName:"page-num--current"},t.pageNum):t.isSpread?f["default"].createElement("li",{key:n,styleName:"page-spread"},"..."):f["default"].createElement("li",{key:n,styleName:"page-num"},f["default"].createElement(s.Link,{to:e.parseUrl(p.pathname,p.query,t.pageNum)},t.pageNum))})))}}]),t}(l.Component);k=g([(0,h["default"])(v)],k),t["default"]=k},233:function(e,t){e.exports={"page-spread":"page-spread_2INHU","page-num":"page-num_2oPQU","page-num--current":"page-num--current_1Y2mE",paginator:"paginator_1RHAm"}},234:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(235);Object.keys(r).forEach(function(e){"default"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})})},235:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.onRoutingChange=void 0;var o=n(18),u=r(o);t.onRoutingChange=function(e){return function(t,n){if(!n.routing)return console.error("routing 需要现在组件 props 里面声明！"),!1;var r=!u["default"].isEqual(t.routing,n.routing);r&&e(t.routing)}}},236:function(e,t){}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vMTIuMTIuanMiLCJ3ZWJwYWNrOi8vL3NyYy9pc29tb3JwaGljL3N0b3JlL3NlbGVjdG9ycy9pbmRleC50cz83MjZiKiIsIndlYnBhY2s6Ly8vc3JjL2lzb21vcnBoaWMvc3RvcmUvc2VsZWN0b3JzL2NvbW1vbi50cz8zMzM2KiIsIndlYnBhY2s6Ly8vLi9+L3Jlc2VsZWN0L2xpYi9pbmRleC5qcz82NDZiKiIsIndlYnBhY2s6Ly8vc3JjL2lzb21vcnBoaWMvcm91dGVzL01hbmFnZUJvb2tzL01hbmFnZUJvb2tzLnRzeCIsIndlYnBhY2s6Ly8vc3JjL2lzb21vcnBoaWMvY29tcG9uZW50cy9JbmZvVGFibGUvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vL3NyYy9pc29tb3JwaGljL2NvbXBvbmVudHMvSW5mb1RhYmxlL0luZm9UYWJsZS50c3giLCJ3ZWJwYWNrOi8vLy4vc3JjL2lzb21vcnBoaWMvY29tcG9uZW50cy9JbmZvVGFibGUvSW5mb1RhYmxlLnNjc3MiLCJ3ZWJwYWNrOi8vL3NyYy9pc29tb3JwaGljL2NvbXBvbmVudHMvQ29udGVudFBhZ2UvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vL3NyYy9pc29tb3JwaGljL2NvbXBvbmVudHMvQ29udGVudFBhZ2UvQ29udGVudFBhZ2UudHN4Iiwid2VicGFjazovLy9zcmMvaXNvbW9ycGhpYy9lbGVtZW50cy9QYWdpbmF0b3IvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vL3NyYy9pc29tb3JwaGljL2VsZW1lbnRzL1BhZ2luYXRvci9QYWdpbmF0b3IudHN4Iiwid2VicGFjazovLy8uL3NyYy9pc29tb3JwaGljL2VsZW1lbnRzL1BhZ2luYXRvci9QYWdpbmF0b3Iuc2NzcyIsIndlYnBhY2s6Ly8vc3JjL2lzb21vcnBoaWMvaGVscGVycy9pbmRleC50cyIsIndlYnBhY2s6Ly8vc3JjL2lzb21vcnBoaWMvaGVscGVycy9saWZlY2lyY2xlLnRzIl0sIm5hbWVzIjpbIndlYnBhY2tKc29ucCIsMTYwLCJtb2R1bGUiLCJleHBvcnRzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwib2JqIiwiX19lc01vZHVsZSIsIm5ld09iaiIsImtleSIsIk9iamVjdCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImRlZmluZVByb3BlcnR5IiwidmFsdWUiLCJjb21tb24iLCJ1c2Vyc1NlbGVjdG9yIiwiYm9va3NTZWxlY3RvciIsImJvb2tzU2VhcmNoQXNPcHRpb25zIiwiYXV0aG9yc0FzT3B0aW9ucyIsImRvdWJhbkJvb2tzQXNPcHRpb25zIiwic2VhcmNoQm9va3NTZWxlY3RvciIsInF1ZXJ5QXV0aG9yc1NlbGVjdG9yIiwicXVlcnlEb3ViYW5Cb29rc1NlbGVjdG9yIiwidW5kZWZpbmVkIiwiX2NvbW1vbiIsImtleXMiLCJmb3JFYWNoIiwiZW51bWVyYWJsZSIsImdldCIsIl9yZXNlbGVjdCIsInF1ZXJ5IiwiY3JlYXRlU2VsZWN0b3IiLCJzZWxlY3RQYWdpbmF0ZWRFbnRpdGllcyIsImVudGl0aWVzTmFtZSIsInBhZ2luYXRpb25OYW1lIiwicGFnaW5hdGlvblF1ZXJ5IiwiYm9va3MiLCJtYXAiLCJib29rIiwibmFtZSIsInRpdGxlIiwiaWQiLCJhZGRpdGlvbmFsIiwiZGVzY3JpcHRpb24iLCJzdW1tYXJ5IiwiY292ZXIiLCJpbWFnZXMiLCJsYXJnZSIsImF1dGhvciIsImpvaW4iLCJpdGVtcyIsIml0ZW0iLCJwYWdpbmF0aW9uS2V5IiwxNjEsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJkZWZhdWx0IiwicGFnaW5hdGlvbkxpbmtTZWxlY3RvciIsIl9sb2Rhc2giLCJfbG9kYXNoMiIsImVudGl0aWVzU2VsZWN0b3IiLCJzdGF0ZSIsImVudGl0aWVzIiwicGFnaW5hdGlvblNlbGVjdG9yIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwicGFnaW5hdGlvbiIsInF1ZXJ5UGFnaW5hdGlvblNlbGVjdG9yIiwicGljayIsIm9wdGlvbnMiLCJwYWdpU2VsZWN0b3IiLCJpZHMiLDE2MiwiX3RvQ29uc3VtYWJsZUFycmF5IiwiYXJyIiwiQXJyYXkiLCJpc0FycmF5IiwiaSIsImFycjIiLCJmcm9tIiwiZGVmYXVsdEVxdWFsaXR5Q2hlY2siLCJhIiwiYiIsImRlZmF1bHRNZW1vaXplIiwiZnVuYyIsImVxdWFsaXR5Q2hlY2siLCJsYXN0QXJncyIsImxhc3RSZXN1bHQiLCJfbGVuIiwiYXJncyIsIl9rZXkiLCJldmVyeSIsImluZGV4IiwiYXBwbHkiLCJnZXREZXBlbmRlbmNpZXMiLCJmdW5jcyIsImRlcGVuZGVuY2llcyIsImRlcCIsImRlcGVuZGVuY3lUeXBlcyIsIkVycm9yIiwiY3JlYXRlU2VsZWN0b3JDcmVhdG9yIiwibWVtb2l6ZSIsIl9sZW4yIiwibWVtb2l6ZU9wdGlvbnMiLCJfa2V5MiIsIl9sZW4zIiwiX2tleTMiLCJyZWNvbXB1dGF0aW9ucyIsInJlc3VsdEZ1bmMiLCJwb3AiLCJtZW1vaXplZFJlc3VsdEZ1bmMiLCJjb25jYXQiLCJzZWxlY3RvciIsInByb3BzIiwiX2xlbjQiLCJfa2V5NCIsInBhcmFtcyIsImRlcGVuZGVuY3kiLCJyZXNldFJlY29tcHV0YXRpb25zIiwiY3JlYXRlU3RydWN0dXJlZFNlbGVjdG9yIiwic2VsZWN0b3JzIiwic2VsZWN0b3JDcmVhdG9yIiwib2JqZWN0S2V5cyIsIl9sZW41IiwidmFsdWVzIiwiX2tleTUiLCJyZWR1Y2UiLCJjb21wb3NpdGlvbiIsMjI1LCJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwiX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iLCJzZWxmIiwiUmVmZXJlbmNlRXJyb3IiLCJfaW5oZXJpdHMiLCJzdWJDbGFzcyIsInN1cGVyQ2xhc3MiLCJjcmVhdGUiLCJjb25zdHJ1Y3RvciIsIndyaXRhYmxlIiwiY29uZmlndXJhYmxlIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJtYXBTdGF0ZVRvUHJvcHMiLCJvd25Qcm9wcyIsImJvb2tMaXN0TmV3ZXN0Iiwicm91dGluZyIsImxvY2F0aW9uQmVmb3JlVHJhbnNpdGlvbnMiLCJfY3JlYXRlQ2xhc3MiLCJkZWZpbmVQcm9wZXJ0aWVzIiwidGFyZ2V0IiwiZGVzY3JpcHRvciIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsIl90eXBlb2YiLCJTeW1ib2wiLCJpdGVyYXRvciIsIl9yZWFjdCIsIl9yZWFjdDIiLCJfcmVhY3RSZWR1eCIsIl9Eb2NDb250YWluZXIiLCJfRG9jQ29udGFpbmVyMiIsIl9JbmZvVGFibGUiLCJfSW5mb1RhYmxlMiIsIl9hcGlzIiwiX2FwaXMyIiwiX3NlbGVjdG9ycyIsIl9hY3Rpb25zIiwiX3JlYWN0Q3NzTW9kdWxlcyIsIl9yZWFjdENzc01vZHVsZXMyIiwiX0NvbnRlbnRQYWdlIiwiX0NvbnRlbnRQYWdlMiIsIl9oZWxwZXJzIiwiaGVscGVycyIsIl9fZGVjb3JhdGUiLCJkZWNvcmF0b3JzIiwiZGVzYyIsImQiLCJjIiwiciIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsIlJlZmxlY3QiLCJkZWNvcmF0ZSIsInN0eWxlcyIsIk1hbmFnZUJvb2tzIiwiX0NvbXBvbmVudCIsInRoaXMiLCJnZXRQcm90b3R5cGVPZiIsImJvb2tOYW1lIiwiX3RoaXMyIiwib3BlbkNvbmZpcm1Nb2RhbCIsImNvbnRlbnQiLCJvbkNvbmZpcm0iLCJkZWxldGVCb29rIiwidGhlbiIsInJlcyIsImNsb3NlQ29uZmlybU1vZGFsIiwic2VuZE5vdGlmaWNhdGlvbiIsImZldGNoQm9va3MiLCJtZXJnZSIsInBhZ2UiLCJuZXh0UHJvcHMiLCJuZXh0U3RhdGUiLCJfdGhpczMiLCJvblJvdXRpbmdDaGFuZ2UiLCJkb2N1bWVudCIsImJvZHkiLCJzY3JvbGxUb3AiLCJsb2FkQm9va3MiLCJfdGhpczQiLCJjcmVhdGVFbGVtZW50IiwiYm9keUNsYXNzIiwiZGF0YSIsImFzc2lnbiIsImF1dGhvcnMiLCJoZWFkZXIiLCJhY3Rpb25zIiwiZm4iLCJyb3ciLCJfcmVmIiwic3RvcmUiLCJkaXNwYXRjaCIsIkNvbXBvbmVudCIsImFsbG93TXVsdGlwbGUiLCJjb25uZWN0IiwyMjYsMjI3LCJfY2xhc3NuYW1lcyIsIl9jbGFzc25hbWVzMiIsIkluZm9UYWJsZSIsIl9wcm9wcyIsInN0eWxlIiwiZW5hYmxlVG9vbHRpcCIsIm9wZXJhdGlvbkxhYmVsIiwiY2xhc3NOYW1lIiwiaW5mby10YWJsZSIsImluZm8tdGFibGUtLW5vLWhlYWRlciIsInN0eWxlTmFtZSIsInRvU3RyaW5nIiwiYWN0aW9uIiwiaW5kZXgyIiwib25DbGljayIsImUiLDIyOCwyMjksMjMwLCJfUGFnaW5hdG9yIiwiX1BhZ2luYXRvcjIiLCJDb250ZW50UGFnZSIsImNoaWxkcmVuIiwiX3Byb3BzJHBhZ2luYXRpb25MaW5rIiwicGFnaW5hdGlvbkxpbmtzIiwibmV4dCIsImxhc3QiLCJhbGwiLCJjdXJyZW50IiwidXJsIiwicGF0aG5hbWUiLCJfb3duUHJvcHMkcGFnaW5hdGlvbiIsMjMxLDIzMiwiX3JlYWN0Um91dGVyIiwiX3V0aWxzIiwiX3V0aWxzMiIsIlBhZ2luYXRvciIsInBhZ2VOdW0iLCJ1cmxTdHlsZSIsIl9xdWVyeVBhcnQiLCJwYXJzZUZvcm1EYXRhIiwib21pdCIsInF1ZXJ5UGFydCIsInJhbmdlIiwidG90YWxSYW5nZUVuZEluZGV4IiwiY3VycmVudEluZGV4IiwicGFyc2VJbnQiLCJyYW5nZVN0YXJ0SW5kZXgiLCJyYW5nZUVuZEluZGV4IiwibGVmdFNwcmVhZCIsInJpZ2h0U3ByZWFkIiwicGFnZXMiLCJjb25zb2xlIiwiZXJyb3IiLCJpc0N1cnJlbnQiLCJzcGQiLCJpc1NwcmVhZCIsIl9zcGQiLCJMaW5rIiwidG8iLCJwYXJzZVVybCIsMjMzLCJwYWdlLXNwcmVhZCIsInBhZ2UtbnVtIiwicGFnZS1udW0tLWN1cnJlbnQiLCJwYWdpbmF0b3IiLDIzNCwiX2xpZmVjaXJjbGUiLDIzNSwiY3VycmVudFByb3BzIiwiaGFzUGF0aFBhcmFtQ2hhbmdlZCIsImlzRXF1YWwiLDIzNl0sIm1hcHBpbmdzIjoiQUFBQUEsY0FBYyxLQUVS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bnRlbnQiOlsid2VicGFja0pzb25wKFsxMl0se1xuXG4vKioqLyAxNjA6XG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLmNvbW1vbiA9IGV4cG9ydHMudXNlcnNTZWxlY3RvciA9IGV4cG9ydHMuYm9va3NTZWxlY3RvciA9IGV4cG9ydHMuYm9va3NTZWFyY2hBc09wdGlvbnMgPSBleHBvcnRzLmF1dGhvcnNBc09wdGlvbnMgPSBleHBvcnRzLmRvdWJhbkJvb2tzQXNPcHRpb25zID0gZXhwb3J0cy5zZWFyY2hCb29rc1NlbGVjdG9yID0gZXhwb3J0cy5xdWVyeUF1dGhvcnNTZWxlY3RvciA9IGV4cG9ydHMucXVlcnlEb3ViYW5Cb29rc1NlbGVjdG9yID0gdW5kZWZpbmVkO1xuXHRcblx0dmFyIF9jb21tb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2MSk7XG5cdFxuXHRPYmplY3Qua2V5cyhfY29tbW9uKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgIGlmIChrZXkgPT09IFwiZGVmYXVsdFwiKSByZXR1cm47XG5cdCAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7XG5cdCAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcblx0ICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIF9jb21tb25ba2V5XTtcblx0ICAgICAgICB9XG5cdCAgICB9KTtcblx0fSk7XG5cdFxuXHR2YXIgX3Jlc2VsZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNjIpO1xuXHRcblx0dmFyIGNvbW1vbiA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKF9jb21tb24pO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7IGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsgcmV0dXJuIG9iajsgfSBlbHNlIHsgdmFyIG5ld09iaiA9IHt9OyBpZiAob2JqICE9IG51bGwpIHsgZm9yICh2YXIga2V5IGluIG9iaikgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgbmV3T2JqW2tleV0gPSBvYmpba2V5XTsgfSB9IG5ld09iai5kZWZhdWx0ID0gb2JqOyByZXR1cm4gbmV3T2JqOyB9IH1cblx0XG5cdHZhciBxdWVyeURvdWJhbkJvb2tzU2VsZWN0b3IgPSBleHBvcnRzLnF1ZXJ5RG91YmFuQm9va3NTZWxlY3RvciA9IGZ1bmN0aW9uIHF1ZXJ5RG91YmFuQm9va3NTZWxlY3RvcihxdWVyeSkge1xuXHQgICAgcmV0dXJuICgwLCBfcmVzZWxlY3QuY3JlYXRlU2VsZWN0b3IpKCgwLCBfY29tbW9uLnNlbGVjdFBhZ2luYXRlZEVudGl0aWVzKSh7XG5cdCAgICAgICAgZW50aXRpZXNOYW1lOiAnZG91YmFuQm9va3MnLFxuXHQgICAgICAgIHBhZ2luYXRpb25OYW1lOiAnZG91YmFuQm9va3MnLFxuXHQgICAgICAgIHBhZ2luYXRpb25RdWVyeTogcXVlcnlcblx0ICAgIH0pLCBmdW5jdGlvbiAoYm9va3MpIHtcblx0ICAgICAgICByZXR1cm4gYm9va3M7XG5cdCAgICB9KTtcblx0fTtcblx0dmFyIHF1ZXJ5QXV0aG9yc1NlbGVjdG9yID0gZXhwb3J0cy5xdWVyeUF1dGhvcnNTZWxlY3RvciA9IGZ1bmN0aW9uIHF1ZXJ5QXV0aG9yc1NlbGVjdG9yKHF1ZXJ5KSB7XG5cdCAgICByZXR1cm4gKDAsIF9jb21tb24uc2VsZWN0UGFnaW5hdGVkRW50aXRpZXMpKHtcblx0ICAgICAgICBlbnRpdGllc05hbWU6ICdhdXRob3JzJyxcblx0ICAgICAgICBwYWdpbmF0aW9uTmFtZTogJ2F1dGhvcnMnLFxuXHQgICAgICAgIHBhZ2luYXRpb25RdWVyeTogcXVlcnlcblx0ICAgIH0pO1xuXHR9O1xuXHR2YXIgc2VhcmNoQm9va3NTZWxlY3RvciA9IGV4cG9ydHMuc2VhcmNoQm9va3NTZWxlY3RvciA9IGZ1bmN0aW9uIHNlYXJjaEJvb2tzU2VsZWN0b3IocXVlcnkpIHtcblx0ICAgIHJldHVybiAoMCwgX2NvbW1vbi5zZWxlY3RQYWdpbmF0ZWRFbnRpdGllcykoe1xuXHQgICAgICAgIGVudGl0aWVzTmFtZTogJ2Jvb2tzJyxcblx0ICAgICAgICBwYWdpbmF0aW9uTmFtZTogJ2Jvb2tzJyxcblx0ICAgICAgICBwYWdpbmF0aW9uUXVlcnk6IHF1ZXJ5XG5cdCAgICB9KTtcblx0fTtcblx0dmFyIGRvdWJhbkJvb2tzQXNPcHRpb25zID0gZXhwb3J0cy5kb3ViYW5Cb29rc0FzT3B0aW9ucyA9IGZ1bmN0aW9uIGRvdWJhbkJvb2tzQXNPcHRpb25zKHF1ZXJ5KSB7XG5cdCAgICByZXR1cm4gKDAsIF9yZXNlbGVjdC5jcmVhdGVTZWxlY3RvcikocXVlcnlEb3ViYW5Cb29rc1NlbGVjdG9yKHF1ZXJ5KSwgZnVuY3Rpb24gKGJvb2tzKSB7XG5cdCAgICAgICAgcmV0dXJuIGJvb2tzLm1hcChmdW5jdGlvbiAoYm9vaykge1xuXHQgICAgICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgICAgICAgbmFtZTogYm9vay50aXRsZSxcblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBib29rLmlkLFxuXHQgICAgICAgICAgICAgICAgYWRkaXRpb25hbDoge1xuXHQgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBib29rLnN1bW1hcnksXG5cdCAgICAgICAgICAgICAgICAgICAgY292ZXI6IGJvb2suaW1hZ2VzLmxhcmdlLFxuXHQgICAgICAgICAgICAgICAgICAgIGF1dGhvcjogYm9vay5hdXRob3Iuam9pbignLCAnKVxuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9O1xuXHQgICAgICAgIH0pO1xuXHQgICAgfSk7XG5cdH07XG5cdHZhciBhdXRob3JzQXNPcHRpb25zID0gZXhwb3J0cy5hdXRob3JzQXNPcHRpb25zID0gZnVuY3Rpb24gYXV0aG9yc0FzT3B0aW9ucyhxdWVyeSkge1xuXHQgICAgcmV0dXJuICgwLCBfcmVzZWxlY3QuY3JlYXRlU2VsZWN0b3IpKHF1ZXJ5QXV0aG9yc1NlbGVjdG9yKHF1ZXJ5KSwgZnVuY3Rpb24gKGl0ZW1zKSB7XG5cdCAgICAgICAgcmV0dXJuIGl0ZW1zLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgICAgICAgbmFtZTogaXRlbS5uYW1lLFxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGl0ZW0uaWRcblx0ICAgICAgICAgICAgfTtcblx0ICAgICAgICB9KTtcblx0ICAgIH0pO1xuXHR9O1xuXHR2YXIgYm9va3NTZWFyY2hBc09wdGlvbnMgPSBleHBvcnRzLmJvb2tzU2VhcmNoQXNPcHRpb25zID0gZnVuY3Rpb24gYm9va3NTZWFyY2hBc09wdGlvbnMocXVlcnkpIHtcblx0ICAgIHJldHVybiAoMCwgX3Jlc2VsZWN0LmNyZWF0ZVNlbGVjdG9yKShzZWFyY2hCb29rc1NlbGVjdG9yKHF1ZXJ5KSwgZnVuY3Rpb24gKGl0ZW1zKSB7XG5cdCAgICAgICAgcmV0dXJuIGl0ZW1zLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgICAgICAgbmFtZTogaXRlbS50aXRsZSxcblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBpdGVtLmlkXG5cdCAgICAgICAgICAgIH07XG5cdCAgICAgICAgfSk7XG5cdCAgICB9KTtcblx0fTtcblx0dmFyIGJvb2tzU2VsZWN0b3IgPSBleHBvcnRzLmJvb2tzU2VsZWN0b3IgPSAoMCwgX3Jlc2VsZWN0LmNyZWF0ZVNlbGVjdG9yKSgoMCwgX2NvbW1vbi5zZWxlY3RQYWdpbmF0ZWRFbnRpdGllcykoe1xuXHQgICAgZW50aXRpZXNOYW1lOiAnYm9va3MnLFxuXHQgICAgcGFnaW5hdGlvbk5hbWU6ICdib29rcycsXG5cdCAgICBwYWdpbmF0aW9uS2V5OiAnZGVmYXVsdCdcblx0fSksIGZ1bmN0aW9uIChib29rcykge1xuXHQgICAgcmV0dXJuIGJvb2tzO1xuXHR9KTtcblx0dmFyIHVzZXJzU2VsZWN0b3IgPSBleHBvcnRzLnVzZXJzU2VsZWN0b3IgPSAoMCwgX2NvbW1vbi5zZWxlY3RQYWdpbmF0ZWRFbnRpdGllcykoe1xuXHQgICAgZW50aXRpZXNOYW1lOiAndXNlcnMnLFxuXHQgICAgcGFnaW5hdGlvbk5hbWU6ICd1c2VycycsXG5cdCAgICBwYWdpbmF0aW9uS2V5OiAnZGVmYXVsdCdcblx0fSk7XG5cdGV4cG9ydHMuY29tbW9uID0gY29tbW9uO1xuXG4vKioqLyB9LFxuXG4vKioqLyAxNjE6XG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLnNlbGVjdFBhZ2luYXRlZEVudGl0aWVzID0gZXhwb3J0cy5wYWdpbmF0aW9uTGlua1NlbGVjdG9yID0gdW5kZWZpbmVkO1xuXHRcblx0dmFyIF9yZXNlbGVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTYyKTtcblx0XG5cdHZhciBfbG9kYXNoID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCk7XG5cdFxuXHR2YXIgX2xvZGFzaDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9sb2Rhc2gpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdHZhciBlbnRpdGllc1NlbGVjdG9yID0gZnVuY3Rpb24gZW50aXRpZXNTZWxlY3RvcihuYW1lKSB7XG5cdCAgICByZXR1cm4gZnVuY3Rpb24gKHN0YXRlKSB7XG5cdCAgICAgICAgcmV0dXJuIHN0YXRlLmVudGl0aWVzW25hbWVdIHx8IHt9O1xuXHQgICAgfTtcblx0fTtcblx0dmFyIHBhZ2luYXRpb25TZWxlY3RvciA9IGZ1bmN0aW9uIHBhZ2luYXRpb25TZWxlY3RvcihuYW1lKSB7XG5cdCAgICB2YXIga2V5ID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8gJ2RlZmF1bHQnIDogYXJndW1lbnRzWzFdO1xuXHQgICAgcmV0dXJuIGZ1bmN0aW9uIChzdGF0ZSkge1xuXHQgICAgICAgIHJldHVybiBfbG9kYXNoMi5kZWZhdWx0LmdldChzdGF0ZS5wYWdpbmF0aW9uLCBuYW1lICsgJy4nICsga2V5ICsgJy5pZHMnLCBbXSk7XG5cdCAgICB9O1xuXHR9O1xuXHR2YXIgcGFnaW5hdGlvbkxpbmtTZWxlY3RvciA9IGV4cG9ydHMucGFnaW5hdGlvbkxpbmtTZWxlY3RvciA9IGZ1bmN0aW9uIHBhZ2luYXRpb25MaW5rU2VsZWN0b3IobmFtZSkge1xuXHQgICAgdmFyIGtleSA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMSB8fCBhcmd1bWVudHNbMV0gPT09IHVuZGVmaW5lZCA/ICdkZWZhdWx0JyA6IGFyZ3VtZW50c1sxXTtcblx0ICAgIHJldHVybiBmdW5jdGlvbiAoc3RhdGUpIHtcblx0ICAgICAgICByZXR1cm4gX2xvZGFzaDIuZGVmYXVsdC5waWNrKF9sb2Rhc2gyLmRlZmF1bHQuZ2V0KHN0YXRlLnBhZ2luYXRpb24sIG5hbWUgKyAnLicgKyBrZXksIHt9KSwgWyduZXh0JywgJ2xhc3QnXSk7XG5cdCAgICB9O1xuXHR9O1xuXHR2YXIgcXVlcnlQYWdpbmF0aW9uU2VsZWN0b3IgPSBmdW5jdGlvbiBxdWVyeVBhZ2luYXRpb25TZWxlY3RvcihuYW1lLCBxdWVyeSkge1xuXHQgICAgcmV0dXJuIGZ1bmN0aW9uIChzdGF0ZSkge1xuXHQgICAgICAgIHJldHVybiBfbG9kYXNoMi5kZWZhdWx0LmdldChzdGF0ZS5wYWdpbmF0aW9uLCBbbmFtZSwgJ3F1ZXJ5JywgcXVlcnksICdpZHMnXSwgW10pO1xuXHQgICAgfTtcblx0fTtcblx0dmFyIHNlbGVjdFBhZ2luYXRlZEVudGl0aWVzID0gZXhwb3J0cy5zZWxlY3RQYWdpbmF0ZWRFbnRpdGllcyA9IGZ1bmN0aW9uIHNlbGVjdFBhZ2luYXRlZEVudGl0aWVzKG9wdGlvbnMpIHtcblx0ICAgIHZhciBlbnRpdGllc05hbWUgPSBvcHRpb25zLmVudGl0aWVzTmFtZTtcblx0ICAgIHZhciBwYWdpbmF0aW9uTmFtZSA9IG9wdGlvbnMucGFnaW5hdGlvbk5hbWU7XG5cdCAgICB2YXIgcGFnaW5hdGlvbktleSA9IG9wdGlvbnMucGFnaW5hdGlvbktleTtcblx0ICAgIHZhciBwYWdpbmF0aW9uUXVlcnkgPSBvcHRpb25zLnBhZ2luYXRpb25RdWVyeTtcblx0XG5cdCAgICB2YXIgcGFnaVNlbGVjdG9yID0gdm9pZCAwO1xuXHQgICAgaWYgKHBhZ2luYXRpb25RdWVyeSkge1xuXHQgICAgICAgIHBhZ2lTZWxlY3RvciA9IHF1ZXJ5UGFnaW5hdGlvblNlbGVjdG9yKHBhZ2luYXRpb25OYW1lLCBwYWdpbmF0aW9uUXVlcnkpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgICBwYWdpU2VsZWN0b3IgPSBwYWdpbmF0aW9uU2VsZWN0b3IocGFnaW5hdGlvbk5hbWUsIHBhZ2luYXRpb25LZXkpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuICgwLCBfcmVzZWxlY3QuY3JlYXRlU2VsZWN0b3IpKGVudGl0aWVzU2VsZWN0b3IoZW50aXRpZXNOYW1lKSwgcGFnaVNlbGVjdG9yLCBmdW5jdGlvbiAoZW50aXRpZXMsIGlkcykge1xuXHQgICAgICAgIHJldHVybiBpZHMubWFwKGZ1bmN0aW9uIChpZCkge1xuXHQgICAgICAgICAgICByZXR1cm4gZW50aXRpZXNbaWRdO1xuXHQgICAgICAgIH0pO1xuXHQgICAgfSk7XG5cdH07XG5cbi8qKiovIH0sXG5cbi8qKiovIDE2Mjpcbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdGV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5cdGV4cG9ydHMuZGVmYXVsdE1lbW9pemUgPSBkZWZhdWx0TWVtb2l6ZTtcblx0ZXhwb3J0cy5jcmVhdGVTZWxlY3RvckNyZWF0b3IgPSBjcmVhdGVTZWxlY3RvckNyZWF0b3I7XG5cdGV4cG9ydHMuY3JlYXRlU2VsZWN0b3IgPSBjcmVhdGVTZWxlY3Rvcjtcblx0ZXhwb3J0cy5jcmVhdGVTdHJ1Y3R1cmVkU2VsZWN0b3IgPSBjcmVhdGVTdHJ1Y3R1cmVkU2VsZWN0b3I7XG5cdFxuXHRmdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9IGVsc2UgeyByZXR1cm4gQXJyYXkuZnJvbShhcnIpOyB9IH1cblx0XG5cdGZ1bmN0aW9uIGRlZmF1bHRFcXVhbGl0eUNoZWNrKGEsIGIpIHtcblx0ICByZXR1cm4gYSA9PT0gYjtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZGVmYXVsdE1lbW9pemUoZnVuYykge1xuXHQgIHZhciBlcXVhbGl0eUNoZWNrID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8gZGVmYXVsdEVxdWFsaXR5Q2hlY2sgOiBhcmd1bWVudHNbMV07XG5cdFxuXHQgIHZhciBsYXN0QXJncyA9IG51bGw7XG5cdCAgdmFyIGxhc3RSZXN1bHQgPSBudWxsO1xuXHQgIHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdCAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuXHQgICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmIChsYXN0QXJncyAhPT0gbnVsbCAmJiBsYXN0QXJncy5sZW5ndGggPT09IGFyZ3MubGVuZ3RoICYmIGFyZ3MuZXZlcnkoZnVuY3Rpb24gKHZhbHVlLCBpbmRleCkge1xuXHQgICAgICByZXR1cm4gZXF1YWxpdHlDaGVjayh2YWx1ZSwgbGFzdEFyZ3NbaW5kZXhdKTtcblx0ICAgIH0pKSB7XG5cdCAgICAgIHJldHVybiBsYXN0UmVzdWx0O1xuXHQgICAgfVxuXHQgICAgbGFzdFJlc3VsdCA9IGZ1bmMuYXBwbHkodW5kZWZpbmVkLCBhcmdzKTtcblx0ICAgIGxhc3RBcmdzID0gYXJncztcblx0ICAgIHJldHVybiBsYXN0UmVzdWx0O1xuXHQgIH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGdldERlcGVuZGVuY2llcyhmdW5jcykge1xuXHQgIHZhciBkZXBlbmRlbmNpZXMgPSBBcnJheS5pc0FycmF5KGZ1bmNzWzBdKSA/IGZ1bmNzWzBdIDogZnVuY3M7XG5cdFxuXHQgIGlmICghZGVwZW5kZW5jaWVzLmV2ZXJ5KGZ1bmN0aW9uIChkZXApIHtcblx0ICAgIHJldHVybiB0eXBlb2YgZGVwID09PSAnZnVuY3Rpb24nO1xuXHQgIH0pKSB7XG5cdCAgICB2YXIgZGVwZW5kZW5jeVR5cGVzID0gZGVwZW5kZW5jaWVzLm1hcChmdW5jdGlvbiAoZGVwKSB7XG5cdCAgICAgIHJldHVybiB0eXBlb2YgZGVwO1xuXHQgICAgfSkuam9pbignLCAnKTtcblx0ICAgIHRocm93IG5ldyBFcnJvcignU2VsZWN0b3IgY3JlYXRvcnMgZXhwZWN0IGFsbCBpbnB1dC1zZWxlY3RvcnMgdG8gYmUgZnVuY3Rpb25zLCAnICsgKCdpbnN0ZWFkIHJlY2VpdmVkIHRoZSBmb2xsb3dpbmcgdHlwZXM6IFsnICsgZGVwZW5kZW5jeVR5cGVzICsgJ10nKSk7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gZGVwZW5kZW5jaWVzO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVTZWxlY3RvckNyZWF0b3IobWVtb2l6ZSkge1xuXHQgIGZvciAodmFyIF9sZW4yID0gYXJndW1lbnRzLmxlbmd0aCwgbWVtb2l6ZU9wdGlvbnMgPSBBcnJheShfbGVuMiA+IDEgPyBfbGVuMiAtIDEgOiAwKSwgX2tleTIgPSAxOyBfa2V5MiA8IF9sZW4yOyBfa2V5MisrKSB7XG5cdCAgICBtZW1vaXplT3B0aW9uc1tfa2V5MiAtIDFdID0gYXJndW1lbnRzW19rZXkyXTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdCAgICBmb3IgKHZhciBfbGVuMyA9IGFyZ3VtZW50cy5sZW5ndGgsIGZ1bmNzID0gQXJyYXkoX2xlbjMpLCBfa2V5MyA9IDA7IF9rZXkzIDwgX2xlbjM7IF9rZXkzKyspIHtcblx0ICAgICAgZnVuY3NbX2tleTNdID0gYXJndW1lbnRzW19rZXkzXTtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgcmVjb21wdXRhdGlvbnMgPSAwO1xuXHQgICAgdmFyIHJlc3VsdEZ1bmMgPSBmdW5jcy5wb3AoKTtcblx0ICAgIHZhciBkZXBlbmRlbmNpZXMgPSBnZXREZXBlbmRlbmNpZXMoZnVuY3MpO1xuXHRcblx0ICAgIHZhciBtZW1vaXplZFJlc3VsdEZ1bmMgPSBtZW1vaXplLmFwcGx5KHVuZGVmaW5lZCwgW2Z1bmN0aW9uICgpIHtcblx0ICAgICAgcmVjb21wdXRhdGlvbnMrKztcblx0ICAgICAgcmV0dXJuIHJlc3VsdEZ1bmMuYXBwbHkodW5kZWZpbmVkLCBhcmd1bWVudHMpO1xuXHQgICAgfV0uY29uY2F0KG1lbW9pemVPcHRpb25zKSk7XG5cdFxuXHQgICAgdmFyIHNlbGVjdG9yID0gZnVuY3Rpb24gc2VsZWN0b3Ioc3RhdGUsIHByb3BzKSB7XG5cdCAgICAgIGZvciAodmFyIF9sZW40ID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW40ID4gMiA/IF9sZW40IC0gMiA6IDApLCBfa2V5NCA9IDI7IF9rZXk0IDwgX2xlbjQ7IF9rZXk0KyspIHtcblx0ICAgICAgICBhcmdzW19rZXk0IC0gMl0gPSBhcmd1bWVudHNbX2tleTRdO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB2YXIgcGFyYW1zID0gZGVwZW5kZW5jaWVzLm1hcChmdW5jdGlvbiAoZGVwZW5kZW5jeSkge1xuXHQgICAgICAgIHJldHVybiBkZXBlbmRlbmN5LmFwcGx5KHVuZGVmaW5lZCwgW3N0YXRlLCBwcm9wc10uY29uY2F0KGFyZ3MpKTtcblx0ICAgICAgfSk7XG5cdCAgICAgIHJldHVybiBtZW1vaXplZFJlc3VsdEZ1bmMuYXBwbHkodW5kZWZpbmVkLCBfdG9Db25zdW1hYmxlQXJyYXkocGFyYW1zKSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIHNlbGVjdG9yLnJlc3VsdEZ1bmMgPSByZXN1bHRGdW5jO1xuXHQgICAgc2VsZWN0b3IucmVjb21wdXRhdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHJldHVybiByZWNvbXB1dGF0aW9ucztcblx0ICAgIH07XG5cdCAgICBzZWxlY3Rvci5yZXNldFJlY29tcHV0YXRpb25zID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICByZXR1cm4gcmVjb21wdXRhdGlvbnMgPSAwO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBzZWxlY3Rvcjtcblx0ICB9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVTZWxlY3RvcigpIHtcblx0ICByZXR1cm4gY3JlYXRlU2VsZWN0b3JDcmVhdG9yKGRlZmF1bHRNZW1vaXplKS5hcHBseSh1bmRlZmluZWQsIGFyZ3VtZW50cyk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZVN0cnVjdHVyZWRTZWxlY3RvcihzZWxlY3RvcnMpIHtcblx0ICB2YXIgc2VsZWN0b3JDcmVhdG9yID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8gY3JlYXRlU2VsZWN0b3IgOiBhcmd1bWVudHNbMV07XG5cdFxuXHQgIGlmICh0eXBlb2Ygc2VsZWN0b3JzICE9PSAnb2JqZWN0Jykge1xuXHQgICAgdGhyb3cgbmV3IEVycm9yKCdjcmVhdGVTdHJ1Y3R1cmVkU2VsZWN0b3IgZXhwZWN0cyBmaXJzdCBhcmd1bWVudCB0byBiZSBhbiBvYmplY3QgJyArICgnd2hlcmUgZWFjaCBwcm9wZXJ0eSBpcyBhIHNlbGVjdG9yLCBpbnN0ZWFkIHJlY2VpdmVkIGEgJyArIHR5cGVvZiBzZWxlY3RvcnMpKTtcblx0ICB9XG5cdCAgdmFyIG9iamVjdEtleXMgPSBPYmplY3Qua2V5cyhzZWxlY3RvcnMpO1xuXHQgIHJldHVybiBzZWxlY3RvckNyZWF0b3Iob2JqZWN0S2V5cy5tYXAoZnVuY3Rpb24gKGtleSkge1xuXHQgICAgcmV0dXJuIHNlbGVjdG9yc1trZXldO1xuXHQgIH0pLCBmdW5jdGlvbiAoKSB7XG5cdCAgICBmb3IgKHZhciBfbGVuNSA9IGFyZ3VtZW50cy5sZW5ndGgsIHZhbHVlcyA9IEFycmF5KF9sZW41KSwgX2tleTUgPSAwOyBfa2V5NSA8IF9sZW41OyBfa2V5NSsrKSB7XG5cdCAgICAgIHZhbHVlc1tfa2V5NV0gPSBhcmd1bWVudHNbX2tleTVdO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiB2YWx1ZXMucmVkdWNlKGZ1bmN0aW9uIChjb21wb3NpdGlvbiwgdmFsdWUsIGluZGV4KSB7XG5cdCAgICAgIGNvbXBvc2l0aW9uW29iamVjdEtleXNbaW5kZXhdXSA9IHZhbHVlO1xuXHQgICAgICByZXR1cm4gY29tcG9zaXRpb247XG5cdCAgICB9LCB7fSk7XG5cdCAgfSk7XG5cdH1cblxuLyoqKi8gfSxcblxuLyoqKi8gMjI1OlxuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblx0XG5cdHZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXHRcblx0dmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHR2YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblx0XG5cdHZhciBfcmVhY3RSZWR1eCA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XG5cdFxuXHR2YXIgX0RvY0NvbnRhaW5lciA9IF9fd2VicGFja19yZXF1aXJlX18oMTM0KTtcblx0XG5cdHZhciBfRG9jQ29udGFpbmVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0RvY0NvbnRhaW5lcik7XG5cdFxuXHR2YXIgX0luZm9UYWJsZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjI2KTtcblx0XG5cdHZhciBfSW5mb1RhYmxlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0luZm9UYWJsZSk7XG5cdFxuXHR2YXIgX2FwaXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExOSk7XG5cdFxuXHR2YXIgX2FwaXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYXBpcyk7XG5cdFxuXHR2YXIgX3NlbGVjdG9ycyA9IF9fd2VicGFja19yZXF1aXJlX18oMTYwKTtcblx0XG5cdHZhciBzZWxlY3RvcnMgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChfc2VsZWN0b3JzKTtcblx0XG5cdHZhciBfYWN0aW9ucyA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cdFxuXHR2YXIgX3JlYWN0Q3NzTW9kdWxlcyA9IF9fd2VicGFja19yZXF1aXJlX18oODIpO1xuXHRcblx0dmFyIF9yZWFjdENzc01vZHVsZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3RDc3NNb2R1bGVzKTtcblx0XG5cdHZhciBfQ29udGVudFBhZ2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyOSk7XG5cdFxuXHR2YXIgX0NvbnRlbnRQYWdlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0NvbnRlbnRQYWdlKTtcblx0XG5cdHZhciBfaGVscGVycyA9IF9fd2VicGFja19yZXF1aXJlX18oMjM0KTtcblx0XG5cdHZhciBoZWxwZXJzID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQoX2hlbHBlcnMpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7IGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsgcmV0dXJuIG9iajsgfSBlbHNlIHsgdmFyIG5ld09iaiA9IHt9OyBpZiAob2JqICE9IG51bGwpIHsgZm9yICh2YXIga2V5IGluIG9iaikgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgbmV3T2JqW2tleV0gPSBvYmpba2V5XTsgfSB9IG5ld09iai5kZWZhdWx0ID0gb2JqOyByZXR1cm4gbmV3T2JqOyB9IH1cblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXHRcblx0ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblx0XG5cdHZhciBfX2RlY29yYXRlID0gdW5kZWZpbmVkICYmIHVuZGVmaW5lZC5fX2RlY29yYXRlIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuXHQgICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLFxuXHQgICAgICAgIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLFxuXHQgICAgICAgIGQ7XG5cdCAgICBpZiAoKHR5cGVvZiBSZWZsZWN0ID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YoUmVmbGVjdCkpID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG5cdCAgICAgICAgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcblx0ICAgIH1yZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xuXHR9O1xuXHRcblx0dmFyIHN0eWxlcyA9IF9fd2VicGFja19yZXF1aXJlX18oMjM2KTtcblx0dmFyIE1hbmFnZUJvb2tzID0gZnVuY3Rpb24gKF9Db21wb25lbnQpIHtcblx0ICAgIF9pbmhlcml0cyhNYW5hZ2VCb29rcywgX0NvbXBvbmVudCk7XG5cdFxuXHQgICAgZnVuY3Rpb24gTWFuYWdlQm9va3MocHJvcHMpIHtcblx0ICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTWFuYWdlQm9va3MpO1xuXHRcblx0ICAgICAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgT2JqZWN0LmdldFByb3RvdHlwZU9mKE1hbmFnZUJvb2tzKS5jYWxsKHRoaXMsIHByb3BzKSk7XG5cdCAgICB9XG5cdFxuXHQgICAgX2NyZWF0ZUNsYXNzKE1hbmFnZUJvb2tzLCBbe1xuXHQgICAgICAgIGtleTogXCJkZWxldGVCb29rXCIsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRlbGV0ZUJvb2soaWQsIGJvb2tOYW1lKSB7XG5cdCAgICAgICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXHRcblx0ICAgICAgICAgICAgdGhpcy5wcm9wcy5vcGVuQ29uZmlybU1vZGFsKHtcblx0ICAgICAgICAgICAgICAgIHRpdGxlOiAn56Gu6K6k5Yig6ZmkJyxcblx0ICAgICAgICAgICAgICAgIGNvbnRlbnQ6IFwi5bCG5Yig6Zmk44CKXCIgKyBib29rTmFtZSArIFwi44CLXCIsXG5cdCAgICAgICAgICAgICAgICBvbkNvbmZpcm06IGZ1bmN0aW9uIG9uQ29uZmlybSgpIHtcblx0ICAgICAgICAgICAgICAgICAgICBfYXBpczIuZGVmYXVsdC5kZWxldGVCb29rKGlkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMyLnByb3BzLmNsb3NlQ29uZmlybU1vZGFsKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMi5wcm9wcy5zZW5kTm90aWZpY2F0aW9uKCfliKDpmaTmiJDlip/vvIEnKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMyLnByb3BzLmZldGNoQm9va3MoeyBtZXJnZTogZmFsc2UgfSk7XG5cdCAgICAgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6IFwibG9hZEJvb2tzXCIsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGxvYWRCb29rcygpIHtcblx0ICAgICAgICAgICAgdmFyIHByb3BzID0gYXJndW1lbnRzLmxlbmd0aCA8PSAwIHx8IGFyZ3VtZW50c1swXSA9PT0gdW5kZWZpbmVkID8gdGhpcy5wcm9wcyA6IGFyZ3VtZW50c1swXTtcblx0XG5cdCAgICAgICAgICAgIHRoaXMucHJvcHMuZmV0Y2hCb29rcyh7XG5cdCAgICAgICAgICAgICAgICBwYWdlOiBwcm9wcy5yb3V0aW5nLnF1ZXJ5LnBhZ2UgfHwgJzEnLFxuXHQgICAgICAgICAgICAgICAgbWVyZ2U6IGZhbHNlXG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6IFwiY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wc1wiLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcywgbmV4dFN0YXRlKSB7XG5cdCAgICAgICAgICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXHRcblx0ICAgICAgICAgICAgaGVscGVycy5vblJvdXRpbmdDaGFuZ2UoZnVuY3Rpb24gKHJvdXRpbmcpIHtcblx0ICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wID0gMDtcblx0ICAgICAgICAgICAgICAgIF90aGlzMy5sb2FkQm9va3MobmV4dFByb3BzKTtcblx0ICAgICAgICAgICAgfSkobmV4dFByb3BzLCB0aGlzLnByb3BzKTtcblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiBcImNvbXBvbmVudERpZE1vdW50XCIsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuXHQgICAgICAgICAgICB0aGlzLmxvYWRCb29rcygpO1xuXHQgICAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6IFwicmVuZGVyXCIsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcblx0ICAgICAgICAgICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cdFxuXHQgICAgICAgICAgICB2YXIgYm9va0xpc3ROZXdlc3QgPSB0aGlzLnByb3BzLmJvb2tMaXN0TmV3ZXN0ID8gdGhpcy5wcm9wcy5ib29rTGlzdE5ld2VzdCA6IG51bGw7XG5cdCAgICAgICAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfRG9jQ29udGFpbmVyMi5kZWZhdWx0LCB7IHRpdGxlOiBcIuS5puexjeeuoeeQhlwiLCBib2R5Q2xhc3M6IFwibWFuYWdlLWJvb2tzXCIgfSwgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0NvbnRlbnRQYWdlMi5kZWZhdWx0LCB7IHBhZ2luYXRpb246IHtcblx0ICAgICAgICAgICAgICAgICAgICBuYW1lOiAnYm9va3MnXG5cdCAgICAgICAgICAgICAgICB9IH0sIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9JbmZvVGFibGUyLmRlZmF1bHQsIHsgZGF0YTogYm9va0xpc3ROZXdlc3QubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIGl0ZW0sIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgYXV0aG9yczogaXRlbS5hdXRob3JzID8gaXRlbS5hdXRob3JzLm1hcChmdW5jdGlvbiAoYXV0aG9yKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXV0aG9yLm5hbWU7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIH0pLmpvaW4oJywgJykgOiAn5pyq55+l5L2c6ICFJ1xuXHQgICAgICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICAgICAgfSksIGhlYWRlcjogW3tcblx0ICAgICAgICAgICAgICAgICAgICBrZXk6ICdpZCcsXG5cdCAgICAgICAgICAgICAgICAgICAgbmFtZTogJ0lEJ1xuXHQgICAgICAgICAgICAgICAgfSwge1xuXHQgICAgICAgICAgICAgICAgICAgIGtleTogJ3RpdGxlJyxcblx0ICAgICAgICAgICAgICAgICAgICBuYW1lOiAn5Lmm5ZCNJ1xuXHQgICAgICAgICAgICAgICAgfSwge1xuXHQgICAgICAgICAgICAgICAgICAgIGtleTogJ2RhdGVDcmVhdGVkJyxcblx0ICAgICAgICAgICAgICAgICAgICBuYW1lOiAn5Yib5bu65pel5pyfJ1xuXHQgICAgICAgICAgICAgICAgfSwge1xuXHQgICAgICAgICAgICAgICAgICAgIGtleTogJ2F1dGhvcnMnLFxuXHQgICAgICAgICAgICAgICAgICAgIG5hbWU6ICfkvZzogIUnXG5cdCAgICAgICAgICAgICAgICB9XSwgYWN0aW9uczogW3tcblx0ICAgICAgICAgICAgICAgICAgICBuYW1lOiAn5Yig6ZmkJyxcblx0ICAgICAgICAgICAgICAgICAgICBmbjogZnVuY3Rpb24gZm4ocm93KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNC5kZWxldGVCb29rKHJvdy5pZCwgcm93LnRpdGxlKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICB9XSB9KSkpO1xuXHQgICAgICAgIH1cblx0ICAgIH1dLCBbe1xuXHQgICAgICAgIGtleTogXCJmZXRjaERhdGFcIixcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZmV0Y2hEYXRhKF9yZWYpIHtcblx0ICAgICAgICAgICAgdmFyIHN0b3JlID0gX3JlZi5zdG9yZTtcblx0ICAgICAgICAgICAgdmFyIHF1ZXJ5ID0gX3JlZi5xdWVyeTtcblx0XG5cdCAgICAgICAgICAgIHJldHVybiBzdG9yZS5kaXNwYXRjaCgoMCwgX2FjdGlvbnMuZmV0Y2hCb29rcykoe1xuXHQgICAgICAgICAgICAgICAgcGFnZTogcXVlcnkucGFnZVxuXHQgICAgICAgICAgICB9KSk7XG5cdCAgICAgICAgfVxuXHQgICAgfV0pO1xuXHRcblx0ICAgIHJldHVybiBNYW5hZ2VCb29rcztcblx0fShfcmVhY3QuQ29tcG9uZW50KTtcblx0TWFuYWdlQm9va3MgPSBfX2RlY29yYXRlKFsoMCwgX3JlYWN0Q3NzTW9kdWxlczIuZGVmYXVsdCkoc3R5bGVzLCB7XG5cdCAgICBhbGxvd011bHRpcGxlOiB0cnVlXG5cdH0pXSwgTWFuYWdlQm9va3MpO1xuXHRmdW5jdGlvbiBtYXBTdGF0ZVRvUHJvcHMoc3RhdGUsIG93blByb3BzKSB7XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICAgIGJvb2tMaXN0TmV3ZXN0OiBzZWxlY3RvcnMuYm9va3NTZWxlY3RvcihzdGF0ZSksXG5cdCAgICAgICAgcm91dGluZzogc3RhdGUucm91dGluZy5sb2NhdGlvbkJlZm9yZVRyYW5zaXRpb25zXG5cdCAgICB9O1xuXHR9XG5cdGV4cG9ydHMuZGVmYXVsdCA9ICgwLCBfcmVhY3RSZWR1eC5jb25uZWN0KShtYXBTdGF0ZVRvUHJvcHMsIHsgZmV0Y2hCb29rczogX2FjdGlvbnMuZmV0Y2hCb29rcywgc2VuZE5vdGlmaWNhdGlvbjogX2FjdGlvbnMuc2VuZE5vdGlmaWNhdGlvbiwgb3BlbkNvbmZpcm1Nb2RhbDogX2FjdGlvbnMub3BlbkNvbmZpcm1Nb2RhbCwgY2xvc2VDb25maXJtTW9kYWw6IF9hY3Rpb25zLmNsb3NlQ29uZmlybU1vZGFsIH0pKE1hbmFnZUJvb2tzKTtcblxuLyoqKi8gfSxcblxuLyoqKi8gMjI2OlxuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX0luZm9UYWJsZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjI3KTtcblx0XG5cdHZhciBfSW5mb1RhYmxlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0luZm9UYWJsZSk7XG5cblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuXHRleHBvcnRzLmRlZmF1bHQgPSBfSW5mb1RhYmxlMi5kZWZhdWx0O1xuXG4vKioqLyB9LFxuXG4vKioqLyAyMjc6XG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXHRcblx0dmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cdFxuXHR2YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdHZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXHRcblx0dmFyIF9sb2Rhc2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTtcblx0XG5cdHZhciBfbG9kYXNoMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2xvZGFzaCk7XG5cdFxuXHR2YXIgX2NsYXNzbmFtZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgwKTtcblx0XG5cdHZhciBfY2xhc3NuYW1lczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc25hbWVzKTtcblx0XG5cdHZhciBfcmVhY3RDc3NNb2R1bGVzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4Mik7XG5cdFxuXHR2YXIgX3JlYWN0Q3NzTW9kdWxlczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdENzc01vZHVsZXMpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHRmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblx0XG5cdGZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXHRcblx0dmFyIF9fZGVjb3JhdGUgPSB1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fZGVjb3JhdGUgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG5cdCAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsXG5cdCAgICAgICAgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsXG5cdCAgICAgICAgZDtcblx0ICAgIGlmICgodHlwZW9mIFJlZmxlY3QgPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZihSZWZsZWN0KSkgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO2Vsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcblx0ICAgICAgICBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuXHQgICAgfXJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG5cdH07XG5cdFxuXHR2YXIgc3R5bGVzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMjgpO1xuXHR2YXIgSW5mb1RhYmxlID0gZnVuY3Rpb24gKF9Db21wb25lbnQpIHtcblx0ICAgIF9pbmhlcml0cyhJbmZvVGFibGUsIF9Db21wb25lbnQpO1xuXHRcblx0ICAgIGZ1bmN0aW9uIEluZm9UYWJsZShwcm9wcykge1xuXHQgICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBJbmZvVGFibGUpO1xuXHRcblx0ICAgICAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgT2JqZWN0LmdldFByb3RvdHlwZU9mKEluZm9UYWJsZSkuY2FsbCh0aGlzLCBwcm9wcykpO1xuXHQgICAgfVxuXHRcblx0ICAgIF9jcmVhdGVDbGFzcyhJbmZvVGFibGUsIFt7XG5cdCAgICAgICAga2V5OiBcInJlbmRlclwiLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG5cdCAgICAgICAgICAgIHZhciBfcHJvcHMgPSB0aGlzLnByb3BzO1xuXHQgICAgICAgICAgICB2YXIgaGVhZGVyID0gX3Byb3BzLmhlYWRlcjtcblx0ICAgICAgICAgICAgdmFyIGRhdGEgPSBfcHJvcHMuZGF0YTtcblx0ICAgICAgICAgICAgdmFyIGVuYWJsZVRvb2x0aXAgPSBfcHJvcHMuZW5hYmxlVG9vbHRpcDtcblx0ICAgICAgICAgICAgdmFyIHN0eWxlID0gX3Byb3BzLnN0eWxlO1xuXHQgICAgICAgICAgICB2YXIgYWN0aW9ucyA9IF9wcm9wcy5hY3Rpb25zO1xuXHQgICAgICAgICAgICB2YXIgb3BlcmF0aW9uTGFiZWwgPSBfcHJvcHMub3BlcmF0aW9uTGFiZWw7XG5cdFxuXHQgICAgICAgICAgICBhY3Rpb25zID0gYWN0aW9ucyB8fCBbXTtcblx0ICAgICAgICAgICAgaWYgKCFoZWFkZXIpIHtcblx0ICAgICAgICAgICAgICAgIGhlYWRlciA9IGRhdGEubGVuZ3RoICE9PSAwICYmIF9sb2Rhc2gyLmRlZmF1bHQua2V5cyhkYXRhWzBdKS5tYXAoZnVuY3Rpb24gKGtleSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGtleToga2V5LFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBrZXlcblx0ICAgICAgICAgICAgICAgICAgICB9O1xuXHQgICAgICAgICAgICAgICAgfSkgfHwgW107XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgdmFyIGNsYXNzTmFtZSA9ICgwLCBfY2xhc3NuYW1lczIuZGVmYXVsdCkoe1xuXHQgICAgICAgICAgICAgICAgJ2luZm8tdGFibGUnOiB0cnVlLFxuXHQgICAgICAgICAgICAgICAgJ2luZm8tdGFibGUtLW5vLWhlYWRlcic6ICFoZWFkZXJcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInRhYmxlXCIsIHsgc3R5bGVOYW1lOiBjbGFzc05hbWUsIHN0eWxlOiBzdHlsZSB8fCB7fSB9LCBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInRib2R5XCIsIG51bGwsIGhlYWRlciA/IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwidHJcIiwgbnVsbCwgaGVhZGVyLm1hcChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInRoXCIsIHsga2V5OiBpbmRleCB9LCBpdGVtLm5hbWUpO1xuXHQgICAgICAgICAgICB9KSwgYWN0aW9ucy5sZW5ndGggIT09IDAgJiYgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJ0aFwiLCBudWxsLCBvcGVyYXRpb25MYWJlbCB8fCAn5pON5L2cJykpIDogX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJ0clwiLCBudWxsKSwgZGF0YS5tYXAoZnVuY3Rpb24gKHJvdywgaW5kZXgpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInRyXCIsIHsga2V5OiBpbmRleCB9LCBfbG9kYXNoMi5kZWZhdWx0Lm1hcChoZWFkZXIsIGZ1bmN0aW9uIChpdGVtLCBrZXkpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiLCB7IGtleToga2V5IH0sIHJvd1tpdGVtLmtleV0gJiYgcm93W2l0ZW0ua2V5XS50b1N0cmluZygpKTtcblx0ICAgICAgICAgICAgICAgIH0pLCBhY3Rpb25zLmxlbmd0aCAhPT0gMCAmJiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInRkXCIsIHsgc3R5bGVOYW1lOiBcImFjdGlvbnNcIiB9LCBhY3Rpb25zLmxlbmd0aCAhPT0gMCAmJiBhY3Rpb25zLm1hcChmdW5jdGlvbiAoYWN0aW9uLCBpbmRleDIpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBzdHlsZU5hbWU6IFwiYWN0aW9uXCIsIGtleTogaW5kZXgyLCBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKGUpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbi5mbihkYXRhW2luZGV4XSk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIH0gfSwgYWN0aW9uLm5hbWUpO1xuXHQgICAgICAgICAgICAgICAgfSkpKTtcblx0ICAgICAgICAgICAgfSkpKTtcblx0ICAgICAgICB9XG5cdCAgICB9XSk7XG5cdFxuXHQgICAgcmV0dXJuIEluZm9UYWJsZTtcblx0fShfcmVhY3QuQ29tcG9uZW50KTtcblx0SW5mb1RhYmxlID0gX19kZWNvcmF0ZShbKDAsIF9yZWFjdENzc01vZHVsZXMyLmRlZmF1bHQpKHN0eWxlcyldLCBJbmZvVGFibGUpO1xuXHRleHBvcnRzLmRlZmF1bHQgPSBJbmZvVGFibGU7XG5cbi8qKiovIH0sXG5cbi8qKiovIDIyODpcbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8vIHJlbW92ZWQgYnkgZXh0cmFjdC10ZXh0LXdlYnBhY2stcGx1Z2luXG5cdG1vZHVsZS5leHBvcnRzID0ge1wiaW5mby10YWJsZS0tbm8taGVhZGVyXCI6XCJpbmZvLXRhYmxlLS1uby1oZWFkZXJfMnYzeHhcIixcImluZm8tdGFibGVcIjpcImluZm8tdGFibGVfQjdKWVVcIixcImFjdGlvbnNcIjpcImFjdGlvbnNfcFJfTnpcIixcImFjdGlvblwiOlwiYWN0aW9uXzNETEt5XCJ9O1xuXG4vKioqLyB9LFxuXG4vKioqLyAyMjk6XG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfQ29udGVudFBhZ2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzMCk7XG5cdFxuXHR2YXIgX0NvbnRlbnRQYWdlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0NvbnRlbnRQYWdlKTtcblxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5cdGV4cG9ydHMuZGVmYXVsdCA9IF9Db250ZW50UGFnZTIuZGVmYXVsdDtcblxuLyoqKi8gfSxcblxuLyoqKi8gMjMwOlxuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cdFxuXHR2YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdHZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXHRcblx0dmFyIF9QYWdpbmF0b3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzMSk7XG5cdFxuXHR2YXIgX1BhZ2luYXRvcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9QYWdpbmF0b3IpO1xuXHRcblx0dmFyIF9yZWFjdFJlZHV4ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblx0XG5cdHZhciBfc2VsZWN0b3JzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNjApO1xuXHRcblx0dmFyIHNlbGVjdG9ycyA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKF9zZWxlY3RvcnMpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7IGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsgcmV0dXJuIG9iajsgfSBlbHNlIHsgdmFyIG5ld09iaiA9IHt9OyBpZiAob2JqICE9IG51bGwpIHsgZm9yICh2YXIga2V5IGluIG9iaikgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgbmV3T2JqW2tleV0gPSBvYmpba2V5XTsgfSB9IG5ld09iai5kZWZhdWx0ID0gb2JqOyByZXR1cm4gbmV3T2JqOyB9IH1cblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXHRcblx0ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblx0XG5cdHZhciBDb250ZW50UGFnZSA9IGZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG5cdCAgICBfaW5oZXJpdHMoQ29udGVudFBhZ2UsIF9Db21wb25lbnQpO1xuXHRcblx0ICAgIGZ1bmN0aW9uIENvbnRlbnRQYWdlKHByb3BzKSB7XG5cdCAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENvbnRlbnRQYWdlKTtcblx0XG5cdCAgICAgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIE9iamVjdC5nZXRQcm90b3R5cGVPZihDb250ZW50UGFnZSkuY2FsbCh0aGlzLCBwcm9wcykpO1xuXHQgICAgfVxuXHRcblx0ICAgIF9jcmVhdGVDbGFzcyhDb250ZW50UGFnZSwgW3tcblx0ICAgICAgICBrZXk6ICdjb21wb25lbnREaWRNb3VudCcsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge31cblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdyZW5kZXInLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG5cdCAgICAgICAgICAgIHZhciBfcHJvcHMgPSB0aGlzLnByb3BzO1xuXHQgICAgICAgICAgICB2YXIgY2hpbGRyZW4gPSBfcHJvcHMuY2hpbGRyZW47XG5cdCAgICAgICAgICAgIHZhciByb3V0aW5nID0gX3Byb3BzLnJvdXRpbmc7XG5cdCAgICAgICAgICAgIHZhciBfcHJvcHMkcGFnaW5hdGlvbkxpbmsgPSBfcHJvcHMucGFnaW5hdGlvbkxpbmtzO1xuXHQgICAgICAgICAgICB2YXIgbmV4dCA9IF9wcm9wcyRwYWdpbmF0aW9uTGluay5uZXh0O1xuXHQgICAgICAgICAgICB2YXIgbGFzdCA9IF9wcm9wcyRwYWdpbmF0aW9uTGluay5sYXN0O1xuXHRcblx0ICAgICAgICAgICAgdmFyIGFsbCA9IGxhc3QgJiYgbGFzdC5wYWdlIHx8IDE7XG5cdCAgICAgICAgICAgIHZhciBjdXJyZW50ID0gbmV4dCA/IG5leHQucGFnZSAtIDEgOiBhbGw7XG5cdCAgICAgICAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLCBudWxsLCBjaGlsZHJlbiwgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX1BhZ2luYXRvcjIuZGVmYXVsdCwgeyBhbGw6IGFsbCwgY3VycmVudDogY3VycmVudCwgdXJsOiB7XG5cdCAgICAgICAgICAgICAgICAgICAgcGF0aG5hbWU6IHJvdXRpbmcucGF0aG5hbWUsXG5cdCAgICAgICAgICAgICAgICAgICAgcXVlcnk6IHJvdXRpbmcucXVlcnkgfHwge31cblx0ICAgICAgICAgICAgICAgIH0gfSkpO1xuXHQgICAgICAgIH1cblx0ICAgIH1dKTtcblx0XG5cdCAgICByZXR1cm4gQ29udGVudFBhZ2U7XG5cdH0oX3JlYWN0LkNvbXBvbmVudCk7XG5cdFxuXHR2YXIgbWFwU3RhdGVUb1Byb3BzID0gZnVuY3Rpb24gbWFwU3RhdGVUb1Byb3BzKHN0YXRlLCBvd25Qcm9wcykge1xuXHQgICAgdmFyIF9vd25Qcm9wcyRwYWdpbmF0aW9uID0gb3duUHJvcHMucGFnaW5hdGlvbjtcblx0ICAgIHZhciBuYW1lID0gX293blByb3BzJHBhZ2luYXRpb24ubmFtZTtcblx0ICAgIHZhciBrZXkgPSBfb3duUHJvcHMkcGFnaW5hdGlvbi5rZXk7XG5cdFxuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgICByb3V0aW5nOiBzdGF0ZS5yb3V0aW5nLmxvY2F0aW9uQmVmb3JlVHJhbnNpdGlvbnMgfHwge30sXG5cdCAgICAgICAgcGFnaW5hdGlvbkxpbmtzOiBzZWxlY3RvcnMucGFnaW5hdGlvbkxpbmtTZWxlY3RvcihuYW1lLCBrZXkpKHN0YXRlKVxuXHQgICAgfTtcblx0fTtcblx0ZXhwb3J0cy5kZWZhdWx0ID0gKDAsIF9yZWFjdFJlZHV4LmNvbm5lY3QpKG1hcFN0YXRlVG9Qcm9wcywge30pKENvbnRlbnRQYWdlKTtcblxuLyoqKi8gfSxcblxuLyoqKi8gMjMxOlxuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX1BhZ2luYXRvciA9IF9fd2VicGFja19yZXF1aXJlX18oMjMyKTtcblx0XG5cdHZhciBfUGFnaW5hdG9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1BhZ2luYXRvcik7XG5cblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuXHRleHBvcnRzLmRlZmF1bHQgPSBfUGFnaW5hdG9yMi5kZWZhdWx0O1xuXG4vKioqLyB9LFxuXG4vKioqLyAyMzI6XG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXHRcblx0dmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cdFxuXHR2YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdHZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXHRcblx0dmFyIF9yZWFjdFJvdXRlciA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdFxuXHR2YXIgX2xvZGFzaCA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpO1xuXHRcblx0dmFyIF9sb2Rhc2gyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbG9kYXNoKTtcblx0XG5cdHZhciBfdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTtcblx0XG5cdHZhciBfdXRpbHMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdXRpbHMpO1xuXHRcblx0dmFyIF9yZWFjdENzc01vZHVsZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgyKTtcblx0XG5cdHZhciBfcmVhY3RDc3NNb2R1bGVzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0Q3NzTW9kdWxlcyk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblx0XG5cdGZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cdFxuXHR2YXIgX19kZWNvcmF0ZSA9IHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19kZWNvcmF0ZSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcblx0ICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCxcblx0ICAgICAgICByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYyxcblx0ICAgICAgICBkO1xuXHQgICAgaWYgKCh0eXBlb2YgUmVmbGVjdCA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mKFJlZmxlY3QpKSA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7ZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuXHQgICAgICAgIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG5cdCAgICB9cmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcblx0fTtcblx0XG5cdHZhciBzdHlsZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzMyk7XG5cdHZhciBQYWdpbmF0b3IgPSBmdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuXHQgICAgX2luaGVyaXRzKFBhZ2luYXRvciwgX0NvbXBvbmVudCk7XG5cdFxuXHQgICAgZnVuY3Rpb24gUGFnaW5hdG9yKHByb3BzKSB7XG5cdCAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFBhZ2luYXRvcik7XG5cdFxuXHQgICAgICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoUGFnaW5hdG9yKS5jYWxsKHRoaXMsIHByb3BzKSk7XG5cdCAgICB9XG5cdFxuXHQgICAgX2NyZWF0ZUNsYXNzKFBhZ2luYXRvciwgW3tcblx0ICAgICAgICBrZXk6IFwicGFyc2VVcmxcIixcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcGFyc2VVcmwocGF0aG5hbWUsIHF1ZXJ5LCBwYWdlTnVtKSB7XG5cdCAgICAgICAgICAgIHZhciB1cmxTdHlsZSA9IHRoaXMucHJvcHMudXJsU3R5bGUgPyB0aGlzLnByb3BzLnVybFN0eWxlIDogJ3F1ZXJ5Jztcblx0ICAgICAgICAgICAgaWYgKHVybFN0eWxlID09PSAncXVlcnknKSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgX3F1ZXJ5UGFydCA9IF91dGlsczIuZGVmYXVsdC5wYXJzZUZvcm1EYXRhKF9sb2Rhc2gyLmRlZmF1bHQub21pdChxdWVyeSwgWydwYWdlJ10pKTtcblx0ICAgICAgICAgICAgICAgIHJldHVybiBcIlwiICsgcGF0aG5hbWUgKyAoX3F1ZXJ5UGFydCA/IFwiP1wiICsgX3F1ZXJ5UGFydCArIFwiJlwiIDogJz8nKSArIFwicGFnZT1cIiArIHBhZ2VOdW07XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgdmFyIHF1ZXJ5UGFydCA9IF91dGlsczIuZGVmYXVsdC5wYXJzZUZvcm1EYXRhKHF1ZXJ5KTtcblx0ICAgICAgICAgICAgcmV0dXJuIHBhdGhuYW1lICsgXCIvcGFnZS9cIiArIHBhZ2VOdW0gKyBcIj9cIiArIHF1ZXJ5UGFydDtcblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiBcInJlbmRlclwiLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG5cdCAgICAgICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXHRcblx0ICAgICAgICAgICAgdmFyIHJhbmdlID0gdGhpcy5wcm9wcy5yYW5nZSA/IHRoaXMucHJvcHMucmFuZ2UgOiAzO1xuXHQgICAgICAgICAgICB2YXIgdG90YWxSYW5nZUVuZEluZGV4ID0gdGhpcy5wcm9wcy5hbGwgLSAxO1xuXHQgICAgICAgICAgICB2YXIgY3VycmVudEluZGV4ID0gcGFyc2VJbnQodGhpcy5wcm9wcy5jdXJyZW50KSAtIDE7XG5cdCAgICAgICAgICAgIHZhciByYW5nZVN0YXJ0SW5kZXggPSBjdXJyZW50SW5kZXggLSByYW5nZTtcblx0ICAgICAgICAgICAgdmFyIHJhbmdlRW5kSW5kZXggPSBjdXJyZW50SW5kZXggKyByYW5nZTtcblx0ICAgICAgICAgICAgdmFyIGxlZnRTcHJlYWQgPSBmYWxzZTtcblx0ICAgICAgICAgICAgdmFyIHJpZ2h0U3ByZWFkID0gZmFsc2U7XG5cdCAgICAgICAgICAgIHZhciBwYWdlcyA9IFtdO1xuXHQgICAgICAgICAgICB2YXIgdXJsID0gdGhpcy5wcm9wcy51cmw7XG5cdCAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5wcm9wcy5hbGwgIT09ICdudW1iZXInKSB7XG5cdCAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2FsbCDlv4XpobvkuLogbnVtYmVyIOexu+Wei++8gScpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIC8vIOmqjOivgVxuXHQgICAgICAgICAgICBpZiAodHlwZW9mIGN1cnJlbnRJbmRleCAhPT0gJ251bWJlcicpIHtcblx0ICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCLpobXnoIHlv4XpobvkuLrmlbDlrZfvvIzljbTlvpfliLAgXCIgKyAodHlwZW9mIGN1cnJlbnRJbmRleCA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mKGN1cnJlbnRJbmRleCkpKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBpZiAoY3VycmVudEluZGV4ID4gcmFuZ2VFbmRJbmRleCB8fCBjdXJyZW50SW5kZXggPCAwKSB7XG5cdCAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCfpobXnoIHkuI3og73lpKfkuo7miYDmnInpobXpnaLmlbDnm67miJblsI/kuo4gMe+8gScpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGlmIChyYW5nZSAqIDIgKyAxID49IHRvdGFsUmFuZ2VFbmRJbmRleCkge1xuXHQgICAgICAgICAgICAgICAgLy8g5oC76ZW/5bqm5bCP5LqOIHJhbmdlIOebtOW+hFxuXHQgICAgICAgICAgICAgICAgcmFuZ2VFbmRJbmRleCA9IHRvdGFsUmFuZ2VFbmRJbmRleDtcblx0ICAgICAgICAgICAgICAgIHJhbmdlU3RhcnRJbmRleCA9IDA7XG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgICAvLyDlpITnkIblj7PkvqfmuqLlh7pcblx0ICAgICAgICAgICAgICAgIGlmIChyYW5nZUVuZEluZGV4ID49IHRvdGFsUmFuZ2VFbmRJbmRleCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJhbmdlRW5kSW5kZXggPSB0b3RhbFJhbmdlRW5kSW5kZXg7XG5cdCAgICAgICAgICAgICAgICAgICAgcmFuZ2VTdGFydEluZGV4ID0gdG90YWxSYW5nZUVuZEluZGV4IC0gKHJhbmdlICogMiArIDEpO1xuXHQgICAgICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgICAgICByaWdodFNwcmVhZCA9IHRydWU7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICBpZiAocmFuZ2VTdGFydEluZGV4IDw9IDApIHtcblx0ICAgICAgICAgICAgICAgICAgICByYW5nZVN0YXJ0SW5kZXggPSAwO1xuXHQgICAgICAgICAgICAgICAgICAgIHJhbmdlRW5kSW5kZXggPSByYW5nZSAqIDIgKyAxO1xuXHQgICAgICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgICAgICBsZWZ0U3ByZWFkID0gdHJ1ZTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBmb3IgKHZhciBpID0gcmFuZ2VTdGFydEluZGV4OyBpIDw9IHJhbmdlRW5kSW5kZXg7IGkrKykge1xuXHQgICAgICAgICAgICAgICAgcGFnZXMgPSBwYWdlcy5jb25jYXQoW3tcblx0ICAgICAgICAgICAgICAgICAgICBwYWdlTnVtOiBpICsgMSxcblx0ICAgICAgICAgICAgICAgICAgICBpc0N1cnJlbnQ6IGkgPT09IGN1cnJlbnRJbmRleFxuXHQgICAgICAgICAgICAgICAgfV0pO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIC8vIGFkZCBzcHJlYWRcblx0ICAgICAgICAgICAgaWYgKGxlZnRTcHJlYWQpIHtcblx0ICAgICAgICAgICAgICAgIHZhciBzcGQgPSBbe1xuXHQgICAgICAgICAgICAgICAgICAgIHBhZ2VOdW06IDFcblx0ICAgICAgICAgICAgICAgIH0sIHtcblx0ICAgICAgICAgICAgICAgICAgICBpc1NwcmVhZDogdHJ1ZVxuXHQgICAgICAgICAgICAgICAgfV07XG5cdCAgICAgICAgICAgICAgICBwYWdlcyA9IHNwZC5jb25jYXQocGFnZXMpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGlmIChyaWdodFNwcmVhZCkge1xuXHQgICAgICAgICAgICAgICAgdmFyIF9zcGQgPSBbe1xuXHQgICAgICAgICAgICAgICAgICAgIGlzU3ByZWFkOiB0cnVlXG5cdCAgICAgICAgICAgICAgICB9LCB7XG5cdCAgICAgICAgICAgICAgICAgICAgcGFnZU51bTogdG90YWxSYW5nZUVuZEluZGV4ICsgMVxuXHQgICAgICAgICAgICAgICAgfV07XG5cdCAgICAgICAgICAgICAgICBwYWdlcyA9IHBhZ2VzLmNvbmNhdChfc3BkKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5hbGwgIT09IDEgJiYgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBzdHlsZU5hbWU6IFwicGFnaW5hdG9yXCIgfSwgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJ1bFwiLCBudWxsLCBwYWdlcy5tYXAoZnVuY3Rpb24gKHBhZ2UsIGluZGV4KSB7XG5cdCAgICAgICAgICAgICAgICBpZiAocGFnZS5pc0N1cnJlbnQpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJsaVwiLCB7IGtleTogaW5kZXgsIHN0eWxlTmFtZTogXCJwYWdlLW51bS0tY3VycmVudFwiIH0sIHBhZ2UucGFnZU51bSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICBpZiAocGFnZS5pc1NwcmVhZCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImxpXCIsIHsga2V5OiBpbmRleCwgc3R5bGVOYW1lOiBcInBhZ2Utc3ByZWFkXCIgfSwgXCIuLi5cIik7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJsaVwiLCB7IGtleTogaW5kZXgsIHN0eWxlTmFtZTogXCJwYWdlLW51bVwiIH0sIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdFJvdXRlci5MaW5rLCB7IHRvOiBfdGhpczIucGFyc2VVcmwodXJsLnBhdGhuYW1lLCB1cmwucXVlcnksIHBhZ2UucGFnZU51bSkgfSwgcGFnZS5wYWdlTnVtKSk7XG5cdCAgICAgICAgICAgIH0pKSk7XG5cdCAgICAgICAgfVxuXHQgICAgfV0pO1xuXHRcblx0ICAgIHJldHVybiBQYWdpbmF0b3I7XG5cdH0oX3JlYWN0LkNvbXBvbmVudCk7XG5cdFBhZ2luYXRvciA9IF9fZGVjb3JhdGUoWygwLCBfcmVhY3RDc3NNb2R1bGVzMi5kZWZhdWx0KShzdHlsZXMpXSwgUGFnaW5hdG9yKTtcblx0ZXhwb3J0cy5kZWZhdWx0ID0gUGFnaW5hdG9yO1xuXG4vKioqLyB9LFxuXG4vKioqLyAyMzM6XG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvLyByZW1vdmVkIGJ5IGV4dHJhY3QtdGV4dC13ZWJwYWNrLXBsdWdpblxuXHRtb2R1bGUuZXhwb3J0cyA9IHtcInBhZ2Utc3ByZWFkXCI6XCJwYWdlLXNwcmVhZF8ySU5IVVwiLFwicGFnZS1udW1cIjpcInBhZ2UtbnVtXzJvUFFVXCIsXCJwYWdlLW51bS0tY3VycmVudFwiOlwicGFnZS1udW0tLWN1cnJlbnRfMVkybUVcIixcInBhZ2luYXRvclwiOlwicGFnaW5hdG9yXzFSSEFtXCJ9O1xuXG4vKioqLyB9LFxuXG4vKioqLyAyMzQ6XG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfbGlmZWNpcmNsZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjM1KTtcblx0XG5cdE9iamVjdC5rZXlzKF9saWZlY2lyY2xlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcblx0ICBpZiAoa2V5ID09PSBcImRlZmF1bHRcIikgcmV0dXJuO1xuXHQgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHtcblx0ICAgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgICAgcmV0dXJuIF9saWZlY2lyY2xlW2tleV07XG5cdCAgICB9XG5cdCAgfSk7XG5cdH0pO1xuXG4vKioqLyB9LFxuXG4vKioqLyAyMzU6XG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLm9uUm91dGluZ0NoYW5nZSA9IHVuZGVmaW5lZDtcblx0XG5cdHZhciBfbG9kYXNoID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCk7XG5cdFxuXHR2YXIgX2xvZGFzaDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9sb2Rhc2gpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdC8vIOajgOafpSBzdG9yZSDph4zpnaLnmoQgcm91dGluZyDmmK/lkKblj5jljJZcblx0dmFyIG9uUm91dGluZ0NoYW5nZSA9IGV4cG9ydHMub25Sb3V0aW5nQ2hhbmdlID0gZnVuY3Rpb24gb25Sb3V0aW5nQ2hhbmdlKGZuKSB7XG5cdCAgICByZXR1cm4gZnVuY3Rpb24gKG5leHRQcm9wcywgY3VycmVudFByb3BzKSB7XG5cdCAgICAgICAgaWYgKCFjdXJyZW50UHJvcHMucm91dGluZykge1xuXHQgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdyb3V0aW5nIOmcgOimgeeOsOWcqOe7hOS7tiBwcm9wcyDph4zpnaLlo7DmmI7vvIEnKTtcblx0ICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB2YXIgaGFzUGF0aFBhcmFtQ2hhbmdlZCA9ICFfbG9kYXNoMi5kZWZhdWx0LmlzRXF1YWwobmV4dFByb3BzLnJvdXRpbmcsIGN1cnJlbnRQcm9wcy5yb3V0aW5nKTtcblx0ICAgICAgICBpZiAoaGFzUGF0aFBhcmFtQ2hhbmdlZCkge1xuXHQgICAgICAgICAgICBmbihuZXh0UHJvcHMucm91dGluZyk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0fTtcblxuLyoqKi8gfSxcblxuLyoqKi8gMjM2OlxuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0Ly8gcmVtb3ZlZCBieSBleHRyYWN0LXRleHQtd2VicGFjay1wbHVnaW5cblxuLyoqKi8gfVxuXG59KTtcblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAxMi4xMi5qc1xuICoqLyIsImltcG9ydCB7IGNyZWF0ZVNlbGVjdG9yIH0gZnJvbSAncmVzZWxlY3QnXG5pbXBvcnQgXyBmcm9tICdsb2Rhc2gnXG5pbXBvcnQgeyBzZWxlY3RQYWdpbmF0ZWRFbnRpdGllcyB9IGZyb20gJy4vY29tbW9uJ1xuaW1wb3J0ICogYXMgY29tbW9uIGZyb20gJy4vY29tbW9uJ1xuXG5leHBvcnQgY29uc3QgcXVlcnlEb3ViYW5Cb29rc1NlbGVjdG9yID0gcXVlcnkgPT4gY3JlYXRlU2VsZWN0b3IoXG4gIHNlbGVjdFBhZ2luYXRlZEVudGl0aWVzKHtcbiAgICBlbnRpdGllc05hbWU6ICdkb3ViYW5Cb29rcycsXG4gICAgcGFnaW5hdGlvbk5hbWU6ICdkb3ViYW5Cb29rcycsXG4gICAgcGFnaW5hdGlvblF1ZXJ5OiBxdWVyeVxuICB9KSxcbiAgYm9va3MgPT4gYm9va3NcbilcblxuZXhwb3J0IGNvbnN0IHF1ZXJ5QXV0aG9yc1NlbGVjdG9yID0gcXVlcnkgPT4gc2VsZWN0UGFnaW5hdGVkRW50aXRpZXMoe1xuICBlbnRpdGllc05hbWU6ICdhdXRob3JzJyxcbiAgcGFnaW5hdGlvbk5hbWU6ICdhdXRob3JzJyxcbiAgcGFnaW5hdGlvblF1ZXJ5OiBxdWVyeVxufSlcblxuZXhwb3J0IGNvbnN0IHNlYXJjaEJvb2tzU2VsZWN0b3IgPSBxdWVyeSA9PiBzZWxlY3RQYWdpbmF0ZWRFbnRpdGllcyh7XG4gIGVudGl0aWVzTmFtZTogJ2Jvb2tzJyxcbiAgcGFnaW5hdGlvbk5hbWU6ICdib29rcycsXG4gIHBhZ2luYXRpb25RdWVyeTogcXVlcnlcbn0pXG5cbmV4cG9ydCBjb25zdCBkb3ViYW5Cb29rc0FzT3B0aW9ucyA9IHF1ZXJ5ID0+IGNyZWF0ZVNlbGVjdG9yKFxuICBxdWVyeURvdWJhbkJvb2tzU2VsZWN0b3IocXVlcnkpLFxuICBib29rcyA9PiB7XG4gICAgcmV0dXJuIGJvb2tzLm1hcChib29rID0+ICh7XG4gICAgICBuYW1lOiBib29rLnRpdGxlLFxuICAgICAgdmFsdWU6IGJvb2suaWQsXG4gICAgICBhZGRpdGlvbmFsOiB7XG4gICAgICAgIGRlc2NyaXB0aW9uOiBib29rLnN1bW1hcnksXG4gICAgICAgIGNvdmVyOiBib29rLmltYWdlcy5sYXJnZSxcbiAgICAgICAgYXV0aG9yOiBib29rLmF1dGhvci5qb2luKCcsICcpXG4gICAgICB9XG4gICAgfSkpXG4gIH1cbilcblxuZXhwb3J0IGNvbnN0IGF1dGhvcnNBc09wdGlvbnMgPSBxdWVyeSA9PiBjcmVhdGVTZWxlY3RvcihcbiAgcXVlcnlBdXRob3JzU2VsZWN0b3IocXVlcnkpLFxuICBpdGVtcyA9PiB7XG4gICAgcmV0dXJuIGl0ZW1zLm1hcChpdGVtID0+ICh7XG4gICAgICBuYW1lOiBpdGVtLm5hbWUsXG4gICAgICB2YWx1ZTogaXRlbS5pZFxuICAgIH0pKVxuICB9XG4pXG5cbmV4cG9ydCBjb25zdCBib29rc1NlYXJjaEFzT3B0aW9ucyA9IHF1ZXJ5ID0+IGNyZWF0ZVNlbGVjdG9yKFxuICBzZWFyY2hCb29rc1NlbGVjdG9yKHF1ZXJ5KSxcbiAgaXRlbXMgPT4ge1xuICAgIHJldHVybiBpdGVtcy5tYXAoaXRlbSA9PiAoe1xuICAgICAgbmFtZTogaXRlbS50aXRsZSxcbiAgICAgIHZhbHVlOiBpdGVtLmlkXG4gICAgfSkpXG4gIH1cbilcblxuZXhwb3J0IGNvbnN0IGJvb2tzU2VsZWN0b3IgPSBjcmVhdGVTZWxlY3RvcihcbiAgc2VsZWN0UGFnaW5hdGVkRW50aXRpZXMoe1xuICAgIGVudGl0aWVzTmFtZTogJ2Jvb2tzJyxcbiAgICBwYWdpbmF0aW9uTmFtZTogJ2Jvb2tzJyxcbiAgICBwYWdpbmF0aW9uS2V5OiAnZGVmYXVsdCdcbiAgfSksXG4gIGJvb2tzID0+IGJvb2tzXG4pXG5cbmV4cG9ydCBjb25zdCB1c2Vyc1NlbGVjdG9yID0gc2VsZWN0UGFnaW5hdGVkRW50aXRpZXMoe1xuICBlbnRpdGllc05hbWU6ICd1c2VycycsXG4gIHBhZ2luYXRpb25OYW1lOiAndXNlcnMnLFxuICBwYWdpbmF0aW9uS2V5OiAnZGVmYXVsdCdcbn0pXG5cbmV4cG9ydCAqIGZyb20gJy4vY29tbW9uJ1xuZXhwb3J0IHsgY29tbW9uIH1cblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHNyYy9pc29tb3JwaGljL3N0b3JlL3NlbGVjdG9ycy9pbmRleC50c1xuICoqLyIsImltcG9ydCB7IGNyZWF0ZVNlbGVjdG9yIH0gZnJvbSAncmVzZWxlY3QnXG5pbXBvcnQgXyBmcm9tICdsb2Rhc2gnXG5cbmNvbnN0IGVudGl0aWVzU2VsZWN0b3IgPSBuYW1lID0+IHN0YXRlID0+IHtcbiAgcmV0dXJuIHN0YXRlLmVudGl0aWVzW25hbWVdIHx8IHt9XG59XG5jb25zdCBwYWdpbmF0aW9uU2VsZWN0b3IgPSAobmFtZSwga2V5ID0gJ2RlZmF1bHQnKSA9PiBzdGF0ZSA9PiB7XG4gIHJldHVybiBfLmdldChzdGF0ZS5wYWdpbmF0aW9uLCBgJHtuYW1lfS4ke2tleX0uaWRzYCwgW10pXG59XG5leHBvcnQgY29uc3QgcGFnaW5hdGlvbkxpbmtTZWxlY3RvciA9IChuYW1lLCBrZXkgPSAnZGVmYXVsdCcpID0+IHN0YXRlID0+IHtcbiAgcmV0dXJuIF8ucGljayhfLmdldChzdGF0ZS5wYWdpbmF0aW9uLCBgJHtuYW1lfS4ke2tleX1gLCB7fSksIFsnbmV4dCcsICdsYXN0J10pXG59XG5jb25zdCBxdWVyeVBhZ2luYXRpb25TZWxlY3RvciA9IChuYW1lLCBxdWVyeSkgPT4gc3RhdGUgPT4ge1xuICByZXR1cm4gXy5nZXQoc3RhdGUucGFnaW5hdGlvbiwgW25hbWUsICdxdWVyeScsIHF1ZXJ5LCAnaWRzJ10sIFtdKVxufVxuXG50eXBlIFNlbGVjdFBhZ2luYXRlZEVudGl0aWVzT3B0aW9ucyA9IHtcbiAgZW50aXRpZXNOYW1lOiBzdHJpbmdcbiAgcGFnaW5hdGlvbk5hbWU6IHN0cmluZ1xuICBwYWdpbmF0aW9uS2V5Pzogc3RyaW5nXG4gIHBhZ2luYXRpb25RdWVyeT86IHN0cmluZ1xufVxuZXhwb3J0IGNvbnN0IHNlbGVjdFBhZ2luYXRlZEVudGl0aWVzID0gKG9wdGlvbnM6IFNlbGVjdFBhZ2luYXRlZEVudGl0aWVzT3B0aW9ucykgPT4ge1xuICBjb25zdCB7ZW50aXRpZXNOYW1lLCBwYWdpbmF0aW9uTmFtZSwgcGFnaW5hdGlvbktleSwgcGFnaW5hdGlvblF1ZXJ5fSA9IG9wdGlvbnNcbiAgbGV0IHBhZ2lTZWxlY3RvcjogKHN0YXRlOiBhbnkpID0+IGFueVtdXG5cbiAgaWYgKHBhZ2luYXRpb25RdWVyeSkge1xuICAgIHBhZ2lTZWxlY3RvciA9IHF1ZXJ5UGFnaW5hdGlvblNlbGVjdG9yKHBhZ2luYXRpb25OYW1lLCBwYWdpbmF0aW9uUXVlcnkpXG4gIH0gZWxzZSB7XG4gICAgcGFnaVNlbGVjdG9yID0gcGFnaW5hdGlvblNlbGVjdG9yKHBhZ2luYXRpb25OYW1lLCBwYWdpbmF0aW9uS2V5KVxuICB9XG5cbiAgcmV0dXJuIGNyZWF0ZVNlbGVjdG9yKFxuICAgIGVudGl0aWVzU2VsZWN0b3IoZW50aXRpZXNOYW1lKSxcbiAgICBwYWdpU2VsZWN0b3IsXG4gICAgKGVudGl0aWVzLCBpZHMpID0+IHtcbiAgICAgIHJldHVybiBpZHMubWFwKGlkID0+IGVudGl0aWVzW2lkXSlcbiAgICB9XG4gIClcbn1cblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHNyYy9pc29tb3JwaGljL3N0b3JlL3NlbGVjdG9ycy9jb21tb24udHNcbiAqKi8iLCIndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzLmRlZmF1bHRNZW1vaXplID0gZGVmYXVsdE1lbW9pemU7XG5leHBvcnRzLmNyZWF0ZVNlbGVjdG9yQ3JlYXRvciA9IGNyZWF0ZVNlbGVjdG9yQ3JlYXRvcjtcbmV4cG9ydHMuY3JlYXRlU2VsZWN0b3IgPSBjcmVhdGVTZWxlY3RvcjtcbmV4cG9ydHMuY3JlYXRlU3RydWN0dXJlZFNlbGVjdG9yID0gY3JlYXRlU3RydWN0dXJlZFNlbGVjdG9yO1xuXG5mdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9IGVsc2UgeyByZXR1cm4gQXJyYXkuZnJvbShhcnIpOyB9IH1cblxuZnVuY3Rpb24gZGVmYXVsdEVxdWFsaXR5Q2hlY2soYSwgYikge1xuICByZXR1cm4gYSA9PT0gYjtcbn1cblxuZnVuY3Rpb24gZGVmYXVsdE1lbW9pemUoZnVuYykge1xuICB2YXIgZXF1YWxpdHlDaGVjayA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMSB8fCBhcmd1bWVudHNbMV0gPT09IHVuZGVmaW5lZCA/IGRlZmF1bHRFcXVhbGl0eUNoZWNrIDogYXJndW1lbnRzWzFdO1xuXG4gIHZhciBsYXN0QXJncyA9IG51bGw7XG4gIHZhciBsYXN0UmVzdWx0ID0gbnVsbDtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICBpZiAobGFzdEFyZ3MgIT09IG51bGwgJiYgbGFzdEFyZ3MubGVuZ3RoID09PSBhcmdzLmxlbmd0aCAmJiBhcmdzLmV2ZXJ5KGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgpIHtcbiAgICAgIHJldHVybiBlcXVhbGl0eUNoZWNrKHZhbHVlLCBsYXN0QXJnc1tpbmRleF0pO1xuICAgIH0pKSB7XG4gICAgICByZXR1cm4gbGFzdFJlc3VsdDtcbiAgICB9XG4gICAgbGFzdFJlc3VsdCA9IGZ1bmMuYXBwbHkodW5kZWZpbmVkLCBhcmdzKTtcbiAgICBsYXN0QXJncyA9IGFyZ3M7XG4gICAgcmV0dXJuIGxhc3RSZXN1bHQ7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGdldERlcGVuZGVuY2llcyhmdW5jcykge1xuICB2YXIgZGVwZW5kZW5jaWVzID0gQXJyYXkuaXNBcnJheShmdW5jc1swXSkgPyBmdW5jc1swXSA6IGZ1bmNzO1xuXG4gIGlmICghZGVwZW5kZW5jaWVzLmV2ZXJ5KGZ1bmN0aW9uIChkZXApIHtcbiAgICByZXR1cm4gdHlwZW9mIGRlcCA9PT0gJ2Z1bmN0aW9uJztcbiAgfSkpIHtcbiAgICB2YXIgZGVwZW5kZW5jeVR5cGVzID0gZGVwZW5kZW5jaWVzLm1hcChmdW5jdGlvbiAoZGVwKSB7XG4gICAgICByZXR1cm4gdHlwZW9mIGRlcDtcbiAgICB9KS5qb2luKCcsICcpO1xuICAgIHRocm93IG5ldyBFcnJvcignU2VsZWN0b3IgY3JlYXRvcnMgZXhwZWN0IGFsbCBpbnB1dC1zZWxlY3RvcnMgdG8gYmUgZnVuY3Rpb25zLCAnICsgKCdpbnN0ZWFkIHJlY2VpdmVkIHRoZSBmb2xsb3dpbmcgdHlwZXM6IFsnICsgZGVwZW5kZW5jeVR5cGVzICsgJ10nKSk7XG4gIH1cblxuICByZXR1cm4gZGVwZW5kZW5jaWVzO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVTZWxlY3RvckNyZWF0b3IobWVtb2l6ZSkge1xuICBmb3IgKHZhciBfbGVuMiA9IGFyZ3VtZW50cy5sZW5ndGgsIG1lbW9pemVPcHRpb25zID0gQXJyYXkoX2xlbjIgPiAxID8gX2xlbjIgLSAxIDogMCksIF9rZXkyID0gMTsgX2tleTIgPCBfbGVuMjsgX2tleTIrKykge1xuICAgIG1lbW9pemVPcHRpb25zW19rZXkyIC0gMV0gPSBhcmd1bWVudHNbX2tleTJdO1xuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICBmb3IgKHZhciBfbGVuMyA9IGFyZ3VtZW50cy5sZW5ndGgsIGZ1bmNzID0gQXJyYXkoX2xlbjMpLCBfa2V5MyA9IDA7IF9rZXkzIDwgX2xlbjM7IF9rZXkzKyspIHtcbiAgICAgIGZ1bmNzW19rZXkzXSA9IGFyZ3VtZW50c1tfa2V5M107XG4gICAgfVxuXG4gICAgdmFyIHJlY29tcHV0YXRpb25zID0gMDtcbiAgICB2YXIgcmVzdWx0RnVuYyA9IGZ1bmNzLnBvcCgpO1xuICAgIHZhciBkZXBlbmRlbmNpZXMgPSBnZXREZXBlbmRlbmNpZXMoZnVuY3MpO1xuXG4gICAgdmFyIG1lbW9pemVkUmVzdWx0RnVuYyA9IG1lbW9pemUuYXBwbHkodW5kZWZpbmVkLCBbZnVuY3Rpb24gKCkge1xuICAgICAgcmVjb21wdXRhdGlvbnMrKztcbiAgICAgIHJldHVybiByZXN1bHRGdW5jLmFwcGx5KHVuZGVmaW5lZCwgYXJndW1lbnRzKTtcbiAgICB9XS5jb25jYXQobWVtb2l6ZU9wdGlvbnMpKTtcblxuICAgIHZhciBzZWxlY3RvciA9IGZ1bmN0aW9uIHNlbGVjdG9yKHN0YXRlLCBwcm9wcykge1xuICAgICAgZm9yICh2YXIgX2xlbjQgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbjQgPiAyID8gX2xlbjQgLSAyIDogMCksIF9rZXk0ID0gMjsgX2tleTQgPCBfbGVuNDsgX2tleTQrKykge1xuICAgICAgICBhcmdzW19rZXk0IC0gMl0gPSBhcmd1bWVudHNbX2tleTRdO1xuICAgICAgfVxuXG4gICAgICB2YXIgcGFyYW1zID0gZGVwZW5kZW5jaWVzLm1hcChmdW5jdGlvbiAoZGVwZW5kZW5jeSkge1xuICAgICAgICByZXR1cm4gZGVwZW5kZW5jeS5hcHBseSh1bmRlZmluZWQsIFtzdGF0ZSwgcHJvcHNdLmNvbmNhdChhcmdzKSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBtZW1vaXplZFJlc3VsdEZ1bmMuYXBwbHkodW5kZWZpbmVkLCBfdG9Db25zdW1hYmxlQXJyYXkocGFyYW1zKSk7XG4gICAgfTtcblxuICAgIHNlbGVjdG9yLnJlc3VsdEZ1bmMgPSByZXN1bHRGdW5jO1xuICAgIHNlbGVjdG9yLnJlY29tcHV0YXRpb25zID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHJlY29tcHV0YXRpb25zO1xuICAgIH07XG4gICAgc2VsZWN0b3IucmVzZXRSZWNvbXB1dGF0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiByZWNvbXB1dGF0aW9ucyA9IDA7XG4gICAgfTtcbiAgICByZXR1cm4gc2VsZWN0b3I7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVNlbGVjdG9yKCkge1xuICByZXR1cm4gY3JlYXRlU2VsZWN0b3JDcmVhdG9yKGRlZmF1bHRNZW1vaXplKS5hcHBseSh1bmRlZmluZWQsIGFyZ3VtZW50cyk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVN0cnVjdHVyZWRTZWxlY3RvcihzZWxlY3RvcnMpIHtcbiAgdmFyIHNlbGVjdG9yQ3JlYXRvciA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMSB8fCBhcmd1bWVudHNbMV0gPT09IHVuZGVmaW5lZCA/IGNyZWF0ZVNlbGVjdG9yIDogYXJndW1lbnRzWzFdO1xuXG4gIGlmICh0eXBlb2Ygc2VsZWN0b3JzICE9PSAnb2JqZWN0Jykge1xuICAgIHRocm93IG5ldyBFcnJvcignY3JlYXRlU3RydWN0dXJlZFNlbGVjdG9yIGV4cGVjdHMgZmlyc3QgYXJndW1lbnQgdG8gYmUgYW4gb2JqZWN0ICcgKyAoJ3doZXJlIGVhY2ggcHJvcGVydHkgaXMgYSBzZWxlY3RvciwgaW5zdGVhZCByZWNlaXZlZCBhICcgKyB0eXBlb2Ygc2VsZWN0b3JzKSk7XG4gIH1cbiAgdmFyIG9iamVjdEtleXMgPSBPYmplY3Qua2V5cyhzZWxlY3RvcnMpO1xuICByZXR1cm4gc2VsZWN0b3JDcmVhdG9yKG9iamVjdEtleXMubWFwKGZ1bmN0aW9uIChrZXkpIHtcbiAgICByZXR1cm4gc2VsZWN0b3JzW2tleV07XG4gIH0pLCBmdW5jdGlvbiAoKSB7XG4gICAgZm9yICh2YXIgX2xlbjUgPSBhcmd1bWVudHMubGVuZ3RoLCB2YWx1ZXMgPSBBcnJheShfbGVuNSksIF9rZXk1ID0gMDsgX2tleTUgPCBfbGVuNTsgX2tleTUrKykge1xuICAgICAgdmFsdWVzW19rZXk1XSA9IGFyZ3VtZW50c1tfa2V5NV07XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhbHVlcy5yZWR1Y2UoZnVuY3Rpb24gKGNvbXBvc2l0aW9uLCB2YWx1ZSwgaW5kZXgpIHtcbiAgICAgIGNvbXBvc2l0aW9uW29iamVjdEtleXNbaW5kZXhdXSA9IHZhbHVlO1xuICAgICAgcmV0dXJuIGNvbXBvc2l0aW9uO1xuICAgIH0sIHt9KTtcbiAgfSk7XG59XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcmVzZWxlY3QvbGliL2luZGV4LmpzXG4gKiogbW9kdWxlIGlkID0gMTYyXG4gKiogbW9kdWxlIGNodW5rcyA9IDIgMyAxMiAxMyAxNCAxNVxuICoqLyIsImltcG9ydCBSZWFjdCwgeyBDb21wb25lbnQgfSBmcm9tICdyZWFjdCdcbmltcG9ydCB7IGNvbm5lY3QgfSBmcm9tICdyZWFjdC1yZWR1eCdcbmltcG9ydCBEb2NDb250YWluZXIgZnJvbSAnLi4vLi4vY29udGFpbmVycy9Eb2NDb250YWluZXInXG5pbXBvcnQgSW5mb1RhYmxlIGZyb20gJy4uLy4uL2NvbXBvbmVudHMvSW5mb1RhYmxlJ1xuaW1wb3J0IGFwaXMgZnJvbSAnLi4vLi4vYXBpcydcbmltcG9ydCAqIGFzIHNlbGVjdG9ycyBmcm9tICcuLi8uLi9zdG9yZS9zZWxlY3RvcnMnXG5pbXBvcnQgeyBzZW5kTm90aWZpY2F0aW9uLCBmZXRjaEJvb2tzLCBvcGVuQ29uZmlybU1vZGFsLCBjbG9zZUNvbmZpcm1Nb2RhbCB9IGZyb20gJy4uLy4uL3N0b3JlL2FjdGlvbnMnXG5pbXBvcnQgQ1NTTW9kdWxlcyBmcm9tICdyZWFjdC1jc3MtbW9kdWxlcydcbmltcG9ydCBDb250ZW50UGFnZSBmcm9tICcuLi8uLi9jb21wb25lbnRzL0NvbnRlbnRQYWdlJ1xuaW1wb3J0ICogYXMgaGVscGVycyBmcm9tICcuLi8uLi9oZWxwZXJzJ1xuY29uc3Qgc3R5bGVzID0gcmVxdWlyZSgnLi9NYW5hZ2VCb29rcy5jc3MnKVxuXG5pbnRlcmZhY2UgUHJvcHMge1xuICBzZW5kTm90aWZpY2F0aW9uPzogYW55XG4gIGZldGNoQm9va3M/OiAoZGF0YT86IGZldGNoQm9va3MpID0+IHZvaWRcbiAgYm9va0xpc3ROZXdlc3Q/OiBhbnlcbiAgb3BlbkNvbmZpcm1Nb2RhbDogKGRhdGE6IG9wZW5Db25maXJtTW9kYWwpID0+IHZvaWRcbiAgY2xvc2VDb25maXJtTW9kYWw6IGFueVxuICByb3V0aW5nOiBhbnlcbn1cblxuQENTU01vZHVsZXMoc3R5bGVzLCB7XG4gIGFsbG93TXVsdGlwbGU6IHRydWVcbn0pXG5jbGFzcyBNYW5hZ2VCb29rcyBleHRlbmRzIENvbXBvbmVudDxQcm9wcywgYW55PiB7XG5cbiAgc3RhdGljIGZldGNoRGF0YSh7c3RvcmUsIHF1ZXJ5fSkge1xuICAgIHJldHVybiBzdG9yZS5kaXNwYXRjaChmZXRjaEJvb2tzKHtcbiAgICAgIHBhZ2U6IHF1ZXJ5LnBhZ2VcbiAgICB9KSlcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpXG4gIH1cblxuICBkZWxldGVCb29rKGlkLCBib29rTmFtZSkge1xuICAgIHRoaXMucHJvcHMub3BlbkNvbmZpcm1Nb2RhbCh7XG4gICAgICB0aXRsZTogJ+ehruiupOWIoOmZpCcsXG4gICAgICBjb250ZW50OiBg5bCG5Yig6Zmk44CKJHtib29rTmFtZX3jgItgLFxuICAgICAgb25Db25maXJtOiAoKSA9PiB7XG4gICAgICAgIGFwaXMuZGVsZXRlQm9vayhpZCkudGhlbihyZXMgPT4ge1xuICAgICAgICAgIHRoaXMucHJvcHMuY2xvc2VDb25maXJtTW9kYWwoKVxuICAgICAgICAgIHRoaXMucHJvcHMuc2VuZE5vdGlmaWNhdGlvbign5Yig6Zmk5oiQ5Yqf77yBJylcbiAgICAgICAgICB0aGlzLnByb3BzLmZldGNoQm9va3MoeyBtZXJnZTogZmFsc2UgfSlcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgbG9hZEJvb2tzKHByb3BzID0gdGhpcy5wcm9wcykge1xuICAgIHRoaXMucHJvcHMuZmV0Y2hCb29rcyh7XG4gICAgICBwYWdlOiBwcm9wcy5yb3V0aW5nLnF1ZXJ5LnBhZ2UgfHwgJzEnLFxuICAgICAgbWVyZ2U6IGZhbHNlXG4gICAgfSlcbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzLCBuZXh0U3RhdGUpIHtcbiAgICBoZWxwZXJzLm9uUm91dGluZ0NoYW5nZShyb3V0aW5nID0+IHtcbiAgICAgIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wID0gMFxuICAgICAgdGhpcy5sb2FkQm9va3MobmV4dFByb3BzKVxuICAgIH0pKG5leHRQcm9wcywgdGhpcy5wcm9wcylcbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIHRoaXMubG9hZEJvb2tzKClcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBsZXQgYm9va0xpc3ROZXdlc3QgPSB0aGlzLnByb3BzLmJvb2tMaXN0TmV3ZXN0ID8gdGhpcy5wcm9wcy5ib29rTGlzdE5ld2VzdCA6IG51bGxcblxuICAgIHJldHVybiAoXG4gICAgICA8RG9jQ29udGFpbmVyIHRpdGxlPVwi5Lmm57GN566h55CGXCIgYm9keUNsYXNzPVwibWFuYWdlLWJvb2tzXCI+XG4gICAgICAgIDxDb250ZW50UGFnZVxuICAgICAgICAgIHBhZ2luYXRpb249e3tcbiAgICAgICAgICAgIG5hbWU6ICdib29rcydcbiAgICAgICAgICB9fVxuICAgICAgICA+XG4gICAgICAgICAgPEluZm9UYWJsZVxuICAgICAgICAgICAgZGF0YT17Ym9va0xpc3ROZXdlc3QubWFwKGl0ZW0gPT4gKE9iamVjdC5hc3NpZ24oe30sIGl0ZW0sIHtcbiAgICAgICAgICAgICAgYXV0aG9yczogaXRlbS5hdXRob3JzID8gaXRlbS5hdXRob3JzLm1hcChhdXRob3IgPT4gYXV0aG9yLm5hbWUpLmpvaW4oJywgJykgOiAn5pyq55+l5L2c6ICFJ1xuICAgICAgICAgICAgfSkpKSB9XG4gICAgICAgICAgICBoZWFkZXI9e1tcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGtleTogJ2lkJyxcbiAgICAgICAgICAgICAgICBuYW1lOiAnSUQnXG4gICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBrZXk6ICd0aXRsZScsXG4gICAgICAgICAgICAgICAgbmFtZTogJ+S5puWQjSdcbiAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIGtleTogJ2RhdGVDcmVhdGVkJyxcbiAgICAgICAgICAgICAgICBuYW1lOiAn5Yib5bu65pel5pyfJ1xuICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAga2V5OiAnYXV0aG9ycycsXG4gICAgICAgICAgICAgICAgbmFtZTogJ+S9nOiAhSdcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXX1cbiAgICAgICAgICAgIGFjdGlvbnM9e1t7XG4gICAgICAgICAgICAgIG5hbWU6ICfliKDpmaQnLFxuICAgICAgICAgICAgICBmbjogcm93ID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZUJvb2socm93LmlkLCByb3cudGl0bGUpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1dfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgPC9Db250ZW50UGFnZT5cbiAgICAgIDwvRG9jQ29udGFpbmVyPlxuICAgIClcbiAgfVxufVxuXG5mdW5jdGlvbiBtYXBTdGF0ZVRvUHJvcHMoc3RhdGUsIG93blByb3BzKSB7XG4gIHJldHVybiB7XG4gICAgYm9va0xpc3ROZXdlc3Q6IHNlbGVjdG9ycy5ib29rc1NlbGVjdG9yKHN0YXRlKSxcbiAgICByb3V0aW5nOiBzdGF0ZS5yb3V0aW5nLmxvY2F0aW9uQmVmb3JlVHJhbnNpdGlvbnMsXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdDx7fSwge30sIHt9PihcbiAgbWFwU3RhdGVUb1Byb3BzLFxuICB7IGZldGNoQm9va3MsIHNlbmROb3RpZmljYXRpb24sIG9wZW5Db25maXJtTW9kYWwsIGNsb3NlQ29uZmlybU1vZGFsIH1cbikoTWFuYWdlQm9va3MpXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBzcmMvaXNvbW9ycGhpYy9yb3V0ZXMvTWFuYWdlQm9va3MvTWFuYWdlQm9va3MudHN4XG4gKiovIiwiaW1wb3J0IEluZm9UYWJsZSBmcm9tICcuL0luZm9UYWJsZSdcbmV4cG9ydCBkZWZhdWx0IEluZm9UYWJsZVxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogc3JjL2lzb21vcnBoaWMvY29tcG9uZW50cy9JbmZvVGFibGUvaW5kZXgudHNcbiAqKi8iLCJpbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgXyBmcm9tICdsb2Rhc2gnXG5pbXBvcnQgY2xhc3NuYW1lcyBmcm9tICdjbGFzc25hbWVzJ1xuaW1wb3J0IENTU01vZHVsZXMgZnJvbSAncmVhY3QtY3NzLW1vZHVsZXMnXG5jb25zdCBzdHlsZXMgPSByZXF1aXJlKCcuL0luZm9UYWJsZS5zY3NzJylcblxuaW50ZXJmYWNlIElQcm9wcyB7XG4gIGhlYWRlcj86IHtcbiAgICBrZXk6IHN0cmluZ1xuICAgIG5hbWU6IHN0cmluZyB8IEpTWC5FbGVtZW50XG4gIH1bXVxuICBkYXRhOiBhbnlbXVxuICAvLyB0b2RvXG4gIGVuYWJsZVRvb2x0aXA/OiBib29sZWFuXG4gIHN0eWxlPzogYW55XG4gIGFjdGlvbnM/OiB7XG4gICAgbmFtZTogc3RyaW5nIHwgSlNYLkVsZW1lbnRcbiAgICBmbjogKHJvd0RhdGE6IGFueSkgPT4gdm9pZFxuICB9W11cbiAgb3BlcmF0aW9uTGFiZWw/OiBzdHJpbmcgfCBKU1guRWxlbWVudFxufVxuXG5AQ1NTTW9kdWxlcyhzdHlsZXMpXG5jbGFzcyBJbmZvVGFibGUgZXh0ZW5kcyBDb21wb25lbnQ8SVByb3BzLCB7fT4ge1xuXG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpXG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgbGV0IHsgaGVhZGVyLCBkYXRhLCBlbmFibGVUb29sdGlwLCBzdHlsZSwgYWN0aW9ucywgb3BlcmF0aW9uTGFiZWwgfSA9IHRoaXMucHJvcHNcbiAgICBhY3Rpb25zID0gYWN0aW9ucyB8fCBbXVxuXG4gICAgaWYgKCFoZWFkZXIpIHtcbiAgICAgIGhlYWRlciA9IChkYXRhLmxlbmd0aCAhPT0gMCAmJiBfLmtleXMoZGF0YVswXSkubWFwKGtleSA9PiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAga2V5LFxuICAgICAgICAgIG5hbWU6IGtleVxuICAgICAgICB9XG4gICAgICB9KSkgfHwgW11cbiAgICB9XG5cbiAgICBjb25zdCBjbGFzc05hbWUgPSBjbGFzc25hbWVzKHtcbiAgICAgICdpbmZvLXRhYmxlJzogdHJ1ZSxcbiAgICAgICdpbmZvLXRhYmxlLS1uby1oZWFkZXInOiAhaGVhZGVyXG4gICAgfSlcblxuICAgIHJldHVybiAoXG4gICAgICA8dGFibGUgc3R5bGVOYW1lPXtjbGFzc05hbWV9IHN0eWxlPXtzdHlsZSB8fCB7fX0+XG4gICAgICAgIDx0Ym9keT5cbiAgICAgICAgICB7XG4gICAgICAgICAgICBoZWFkZXJcbiAgICAgICAgICAgICAgPyAoXG4gICAgICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBoZWFkZXIubWFwKChpdGVtLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8dGgga2V5PXtpbmRleH0+e2l0ZW0ubmFtZX08L3RoPlxuICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9ucy5sZW5ndGggIT09IDAgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgIDx0aD57IG9wZXJhdGlvbkxhYmVsIHx8ICfmk43kvZwnIH08L3RoPlxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICA6IDx0cj48L3RyPlxuICAgICAgICAgIH1cbiAgICAgICAgICB7XG4gICAgICAgICAgICBkYXRhLm1hcCgocm93LCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDx0ciBrZXk9e2luZGV4fT5cbiAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgXy5tYXAoaGVhZGVyLCAoaXRlbSwga2V5KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBrZXk9e2tleX0+e3Jvd1tpdGVtLmtleV0gJiYgcm93W2l0ZW0ua2V5XS50b1N0cmluZygpfTwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBhY3Rpb25zLmxlbmd0aCAhPT0gMCAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgPHRkXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZU5hbWU9XCJhY3Rpb25zXCJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9ucy5sZW5ndGggIT09IDAgJiYgYWN0aW9ucy5tYXAoKGFjdGlvbiwgaW5kZXgyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGVOYW1lPVwiYWN0aW9uXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpbmRleDJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2UgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbi5mbihkYXRhW2luZGV4XSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2FjdGlvbi5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgPC90Ym9keT5cbiAgICAgIDwvdGFibGU+XG4gICAgKVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEluZm9UYWJsZVxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogc3JjL2lzb21vcnBoaWMvY29tcG9uZW50cy9JbmZvVGFibGUvSW5mb1RhYmxlLnRzeFxuICoqLyIsIi8vIHJlbW92ZWQgYnkgZXh0cmFjdC10ZXh0LXdlYnBhY2stcGx1Z2luXG5tb2R1bGUuZXhwb3J0cyA9IHtcImluZm8tdGFibGUtLW5vLWhlYWRlclwiOlwiaW5mby10YWJsZS0tbm8taGVhZGVyXzJ2M3h4XCIsXCJpbmZvLXRhYmxlXCI6XCJpbmZvLXRhYmxlX0I3SllVXCIsXCJhY3Rpb25zXCI6XCJhY3Rpb25zX3BSX056XCIsXCJhY3Rpb25cIjpcImFjdGlvbl8zRExLeVwifTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL2lzb21vcnBoaWMvY29tcG9uZW50cy9JbmZvVGFibGUvSW5mb1RhYmxlLnNjc3NcbiAqKiBtb2R1bGUgaWQgPSAyMjhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMTIgMTNcbiAqKi8iLCJpbXBvcnQgQ29udGVudFBhZ2UgZnJvbSAnLi9Db250ZW50UGFnZSdcbmV4cG9ydCBkZWZhdWx0IENvbnRlbnRQYWdlXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBzcmMvaXNvbW9ycGhpYy9jb21wb25lbnRzL0NvbnRlbnRQYWdlL2luZGV4LnRzXG4gKiovIiwiaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IFBhZ2luYXRvciBmcm9tICcuLi8uLi9lbGVtZW50cy9QYWdpbmF0b3InXG5pbXBvcnQgeyBjb25uZWN0IH0gZnJvbSAncmVhY3QtcmVkdXgnXG5pbXBvcnQgKiBhcyBzZWxlY3RvcnMgZnJvbSAnLi4vLi4vc3RvcmUvc2VsZWN0b3JzJ1xuXG50eXBlIFBhZ2luYXRpb25MaW5rID0ge1xuICBwYWdlOiBudW1iZXJcbiAgdXJsOiBzdHJpbmdcbn1cblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgcGFnaW5hdGlvbjoge1xuICAgIG5hbWU6IHN0cmluZ1xuICAgIGtleT86IHN0cmluZ1xuICB9XG59XG5cbmludGVyZmFjZSBBbGxQcm9wcyBleHRlbmRzIFByb3BzIHtcbiAgcm91dGluZzogYW55XG4gIHBhZ2luYXRpb25MaW5rczoge1xuICAgIG5leHQ/OiBQYWdpbmF0aW9uTGlua1xuICAgIGxhc3Q6IFBhZ2luYXRpb25MaW5rXG4gIH1cbn1cblxuY2xhc3MgQ29udGVudFBhZ2UgZXh0ZW5kcyBDb21wb25lbnQ8QWxsUHJvcHMsIHt9PiB7XG5cbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcylcbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHsgY2hpbGRyZW4sIHJvdXRpbmcsIHBhZ2luYXRpb25MaW5rczogeyBuZXh0LCBsYXN0IH0gfSA9IHRoaXMucHJvcHNcbiAgICBjb25zdCBhbGwgPSBsYXN0ICYmIGxhc3QucGFnZSB8fCAxXG4gICAgY29uc3QgY3VycmVudCA9IG5leHRcbiAgICAgID8gbmV4dC5wYWdlIC0gMVxuICAgICAgOiBhbGxcblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2PlxuICAgICAgICB7Y2hpbGRyZW59XG4gICAgICAgIDxQYWdpbmF0b3JcbiAgICAgICAgICBhbGw9e2FsbH1cbiAgICAgICAgICBjdXJyZW50PXtjdXJyZW50fVxuICAgICAgICAgIHVybD17e1xuICAgICAgICAgICAgcGF0aG5hbWU6IHJvdXRpbmcucGF0aG5hbWUsXG4gICAgICAgICAgICBxdWVyeTogcm91dGluZy5xdWVyeSB8fCB7fVxuICAgICAgICAgIH19XG4gICAgICAgICAgLz5cbiAgICAgIDwvZGl2PlxuICAgIClcbiAgfVxufVxuXG5jb25zdCBtYXBTdGF0ZVRvUHJvcHMgPSAoc3RhdGUsIG93blByb3BzKSA9PiB7XG4gIGNvbnN0IHsgcGFnaW5hdGlvbjogeyBuYW1lLCBrZXkgfSB9ID0gb3duUHJvcHNcblxuICByZXR1cm4ge1xuICAgIHJvdXRpbmc6IHN0YXRlLnJvdXRpbmcubG9jYXRpb25CZWZvcmVUcmFuc2l0aW9ucyB8fCB7fSxcbiAgICBwYWdpbmF0aW9uTGlua3M6IHNlbGVjdG9ycy5wYWdpbmF0aW9uTGlua1NlbGVjdG9yKG5hbWUsIGtleSkoc3RhdGUpXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdDx7fSwge30sIFByb3BzPihcbiAgbWFwU3RhdGVUb1Byb3BzLFxuICB7fVxuKShDb250ZW50UGFnZSlcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHNyYy9pc29tb3JwaGljL2NvbXBvbmVudHMvQ29udGVudFBhZ2UvQ29udGVudFBhZ2UudHN4XG4gKiovIiwiaW1wb3J0IFBhZ2luYXRvciBmcm9tICcuL1BhZ2luYXRvcidcbmV4cG9ydCBkZWZhdWx0IFBhZ2luYXRvclxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogc3JjL2lzb21vcnBoaWMvZWxlbWVudHMvUGFnaW5hdG9yL2luZGV4LnRzXG4gKiovIiwiaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgTGluayB9IGZyb20gJ3JlYWN0LXJvdXRlcidcbmltcG9ydCBfIGZyb20gJ2xvZGFzaCdcbmltcG9ydCB1dGlscyBmcm9tICcuLi8uLi91dGlscydcbmltcG9ydCBDU1NNb2R1bGVzIGZyb20gJ3JlYWN0LWNzcy1tb2R1bGVzJ1xuY29uc3Qgc3R5bGVzID0gcmVxdWlyZSgnLi9QYWdpbmF0b3Iuc2NzcycpXG5cbi8qIOagl+WtkCDwn4ywXG4gKiByYW5nZSA9IDJcbiAqIHwgcmFuZ2UgfCBjdXJyZW50IHwgcmFuZ2dlIHxcbiAqICAgMiwgMywgICAgIFs0XSwgICAgIDUsIDZcbiAqL1xuXG50eXBlIE9qYiA9IHtcbiAgW2tleTogc3RyaW5nXTogc3RyaW5nXG59XG5cbmludGVyZmFjZSBQcm9wcyB7XG4gIGFsbDogbnVtYmVyXG4gIGN1cnJlbnQ6IG51bWJlclxuICByYW5nZT86IG51bWJlciAvLyBkZWZhdWx0IDNcbiAgdXJsOiB7XG4gICAgcGF0aG5hbWU6IHN0cmluZ1xuICAgIHF1ZXJ5OiBPYmplY3RcbiAgfVxuICB1cmxTdHlsZT86ICdxdWVyeScgfCAnc2xhc2gnXG59XG5cbkBDU1NNb2R1bGVzKHN0eWxlcylcbmNsYXNzIFBhZ2luYXRvciBleHRlbmRzIENvbXBvbmVudDxQcm9wcywge30+IHtcblxuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKVxuICB9XG5cbiAgcGFyc2VVcmwocGF0aG5hbWU6IHN0cmluZywgcXVlcnk6IE9iamVjdCwgcGFnZU51bSkge1xuICAgIGxldCB1cmxTdHlsZSA9IHRoaXMucHJvcHMudXJsU3R5bGVcbiAgICAgID8gdGhpcy5wcm9wcy51cmxTdHlsZVxuICAgICAgOiAncXVlcnknXG5cbiAgICBpZiAodXJsU3R5bGUgPT09ICdxdWVyeScpIHtcbiAgICAgIGxldCBxdWVyeVBhcnQgPSB1dGlscy5wYXJzZUZvcm1EYXRhKF8ub21pdChxdWVyeSwgWydwYWdlJ10pKVxuICAgICAgcmV0dXJuIGAke3BhdGhuYW1lfSR7cXVlcnlQYXJ0ID8gYD8ke3F1ZXJ5UGFydH0mYCA6ICc/J31wYWdlPSR7cGFnZU51bX1gXG4gICAgfVxuXG4gICAgbGV0IHF1ZXJ5UGFydCA9IHV0aWxzLnBhcnNlRm9ybURhdGEocXVlcnkpXG4gICAgcmV0dXJuIGAke3BhdGhuYW1lfS9wYWdlLyR7cGFnZU51bX0/JHtxdWVyeVBhcnR9YFxuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHJhbmdlID0gdGhpcy5wcm9wcy5yYW5nZSA/IHRoaXMucHJvcHMucmFuZ2UgOiAzXG4gICAgY29uc3QgdG90YWxSYW5nZUVuZEluZGV4ID0gdGhpcy5wcm9wcy5hbGwgLSAxXG4gICAgY29uc3QgY3VycmVudEluZGV4ID0gcGFyc2VJbnQodGhpcy5wcm9wcy5jdXJyZW50IGFzIGFueSkgLSAxXG4gICAgbGV0IHJhbmdlU3RhcnRJbmRleCA9IGN1cnJlbnRJbmRleCAtIHJhbmdlXG4gICAgbGV0IHJhbmdlRW5kSW5kZXggPSBjdXJyZW50SW5kZXggKyByYW5nZVxuICAgIGxldCBsZWZ0U3ByZWFkID0gZmFsc2VcbiAgICBsZXQgcmlnaHRTcHJlYWQgPSBmYWxzZVxuICAgIGxldCBwYWdlcyA9IFtdXG4gICAgbGV0IHVybCA9IHRoaXMucHJvcHMudXJsXG5cbiAgICBpZiAodHlwZW9mIHRoaXMucHJvcHMuYWxsICE9PSAnbnVtYmVyJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdhbGwg5b+F6aG75Li6IG51bWJlciDnsbvlnovvvIEnKVxuICAgIH1cblxuICAgIC8vIOmqjOivgVxuICAgIGlmICh0eXBlb2YgY3VycmVudEluZGV4ICE9PSAnbnVtYmVyJykge1xuICAgICAgY29uc29sZS5lcnJvcihg6aG156CB5b+F6aG75Li65pWw5a2X77yM5Y205b6X5YiwICR7dHlwZW9mIGN1cnJlbnRJbmRleH1gKVxuICAgIH1cbiAgICBpZiAoY3VycmVudEluZGV4ID4gcmFuZ2VFbmRJbmRleCB8fCBjdXJyZW50SW5kZXggPCAwKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfpobXnoIHkuI3og73lpKfkuo7miYDmnInpobXpnaLmlbDnm67miJblsI/kuo4gMe+8gScpXG4gICAgfVxuXG4gICAgaWYgKHJhbmdlICogMiArIDEgPj0gdG90YWxSYW5nZUVuZEluZGV4KSB7XG4gICAgICAvLyDmgLvplb/luqblsI/kuo4gcmFuZ2Ug55u05b6EXG4gICAgICByYW5nZUVuZEluZGV4ID0gdG90YWxSYW5nZUVuZEluZGV4XG4gICAgICByYW5nZVN0YXJ0SW5kZXggPSAwXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIOWkhOeQhuWPs+S+p+a6ouWHulxuICAgICAgaWYgKHJhbmdlRW5kSW5kZXggPj0gdG90YWxSYW5nZUVuZEluZGV4KSB7XG4gICAgICAgIHJhbmdlRW5kSW5kZXggPSB0b3RhbFJhbmdlRW5kSW5kZXhcbiAgICAgICAgcmFuZ2VTdGFydEluZGV4ID0gdG90YWxSYW5nZUVuZEluZGV4IC0gKHJhbmdlICogMiArIDEpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByaWdodFNwcmVhZCA9IHRydWVcbiAgICAgIH1cblxuICAgICAgaWYgKHJhbmdlU3RhcnRJbmRleCA8PSAwKSB7XG4gICAgICAgIHJhbmdlU3RhcnRJbmRleCA9IDBcbiAgICAgICAgcmFuZ2VFbmRJbmRleCA9IHJhbmdlICogMiArIDFcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxlZnRTcHJlYWQgPSB0cnVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSA9IHJhbmdlU3RhcnRJbmRleDsgaSA8PSByYW5nZUVuZEluZGV4OyBpKyspIHtcbiAgICAgIHBhZ2VzID0gcGFnZXMuY29uY2F0KFt7XG4gICAgICAgIHBhZ2VOdW06IGkgKyAxLFxuICAgICAgICBpc0N1cnJlbnQ6IGkgPT09IGN1cnJlbnRJbmRleFxuICAgICAgfV0pXG4gICAgfVxuXG4gICAgLy8gYWRkIHNwcmVhZFxuICAgIGlmIChsZWZ0U3ByZWFkKSB7XG4gICAgICBjb25zdCBzcGQgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICBwYWdlTnVtOiAxXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBpc1NwcmVhZDogdHJ1ZVxuICAgICAgICB9XG4gICAgICBdXG4gICAgICBwYWdlcyA9IHNwZC5jb25jYXQocGFnZXMpXG4gICAgfVxuXG4gICAgaWYgKHJpZ2h0U3ByZWFkKSB7XG4gICAgICBjb25zdCBzcGQgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICBpc1NwcmVhZDogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgcGFnZU51bTogdG90YWxSYW5nZUVuZEluZGV4ICsgMVxuICAgICAgICB9XG4gICAgICBdXG4gICAgICBwYWdlcyA9IHBhZ2VzLmNvbmNhdChzcGQpXG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMucHJvcHMuYWxsICE9PSAxICYmIChcbiAgICAgICAgPGRpdiBzdHlsZU5hbWU9XCJwYWdpbmF0b3JcIj5cbiAgICAgICAgICA8dWw+XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHBhZ2VzLm1hcCgocGFnZSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocGFnZS5pc0N1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgIDxsaSBrZXk9e2luZGV4fSBzdHlsZU5hbWU9XCJwYWdlLW51bS0tY3VycmVudFwiPntwYWdlLnBhZ2VOdW19PC9saT5cbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHBhZ2UuaXNTcHJlYWQpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgIDxsaSBrZXk9e2luZGV4fSBzdHlsZU5hbWU9XCJwYWdlLXNwcmVhZFwiPi4uLjwvbGk+XG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgIDxsaSBrZXk9e2luZGV4fSBzdHlsZU5hbWU9XCJwYWdlLW51bVwiPjxMaW5rIHRvPXt0aGlzLnBhcnNlVXJsKHVybC5wYXRobmFtZSwgdXJsLnF1ZXJ5LCBwYWdlLnBhZ2VOdW0pIH0+e3BhZ2UucGFnZU51bX08L0xpbms+PC9saT5cbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgPC91bD5cbiAgICAgICAgPC9kaXY+XG4gICAgICApXG4gICAgKVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBhZ2luYXRvclxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogc3JjL2lzb21vcnBoaWMvZWxlbWVudHMvUGFnaW5hdG9yL1BhZ2luYXRvci50c3hcbiAqKi8iLCIvLyByZW1vdmVkIGJ5IGV4dHJhY3QtdGV4dC13ZWJwYWNrLXBsdWdpblxubW9kdWxlLmV4cG9ydHMgPSB7XCJwYWdlLXNwcmVhZFwiOlwicGFnZS1zcHJlYWRfMklOSFVcIixcInBhZ2UtbnVtXCI6XCJwYWdlLW51bV8yb1BRVVwiLFwicGFnZS1udW0tLWN1cnJlbnRcIjpcInBhZ2UtbnVtLS1jdXJyZW50XzFZMm1FXCIsXCJwYWdpbmF0b3JcIjpcInBhZ2luYXRvcl8xUkhBbVwifTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL2lzb21vcnBoaWMvZWxlbWVudHMvUGFnaW5hdG9yL1BhZ2luYXRvci5zY3NzXG4gKiogbW9kdWxlIGlkID0gMjMzXG4gKiogbW9kdWxlIGNodW5rcyA9IDEyIDEzXG4gKiovIiwiZXhwb3J0ICogZnJvbSAnLi9saWZlY2lyY2xlJ1xuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHNyYy9pc29tb3JwaGljL2hlbHBlcnMvaW5kZXgudHNcbiAqKi8iLCJpbXBvcnQgXyBmcm9tICdsb2Rhc2gnXG5cbi8vIOajgOafpSBzdG9yZSDph4zpnaLnmoQgcm91dGluZyDmmK/lkKblj5jljJZcbmV4cG9ydCBjb25zdCBvblJvdXRpbmdDaGFuZ2UgPSBmbiA9PiAobmV4dFByb3BzLCBjdXJyZW50UHJvcHMpID0+IHtcbiAgaWYgKCFjdXJyZW50UHJvcHMucm91dGluZykge1xuICAgIGNvbnNvbGUuZXJyb3IoJ3JvdXRpbmcg6ZyA6KaB546w5Zyo57uE5Lu2IHByb3BzIOmHjOmdouWjsOaYju+8gScpXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBjb25zdCBoYXNQYXRoUGFyYW1DaGFuZ2VkID0gIV8uaXNFcXVhbChuZXh0UHJvcHMucm91dGluZywgY3VycmVudFByb3BzLnJvdXRpbmcpXG5cbiAgaWYgKGhhc1BhdGhQYXJhbUNoYW5nZWQpIHtcbiAgICBmbihuZXh0UHJvcHMucm91dGluZylcbiAgfVxufVxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogc3JjL2lzb21vcnBoaWMvaGVscGVycy9saWZlY2lyY2xlLnRzXG4gKiovIl0sInNvdXJjZVJvb3QiOiIifQ==