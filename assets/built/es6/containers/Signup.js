import React, { Component } from 'react';
import { connect } from 'react-redux';
import { Link, browserHistory } from 'react-router';
import ApiRoots from 'constants/ApiRoots';
import callApi from 'utils/callApi';
import { handleNotification } from 'actions/index';
import Notification from 'components/Notification';
import Branding from 'components/Branding';
import Input from 'elements/Input';
import Button from 'elements/Button';
import Container from 'elements/Container';
import Body from 'side-effects/Body';
class Signup extends Component {
    constructor(props) {
        super(props);
        this.state = {
            username: "",
            email: "",
            password: ""
        };
    }
    handleSignup(event) {
        event.preventDefault();
        let params = {
            username: this.state.username,
            email: this.state.email,
            password: this.state.password
        };
        callApi({ fullUrl: `${ApiRoots.LOCAL}users`, method: 'POST', data: params })
            .then(res => {
            this.props.handleNotification('注册成功！');
            setTimeout(function () {
                browserHistory.push('/');
            }, 600);
        }, err => {
            this.props.handleNotification(err.message);
        });
    }
    handleInput(event) {
        this.setState({ [event.target.name]: event.target.value });
    }
    render() {
        return (React.createElement("div", null, React.createElement(Body, {className: "signup"}), React.createElement(Branding, null), React.createElement(Container, null, React.createElement("form", {className: "content-container", method: "post", action: "/signup"}, React.createElement(Notification, {notification: this.props.notification}), React.createElement("h1", {className: "page-title"}, "加入 Readr"), React.createElement(Input, {onChange: this.handleInput.bind(this), value: this.state.username, name: "username", placeholder: "用户名"}), React.createElement(Input, {onChange: this.handleInput.bind(this), value: this.state.email, name: "email", placeholder: "邮箱"}), React.createElement(Input, {onChange: this.handleInput.bind(this), value: this.state.password, name: "password", placeholder: "密码 ", type: "password"}), React.createElement(Button, {className: "z1", color: "blue", onClick: this.handleSignup.bind(this)}, "注册"), React.createElement("p", {className: "hint"}, "没有账号？", React.createElement(Link, {to: "/signin"}, "登录"))))));
    }
}
export default connect(state => ({
    notification: state.components.notification,
    user: state.user
}), { handleNotification })(Signup);

//# sourceMappingURL=data:application/json;base64,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QUFJLENBQUMsSUFBSSxDQUFFLEVBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBTSxFQUFDLElBQUksRUFBQyxPQUFPLEVBQUMsV0FBVyxFQUFDLElBQUksRUFBRyxFQUN2RyxvQkFBQyxLQUFLLEdBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBRSxFQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVMsRUFBQyxJQUFJLEVBQUMsVUFBVSxFQUFDLFdBQVcsRUFBQyxLQUFLLEVBQUEsSUFBSSxFQUFDLFVBQVUsRUFBRyxFQUM3SCxvQkFBQyxNQUFNLEdBQUMsU0FBUyxFQUFDLElBQUksRUFBQyxLQUFLLEVBQUMsTUFBTSxFQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUUsUUFBWSxFQUN0RixxQkFBQyxDQUFDLElBQUMsU0FBUyxFQUFDLE1BQU0sWUFBTSxvQkFBQyxJQUFJLEdBQUMsRUFBRSxFQUFDLFNBQVMsUUFBVSxDQUFJLENBQ3BELENBQ0csQ0FDUixDQUNQLENBQUE7SUFDSCxDQUFDO0FBQ0gsQ0FBQztBQUVELGVBQWUsT0FBTyxDQUNwQixLQUFLLElBQUksQ0FBQztJQUNSLFlBQVksRUFBRSxLQUFLLENBQUMsVUFBVSxDQUFDLFlBQVk7SUFDM0MsSUFBSSxFQUFFLEtBQUssQ0FBQyxJQUFJO0NBQ2pCLENBQUMsRUFDRixFQUFFLGtCQUFrQixFQUFTLENBQzlCLENBQUMsTUFBTSxDQUFDLENBQUEiLCJmaWxlIjoiY29udGFpbmVycy9TaWdudXAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyBjb25uZWN0IH0gZnJvbSAncmVhY3QtcmVkdXgnXG5pbXBvcnQgeyBMaW5rLCBicm93c2VySGlzdG9yeSB9IGZyb20gJ3JlYWN0LXJvdXRlcidcbmltcG9ydCBBcGlSb290cyBmcm9tICdjb25zdGFudHMvQXBpUm9vdHMnXG5pbXBvcnQgY2FsbEFwaSBmcm9tICd1dGlscy9jYWxsQXBpJ1xuaW1wb3J0IHsgaGFuZGxlTm90aWZpY2F0aW9uIH0gZnJvbSAnYWN0aW9ucy9pbmRleCdcbmltcG9ydCBOb3RpZmljYXRpb24gZnJvbSAnY29tcG9uZW50cy9Ob3RpZmljYXRpb24nXG5pbXBvcnQgQnJhbmRpbmcgZnJvbSAnY29tcG9uZW50cy9CcmFuZGluZydcbmltcG9ydCBJbnB1dCBmcm9tICdlbGVtZW50cy9JbnB1dCdcbmltcG9ydCBCdXR0b24gZnJvbSAnZWxlbWVudHMvQnV0dG9uJ1xuaW1wb3J0IENvbnRhaW5lciBmcm9tICdlbGVtZW50cy9Db250YWluZXInXG5pbXBvcnQgQm9keSBmcm9tICdzaWRlLWVmZmVjdHMvQm9keSdcblxuY2xhc3MgU2lnbnVwIGV4dGVuZHMgQ29tcG9uZW50PGFueSwgYW55PiB7XG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpXG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIHVzZXJuYW1lOiBcIlwiLFxuICAgICAgZW1haWw6IFwiXCIsXG4gICAgICBwYXNzd29yZDogXCJcIlxuICAgIH1cbiAgfVxuXG4gIGhhbmRsZVNpZ251cChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcblxuICAgIGxldCBwYXJhbXMgPSB7XG4gICAgICB1c2VybmFtZTogdGhpcy5zdGF0ZS51c2VybmFtZSxcbiAgICAgIGVtYWlsOiB0aGlzLnN0YXRlLmVtYWlsLFxuICAgICAgcGFzc3dvcmQ6IHRoaXMuc3RhdGUucGFzc3dvcmRcbiAgICB9XG5cbiAgICBjYWxsQXBpKHsgZnVsbFVybDogYCR7QXBpUm9vdHMuTE9DQUx9dXNlcnNgLCBtZXRob2Q6ICdQT1NUJywgZGF0YTogcGFyYW1zIH0pXG4gICAgICAudGhlbihyZXMgPT4ge1xuICAgICAgICB0aGlzLnByb3BzLmhhbmRsZU5vdGlmaWNhdGlvbign5rOo5YaM5oiQ5Yqf77yBJylcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgIGJyb3dzZXJIaXN0b3J5LnB1c2goJy8nKVxuICAgICAgICB9LCA2MDApXG4gICAgICB9LCBlcnIgPT4ge1xuICAgICAgICB0aGlzLnByb3BzLmhhbmRsZU5vdGlmaWNhdGlvbihlcnIubWVzc2FnZSlcbiAgICAgIH0pXG4gIH1cblxuICBoYW5kbGVJbnB1dChldmVudCkge1xuICAgIHRoaXMuc2V0U3RhdGUoe1tldmVudC50YXJnZXQubmFtZV06IGV2ZW50LnRhcmdldC52YWx1ZX0pXG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXY+XG4gICAgICAgIDxCb2R5IGNsYXNzTmFtZT1cInNpZ251cFwiIC8+XG4gICAgICAgIDxCcmFuZGluZyAvPlxuICAgICAgICA8Q29udGFpbmVyPlxuICAgICAgICAgIDxmb3JtIGNsYXNzTmFtZT1cImNvbnRlbnQtY29udGFpbmVyXCIgbWV0aG9kPVwicG9zdFwiIGFjdGlvbj1cIi9zaWdudXBcIj5cbiAgICAgICAgICAgIDxOb3RpZmljYXRpb24gbm90aWZpY2F0aW9uPXt0aGlzLnByb3BzLm5vdGlmaWNhdGlvbn0gLz5cbiAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJwYWdlLXRpdGxlXCI+5Yqg5YWlIFJlYWRyPC9oMT5cbiAgICAgICAgICAgIDxJbnB1dCBvbkNoYW5nZT17dGhpcy5oYW5kbGVJbnB1dC5iaW5kKHRoaXMpfSB2YWx1ZT17dGhpcy5zdGF0ZS51c2VybmFtZX0gbmFtZT1cInVzZXJuYW1lXCIgcGxhY2Vob2xkZXI9XCLnlKjmiLflkI1cIiAvPlxuICAgICAgICAgICAgPElucHV0IG9uQ2hhbmdlPXt0aGlzLmhhbmRsZUlucHV0LmJpbmQodGhpcyl9IHZhbHVlPXt0aGlzLnN0YXRlLmVtYWlsfSBuYW1lPVwiZW1haWxcIiBwbGFjZWhvbGRlcj1cIumCrueusVwiIC8+XG4gICAgICAgICAgICA8SW5wdXQgb25DaGFuZ2U9e3RoaXMuaGFuZGxlSW5wdXQuYmluZCh0aGlzKX0gdmFsdWU9e3RoaXMuc3RhdGUucGFzc3dvcmR9IG5hbWU9XCJwYXNzd29yZFwiIHBsYWNlaG9sZGVyPVwi5a+G56CBIFwidHlwZT1cInBhc3N3b3JkXCIgLz5cbiAgICAgICAgICAgIDxCdXR0b24gY2xhc3NOYW1lPVwiejFcIiBjb2xvcj1cImJsdWVcIiBvbkNsaWNrPXt0aGlzLmhhbmRsZVNpZ251cC5iaW5kKHRoaXMpfT7ms6jlhow8L0J1dHRvbj5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cImhpbnRcIj7msqHmnInotKblj7fvvJ88TGluayB0bz1cIi9zaWduaW5cIj7nmbvlvZU8L0xpbms+PC9wPlxuICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgPC9Db250YWluZXI+XG4gICAgICA8L2Rpdj5cbiAgICApXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdChcbiAgc3RhdGUgPT4gKHtcbiAgICBub3RpZmljYXRpb246IHN0YXRlLmNvbXBvbmVudHMubm90aWZpY2F0aW9uLFxuICAgIHVzZXI6IHN0YXRlLnVzZXJcbiAgfSksXG4gIHsgaGFuZGxlTm90aWZpY2F0aW9uIH0gYXMgYW55XG4pKFNpZ251cClcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
