import React, { Component } from 'react';
import { connect } from 'react-redux';
import { Link, browserHistory } from 'react-router';
import ApiRoots from 'constants/ApiRoots';
import callApi from 'utils/callApi';
import { handleNotification } from 'actions/index';
import Notification from 'components/Notification';
import Branding from 'components/Branding';
import Input from 'elements/Input';
import Button from 'elements/Button';
import Container from 'elements/Container';
import Body from 'side-effects/Body';
class Signin extends Component {
    constructor(props) {
        super(props);
        this.state = {
            login: '',
            password: ''
        };
    }
    handleSignin(event) {
        event.preventDefault();
        let params = {
            login: this.state.login,
            password: this.state.password
        };
        callApi({ fullUrl: `${ApiRoots.LOCAL}auth`, method: 'POST', data: params }).then(res => {
            this.props.handleNotification('登录成功！');
            setTimeout(function () {
                browserHistory.push('/');
            }, 600);
        }).catch((err) => {
            this.props.handleNotification(err.message);
        });
    }
    handleInput(event) {
        this.setState({ [event.target.name]: event.target.value });
    }
    render() {
        return (React.createElement("div", null, React.createElement(Body, {className: "signin"}), React.createElement(Branding, null), React.createElement(Container, null, React.createElement("form", {className: "content-container", action: `${ApiRoots.LOCAL}auth`, method: "post"}, React.createElement(Notification, {notification: this.props.notification}), React.createElement("h1", {className: "page-title"}, "欢迎回来"), React.createElement(Input, {onChange: this.handleInput.bind(this), value: this.state.login, name: "login", placeholder: "用户名或邮箱"}), React.createElement(Input, {onChange: this.handleInput.bind(this), value: this.state.password, name: "password", placeholder: "密码", type: "password"}), React.createElement(Button, {className: "z1", color: "blue", onClick: this.handleSignin.bind(this)}, "登录"), React.createElement("p", {className: "hint"}, "没有账号？", React.createElement(Link, {to: "/signup"}, "注册"))))));
    }
}
export default connect(state => ({
    notification: state.components.notification,
    user: state.user
}), { handleNotification })(Signin);

//# sourceMappingURL=data:application/json;base64,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QUMsS0FBSyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUyxFQUFDLElBQUksRUFBQyxVQUFVLEVBQUMsV0FBVyxFQUFDLElBQUksRUFBQyxJQUFJLEVBQUMsVUFBVSxFQUFHLEVBQzdILG9CQUFDLE1BQU0sR0FBQyxTQUFTLEVBQUMsSUFBSSxFQUFDLEtBQUssRUFBQyxNQUFNLEVBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBRSxRQUFZLEVBQ3RGLHFCQUFDLENBQUMsSUFBQyxTQUFTLEVBQUMsTUFBTSxZQUFNLG9CQUFDLElBQUksR0FBQyxFQUFFLEVBQUMsU0FBUyxRQUFVLENBQUksQ0FDcEQsQ0FDRyxDQUNSLENBQ1AsQ0FBQTtJQUNILENBQUM7QUFDSCxDQUFDO0FBRUQsZUFBZSxPQUFPLENBQ3BCLEtBQUssSUFBSSxDQUFDO0lBQ1IsWUFBWSxFQUFFLEtBQUssQ0FBQyxVQUFVLENBQUMsWUFBWTtJQUMzQyxJQUFJLEVBQUUsS0FBSyxDQUFDLElBQUk7Q0FDakIsQ0FBQyxFQUNGLEVBQUUsa0JBQWtCLEVBQVMsQ0FDOUIsQ0FBQyxNQUFNLENBQUMsQ0FBQSIsImZpbGUiOiJjb250YWluZXJzL1NpZ25pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyBDb21wb25lbnQgfSBmcm9tICdyZWFjdCdcbmltcG9ydCB7IGNvbm5lY3QgfSBmcm9tICdyZWFjdC1yZWR1eCdcbmltcG9ydCB7IExpbmssIGJyb3dzZXJIaXN0b3J5IH0gZnJvbSAncmVhY3Qtcm91dGVyJ1xuaW1wb3J0IEFwaVJvb3RzIGZyb20gJ2NvbnN0YW50cy9BcGlSb290cydcbmltcG9ydCBjYWxsQXBpIGZyb20gJ3V0aWxzL2NhbGxBcGknXG5pbXBvcnQgeyBoYW5kbGVOb3RpZmljYXRpb24gfSBmcm9tICdhY3Rpb25zL2luZGV4J1xuaW1wb3J0IE5vdGlmaWNhdGlvbiBmcm9tICdjb21wb25lbnRzL05vdGlmaWNhdGlvbidcbmltcG9ydCBCcmFuZGluZyBmcm9tICdjb21wb25lbnRzL0JyYW5kaW5nJ1xuaW1wb3J0IElucHV0IGZyb20gJ2VsZW1lbnRzL0lucHV0J1xuaW1wb3J0IEJ1dHRvbiBmcm9tICdlbGVtZW50cy9CdXR0b24nXG5pbXBvcnQgQ29udGFpbmVyIGZyb20gJ2VsZW1lbnRzL0NvbnRhaW5lcidcbmltcG9ydCBCb2R5IGZyb20gJ3NpZGUtZWZmZWN0cy9Cb2R5J1xuXG5jbGFzcyBTaWduaW4gZXh0ZW5kcyBDb21wb25lbnQ8YW55LCBhbnk+IHtcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcylcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgbG9naW46ICcnLFxuICAgICAgcGFzc3dvcmQ6ICcnXG4gICAgfVxuICB9XG5cbiAgaGFuZGxlU2lnbmluKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgbGV0IHBhcmFtcyA9IHtcbiAgICAgIGxvZ2luOiB0aGlzLnN0YXRlLmxvZ2luLFxuICAgICAgcGFzc3dvcmQ6IHRoaXMuc3RhdGUucGFzc3dvcmRcbiAgICB9XG5cbiAgICBjYWxsQXBpKHsgZnVsbFVybDogYCR7QXBpUm9vdHMuTE9DQUx9YXV0aGAsIG1ldGhvZDogJ1BPU1QnLCBkYXRhOiBwYXJhbXMgfSkudGhlbihyZXMgPT4ge1xuICAgICAgdGhpcy5wcm9wcy5oYW5kbGVOb3RpZmljYXRpb24oJ+eZu+W9leaIkOWKn++8gScpXG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgIGJyb3dzZXJIaXN0b3J5LnB1c2goJy8nKVxuICAgICAgfSwgNjAwKVxuICAgIH0pLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIHRoaXMucHJvcHMuaGFuZGxlTm90aWZpY2F0aW9uKGVyci5tZXNzYWdlKVxuICAgIH0pXG4gIH1cblxuICBoYW5kbGVJbnB1dChldmVudCkge1xuICAgIHRoaXMuc2V0U3RhdGUoe1tldmVudC50YXJnZXQubmFtZV06IGV2ZW50LnRhcmdldC52YWx1ZX0pXG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXY+XG4gICAgICAgIDxCb2R5IGNsYXNzTmFtZT1cInNpZ25pblwiIC8+XG4gICAgICAgIDxCcmFuZGluZyAvPlxuICAgICAgICA8Q29udGFpbmVyPlxuICAgICAgICAgIDxmb3JtIGNsYXNzTmFtZT1cImNvbnRlbnQtY29udGFpbmVyXCIgYWN0aW9uPXtgJHtBcGlSb290cy5MT0NBTH1hdXRoYH0gbWV0aG9kPVwicG9zdFwiPlxuICAgICAgICAgICAgPE5vdGlmaWNhdGlvbiBub3RpZmljYXRpb249e3RoaXMucHJvcHMubm90aWZpY2F0aW9ufSAvPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cInBhZ2UtdGl0bGVcIj7mrKLov47lm57mnaU8L2gxPlxuICAgICAgICAgICAgPElucHV0IG9uQ2hhbmdlPXt0aGlzLmhhbmRsZUlucHV0LmJpbmQodGhpcyl9IHZhbHVlPXt0aGlzLnN0YXRlLmxvZ2lufSBuYW1lPVwibG9naW5cIiBwbGFjZWhvbGRlcj1cIueUqOaIt+WQjeaIlumCrueusVwiIC8+XG4gICAgICAgICAgICA8SW5wdXQgb25DaGFuZ2U9e3RoaXMuaGFuZGxlSW5wdXQuYmluZCh0aGlzKX0gdmFsdWU9e3RoaXMuc3RhdGUucGFzc3dvcmR9IG5hbWU9XCJwYXNzd29yZFwiIHBsYWNlaG9sZGVyPVwi5a+G56CBXCIgdHlwZT1cInBhc3N3b3JkXCIgLz5cbiAgICAgICAgICAgIDxCdXR0b24gY2xhc3NOYW1lPVwiejFcIiBjb2xvcj1cImJsdWVcIiBvbkNsaWNrPXt0aGlzLmhhbmRsZVNpZ25pbi5iaW5kKHRoaXMpfT7nmbvlvZU8L0J1dHRvbj5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cImhpbnRcIj7msqHmnInotKblj7fvvJ88TGluayB0bz1cIi9zaWdudXBcIj7ms6jlhow8L0xpbms+PC9wPlxuICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgPC9Db250YWluZXI+XG4gICAgICA8L2Rpdj5cbiAgICApXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdChcbiAgc3RhdGUgPT4gKHtcbiAgICBub3RpZmljYXRpb246IHN0YXRlLmNvbXBvbmVudHMubm90aWZpY2F0aW9uLFxuICAgIHVzZXI6IHN0YXRlLnVzZXJcbiAgfSksXG4gIHsgaGFuZGxlTm90aWZpY2F0aW9uIH0gYXMgYW55XG4pKFNpZ25pbilcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
