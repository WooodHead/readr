webpackJsonp([13],{160:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.common=t.usersSelector=t.booksSelector=t.booksSearchAsOptions=t.authorsAsOptions=t.doubanBooksAsOptions=t.searchBooksSelector=t.queryAuthorsSelector=t.queryDoubanBooksSelector=void 0;var o=n(161);Object.keys(o).forEach(function(e){"default"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})});var u=n(162),a=r(o),i=t.queryDoubanBooksSelector=function(e){return(0,u.createSelector)((0,o.selectPaginatedEntities)({entitiesName:"doubanBooks",paginationName:"doubanBooks",paginationQuery:e}),function(e){return e})},c=t.queryAuthorsSelector=function(e){return(0,o.selectPaginatedEntities)({entitiesName:"authors",paginationName:"authors",paginationQuery:e})},l=t.searchBooksSelector=function(e){return(0,o.selectPaginatedEntities)({entitiesName:"books",paginationName:"books",paginationQuery:e})};t.doubanBooksAsOptions=function(e){return(0,u.createSelector)(i(e),function(e){return e.map(function(e){return{name:e.title,value:e.id,additional:{description:e.summary,cover:e.images.large,author:e.author.join(", ")}}})})},t.authorsAsOptions=function(e){return(0,u.createSelector)(c(e),function(e){return e.map(function(e){return{name:e.name,value:e.id}})})},t.booksSearchAsOptions=function(e){return(0,u.createSelector)(l(e),function(e){return e.map(function(e){return{name:e.title,value:e.id}})})},t.booksSelector=(0,u.createSelector)((0,o.selectPaginatedEntities)({entitiesName:"books",paginationName:"books",paginationKey:"default"}),function(e){return e}),t.usersSelector=(0,o.selectPaginatedEntities)({entitiesName:"users",paginationName:"users",paginationKey:"default"});t.common=a},161:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.selectPaginatedEntities=t.paginationLinkSelector=void 0;var o=n(162),u=n(18),a=r(u),i=function(e){return function(t){return t.entities[e]||{}}},c=function(e){var t=arguments.length<=1||void 0===arguments[1]?"default":arguments[1];return function(n){return a["default"].get(n.pagination,e+"."+t+".ids",[])}},l=(t.paginationLinkSelector=function(e){var t=arguments.length<=1||void 0===arguments[1]?"default":arguments[1];return function(n){return a["default"].pick(a["default"].get(n.pagination,e+"."+t,{}),["next","last"])}},function(e,t){return function(n){return a["default"].get(n.pagination,[e,"query",t,"ids"],[])}});t.selectPaginatedEntities=function(e){var t=e.entitiesName,n=e.paginationName,r=e.paginationKey,u=e.paginationQuery,a=void 0;return a=u?l(n,u):c(n,r),(0,o.createSelector)(i(t),a,function(e,t){return t.map(function(t){return e[t]})})}},162:function(e,t){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t){return e===t}function o(e){var t=arguments.length<=1||void 0===arguments[1]?r:arguments[1],n=null,o=null;return function(){for(var r=arguments.length,u=Array(r),a=0;r>a;a++)u[a]=arguments[a];return null!==n&&n.length===u.length&&u.every(function(e,r){return t(e,n[r])})?o:(o=e.apply(void 0,u),n=u,o)}}function u(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every(function(e){return"function"==typeof e})){var n=t.map(function(e){return typeof e}).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, "+("instead received the following types: ["+n+"]"))}return t}function a(e){for(var t=arguments.length,r=Array(t>1?t-1:0),o=1;t>o;o++)r[o-1]=arguments[o];return function(){for(var t=arguments.length,o=Array(t),a=0;t>a;a++)o[a]=arguments[a];var i=0,c=o.pop(),l=u(o),f=e.apply(void 0,[function(){return i++,c.apply(void 0,arguments)}].concat(r)),s=function(e,t){for(var r=arguments.length,o=Array(r>2?r-2:0),u=2;r>u;u++)o[u-2]=arguments[u];var a=l.map(function(n){return n.apply(void 0,[e,t].concat(o))});return f.apply(void 0,n(a))};return s.resultFunc=c,s.recomputations=function(){return i},s.resetRecomputations=function(){return i=0},s}}function i(){return a(o).apply(void 0,arguments)}function c(e){var t=arguments.length<=1||void 0===arguments[1]?i:arguments[1];if("object"!=typeof e)throw new Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);var n=Object.keys(e);return t(n.map(function(t){return e[t]}),function(){for(var e=arguments.length,t=Array(e),r=0;e>r;r++)t[r]=arguments[r];return t.reduce(function(e,t,r){return e[n[r]]=t,e},{})})}t.__esModule=!0,t.defaultMemoize=o,t.createSelectorCreator=a,t.createSelector=i,t.createStructuredSelector=c},226:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(227),u=r(o);t["default"]=u["default"]},227:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},l=n(3),f=r(l),s=n(18),p=r(s),d=n(80),y=r(d),b=n(82),m=r(b),g=function(e,t,n,r){var o,u=arguments.length,a=3>u?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(a=(3>u?o(a):u>3?o(t,n,a):o(t,n))||a);return u>3&&a&&Object.defineProperty(t,n,a),a},h=n(228),v=function(e){function t(e){return o(this,t),u(this,Object.getPrototypeOf(t).call(this,e))}return a(t,e),i(t,[{key:"render",value:function(){var e=this.props,t=e.header,n=e.data,r=(e.enableTooltip,e.style),o=e.actions,u=e.operationLabel;o=o||[],t||(t=0!==n.length&&p["default"].keys(n[0]).map(function(e){return{key:e,name:e}})||[]);var a=(0,y["default"])({"info-table":!0,"info-table--no-header":!t});return f["default"].createElement("table",{styleName:a,style:r||{}},f["default"].createElement("tbody",null,t?f["default"].createElement("tr",null,t.map(function(e,t){return f["default"].createElement("th",{key:t},e.name)}),0!==o.length&&f["default"].createElement("th",null,u||"操作")):f["default"].createElement("tr",null),n.map(function(e,r){return f["default"].createElement("tr",{key:r},p["default"].map(t,function(t,n){return f["default"].createElement("td",{key:n},e[t.key]&&e[t.key].toString())}),0!==o.length&&f["default"].createElement("td",{styleName:"actions"},0!==o.length&&o.map(function(e,t){return f["default"].createElement("div",{styleName:"action",key:t,onClick:function(t){e.fn(n[r])}},e.name)})))})))}}]),t}(l.Component);v=g([(0,m["default"])(h)],v),t["default"]=v},228:function(e,t){e.exports={"info-table--no-header":"info-table--no-header_2v3xx","info-table":"info-table_B7JYU",actions:"actions_pR_Nz",action:"action_3DLKy"}},229:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(230),u=r(o);t["default"]=u["default"]},230:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(3),f=o(l),s=n(231),p=o(s),d=n(7),y=n(160),b=r(y),m=function(e){function t(e){return u(this,t),a(this,Object.getPrototypeOf(t).call(this,e))}return i(t,e),c(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.routing,r=e.paginationLinks,o=r.next,u=r.last,a=u&&u.page||1,i=o?o.page-1:a;return f["default"].createElement("div",null,t,f["default"].createElement(p["default"],{all:a,current:i,url:{pathname:n.pathname,query:n.query||{}}}))}}]),t}(l.Component),g=function(e,t){var n=t.pagination,r=n.name,o=n.key;return{routing:e.routing.locationBeforeTransitions||{},paginationLinks:b.paginationLinkSelector(r,o)(e)}};t["default"]=(0,d.connect)(g,{})(m)},231:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(232),u=r(o);t["default"]=u["default"]},232:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},l=n(3),f=r(l),s=n(4),p=n(18),d=r(p),y=n(16),b=r(y),m=n(82),g=r(m),h=function(e,t,n,r){var o,u=arguments.length,a=3>u?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(a=(3>u?o(a):u>3?o(t,n,a):o(t,n))||a);return u>3&&a&&Object.defineProperty(t,n,a),a},v=n(233),_=function(e){function t(e){return o(this,t),u(this,Object.getPrototypeOf(t).call(this,e))}return a(t,e),i(t,[{key:"parseUrl",value:function(e,t,n){var r=this.props.urlStyle?this.props.urlStyle:"query";if("query"===r){var o=b["default"].parseFormData(d["default"].omit(t,["page"]));return""+e+(o?"?"+o+"&":"?")+"page="+n}var u=b["default"].parseFormData(t);return e+"/page/"+n+"?"+u}},{key:"render",value:function(){var e=this,t=this.props.range?this.props.range:3,n=this.props.all-1,r=parseInt(this.props.current)-1,o=r-t,u=r+t,a=!1,i=!1,l=[],p=this.props.url;if("number"!=typeof this.props.all)throw new Error("all 必须为 number 类型！");"number"!=typeof r&&console.error("页码必须为数字，却得到 "+("undefined"==typeof r?"undefined":c(r))),(r>u||0>r)&&console.error("页码不能大于所有页面数目或小于 1！"),2*t+1>=n?(u=n,o=0):(u>=n?(u=n,o=n-(2*t+1)):i=!0,0>=o?(o=0,u=2*t+1):a=!0);for(var d=o;u>=d;d++)l=l.concat([{pageNum:d+1,isCurrent:d===r}]);if(a){var y=[{pageNum:1},{isSpread:!0}];l=y.concat(l)}if(i){var b=[{isSpread:!0},{pageNum:n+1}];l=l.concat(b)}return 1!==this.props.all&&f["default"].createElement("div",{styleName:"paginator"},f["default"].createElement("ul",null,l.map(function(t,n){return t.isCurrent?f["default"].createElement("li",{key:n,styleName:"page-num--current"},t.pageNum):t.isSpread?f["default"].createElement("li",{key:n,styleName:"page-spread"},"..."):f["default"].createElement("li",{key:n,styleName:"page-num"},f["default"].createElement(s.Link,{to:e.parseUrl(p.pathname,p.query,t.pageNum)},t.pageNum))})))}}]),t}(l.Component);_=h([(0,g["default"])(v)],_),t["default"]=_},233:function(e,t){e.exports={"page-spread":"page-spread_2INHU","page-num":"page-num_2oPQU","page-num--current":"page-num--current_1Y2mE",paginator:"paginator_1RHAm"}},234:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(235);Object.keys(r).forEach(function(e){"default"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})})},235:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.onRoutingChange=void 0;var o=n(18),u=r(o);t.onRoutingChange=function(e){return function(t,n){if(!n.routing)return console.error("routing 需要现在组件 props 里面声明！"),!1;var r=!u["default"].isEqual(t.routing,n.routing);r&&e(t.routing)}}},238:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function c(e,t){return{users:g.usersSelector(e),routing:e.routing.locationBeforeTransitions}}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(3),s=o(f),p=n(7),d=n(8),y=n(226),b=o(y),m=n(160),g=r(m),h=n(134),v=o(h),_=n(229),O=o(_),j=n(234),k=r(j),E=function(e){function t(e){return u(this,t),a(this,Object.getPrototypeOf(t).call(this,e))}return i(t,e),l(t,[{key:"loadUsers",value:function(){var e=arguments.length<=0||void 0===arguments[0]?this.props:arguments[0];this.props.fetchUsers({api:{page:e.routing.query.page||"1"}})}},{key:"componentWillReceiveProps",value:function(e,t){var n=this;k.onRoutingChange(function(t){document.body.scrollTop=0,n.loadUsers(e)})(e,this.props)}},{key:"componentDidMount",value:function(){this.loadUsers()}},{key:"render",value:function(){var e=this.props.users;return s["default"].createElement(v["default"],{title:"用户管理"},s["default"].createElement(O["default"],{pagination:{name:"users"}},s["default"].createElement(b["default"],{data:e})))}}]),t}(f.Component);t["default"]=(0,p.connect)(c,{fetchUsers:d.fetchUsers})(E)}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vMTMuMTMuanMiLCJ3ZWJwYWNrOi8vL3NyYy9pc29tb3JwaGljL3N0b3JlL3NlbGVjdG9ycy9pbmRleC50cz83MjZiKioiLCJ3ZWJwYWNrOi8vL3NyYy9pc29tb3JwaGljL3N0b3JlL3NlbGVjdG9ycy9jb21tb24udHM/MzMzNioqIiwid2VicGFjazovLy8uL34vcmVzZWxlY3QvbGliL2luZGV4LmpzPzY0NmIqKiIsIndlYnBhY2s6Ly8vc3JjL2lzb21vcnBoaWMvY29tcG9uZW50cy9JbmZvVGFibGUvaW5kZXgudHM/YWI4MSIsIndlYnBhY2s6Ly8vc3JjL2lzb21vcnBoaWMvY29tcG9uZW50cy9JbmZvVGFibGUvSW5mb1RhYmxlLnRzeD9jYWQ3Iiwid2VicGFjazovLy8uL3NyYy9pc29tb3JwaGljL2NvbXBvbmVudHMvSW5mb1RhYmxlL0luZm9UYWJsZS5zY3NzP2E4Y2MiLCJ3ZWJwYWNrOi8vL3NyYy9pc29tb3JwaGljL2NvbXBvbmVudHMvQ29udGVudFBhZ2UvaW5kZXgudHM/MjYyYyIsIndlYnBhY2s6Ly8vc3JjL2lzb21vcnBoaWMvY29tcG9uZW50cy9Db250ZW50UGFnZS9Db250ZW50UGFnZS50c3g/YjM2YiIsIndlYnBhY2s6Ly8vc3JjL2lzb21vcnBoaWMvZWxlbWVudHMvUGFnaW5hdG9yL2luZGV4LnRzPzVkYjUiLCJ3ZWJwYWNrOi8vL3NyYy9pc29tb3JwaGljL2VsZW1lbnRzL1BhZ2luYXRvci9QYWdpbmF0b3IudHN4P2I2NzUiLCJ3ZWJwYWNrOi8vLy4vc3JjL2lzb21vcnBoaWMvZWxlbWVudHMvUGFnaW5hdG9yL1BhZ2luYXRvci5zY3NzPzE1NmQiLCJ3ZWJwYWNrOi8vL3NyYy9pc29tb3JwaGljL2hlbHBlcnMvaW5kZXgudHM/ZjU5MyIsIndlYnBhY2s6Ly8vc3JjL2lzb21vcnBoaWMvaGVscGVycy9saWZlY2lyY2xlLnRzPzkyOTkiLCJ3ZWJwYWNrOi8vL3NyYy9pc29tb3JwaGljL3JvdXRlcy9NYW5hZ2VVc2Vycy9NYW5hZ2VVc2Vycy50c3giXSwibmFtZXMiOlsid2VicGFja0pzb25wIiwxNjAsIm1vZHVsZSIsImV4cG9ydHMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQiLCJvYmoiLCJfX2VzTW9kdWxlIiwibmV3T2JqIiwia2V5IiwiT2JqZWN0IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiZGVmaW5lUHJvcGVydHkiLCJ2YWx1ZSIsImNvbW1vbiIsInVzZXJzU2VsZWN0b3IiLCJib29rc1NlbGVjdG9yIiwiYm9va3NTZWFyY2hBc09wdGlvbnMiLCJhdXRob3JzQXNPcHRpb25zIiwiZG91YmFuQm9va3NBc09wdGlvbnMiLCJzZWFyY2hCb29rc1NlbGVjdG9yIiwicXVlcnlBdXRob3JzU2VsZWN0b3IiLCJxdWVyeURvdWJhbkJvb2tzU2VsZWN0b3IiLCJ1bmRlZmluZWQiLCJfY29tbW9uIiwia2V5cyIsImZvckVhY2giLCJlbnVtZXJhYmxlIiwiZ2V0IiwiX3Jlc2VsZWN0IiwicXVlcnkiLCJjcmVhdGVTZWxlY3RvciIsInNlbGVjdFBhZ2luYXRlZEVudGl0aWVzIiwiZW50aXRpZXNOYW1lIiwicGFnaW5hdGlvbk5hbWUiLCJwYWdpbmF0aW9uUXVlcnkiLCJib29rcyIsIm1hcCIsImJvb2siLCJuYW1lIiwidGl0bGUiLCJpZCIsImFkZGl0aW9uYWwiLCJkZXNjcmlwdGlvbiIsInN1bW1hcnkiLCJjb3ZlciIsImltYWdlcyIsImxhcmdlIiwiYXV0aG9yIiwiam9pbiIsIml0ZW1zIiwiaXRlbSIsInBhZ2luYXRpb25LZXkiLDE2MSwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsImRlZmF1bHQiLCJwYWdpbmF0aW9uTGlua1NlbGVjdG9yIiwiX2xvZGFzaCIsIl9sb2Rhc2gyIiwiZW50aXRpZXNTZWxlY3RvciIsInN0YXRlIiwiZW50aXRpZXMiLCJwYWdpbmF0aW9uU2VsZWN0b3IiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJwYWdpbmF0aW9uIiwicXVlcnlQYWdpbmF0aW9uU2VsZWN0b3IiLCJwaWNrIiwib3B0aW9ucyIsInBhZ2lTZWxlY3RvciIsImlkcyIsMTYyLCJfdG9Db25zdW1hYmxlQXJyYXkiLCJhcnIiLCJBcnJheSIsImlzQXJyYXkiLCJpIiwiYXJyMiIsImZyb20iLCJkZWZhdWx0RXF1YWxpdHlDaGVjayIsImEiLCJiIiwiZGVmYXVsdE1lbW9pemUiLCJmdW5jIiwiZXF1YWxpdHlDaGVjayIsImxhc3RBcmdzIiwibGFzdFJlc3VsdCIsIl9sZW4iLCJhcmdzIiwiX2tleSIsImV2ZXJ5IiwiaW5kZXgiLCJhcHBseSIsImdldERlcGVuZGVuY2llcyIsImZ1bmNzIiwiZGVwZW5kZW5jaWVzIiwiZGVwIiwiZGVwZW5kZW5jeVR5cGVzIiwiRXJyb3IiLCJjcmVhdGVTZWxlY3RvckNyZWF0b3IiLCJtZW1vaXplIiwiX2xlbjIiLCJtZW1vaXplT3B0aW9ucyIsIl9rZXkyIiwiX2xlbjMiLCJfa2V5MyIsInJlY29tcHV0YXRpb25zIiwicmVzdWx0RnVuYyIsInBvcCIsIm1lbW9pemVkUmVzdWx0RnVuYyIsImNvbmNhdCIsInNlbGVjdG9yIiwicHJvcHMiLCJfbGVuNCIsIl9rZXk0IiwicGFyYW1zIiwiZGVwZW5kZW5jeSIsInJlc2V0UmVjb21wdXRhdGlvbnMiLCJjcmVhdGVTdHJ1Y3R1cmVkU2VsZWN0b3IiLCJzZWxlY3RvcnMiLCJzZWxlY3RvckNyZWF0b3IiLCJvYmplY3RLZXlzIiwiX2xlbjUiLCJ2YWx1ZXMiLCJfa2V5NSIsInJlZHVjZSIsImNvbXBvc2l0aW9uIiwyMjYsIl9JbmZvVGFibGUiLCJfSW5mb1RhYmxlMiIsMjI3LCJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwiX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iLCJzZWxmIiwiUmVmZXJlbmNlRXJyb3IiLCJfaW5oZXJpdHMiLCJzdWJDbGFzcyIsInN1cGVyQ2xhc3MiLCJjcmVhdGUiLCJjb25zdHJ1Y3RvciIsIndyaXRhYmxlIiwiY29uZmlndXJhYmxlIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJfY3JlYXRlQ2xhc3MiLCJkZWZpbmVQcm9wZXJ0aWVzIiwidGFyZ2V0IiwiZGVzY3JpcHRvciIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsIl90eXBlb2YiLCJTeW1ib2wiLCJpdGVyYXRvciIsIl9yZWFjdCIsIl9yZWFjdDIiLCJfY2xhc3NuYW1lcyIsIl9jbGFzc25hbWVzMiIsIl9yZWFjdENzc01vZHVsZXMiLCJfcmVhY3RDc3NNb2R1bGVzMiIsIl9fZGVjb3JhdGUiLCJkZWNvcmF0b3JzIiwiZGVzYyIsImQiLCJjIiwiciIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsIlJlZmxlY3QiLCJkZWNvcmF0ZSIsInN0eWxlcyIsIkluZm9UYWJsZSIsIl9Db21wb25lbnQiLCJ0aGlzIiwiZ2V0UHJvdG90eXBlT2YiLCJfcHJvcHMiLCJoZWFkZXIiLCJkYXRhIiwic3R5bGUiLCJlbmFibGVUb29sdGlwIiwiYWN0aW9ucyIsIm9wZXJhdGlvbkxhYmVsIiwiY2xhc3NOYW1lIiwiaW5mby10YWJsZSIsImluZm8tdGFibGUtLW5vLWhlYWRlciIsImNyZWF0ZUVsZW1lbnQiLCJzdHlsZU5hbWUiLCJyb3ciLCJ0b1N0cmluZyIsImFjdGlvbiIsImluZGV4MiIsIm9uQ2xpY2siLCJlIiwiZm4iLCJDb21wb25lbnQiLDIyOCwyMjksIl9Db250ZW50UGFnZSIsIl9Db250ZW50UGFnZTIiLDIzMCwiX1BhZ2luYXRvciIsIl9QYWdpbmF0b3IyIiwiX3JlYWN0UmVkdXgiLCJfc2VsZWN0b3JzIiwiQ29udGVudFBhZ2UiLCJjaGlsZHJlbiIsInJvdXRpbmciLCJfcHJvcHMkcGFnaW5hdGlvbkxpbmsiLCJwYWdpbmF0aW9uTGlua3MiLCJuZXh0IiwibGFzdCIsImFsbCIsInBhZ2UiLCJjdXJyZW50IiwidXJsIiwicGF0aG5hbWUiLCJtYXBTdGF0ZVRvUHJvcHMiLCJvd25Qcm9wcyIsIl9vd25Qcm9wcyRwYWdpbmF0aW9uIiwibG9jYXRpb25CZWZvcmVUcmFuc2l0aW9ucyIsImNvbm5lY3QiLDIzMSwyMzIsIl9yZWFjdFJvdXRlciIsIl91dGlscyIsIl91dGlsczIiLCJQYWdpbmF0b3IiLCJwYWdlTnVtIiwidXJsU3R5bGUiLCJfcXVlcnlQYXJ0IiwicGFyc2VGb3JtRGF0YSIsIm9taXQiLCJxdWVyeVBhcnQiLCJfdGhpczIiLCJyYW5nZSIsInRvdGFsUmFuZ2VFbmRJbmRleCIsImN1cnJlbnRJbmRleCIsInBhcnNlSW50IiwicmFuZ2VTdGFydEluZGV4IiwicmFuZ2VFbmRJbmRleCIsImxlZnRTcHJlYWQiLCJyaWdodFNwcmVhZCIsInBhZ2VzIiwiY29uc29sZSIsImVycm9yIiwiaXNDdXJyZW50Iiwic3BkIiwiaXNTcHJlYWQiLCJfc3BkIiwiTGluayIsInRvIiwicGFyc2VVcmwiLDIzMywicGFnZS1zcHJlYWQiLCJwYWdlLW51bSIsInBhZ2UtbnVtLS1jdXJyZW50IiwicGFnaW5hdG9yIiwyMzQsIl9saWZlY2lyY2xlIiwyMzUsIm9uUm91dGluZ0NoYW5nZSIsIm5leHRQcm9wcyIsImN1cnJlbnRQcm9wcyIsImhhc1BhdGhQYXJhbUNoYW5nZWQiLCJpc0VxdWFsIiwyMzgsInVzZXJzIiwiX2FjdGlvbnMiLCJfRG9jQ29udGFpbmVyIiwiX0RvY0NvbnRhaW5lcjIiLCJfaGVscGVycyIsImhlbHBlcnMiLCJNYW5hZ2VVc2VycyIsImZldGNoVXNlcnMiLCJhcGkiLCJuZXh0U3RhdGUiLCJkb2N1bWVudCIsImJvZHkiLCJzY3JvbGxUb3AiLCJsb2FkVXNlcnMiXSwibWFwcGluZ3MiOiJBQUFBQSxjQUFjLEtBRVJDLElBQ0EsU0FBU0MsRUFBUUMsRUFBU0MsR0FFL0IsWUF1QkEsU0FBU0MsR0FBd0JDLEdBQU8sR0FBSUEsR0FBT0EsRUFBSUMsV0FBYyxNQUFPRCxFQUFjLElBQUlFLEtBQWEsSUFBVyxNQUFQRixFQUFlLElBQUssR0FBSUcsS0FBT0gsR0FBV0ksT0FBT0MsVUFBVUMsZUFBZUMsS0FBS1AsRUFBS0csS0FBTUQsRUFBT0MsR0FBT0gs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b0csR0FBaUJqSyxHZHN4QlYsTUFGQW1CLEdBQWdCMkMsS0FBTW1HLEdBRWYxSSxFQUEyQnVDLEtBQU10SyxPQUFPdUssZUFBZWtHLEdBQWF0USxLQUFLbUssS2NseEI5RTlELElkMHpCTixNQTdDQTBCLEdBQVV1SSxFQUFhcEcsR0FRdkIxQixFQUFhOEgsSUFDVDFRLElBQUssWUFDTE0sTUFBTyxXQUNILEdjeHhCSW1HLEdBQUFqRCxVQUFBQyxRQUFBLEdBQUF6QyxTQUFBd0MsVUFBQSxHQUFPK0csS0FBTTlELE1BQUFqRCxVQUFBLEVBQ3RCK0csTUFBTTlELE1BQVdrSyxZQUNoQkMsS0FDRzlELEtBQU9yRyxFQUFRK0YsUUFBTWpMLE1BQUt1TCxNQUtYLFVkeXhCbEI5TSxJQUFLLDRCQUNMTSxNQUFPLFNjMXhCcUJ5UCxFQUFXYyxHZDJ4Qm5DLEdBQUkxQyxHQUFTNUQsSWMxeEJma0csR0FBZ0JYLGdCQUFBLFNBQUF0RCxHQUNic0UsU0FBS0MsS0FBVUMsVUFBSSxFQUN2QjdDLEVBQVU4QyxVQUNkbEIsS0FBVUEsRUFBTXhGLEtBR0g5RCxVZDR4QlZ6RyxJQUFLLG9CQUNMTSxNQUFPLFdjNXhCUmlLLEtBR0EwRyxlZDZ4QkNqUixJQUFLLFNBQ0xNLE1BQU8sV0FDSCxHYzl4QkU4UCxHQUFPN0YsS0FBTTlELE1BQUEySixLQUVqQixPQUNMOUcsY0FBYTZCLGNBQUFvRixjQUFNdE8sTUFBTyxRQUFBcUgsYUFDWjZCLGNBQUFhLGNBQUF0SSxZQUVKMUIsS0FDSixVQUVGc0gsYUFBVTZCLGNBQUF6RCxjQUNKaUQsS0FNZnlGLFVkc3hCV00sR0FDVHJILEVBQU91QyxVQVFUbE0sZWN0eEJxQixFQUFBME0sRUFBQWtCLFNBQ0xKLEdBRWhCeUQsV0FBQU4sRUFBQU0sYUFBb0JEIiwiZmlsZSI6IjEzLjEzLmpzIiwic291cmNlc0NvbnRlbnQiOlsid2VicGFja0pzb25wKFsxM10se1xuXG4vKioqLyAxNjA6XG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLmNvbW1vbiA9IGV4cG9ydHMudXNlcnNTZWxlY3RvciA9IGV4cG9ydHMuYm9va3NTZWxlY3RvciA9IGV4cG9ydHMuYm9va3NTZWFyY2hBc09wdGlvbnMgPSBleHBvcnRzLmF1dGhvcnNBc09wdGlvbnMgPSBleHBvcnRzLmRvdWJhbkJvb2tzQXNPcHRpb25zID0gZXhwb3J0cy5zZWFyY2hCb29rc1NlbGVjdG9yID0gZXhwb3J0cy5xdWVyeUF1dGhvcnNTZWxlY3RvciA9IGV4cG9ydHMucXVlcnlEb3ViYW5Cb29rc1NlbGVjdG9yID0gdW5kZWZpbmVkO1xuXHRcblx0dmFyIF9jb21tb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2MSk7XG5cdFxuXHRPYmplY3Qua2V5cyhfY29tbW9uKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgIGlmIChrZXkgPT09IFwiZGVmYXVsdFwiKSByZXR1cm47XG5cdCAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7XG5cdCAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcblx0ICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIF9jb21tb25ba2V5XTtcblx0ICAgICAgICB9XG5cdCAgICB9KTtcblx0fSk7XG5cdFxuXHR2YXIgX3Jlc2VsZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNjIpO1xuXHRcblx0dmFyIGNvbW1vbiA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKF9jb21tb24pO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7IGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsgcmV0dXJuIG9iajsgfSBlbHNlIHsgdmFyIG5ld09iaiA9IHt9OyBpZiAob2JqICE9IG51bGwpIHsgZm9yICh2YXIga2V5IGluIG9iaikgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgbmV3T2JqW2tleV0gPSBvYmpba2V5XTsgfSB9IG5ld09iai5kZWZhdWx0ID0gb2JqOyByZXR1cm4gbmV3T2JqOyB9IH1cblx0XG5cdHZhciBxdWVyeURvdWJhbkJvb2tzU2VsZWN0b3IgPSBleHBvcnRzLnF1ZXJ5RG91YmFuQm9va3NTZWxlY3RvciA9IGZ1bmN0aW9uIHF1ZXJ5RG91YmFuQm9va3NTZWxlY3RvcihxdWVyeSkge1xuXHQgICAgcmV0dXJuICgwLCBfcmVzZWxlY3QuY3JlYXRlU2VsZWN0b3IpKCgwLCBfY29tbW9uLnNlbGVjdFBhZ2luYXRlZEVudGl0aWVzKSh7XG5cdCAgICAgICAgZW50aXRpZXNOYW1lOiAnZG91YmFuQm9va3MnLFxuXHQgICAgICAgIHBhZ2luYXRpb25OYW1lOiAnZG91YmFuQm9va3MnLFxuXHQgICAgICAgIHBhZ2luYXRpb25RdWVyeTogcXVlcnlcblx0ICAgIH0pLCBmdW5jdGlvbiAoYm9va3MpIHtcblx0ICAgICAgICByZXR1cm4gYm9va3M7XG5cdCAgICB9KTtcblx0fTtcblx0dmFyIHF1ZXJ5QXV0aG9yc1NlbGVjdG9yID0gZXhwb3J0cy5xdWVyeUF1dGhvcnNTZWxlY3RvciA9IGZ1bmN0aW9uIHF1ZXJ5QXV0aG9yc1NlbGVjdG9yKHF1ZXJ5KSB7XG5cdCAgICByZXR1cm4gKDAsIF9jb21tb24uc2VsZWN0UGFnaW5hdGVkRW50aXRpZXMpKHtcblx0ICAgICAgICBlbnRpdGllc05hbWU6ICdhdXRob3JzJyxcblx0ICAgICAgICBwYWdpbmF0aW9uTmFtZTogJ2F1dGhvcnMnLFxuXHQgICAgICAgIHBhZ2luYXRpb25RdWVyeTogcXVlcnlcblx0ICAgIH0pO1xuXHR9O1xuXHR2YXIgc2VhcmNoQm9va3NTZWxlY3RvciA9IGV4cG9ydHMuc2VhcmNoQm9va3NTZWxlY3RvciA9IGZ1bmN0aW9uIHNlYXJjaEJvb2tzU2VsZWN0b3IocXVlcnkpIHtcblx0ICAgIHJldHVybiAoMCwgX2NvbW1vbi5zZWxlY3RQYWdpbmF0ZWRFbnRpdGllcykoe1xuXHQgICAgICAgIGVudGl0aWVzTmFtZTogJ2Jvb2tzJyxcblx0ICAgICAgICBwYWdpbmF0aW9uTmFtZTogJ2Jvb2tzJyxcblx0ICAgICAgICBwYWdpbmF0aW9uUXVlcnk6IHF1ZXJ5XG5cdCAgICB9KTtcblx0fTtcblx0dmFyIGRvdWJhbkJvb2tzQXNPcHRpb25zID0gZXhwb3J0cy5kb3ViYW5Cb29rc0FzT3B0aW9ucyA9IGZ1bmN0aW9uIGRvdWJhbkJvb2tzQXNPcHRpb25zKHF1ZXJ5KSB7XG5cdCAgICByZXR1cm4gKDAsIF9yZXNlbGVjdC5jcmVhdGVTZWxlY3RvcikocXVlcnlEb3ViYW5Cb29rc1NlbGVjdG9yKHF1ZXJ5KSwgZnVuY3Rpb24gKGJvb2tzKSB7XG5cdCAgICAgICAgcmV0dXJuIGJvb2tzLm1hcChmdW5jdGlvbiAoYm9vaykge1xuXHQgICAgICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgICAgICAgbmFtZTogYm9vay50aXRsZSxcblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBib29rLmlkLFxuXHQgICAgICAgICAgICAgICAgYWRkaXRpb25hbDoge1xuXHQgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBib29rLnN1bW1hcnksXG5cdCAgICAgICAgICAgICAgICAgICAgY292ZXI6IGJvb2suaW1hZ2VzLmxhcmdlLFxuXHQgICAgICAgICAgICAgICAgICAgIGF1dGhvcjogYm9vay5hdXRob3Iuam9pbignLCAnKVxuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9O1xuXHQgICAgICAgIH0pO1xuXHQgICAgfSk7XG5cdH07XG5cdHZhciBhdXRob3JzQXNPcHRpb25zID0gZXhwb3J0cy5hdXRob3JzQXNPcHRpb25zID0gZnVuY3Rpb24gYXV0aG9yc0FzT3B0aW9ucyhxdWVyeSkge1xuXHQgICAgcmV0dXJuICgwLCBfcmVzZWxlY3QuY3JlYXRlU2VsZWN0b3IpKHF1ZXJ5QXV0aG9yc1NlbGVjdG9yKHF1ZXJ5KSwgZnVuY3Rpb24gKGl0ZW1zKSB7XG5cdCAgICAgICAgcmV0dXJuIGl0ZW1zLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgICAgICAgbmFtZTogaXRlbS5uYW1lLFxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGl0ZW0uaWRcblx0ICAgICAgICAgICAgfTtcblx0ICAgICAgICB9KTtcblx0ICAgIH0pO1xuXHR9O1xuXHR2YXIgYm9va3NTZWFyY2hBc09wdGlvbnMgPSBleHBvcnRzLmJvb2tzU2VhcmNoQXNPcHRpb25zID0gZnVuY3Rpb24gYm9va3NTZWFyY2hBc09wdGlvbnMocXVlcnkpIHtcblx0ICAgIHJldHVybiAoMCwgX3Jlc2VsZWN0LmNyZWF0ZVNlbGVjdG9yKShzZWFyY2hCb29rc1NlbGVjdG9yKHF1ZXJ5KSwgZnVuY3Rpb24gKGl0ZW1zKSB7XG5cdCAgICAgICAgcmV0dXJuIGl0ZW1zLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgICAgICAgbmFtZTogaXRlbS50aXRsZSxcblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBpdGVtLmlkXG5cdCAgICAgICAgICAgIH07XG5cdCAgICAgICAgfSk7XG5cdCAgICB9KTtcblx0fTtcblx0dmFyIGJvb2tzU2VsZWN0b3IgPSBleHBvcnRzLmJvb2tzU2VsZWN0b3IgPSAoMCwgX3Jlc2VsZWN0LmNyZWF0ZVNlbGVjdG9yKSgoMCwgX2NvbW1vbi5zZWxlY3RQYWdpbmF0ZWRFbnRpdGllcykoe1xuXHQgICAgZW50aXRpZXNOYW1lOiAnYm9va3MnLFxuXHQgICAgcGFnaW5hdGlvbk5hbWU6ICdib29rcycsXG5cdCAgICBwYWdpbmF0aW9uS2V5OiAnZGVmYXVsdCdcblx0fSksIGZ1bmN0aW9uIChib29rcykge1xuXHQgICAgcmV0dXJuIGJvb2tzO1xuXHR9KTtcblx0dmFyIHVzZXJzU2VsZWN0b3IgPSBleHBvcnRzLnVzZXJzU2VsZWN0b3IgPSAoMCwgX2NvbW1vbi5zZWxlY3RQYWdpbmF0ZWRFbnRpdGllcykoe1xuXHQgICAgZW50aXRpZXNOYW1lOiAndXNlcnMnLFxuXHQgICAgcGFnaW5hdGlvbk5hbWU6ICd1c2VycycsXG5cdCAgICBwYWdpbmF0aW9uS2V5OiAnZGVmYXVsdCdcblx0fSk7XG5cdGV4cG9ydHMuY29tbW9uID0gY29tbW9uO1xuXG4vKioqLyB9LFxuXG4vKioqLyAxNjE6XG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLnNlbGVjdFBhZ2luYXRlZEVudGl0aWVzID0gZXhwb3J0cy5wYWdpbmF0aW9uTGlua1NlbGVjdG9yID0gdW5kZWZpbmVkO1xuXHRcblx0dmFyIF9yZXNlbGVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTYyKTtcblx0XG5cdHZhciBfbG9kYXNoID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCk7XG5cdFxuXHR2YXIgX2xvZGFzaDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9sb2Rhc2gpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdHZhciBlbnRpdGllc1NlbGVjdG9yID0gZnVuY3Rpb24gZW50aXRpZXNTZWxlY3RvcihuYW1lKSB7XG5cdCAgICByZXR1cm4gZnVuY3Rpb24gKHN0YXRlKSB7XG5cdCAgICAgICAgcmV0dXJuIHN0YXRlLmVudGl0aWVzW25hbWVdIHx8IHt9O1xuXHQgICAgfTtcblx0fTtcblx0dmFyIHBhZ2luYXRpb25TZWxlY3RvciA9IGZ1bmN0aW9uIHBhZ2luYXRpb25TZWxlY3RvcihuYW1lKSB7XG5cdCAgICB2YXIga2V5ID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8gJ2RlZmF1bHQnIDogYXJndW1lbnRzWzFdO1xuXHQgICAgcmV0dXJuIGZ1bmN0aW9uIChzdGF0ZSkge1xuXHQgICAgICAgIHJldHVybiBfbG9kYXNoMi5kZWZhdWx0LmdldChzdGF0ZS5wYWdpbmF0aW9uLCBuYW1lICsgJy4nICsga2V5ICsgJy5pZHMnLCBbXSk7XG5cdCAgICB9O1xuXHR9O1xuXHR2YXIgcGFnaW5hdGlvbkxpbmtTZWxlY3RvciA9IGV4cG9ydHMucGFnaW5hdGlvbkxpbmtTZWxlY3RvciA9IGZ1bmN0aW9uIHBhZ2luYXRpb25MaW5rU2VsZWN0b3IobmFtZSkge1xuXHQgICAgdmFyIGtleSA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMSB8fCBhcmd1bWVudHNbMV0gPT09IHVuZGVmaW5lZCA/ICdkZWZhdWx0JyA6IGFyZ3VtZW50c1sxXTtcblx0ICAgIHJldHVybiBmdW5jdGlvbiAoc3RhdGUpIHtcblx0ICAgICAgICByZXR1cm4gX2xvZGFzaDIuZGVmYXVsdC5waWNrKF9sb2Rhc2gyLmRlZmF1bHQuZ2V0KHN0YXRlLnBhZ2luYXRpb24sIG5hbWUgKyAnLicgKyBrZXksIHt9KSwgWyduZXh0JywgJ2xhc3QnXSk7XG5cdCAgICB9O1xuXHR9O1xuXHR2YXIgcXVlcnlQYWdpbmF0aW9uU2VsZWN0b3IgPSBmdW5jdGlvbiBxdWVyeVBhZ2luYXRpb25TZWxlY3RvcihuYW1lLCBxdWVyeSkge1xuXHQgICAgcmV0dXJuIGZ1bmN0aW9uIChzdGF0ZSkge1xuXHQgICAgICAgIHJldHVybiBfbG9kYXNoMi5kZWZhdWx0LmdldChzdGF0ZS5wYWdpbmF0aW9uLCBbbmFtZSwgJ3F1ZXJ5JywgcXVlcnksICdpZHMnXSwgW10pO1xuXHQgICAgfTtcblx0fTtcblx0dmFyIHNlbGVjdFBhZ2luYXRlZEVudGl0aWVzID0gZXhwb3J0cy5zZWxlY3RQYWdpbmF0ZWRFbnRpdGllcyA9IGZ1bmN0aW9uIHNlbGVjdFBhZ2luYXRlZEVudGl0aWVzKG9wdGlvbnMpIHtcblx0ICAgIHZhciBlbnRpdGllc05hbWUgPSBvcHRpb25zLmVudGl0aWVzTmFtZTtcblx0ICAgIHZhciBwYWdpbmF0aW9uTmFtZSA9IG9wdGlvbnMucGFnaW5hdGlvbk5hbWU7XG5cdCAgICB2YXIgcGFnaW5hdGlvbktleSA9IG9wdGlvbnMucGFnaW5hdGlvbktleTtcblx0ICAgIHZhciBwYWdpbmF0aW9uUXVlcnkgPSBvcHRpb25zLnBhZ2luYXRpb25RdWVyeTtcblx0XG5cdCAgICB2YXIgcGFnaVNlbGVjdG9yID0gdm9pZCAwO1xuXHQgICAgaWYgKHBhZ2luYXRpb25RdWVyeSkge1xuXHQgICAgICAgIHBhZ2lTZWxlY3RvciA9IHF1ZXJ5UGFnaW5hdGlvblNlbGVjdG9yKHBhZ2luYXRpb25OYW1lLCBwYWdpbmF0aW9uUXVlcnkpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgICBwYWdpU2VsZWN0b3IgPSBwYWdpbmF0aW9uU2VsZWN0b3IocGFnaW5hdGlvbk5hbWUsIHBhZ2luYXRpb25LZXkpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuICgwLCBfcmVzZWxlY3QuY3JlYXRlU2VsZWN0b3IpKGVudGl0aWVzU2VsZWN0b3IoZW50aXRpZXNOYW1lKSwgcGFnaVNlbGVjdG9yLCBmdW5jdGlvbiAoZW50aXRpZXMsIGlkcykge1xuXHQgICAgICAgIHJldHVybiBpZHMubWFwKGZ1bmN0aW9uIChpZCkge1xuXHQgICAgICAgICAgICByZXR1cm4gZW50aXRpZXNbaWRdO1xuXHQgICAgICAgIH0pO1xuXHQgICAgfSk7XG5cdH07XG5cbi8qKiovIH0sXG5cbi8qKiovIDE2Mjpcbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdGV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5cdGV4cG9ydHMuZGVmYXVsdE1lbW9pemUgPSBkZWZhdWx0TWVtb2l6ZTtcblx0ZXhwb3J0cy5jcmVhdGVTZWxlY3RvckNyZWF0b3IgPSBjcmVhdGVTZWxlY3RvckNyZWF0b3I7XG5cdGV4cG9ydHMuY3JlYXRlU2VsZWN0b3IgPSBjcmVhdGVTZWxlY3Rvcjtcblx0ZXhwb3J0cy5jcmVhdGVTdHJ1Y3R1cmVkU2VsZWN0b3IgPSBjcmVhdGVTdHJ1Y3R1cmVkU2VsZWN0b3I7XG5cdFxuXHRmdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9IGVsc2UgeyByZXR1cm4gQXJyYXkuZnJvbShhcnIpOyB9IH1cblx0XG5cdGZ1bmN0aW9uIGRlZmF1bHRFcXVhbGl0eUNoZWNrKGEsIGIpIHtcblx0ICByZXR1cm4gYSA9PT0gYjtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZGVmYXVsdE1lbW9pemUoZnVuYykge1xuXHQgIHZhciBlcXVhbGl0eUNoZWNrID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8gZGVmYXVsdEVxdWFsaXR5Q2hlY2sgOiBhcmd1bWVudHNbMV07XG5cdFxuXHQgIHZhciBsYXN0QXJncyA9IG51bGw7XG5cdCAgdmFyIGxhc3RSZXN1bHQgPSBudWxsO1xuXHQgIHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdCAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuXHQgICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmIChsYXN0QXJncyAhPT0gbnVsbCAmJiBsYXN0QXJncy5sZW5ndGggPT09IGFyZ3MubGVuZ3RoICYmIGFyZ3MuZXZlcnkoZnVuY3Rpb24gKHZhbHVlLCBpbmRleCkge1xuXHQgICAgICByZXR1cm4gZXF1YWxpdHlDaGVjayh2YWx1ZSwgbGFzdEFyZ3NbaW5kZXhdKTtcblx0ICAgIH0pKSB7XG5cdCAgICAgIHJldHVybiBsYXN0UmVzdWx0O1xuXHQgICAgfVxuXHQgICAgbGFzdFJlc3VsdCA9IGZ1bmMuYXBwbHkodW5kZWZpbmVkLCBhcmdzKTtcblx0ICAgIGxhc3RBcmdzID0gYXJncztcblx0ICAgIHJldHVybiBsYXN0UmVzdWx0O1xuXHQgIH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGdldERlcGVuZGVuY2llcyhmdW5jcykge1xuXHQgIHZhciBkZXBlbmRlbmNpZXMgPSBBcnJheS5pc0FycmF5KGZ1bmNzWzBdKSA/IGZ1bmNzWzBdIDogZnVuY3M7XG5cdFxuXHQgIGlmICghZGVwZW5kZW5jaWVzLmV2ZXJ5KGZ1bmN0aW9uIChkZXApIHtcblx0ICAgIHJldHVybiB0eXBlb2YgZGVwID09PSAnZnVuY3Rpb24nO1xuXHQgIH0pKSB7XG5cdCAgICB2YXIgZGVwZW5kZW5jeVR5cGVzID0gZGVwZW5kZW5jaWVzLm1hcChmdW5jdGlvbiAoZGVwKSB7XG5cdCAgICAgIHJldHVybiB0eXBlb2YgZGVwO1xuXHQgICAgfSkuam9pbignLCAnKTtcblx0ICAgIHRocm93IG5ldyBFcnJvcignU2VsZWN0b3IgY3JlYXRvcnMgZXhwZWN0IGFsbCBpbnB1dC1zZWxlY3RvcnMgdG8gYmUgZnVuY3Rpb25zLCAnICsgKCdpbnN0ZWFkIHJlY2VpdmVkIHRoZSBmb2xsb3dpbmcgdHlwZXM6IFsnICsgZGVwZW5kZW5jeVR5cGVzICsgJ10nKSk7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gZGVwZW5kZW5jaWVzO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVTZWxlY3RvckNyZWF0b3IobWVtb2l6ZSkge1xuXHQgIGZvciAodmFyIF9sZW4yID0gYXJndW1lbnRzLmxlbmd0aCwgbWVtb2l6ZU9wdGlvbnMgPSBBcnJheShfbGVuMiA+IDEgPyBfbGVuMiAtIDEgOiAwKSwgX2tleTIgPSAxOyBfa2V5MiA8IF9sZW4yOyBfa2V5MisrKSB7XG5cdCAgICBtZW1vaXplT3B0aW9uc1tfa2V5MiAtIDFdID0gYXJndW1lbnRzW19rZXkyXTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdCAgICBmb3IgKHZhciBfbGVuMyA9IGFyZ3VtZW50cy5sZW5ndGgsIGZ1bmNzID0gQXJyYXkoX2xlbjMpLCBfa2V5MyA9IDA7IF9rZXkzIDwgX2xlbjM7IF9rZXkzKyspIHtcblx0ICAgICAgZnVuY3NbX2tleTNdID0gYXJndW1lbnRzW19rZXkzXTtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgcmVjb21wdXRhdGlvbnMgPSAwO1xuXHQgICAgdmFyIHJlc3VsdEZ1bmMgPSBmdW5jcy5wb3AoKTtcblx0ICAgIHZhciBkZXBlbmRlbmNpZXMgPSBnZXREZXBlbmRlbmNpZXMoZnVuY3MpO1xuXHRcblx0ICAgIHZhciBtZW1vaXplZFJlc3VsdEZ1bmMgPSBtZW1vaXplLmFwcGx5KHVuZGVmaW5lZCwgW2Z1bmN0aW9uICgpIHtcblx0ICAgICAgcmVjb21wdXRhdGlvbnMrKztcblx0ICAgICAgcmV0dXJuIHJlc3VsdEZ1bmMuYXBwbHkodW5kZWZpbmVkLCBhcmd1bWVudHMpO1xuXHQgICAgfV0uY29uY2F0KG1lbW9pemVPcHRpb25zKSk7XG5cdFxuXHQgICAgdmFyIHNlbGVjdG9yID0gZnVuY3Rpb24gc2VsZWN0b3Ioc3RhdGUsIHByb3BzKSB7XG5cdCAgICAgIGZvciAodmFyIF9sZW40ID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW40ID4gMiA/IF9sZW40IC0gMiA6IDApLCBfa2V5NCA9IDI7IF9rZXk0IDwgX2xlbjQ7IF9rZXk0KyspIHtcblx0ICAgICAgICBhcmdzW19rZXk0IC0gMl0gPSBhcmd1bWVudHNbX2tleTRdO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB2YXIgcGFyYW1zID0gZGVwZW5kZW5jaWVzLm1hcChmdW5jdGlvbiAoZGVwZW5kZW5jeSkge1xuXHQgICAgICAgIHJldHVybiBkZXBlbmRlbmN5LmFwcGx5KHVuZGVmaW5lZCwgW3N0YXRlLCBwcm9wc10uY29uY2F0KGFyZ3MpKTtcblx0ICAgICAgfSk7XG5cdCAgICAgIHJldHVybiBtZW1vaXplZFJlc3VsdEZ1bmMuYXBwbHkodW5kZWZpbmVkLCBfdG9Db25zdW1hYmxlQXJyYXkocGFyYW1zKSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIHNlbGVjdG9yLnJlc3VsdEZ1bmMgPSByZXN1bHRGdW5jO1xuXHQgICAgc2VsZWN0b3IucmVjb21wdXRhdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHJldHVybiByZWNvbXB1dGF0aW9ucztcblx0ICAgIH07XG5cdCAgICBzZWxlY3Rvci5yZXNldFJlY29tcHV0YXRpb25zID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICByZXR1cm4gcmVjb21wdXRhdGlvbnMgPSAwO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBzZWxlY3Rvcjtcblx0ICB9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVTZWxlY3RvcigpIHtcblx0ICByZXR1cm4gY3JlYXRlU2VsZWN0b3JDcmVhdG9yKGRlZmF1bHRNZW1vaXplKS5hcHBseSh1bmRlZmluZWQsIGFyZ3VtZW50cyk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZVN0cnVjdHVyZWRTZWxlY3RvcihzZWxlY3RvcnMpIHtcblx0ICB2YXIgc2VsZWN0b3JDcmVhdG9yID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8gY3JlYXRlU2VsZWN0b3IgOiBhcmd1bWVudHNbMV07XG5cdFxuXHQgIGlmICh0eXBlb2Ygc2VsZWN0b3JzICE9PSAnb2JqZWN0Jykge1xuXHQgICAgdGhyb3cgbmV3IEVycm9yKCdjcmVhdGVTdHJ1Y3R1cmVkU2VsZWN0b3IgZXhwZWN0cyBmaXJzdCBhcmd1bWVudCB0byBiZSBhbiBvYmplY3QgJyArICgnd2hlcmUgZWFjaCBwcm9wZXJ0eSBpcyBhIHNlbGVjdG9yLCBpbnN0ZWFkIHJlY2VpdmVkIGEgJyArIHR5cGVvZiBzZWxlY3RvcnMpKTtcblx0ICB9XG5cdCAgdmFyIG9iamVjdEtleXMgPSBPYmplY3Qua2V5cyhzZWxlY3RvcnMpO1xuXHQgIHJldHVybiBzZWxlY3RvckNyZWF0b3Iob2JqZWN0S2V5cy5tYXAoZnVuY3Rpb24gKGtleSkge1xuXHQgICAgcmV0dXJuIHNlbGVjdG9yc1trZXldO1xuXHQgIH0pLCBmdW5jdGlvbiAoKSB7XG5cdCAgICBmb3IgKHZhciBfbGVuNSA9IGFyZ3VtZW50cy5sZW5ndGgsIHZhbHVlcyA9IEFycmF5KF9sZW41KSwgX2tleTUgPSAwOyBfa2V5NSA8IF9sZW41OyBfa2V5NSsrKSB7XG5cdCAgICAgIHZhbHVlc1tfa2V5NV0gPSBhcmd1bWVudHNbX2tleTVdO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiB2YWx1ZXMucmVkdWNlKGZ1bmN0aW9uIChjb21wb3NpdGlvbiwgdmFsdWUsIGluZGV4KSB7XG5cdCAgICAgIGNvbXBvc2l0aW9uW29iamVjdEtleXNbaW5kZXhdXSA9IHZhbHVlO1xuXHQgICAgICByZXR1cm4gY29tcG9zaXRpb247XG5cdCAgICB9LCB7fSk7XG5cdCAgfSk7XG5cdH1cblxuLyoqKi8gfSxcblxuLyoqKi8gMjI2OlxuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX0luZm9UYWJsZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjI3KTtcblx0XG5cdHZhciBfSW5mb1RhYmxlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0luZm9UYWJsZSk7XG5cblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuXHRleHBvcnRzLmRlZmF1bHQgPSBfSW5mb1RhYmxlMi5kZWZhdWx0O1xuXG4vKioqLyB9LFxuXG4vKioqLyAyMjc6XG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXHRcblx0dmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cdFxuXHR2YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdHZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXHRcblx0dmFyIF9sb2Rhc2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTtcblx0XG5cdHZhciBfbG9kYXNoMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2xvZGFzaCk7XG5cdFxuXHR2YXIgX2NsYXNzbmFtZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgwKTtcblx0XG5cdHZhciBfY2xhc3NuYW1lczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc25hbWVzKTtcblx0XG5cdHZhciBfcmVhY3RDc3NNb2R1bGVzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4Mik7XG5cdFxuXHR2YXIgX3JlYWN0Q3NzTW9kdWxlczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdENzc01vZHVsZXMpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHRmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblx0XG5cdGZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXHRcblx0dmFyIF9fZGVjb3JhdGUgPSB1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fZGVjb3JhdGUgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG5cdCAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsXG5cdCAgICAgICAgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsXG5cdCAgICAgICAgZDtcblx0ICAgIGlmICgodHlwZW9mIFJlZmxlY3QgPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZihSZWZsZWN0KSkgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO2Vsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcblx0ICAgICAgICBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuXHQgICAgfXJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG5cdH07XG5cdFxuXHR2YXIgc3R5bGVzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMjgpO1xuXHR2YXIgSW5mb1RhYmxlID0gZnVuY3Rpb24gKF9Db21wb25lbnQpIHtcblx0ICAgIF9pbmhlcml0cyhJbmZvVGFibGUsIF9Db21wb25lbnQpO1xuXHRcblx0ICAgIGZ1bmN0aW9uIEluZm9UYWJsZShwcm9wcykge1xuXHQgICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBJbmZvVGFibGUpO1xuXHRcblx0ICAgICAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgT2JqZWN0LmdldFByb3RvdHlwZU9mKEluZm9UYWJsZSkuY2FsbCh0aGlzLCBwcm9wcykpO1xuXHQgICAgfVxuXHRcblx0ICAgIF9jcmVhdGVDbGFzcyhJbmZvVGFibGUsIFt7XG5cdCAgICAgICAga2V5OiBcInJlbmRlclwiLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG5cdCAgICAgICAgICAgIHZhciBfcHJvcHMgPSB0aGlzLnByb3BzO1xuXHQgICAgICAgICAgICB2YXIgaGVhZGVyID0gX3Byb3BzLmhlYWRlcjtcblx0ICAgICAgICAgICAgdmFyIGRhdGEgPSBfcHJvcHMuZGF0YTtcblx0ICAgICAgICAgICAgdmFyIGVuYWJsZVRvb2x0aXAgPSBfcHJvcHMuZW5hYmxlVG9vbHRpcDtcblx0ICAgICAgICAgICAgdmFyIHN0eWxlID0gX3Byb3BzLnN0eWxlO1xuXHQgICAgICAgICAgICB2YXIgYWN0aW9ucyA9IF9wcm9wcy5hY3Rpb25zO1xuXHQgICAgICAgICAgICB2YXIgb3BlcmF0aW9uTGFiZWwgPSBfcHJvcHMub3BlcmF0aW9uTGFiZWw7XG5cdFxuXHQgICAgICAgICAgICBhY3Rpb25zID0gYWN0aW9ucyB8fCBbXTtcblx0ICAgICAgICAgICAgaWYgKCFoZWFkZXIpIHtcblx0ICAgICAgICAgICAgICAgIGhlYWRlciA9IGRhdGEubGVuZ3RoICE9PSAwICYmIF9sb2Rhc2gyLmRlZmF1bHQua2V5cyhkYXRhWzBdKS5tYXAoZnVuY3Rpb24gKGtleSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGtleToga2V5LFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBrZXlcblx0ICAgICAgICAgICAgICAgICAgICB9O1xuXHQgICAgICAgICAgICAgICAgfSkgfHwgW107XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgdmFyIGNsYXNzTmFtZSA9ICgwLCBfY2xhc3NuYW1lczIuZGVmYXVsdCkoe1xuXHQgICAgICAgICAgICAgICAgJ2luZm8tdGFibGUnOiB0cnVlLFxuXHQgICAgICAgICAgICAgICAgJ2luZm8tdGFibGUtLW5vLWhlYWRlcic6ICFoZWFkZXJcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInRhYmxlXCIsIHsgc3R5bGVOYW1lOiBjbGFzc05hbWUsIHN0eWxlOiBzdHlsZSB8fCB7fSB9LCBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInRib2R5XCIsIG51bGwsIGhlYWRlciA/IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwidHJcIiwgbnVsbCwgaGVhZGVyLm1hcChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInRoXCIsIHsga2V5OiBpbmRleCB9LCBpdGVtLm5hbWUpO1xuXHQgICAgICAgICAgICB9KSwgYWN0aW9ucy5sZW5ndGggIT09IDAgJiYgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJ0aFwiLCBudWxsLCBvcGVyYXRpb25MYWJlbCB8fCAn5pON5L2cJykpIDogX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJ0clwiLCBudWxsKSwgZGF0YS5tYXAoZnVuY3Rpb24gKHJvdywgaW5kZXgpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInRyXCIsIHsga2V5OiBpbmRleCB9LCBfbG9kYXNoMi5kZWZhdWx0Lm1hcChoZWFkZXIsIGZ1bmN0aW9uIChpdGVtLCBrZXkpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiLCB7IGtleToga2V5IH0sIHJvd1tpdGVtLmtleV0gJiYgcm93W2l0ZW0ua2V5XS50b1N0cmluZygpKTtcblx0ICAgICAgICAgICAgICAgIH0pLCBhY3Rpb25zLmxlbmd0aCAhPT0gMCAmJiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInRkXCIsIHsgc3R5bGVOYW1lOiBcImFjdGlvbnNcIiB9LCBhY3Rpb25zLmxlbmd0aCAhPT0gMCAmJiBhY3Rpb25zLm1hcChmdW5jdGlvbiAoYWN0aW9uLCBpbmRleDIpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBzdHlsZU5hbWU6IFwiYWN0aW9uXCIsIGtleTogaW5kZXgyLCBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKGUpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbi5mbihkYXRhW2luZGV4XSk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIH0gfSwgYWN0aW9uLm5hbWUpO1xuXHQgICAgICAgICAgICAgICAgfSkpKTtcblx0ICAgICAgICAgICAgfSkpKTtcblx0ICAgICAgICB9XG5cdCAgICB9XSk7XG5cdFxuXHQgICAgcmV0dXJuIEluZm9UYWJsZTtcblx0fShfcmVhY3QuQ29tcG9uZW50KTtcblx0SW5mb1RhYmxlID0gX19kZWNvcmF0ZShbKDAsIF9yZWFjdENzc01vZHVsZXMyLmRlZmF1bHQpKHN0eWxlcyldLCBJbmZvVGFibGUpO1xuXHRleHBvcnRzLmRlZmF1bHQgPSBJbmZvVGFibGU7XG5cbi8qKiovIH0sXG5cbi8qKiovIDIyODpcbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8vIHJlbW92ZWQgYnkgZXh0cmFjdC10ZXh0LXdlYnBhY2stcGx1Z2luXG5cdG1vZHVsZS5leHBvcnRzID0ge1wiaW5mby10YWJsZS0tbm8taGVhZGVyXCI6XCJpbmZvLXRhYmxlLS1uby1oZWFkZXJfMnYzeHhcIixcImluZm8tdGFibGVcIjpcImluZm8tdGFibGVfQjdKWVVcIixcImFjdGlvbnNcIjpcImFjdGlvbnNfcFJfTnpcIixcImFjdGlvblwiOlwiYWN0aW9uXzNETEt5XCJ9O1xuXG4vKioqLyB9LFxuXG4vKioqLyAyMjk6XG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfQ29udGVudFBhZ2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzMCk7XG5cdFxuXHR2YXIgX0NvbnRlbnRQYWdlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0NvbnRlbnRQYWdlKTtcblxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5cdGV4cG9ydHMuZGVmYXVsdCA9IF9Db250ZW50UGFnZTIuZGVmYXVsdDtcblxuLyoqKi8gfSxcblxuLyoqKi8gMjMwOlxuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cdFxuXHR2YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdHZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXHRcblx0dmFyIF9QYWdpbmF0b3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzMSk7XG5cdFxuXHR2YXIgX1BhZ2luYXRvcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9QYWdpbmF0b3IpO1xuXHRcblx0dmFyIF9yZWFjdFJlZHV4ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblx0XG5cdHZhciBfc2VsZWN0b3JzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNjApO1xuXHRcblx0dmFyIHNlbGVjdG9ycyA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKF9zZWxlY3RvcnMpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7IGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsgcmV0dXJuIG9iajsgfSBlbHNlIHsgdmFyIG5ld09iaiA9IHt9OyBpZiAob2JqICE9IG51bGwpIHsgZm9yICh2YXIga2V5IGluIG9iaikgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgbmV3T2JqW2tleV0gPSBvYmpba2V5XTsgfSB9IG5ld09iai5kZWZhdWx0ID0gb2JqOyByZXR1cm4gbmV3T2JqOyB9IH1cblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXHRcblx0ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblx0XG5cdHZhciBDb250ZW50UGFnZSA9IGZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG5cdCAgICBfaW5oZXJpdHMoQ29udGVudFBhZ2UsIF9Db21wb25lbnQpO1xuXHRcblx0ICAgIGZ1bmN0aW9uIENvbnRlbnRQYWdlKHByb3BzKSB7XG5cdCAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENvbnRlbnRQYWdlKTtcblx0XG5cdCAgICAgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIE9iamVjdC5nZXRQcm90b3R5cGVPZihDb250ZW50UGFnZSkuY2FsbCh0aGlzLCBwcm9wcykpO1xuXHQgICAgfVxuXHRcblx0ICAgIF9jcmVhdGVDbGFzcyhDb250ZW50UGFnZSwgW3tcblx0ICAgICAgICBrZXk6ICdjb21wb25lbnREaWRNb3VudCcsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge31cblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdyZW5kZXInLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG5cdCAgICAgICAgICAgIHZhciBfcHJvcHMgPSB0aGlzLnByb3BzO1xuXHQgICAgICAgICAgICB2YXIgY2hpbGRyZW4gPSBfcHJvcHMuY2hpbGRyZW47XG5cdCAgICAgICAgICAgIHZhciByb3V0aW5nID0gX3Byb3BzLnJvdXRpbmc7XG5cdCAgICAgICAgICAgIHZhciBfcHJvcHMkcGFnaW5hdGlvbkxpbmsgPSBfcHJvcHMucGFnaW5hdGlvbkxpbmtzO1xuXHQgICAgICAgICAgICB2YXIgbmV4dCA9IF9wcm9wcyRwYWdpbmF0aW9uTGluay5uZXh0O1xuXHQgICAgICAgICAgICB2YXIgbGFzdCA9IF9wcm9wcyRwYWdpbmF0aW9uTGluay5sYXN0O1xuXHRcblx0ICAgICAgICAgICAgdmFyIGFsbCA9IGxhc3QgJiYgbGFzdC5wYWdlIHx8IDE7XG5cdCAgICAgICAgICAgIHZhciBjdXJyZW50ID0gbmV4dCA/IG5leHQucGFnZSAtIDEgOiBhbGw7XG5cdCAgICAgICAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLCBudWxsLCBjaGlsZHJlbiwgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX1BhZ2luYXRvcjIuZGVmYXVsdCwgeyBhbGw6IGFsbCwgY3VycmVudDogY3VycmVudCwgdXJsOiB7XG5cdCAgICAgICAgICAgICAgICAgICAgcGF0aG5hbWU6IHJvdXRpbmcucGF0aG5hbWUsXG5cdCAgICAgICAgICAgICAgICAgICAgcXVlcnk6IHJvdXRpbmcucXVlcnkgfHwge31cblx0ICAgICAgICAgICAgICAgIH0gfSkpO1xuXHQgICAgICAgIH1cblx0ICAgIH1dKTtcblx0XG5cdCAgICByZXR1cm4gQ29udGVudFBhZ2U7XG5cdH0oX3JlYWN0LkNvbXBvbmVudCk7XG5cdFxuXHR2YXIgbWFwU3RhdGVUb1Byb3BzID0gZnVuY3Rpb24gbWFwU3RhdGVUb1Byb3BzKHN0YXRlLCBvd25Qcm9wcykge1xuXHQgICAgdmFyIF9vd25Qcm9wcyRwYWdpbmF0aW9uID0gb3duUHJvcHMucGFnaW5hdGlvbjtcblx0ICAgIHZhciBuYW1lID0gX293blByb3BzJHBhZ2luYXRpb24ubmFtZTtcblx0ICAgIHZhciBrZXkgPSBfb3duUHJvcHMkcGFnaW5hdGlvbi5rZXk7XG5cdFxuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgICByb3V0aW5nOiBzdGF0ZS5yb3V0aW5nLmxvY2F0aW9uQmVmb3JlVHJhbnNpdGlvbnMgfHwge30sXG5cdCAgICAgICAgcGFnaW5hdGlvbkxpbmtzOiBzZWxlY3RvcnMucGFnaW5hdGlvbkxpbmtTZWxlY3RvcihuYW1lLCBrZXkpKHN0YXRlKVxuXHQgICAgfTtcblx0fTtcblx0ZXhwb3J0cy5kZWZhdWx0ID0gKDAsIF9yZWFjdFJlZHV4LmNvbm5lY3QpKG1hcFN0YXRlVG9Qcm9wcywge30pKENvbnRlbnRQYWdlKTtcblxuLyoqKi8gfSxcblxuLyoqKi8gMjMxOlxuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX1BhZ2luYXRvciA9IF9fd2VicGFja19yZXF1aXJlX18oMjMyKTtcblx0XG5cdHZhciBfUGFnaW5hdG9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1BhZ2luYXRvcik7XG5cblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuXHRleHBvcnRzLmRlZmF1bHQgPSBfUGFnaW5hdG9yMi5kZWZhdWx0O1xuXG4vKioqLyB9LFxuXG4vKioqLyAyMzI6XG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXHRcblx0dmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cdFxuXHR2YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdHZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXHRcblx0dmFyIF9yZWFjdFJvdXRlciA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdFxuXHR2YXIgX2xvZGFzaCA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpO1xuXHRcblx0dmFyIF9sb2Rhc2gyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbG9kYXNoKTtcblx0XG5cdHZhciBfdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTtcblx0XG5cdHZhciBfdXRpbHMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdXRpbHMpO1xuXHRcblx0dmFyIF9yZWFjdENzc01vZHVsZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgyKTtcblx0XG5cdHZhciBfcmVhY3RDc3NNb2R1bGVzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0Q3NzTW9kdWxlcyk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblx0XG5cdGZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cdFxuXHR2YXIgX19kZWNvcmF0ZSA9IHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19kZWNvcmF0ZSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcblx0ICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCxcblx0ICAgICAgICByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYyxcblx0ICAgICAgICBkO1xuXHQgICAgaWYgKCh0eXBlb2YgUmVmbGVjdCA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mKFJlZmxlY3QpKSA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7ZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuXHQgICAgICAgIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG5cdCAgICB9cmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcblx0fTtcblx0XG5cdHZhciBzdHlsZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzMyk7XG5cdHZhciBQYWdpbmF0b3IgPSBmdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuXHQgICAgX2luaGVyaXRzKFBhZ2luYXRvciwgX0NvbXBvbmVudCk7XG5cdFxuXHQgICAgZnVuY3Rpb24gUGFnaW5hdG9yKHByb3BzKSB7XG5cdCAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFBhZ2luYXRvcik7XG5cdFxuXHQgICAgICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoUGFnaW5hdG9yKS5jYWxsKHRoaXMsIHByb3BzKSk7XG5cdCAgICB9XG5cdFxuXHQgICAgX2NyZWF0ZUNsYXNzKFBhZ2luYXRvciwgW3tcblx0ICAgICAgICBrZXk6IFwicGFyc2VVcmxcIixcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcGFyc2VVcmwocGF0aG5hbWUsIHF1ZXJ5LCBwYWdlTnVtKSB7XG5cdCAgICAgICAgICAgIHZhciB1cmxTdHlsZSA9IHRoaXMucHJvcHMudXJsU3R5bGUgPyB0aGlzLnByb3BzLnVybFN0eWxlIDogJ3F1ZXJ5Jztcblx0ICAgICAgICAgICAgaWYgKHVybFN0eWxlID09PSAncXVlcnknKSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgX3F1ZXJ5UGFydCA9IF91dGlsczIuZGVmYXVsdC5wYXJzZUZvcm1EYXRhKF9sb2Rhc2gyLmRlZmF1bHQub21pdChxdWVyeSwgWydwYWdlJ10pKTtcblx0ICAgICAgICAgICAgICAgIHJldHVybiBcIlwiICsgcGF0aG5hbWUgKyAoX3F1ZXJ5UGFydCA/IFwiP1wiICsgX3F1ZXJ5UGFydCArIFwiJlwiIDogJz8nKSArIFwicGFnZT1cIiArIHBhZ2VOdW07XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgdmFyIHF1ZXJ5UGFydCA9IF91dGlsczIuZGVmYXVsdC5wYXJzZUZvcm1EYXRhKHF1ZXJ5KTtcblx0ICAgICAgICAgICAgcmV0dXJuIHBhdGhuYW1lICsgXCIvcGFnZS9cIiArIHBhZ2VOdW0gKyBcIj9cIiArIHF1ZXJ5UGFydDtcblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiBcInJlbmRlclwiLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG5cdCAgICAgICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXHRcblx0ICAgICAgICAgICAgdmFyIHJhbmdlID0gdGhpcy5wcm9wcy5yYW5nZSA/IHRoaXMucHJvcHMucmFuZ2UgOiAzO1xuXHQgICAgICAgICAgICB2YXIgdG90YWxSYW5nZUVuZEluZGV4ID0gdGhpcy5wcm9wcy5hbGwgLSAxO1xuXHQgICAgICAgICAgICB2YXIgY3VycmVudEluZGV4ID0gcGFyc2VJbnQodGhpcy5wcm9wcy5jdXJyZW50KSAtIDE7XG5cdCAgICAgICAgICAgIHZhciByYW5nZVN0YXJ0SW5kZXggPSBjdXJyZW50SW5kZXggLSByYW5nZTtcblx0ICAgICAgICAgICAgdmFyIHJhbmdlRW5kSW5kZXggPSBjdXJyZW50SW5kZXggKyByYW5nZTtcblx0ICAgICAgICAgICAgdmFyIGxlZnRTcHJlYWQgPSBmYWxzZTtcblx0ICAgICAgICAgICAgdmFyIHJpZ2h0U3ByZWFkID0gZmFsc2U7XG5cdCAgICAgICAgICAgIHZhciBwYWdlcyA9IFtdO1xuXHQgICAgICAgICAgICB2YXIgdXJsID0gdGhpcy5wcm9wcy51cmw7XG5cdCAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5wcm9wcy5hbGwgIT09ICdudW1iZXInKSB7XG5cdCAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2FsbCDlv4XpobvkuLogbnVtYmVyIOexu+Wei++8gScpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIC8vIOmqjOivgVxuXHQgICAgICAgICAgICBpZiAodHlwZW9mIGN1cnJlbnRJbmRleCAhPT0gJ251bWJlcicpIHtcblx0ICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCLpobXnoIHlv4XpobvkuLrmlbDlrZfvvIzljbTlvpfliLAgXCIgKyAodHlwZW9mIGN1cnJlbnRJbmRleCA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mKGN1cnJlbnRJbmRleCkpKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBpZiAoY3VycmVudEluZGV4ID4gcmFuZ2VFbmRJbmRleCB8fCBjdXJyZW50SW5kZXggPCAwKSB7XG5cdCAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCfpobXnoIHkuI3og73lpKfkuo7miYDmnInpobXpnaLmlbDnm67miJblsI/kuo4gMe+8gScpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGlmIChyYW5nZSAqIDIgKyAxID49IHRvdGFsUmFuZ2VFbmRJbmRleCkge1xuXHQgICAgICAgICAgICAgICAgLy8g5oC76ZW/5bqm5bCP5LqOIHJhbmdlIOebtOW+hFxuXHQgICAgICAgICAgICAgICAgcmFuZ2VFbmRJbmRleCA9IHRvdGFsUmFuZ2VFbmRJbmRleDtcblx0ICAgICAgICAgICAgICAgIHJhbmdlU3RhcnRJbmRleCA9IDA7XG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgICAvLyDlpITnkIblj7PkvqfmuqLlh7pcblx0ICAgICAgICAgICAgICAgIGlmIChyYW5nZUVuZEluZGV4ID49IHRvdGFsUmFuZ2VFbmRJbmRleCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJhbmdlRW5kSW5kZXggPSB0b3RhbFJhbmdlRW5kSW5kZXg7XG5cdCAgICAgICAgICAgICAgICAgICAgcmFuZ2VTdGFydEluZGV4ID0gdG90YWxSYW5nZUVuZEluZGV4IC0gKHJhbmdlICogMiArIDEpO1xuXHQgICAgICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgICAgICByaWdodFNwcmVhZCA9IHRydWU7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICBpZiAocmFuZ2VTdGFydEluZGV4IDw9IDApIHtcblx0ICAgICAgICAgICAgICAgICAgICByYW5nZVN0YXJ0SW5kZXggPSAwO1xuXHQgICAgICAgICAgICAgICAgICAgIHJhbmdlRW5kSW5kZXggPSByYW5nZSAqIDIgKyAxO1xuXHQgICAgICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgICAgICBsZWZ0U3ByZWFkID0gdHJ1ZTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBmb3IgKHZhciBpID0gcmFuZ2VTdGFydEluZGV4OyBpIDw9IHJhbmdlRW5kSW5kZXg7IGkrKykge1xuXHQgICAgICAgICAgICAgICAgcGFnZXMgPSBwYWdlcy5jb25jYXQoW3tcblx0ICAgICAgICAgICAgICAgICAgICBwYWdlTnVtOiBpICsgMSxcblx0ICAgICAgICAgICAgICAgICAgICBpc0N1cnJlbnQ6IGkgPT09IGN1cnJlbnRJbmRleFxuXHQgICAgICAgICAgICAgICAgfV0pO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIC8vIGFkZCBzcHJlYWRcblx0ICAgICAgICAgICAgaWYgKGxlZnRTcHJlYWQpIHtcblx0ICAgICAgICAgICAgICAgIHZhciBzcGQgPSBbe1xuXHQgICAgICAgICAgICAgICAgICAgIHBhZ2VOdW06IDFcblx0ICAgICAgICAgICAgICAgIH0sIHtcblx0ICAgICAgICAgICAgICAgICAgICBpc1NwcmVhZDogdHJ1ZVxuXHQgICAgICAgICAgICAgICAgfV07XG5cdCAgICAgICAgICAgICAgICBwYWdlcyA9IHNwZC5jb25jYXQocGFnZXMpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGlmIChyaWdodFNwcmVhZCkge1xuXHQgICAgICAgICAgICAgICAgdmFyIF9zcGQgPSBbe1xuXHQgICAgICAgICAgICAgICAgICAgIGlzU3ByZWFkOiB0cnVlXG5cdCAgICAgICAgICAgICAgICB9LCB7XG5cdCAgICAgICAgICAgICAgICAgICAgcGFnZU51bTogdG90YWxSYW5nZUVuZEluZGV4ICsgMVxuXHQgICAgICAgICAgICAgICAgfV07XG5cdCAgICAgICAgICAgICAgICBwYWdlcyA9IHBhZ2VzLmNvbmNhdChfc3BkKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5hbGwgIT09IDEgJiYgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBzdHlsZU5hbWU6IFwicGFnaW5hdG9yXCIgfSwgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJ1bFwiLCBudWxsLCBwYWdlcy5tYXAoZnVuY3Rpb24gKHBhZ2UsIGluZGV4KSB7XG5cdCAgICAgICAgICAgICAgICBpZiAocGFnZS5pc0N1cnJlbnQpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJsaVwiLCB7IGtleTogaW5kZXgsIHN0eWxlTmFtZTogXCJwYWdlLW51bS0tY3VycmVudFwiIH0sIHBhZ2UucGFnZU51bSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICBpZiAocGFnZS5pc1NwcmVhZCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImxpXCIsIHsga2V5OiBpbmRleCwgc3R5bGVOYW1lOiBcInBhZ2Utc3ByZWFkXCIgfSwgXCIuLi5cIik7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJsaVwiLCB7IGtleTogaW5kZXgsIHN0eWxlTmFtZTogXCJwYWdlLW51bVwiIH0sIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdFJvdXRlci5MaW5rLCB7IHRvOiBfdGhpczIucGFyc2VVcmwodXJsLnBhdGhuYW1lLCB1cmwucXVlcnksIHBhZ2UucGFnZU51bSkgfSwgcGFnZS5wYWdlTnVtKSk7XG5cdCAgICAgICAgICAgIH0pKSk7XG5cdCAgICAgICAgfVxuXHQgICAgfV0pO1xuXHRcblx0ICAgIHJldHVybiBQYWdpbmF0b3I7XG5cdH0oX3JlYWN0LkNvbXBvbmVudCk7XG5cdFBhZ2luYXRvciA9IF9fZGVjb3JhdGUoWygwLCBfcmVhY3RDc3NNb2R1bGVzMi5kZWZhdWx0KShzdHlsZXMpXSwgUGFnaW5hdG9yKTtcblx0ZXhwb3J0cy5kZWZhdWx0ID0gUGFnaW5hdG9yO1xuXG4vKioqLyB9LFxuXG4vKioqLyAyMzM6XG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvLyByZW1vdmVkIGJ5IGV4dHJhY3QtdGV4dC13ZWJwYWNrLXBsdWdpblxuXHRtb2R1bGUuZXhwb3J0cyA9IHtcInBhZ2Utc3ByZWFkXCI6XCJwYWdlLXNwcmVhZF8ySU5IVVwiLFwicGFnZS1udW1cIjpcInBhZ2UtbnVtXzJvUFFVXCIsXCJwYWdlLW51bS0tY3VycmVudFwiOlwicGFnZS1udW0tLWN1cnJlbnRfMVkybUVcIixcInBhZ2luYXRvclwiOlwicGFnaW5hdG9yXzFSSEFtXCJ9O1xuXG4vKioqLyB9LFxuXG4vKioqLyAyMzQ6XG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfbGlmZWNpcmNsZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjM1KTtcblx0XG5cdE9iamVjdC5rZXlzKF9saWZlY2lyY2xlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcblx0ICBpZiAoa2V5ID09PSBcImRlZmF1bHRcIikgcmV0dXJuO1xuXHQgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHtcblx0ICAgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgICAgcmV0dXJuIF9saWZlY2lyY2xlW2tleV07XG5cdCAgICB9XG5cdCAgfSk7XG5cdH0pO1xuXG4vKioqLyB9LFxuXG4vKioqLyAyMzU6XG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLm9uUm91dGluZ0NoYW5nZSA9IHVuZGVmaW5lZDtcblx0XG5cdHZhciBfbG9kYXNoID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCk7XG5cdFxuXHR2YXIgX2xvZGFzaDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9sb2Rhc2gpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdC8vIOajgOafpSBzdG9yZSDph4zpnaLnmoQgcm91dGluZyDmmK/lkKblj5jljJZcblx0dmFyIG9uUm91dGluZ0NoYW5nZSA9IGV4cG9ydHMub25Sb3V0aW5nQ2hhbmdlID0gZnVuY3Rpb24gb25Sb3V0aW5nQ2hhbmdlKGZuKSB7XG5cdCAgICByZXR1cm4gZnVuY3Rpb24gKG5leHRQcm9wcywgY3VycmVudFByb3BzKSB7XG5cdCAgICAgICAgaWYgKCFjdXJyZW50UHJvcHMucm91dGluZykge1xuXHQgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdyb3V0aW5nIOmcgOimgeeOsOWcqOe7hOS7tiBwcm9wcyDph4zpnaLlo7DmmI7vvIEnKTtcblx0ICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB2YXIgaGFzUGF0aFBhcmFtQ2hhbmdlZCA9ICFfbG9kYXNoMi5kZWZhdWx0LmlzRXF1YWwobmV4dFByb3BzLnJvdXRpbmcsIGN1cnJlbnRQcm9wcy5yb3V0aW5nKTtcblx0ICAgICAgICBpZiAoaGFzUGF0aFBhcmFtQ2hhbmdlZCkge1xuXHQgICAgICAgICAgICBmbihuZXh0UHJvcHMucm91dGluZyk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0fTtcblxuLyoqKi8gfSxcblxuLyoqKi8gMjM4OlxuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cdFxuXHR2YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdHZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXHRcblx0dmFyIF9yZWFjdFJlZHV4ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblx0XG5cdHZhciBfYWN0aW9ucyA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cdFxuXHR2YXIgX0luZm9UYWJsZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjI2KTtcblx0XG5cdHZhciBfSW5mb1RhYmxlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0luZm9UYWJsZSk7XG5cdFxuXHR2YXIgX3NlbGVjdG9ycyA9IF9fd2VicGFja19yZXF1aXJlX18oMTYwKTtcblx0XG5cdHZhciBzZWxlY3RvcnMgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChfc2VsZWN0b3JzKTtcblx0XG5cdHZhciBfRG9jQ29udGFpbmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMzQpO1xuXHRcblx0dmFyIF9Eb2NDb250YWluZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRG9jQ29udGFpbmVyKTtcblx0XG5cdHZhciBfQ29udGVudFBhZ2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyOSk7XG5cdFxuXHR2YXIgX0NvbnRlbnRQYWdlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0NvbnRlbnRQYWdlKTtcblx0XG5cdHZhciBfaGVscGVycyA9IF9fd2VicGFja19yZXF1aXJlX18oMjM0KTtcblx0XG5cdHZhciBoZWxwZXJzID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQoX2hlbHBlcnMpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7IGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsgcmV0dXJuIG9iajsgfSBlbHNlIHsgdmFyIG5ld09iaiA9IHt9OyBpZiAob2JqICE9IG51bGwpIHsgZm9yICh2YXIga2V5IGluIG9iaikgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgbmV3T2JqW2tleV0gPSBvYmpba2V5XTsgfSB9IG5ld09iai5kZWZhdWx0ID0gb2JqOyByZXR1cm4gbmV3T2JqOyB9IH1cblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXHRcblx0ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblx0XG5cdHZhciBNYW5hZ2VVc2VycyA9IGZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG5cdCAgICBfaW5oZXJpdHMoTWFuYWdlVXNlcnMsIF9Db21wb25lbnQpO1xuXHRcblx0ICAgIGZ1bmN0aW9uIE1hbmFnZVVzZXJzKHByb3BzKSB7XG5cdCAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE1hbmFnZVVzZXJzKTtcblx0XG5cdCAgICAgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIE9iamVjdC5nZXRQcm90b3R5cGVPZihNYW5hZ2VVc2VycykuY2FsbCh0aGlzLCBwcm9wcykpO1xuXHQgICAgfVxuXHRcblx0ICAgIF9jcmVhdGVDbGFzcyhNYW5hZ2VVc2VycywgW3tcblx0ICAgICAgICBrZXk6ICdsb2FkVXNlcnMnLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBsb2FkVXNlcnMoKSB7XG5cdCAgICAgICAgICAgIHZhciBwcm9wcyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMCB8fCBhcmd1bWVudHNbMF0gPT09IHVuZGVmaW5lZCA/IHRoaXMucHJvcHMgOiBhcmd1bWVudHNbMF07XG5cdFxuXHQgICAgICAgICAgICB0aGlzLnByb3BzLmZldGNoVXNlcnMoe1xuXHQgICAgICAgICAgICAgICAgYXBpOiB7XG5cdCAgICAgICAgICAgICAgICAgICAgcGFnZTogcHJvcHMucm91dGluZy5xdWVyeS5wYWdlIHx8ICcxJ1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAnY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcycsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzLCBuZXh0U3RhdGUpIHtcblx0ICAgICAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cdFxuXHQgICAgICAgICAgICBoZWxwZXJzLm9uUm91dGluZ0NoYW5nZShmdW5jdGlvbiAocm91dGluZykge1xuXHQgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AgPSAwO1xuXHQgICAgICAgICAgICAgICAgX3RoaXMyLmxvYWRVc2VycyhuZXh0UHJvcHMpO1xuXHQgICAgICAgICAgICB9KShuZXh0UHJvcHMsIHRoaXMucHJvcHMpO1xuXHQgICAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdjb21wb25lbnREaWRNb3VudCcsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuXHQgICAgICAgICAgICB0aGlzLmxvYWRVc2VycygpO1xuXHQgICAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdyZW5kZXInLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG5cdCAgICAgICAgICAgIHZhciB1c2VycyA9IHRoaXMucHJvcHMudXNlcnM7XG5cdFxuXHQgICAgICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0RvY0NvbnRhaW5lcjIuZGVmYXVsdCwgeyB0aXRsZTogXCLnlKjmiLfnrqHnkIZcIiB9LCBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfQ29udGVudFBhZ2UyLmRlZmF1bHQsIHsgcGFnaW5hdGlvbjoge1xuXHQgICAgICAgICAgICAgICAgICAgIG5hbWU6ICd1c2Vycydcblx0ICAgICAgICAgICAgICAgIH0gfSwgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0luZm9UYWJsZTIuZGVmYXVsdCwgeyBkYXRhOiB1c2VycyB9KSkpO1xuXHQgICAgICAgIH1cblx0ICAgIH1dKTtcblx0XG5cdCAgICByZXR1cm4gTWFuYWdlVXNlcnM7XG5cdH0oX3JlYWN0LkNvbXBvbmVudCk7XG5cdFxuXHRmdW5jdGlvbiBtYXBTdGF0ZVRvUHJvcHMoc3RhdGUsIG93blByb3BzKSB7XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICAgIHVzZXJzOiBzZWxlY3RvcnMudXNlcnNTZWxlY3RvcihzdGF0ZSksXG5cdCAgICAgICAgcm91dGluZzogc3RhdGUucm91dGluZy5sb2NhdGlvbkJlZm9yZVRyYW5zaXRpb25zXG5cdCAgICB9O1xuXHR9XG5cdGV4cG9ydHMuZGVmYXVsdCA9ICgwLCBfcmVhY3RSZWR1eC5jb25uZWN0KShtYXBTdGF0ZVRvUHJvcHMsIHsgZmV0Y2hVc2VyczogX2FjdGlvbnMuZmV0Y2hVc2VycyB9KShNYW5hZ2VVc2Vycyk7XG5cbi8qKiovIH1cblxufSk7XG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogMTMuMTMuanNcbiAqKi8iLCJpbXBvcnQgeyBjcmVhdGVTZWxlY3RvciB9IGZyb20gJ3Jlc2VsZWN0J1xuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJ1xuaW1wb3J0IHsgc2VsZWN0UGFnaW5hdGVkRW50aXRpZXMgfSBmcm9tICcuL2NvbW1vbidcbmltcG9ydCAqIGFzIGNvbW1vbiBmcm9tICcuL2NvbW1vbidcblxuZXhwb3J0IGNvbnN0IHF1ZXJ5RG91YmFuQm9va3NTZWxlY3RvciA9IHF1ZXJ5ID0+IGNyZWF0ZVNlbGVjdG9yKFxuICBzZWxlY3RQYWdpbmF0ZWRFbnRpdGllcyh7XG4gICAgZW50aXRpZXNOYW1lOiAnZG91YmFuQm9va3MnLFxuICAgIHBhZ2luYXRpb25OYW1lOiAnZG91YmFuQm9va3MnLFxuICAgIHBhZ2luYXRpb25RdWVyeTogcXVlcnlcbiAgfSksXG4gIGJvb2tzID0+IGJvb2tzXG4pXG5cbmV4cG9ydCBjb25zdCBxdWVyeUF1dGhvcnNTZWxlY3RvciA9IHF1ZXJ5ID0+IHNlbGVjdFBhZ2luYXRlZEVudGl0aWVzKHtcbiAgZW50aXRpZXNOYW1lOiAnYXV0aG9ycycsXG4gIHBhZ2luYXRpb25OYW1lOiAnYXV0aG9ycycsXG4gIHBhZ2luYXRpb25RdWVyeTogcXVlcnlcbn0pXG5cbmV4cG9ydCBjb25zdCBzZWFyY2hCb29rc1NlbGVjdG9yID0gcXVlcnkgPT4gc2VsZWN0UGFnaW5hdGVkRW50aXRpZXMoe1xuICBlbnRpdGllc05hbWU6ICdib29rcycsXG4gIHBhZ2luYXRpb25OYW1lOiAnYm9va3MnLFxuICBwYWdpbmF0aW9uUXVlcnk6IHF1ZXJ5XG59KVxuXG5leHBvcnQgY29uc3QgZG91YmFuQm9va3NBc09wdGlvbnMgPSBxdWVyeSA9PiBjcmVhdGVTZWxlY3RvcihcbiAgcXVlcnlEb3ViYW5Cb29rc1NlbGVjdG9yKHF1ZXJ5KSxcbiAgYm9va3MgPT4ge1xuICAgIHJldHVybiBib29rcy5tYXAoYm9vayA9PiAoe1xuICAgICAgbmFtZTogYm9vay50aXRsZSxcbiAgICAgIHZhbHVlOiBib29rLmlkLFxuICAgICAgYWRkaXRpb25hbDoge1xuICAgICAgICBkZXNjcmlwdGlvbjogYm9vay5zdW1tYXJ5LFxuICAgICAgICBjb3ZlcjogYm9vay5pbWFnZXMubGFyZ2UsXG4gICAgICAgIGF1dGhvcjogYm9vay5hdXRob3Iuam9pbignLCAnKVxuICAgICAgfVxuICAgIH0pKVxuICB9XG4pXG5cbmV4cG9ydCBjb25zdCBhdXRob3JzQXNPcHRpb25zID0gcXVlcnkgPT4gY3JlYXRlU2VsZWN0b3IoXG4gIHF1ZXJ5QXV0aG9yc1NlbGVjdG9yKHF1ZXJ5KSxcbiAgaXRlbXMgPT4ge1xuICAgIHJldHVybiBpdGVtcy5tYXAoaXRlbSA9PiAoe1xuICAgICAgbmFtZTogaXRlbS5uYW1lLFxuICAgICAgdmFsdWU6IGl0ZW0uaWRcbiAgICB9KSlcbiAgfVxuKVxuXG5leHBvcnQgY29uc3QgYm9va3NTZWFyY2hBc09wdGlvbnMgPSBxdWVyeSA9PiBjcmVhdGVTZWxlY3RvcihcbiAgc2VhcmNoQm9va3NTZWxlY3RvcihxdWVyeSksXG4gIGl0ZW1zID0+IHtcbiAgICByZXR1cm4gaXRlbXMubWFwKGl0ZW0gPT4gKHtcbiAgICAgIG5hbWU6IGl0ZW0udGl0bGUsXG4gICAgICB2YWx1ZTogaXRlbS5pZFxuICAgIH0pKVxuICB9XG4pXG5cbmV4cG9ydCBjb25zdCBib29rc1NlbGVjdG9yID0gY3JlYXRlU2VsZWN0b3IoXG4gIHNlbGVjdFBhZ2luYXRlZEVudGl0aWVzKHtcbiAgICBlbnRpdGllc05hbWU6ICdib29rcycsXG4gICAgcGFnaW5hdGlvbk5hbWU6ICdib29rcycsXG4gICAgcGFnaW5hdGlvbktleTogJ2RlZmF1bHQnXG4gIH0pLFxuICBib29rcyA9PiBib29rc1xuKVxuXG5leHBvcnQgY29uc3QgdXNlcnNTZWxlY3RvciA9IHNlbGVjdFBhZ2luYXRlZEVudGl0aWVzKHtcbiAgZW50aXRpZXNOYW1lOiAndXNlcnMnLFxuICBwYWdpbmF0aW9uTmFtZTogJ3VzZXJzJyxcbiAgcGFnaW5hdGlvbktleTogJ2RlZmF1bHQnXG59KVxuXG5leHBvcnQgKiBmcm9tICcuL2NvbW1vbidcbmV4cG9ydCB7IGNvbW1vbiB9XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBzcmMvaXNvbW9ycGhpYy9zdG9yZS9zZWxlY3RvcnMvaW5kZXgudHNcbiAqKi8iLCJpbXBvcnQgeyBjcmVhdGVTZWxlY3RvciB9IGZyb20gJ3Jlc2VsZWN0J1xuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJ1xuXG5jb25zdCBlbnRpdGllc1NlbGVjdG9yID0gbmFtZSA9PiBzdGF0ZSA9PiB7XG4gIHJldHVybiBzdGF0ZS5lbnRpdGllc1tuYW1lXSB8fCB7fVxufVxuY29uc3QgcGFnaW5hdGlvblNlbGVjdG9yID0gKG5hbWUsIGtleSA9ICdkZWZhdWx0JykgPT4gc3RhdGUgPT4ge1xuICByZXR1cm4gXy5nZXQoc3RhdGUucGFnaW5hdGlvbiwgYCR7bmFtZX0uJHtrZXl9Lmlkc2AsIFtdKVxufVxuZXhwb3J0IGNvbnN0IHBhZ2luYXRpb25MaW5rU2VsZWN0b3IgPSAobmFtZSwga2V5ID0gJ2RlZmF1bHQnKSA9PiBzdGF0ZSA9PiB7XG4gIHJldHVybiBfLnBpY2soXy5nZXQoc3RhdGUucGFnaW5hdGlvbiwgYCR7bmFtZX0uJHtrZXl9YCwge30pLCBbJ25leHQnLCAnbGFzdCddKVxufVxuY29uc3QgcXVlcnlQYWdpbmF0aW9uU2VsZWN0b3IgPSAobmFtZSwgcXVlcnkpID0+IHN0YXRlID0+IHtcbiAgcmV0dXJuIF8uZ2V0KHN0YXRlLnBhZ2luYXRpb24sIFtuYW1lLCAncXVlcnknLCBxdWVyeSwgJ2lkcyddLCBbXSlcbn1cblxudHlwZSBTZWxlY3RQYWdpbmF0ZWRFbnRpdGllc09wdGlvbnMgPSB7XG4gIGVudGl0aWVzTmFtZTogc3RyaW5nXG4gIHBhZ2luYXRpb25OYW1lOiBzdHJpbmdcbiAgcGFnaW5hdGlvbktleT86IHN0cmluZ1xuICBwYWdpbmF0aW9uUXVlcnk/OiBzdHJpbmdcbn1cbmV4cG9ydCBjb25zdCBzZWxlY3RQYWdpbmF0ZWRFbnRpdGllcyA9IChvcHRpb25zOiBTZWxlY3RQYWdpbmF0ZWRFbnRpdGllc09wdGlvbnMpID0+IHtcbiAgY29uc3Qge2VudGl0aWVzTmFtZSwgcGFnaW5hdGlvbk5hbWUsIHBhZ2luYXRpb25LZXksIHBhZ2luYXRpb25RdWVyeX0gPSBvcHRpb25zXG4gIGxldCBwYWdpU2VsZWN0b3I6IChzdGF0ZTogYW55KSA9PiBhbnlbXVxuXG4gIGlmIChwYWdpbmF0aW9uUXVlcnkpIHtcbiAgICBwYWdpU2VsZWN0b3IgPSBxdWVyeVBhZ2luYXRpb25TZWxlY3RvcihwYWdpbmF0aW9uTmFtZSwgcGFnaW5hdGlvblF1ZXJ5KVxuICB9IGVsc2Uge1xuICAgIHBhZ2lTZWxlY3RvciA9IHBhZ2luYXRpb25TZWxlY3RvcihwYWdpbmF0aW9uTmFtZSwgcGFnaW5hdGlvbktleSlcbiAgfVxuXG4gIHJldHVybiBjcmVhdGVTZWxlY3RvcihcbiAgICBlbnRpdGllc1NlbGVjdG9yKGVudGl0aWVzTmFtZSksXG4gICAgcGFnaVNlbGVjdG9yLFxuICAgIChlbnRpdGllcywgaWRzKSA9PiB7XG4gICAgICByZXR1cm4gaWRzLm1hcChpZCA9PiBlbnRpdGllc1tpZF0pXG4gICAgfVxuICApXG59XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBzcmMvaXNvbW9ycGhpYy9zdG9yZS9zZWxlY3RvcnMvY29tbW9uLnRzXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuZXhwb3J0cy5kZWZhdWx0TWVtb2l6ZSA9IGRlZmF1bHRNZW1vaXplO1xuZXhwb3J0cy5jcmVhdGVTZWxlY3RvckNyZWF0b3IgPSBjcmVhdGVTZWxlY3RvckNyZWF0b3I7XG5leHBvcnRzLmNyZWF0ZVNlbGVjdG9yID0gY3JlYXRlU2VsZWN0b3I7XG5leHBvcnRzLmNyZWF0ZVN0cnVjdHVyZWRTZWxlY3RvciA9IGNyZWF0ZVN0cnVjdHVyZWRTZWxlY3RvcjtcblxuZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gQXJyYXkoYXJyLmxlbmd0aCk7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfSBlbHNlIHsgcmV0dXJuIEFycmF5LmZyb20oYXJyKTsgfSB9XG5cbmZ1bmN0aW9uIGRlZmF1bHRFcXVhbGl0eUNoZWNrKGEsIGIpIHtcbiAgcmV0dXJuIGEgPT09IGI7XG59XG5cbmZ1bmN0aW9uIGRlZmF1bHRNZW1vaXplKGZ1bmMpIHtcbiAgdmFyIGVxdWFsaXR5Q2hlY2sgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDEgfHwgYXJndW1lbnRzWzFdID09PSB1bmRlZmluZWQgPyBkZWZhdWx0RXF1YWxpdHlDaGVjayA6IGFyZ3VtZW50c1sxXTtcblxuICB2YXIgbGFzdEFyZ3MgPSBudWxsO1xuICB2YXIgbGFzdFJlc3VsdCA9IG51bGw7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgaWYgKGxhc3RBcmdzICE9PSBudWxsICYmIGxhc3RBcmdzLmxlbmd0aCA9PT0gYXJncy5sZW5ndGggJiYgYXJncy5ldmVyeShmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7XG4gICAgICByZXR1cm4gZXF1YWxpdHlDaGVjayh2YWx1ZSwgbGFzdEFyZ3NbaW5kZXhdKTtcbiAgICB9KSkge1xuICAgICAgcmV0dXJuIGxhc3RSZXN1bHQ7XG4gICAgfVxuICAgIGxhc3RSZXN1bHQgPSBmdW5jLmFwcGx5KHVuZGVmaW5lZCwgYXJncyk7XG4gICAgbGFzdEFyZ3MgPSBhcmdzO1xuICAgIHJldHVybiBsYXN0UmVzdWx0O1xuICB9O1xufVxuXG5mdW5jdGlvbiBnZXREZXBlbmRlbmNpZXMoZnVuY3MpIHtcbiAgdmFyIGRlcGVuZGVuY2llcyA9IEFycmF5LmlzQXJyYXkoZnVuY3NbMF0pID8gZnVuY3NbMF0gOiBmdW5jcztcblxuICBpZiAoIWRlcGVuZGVuY2llcy5ldmVyeShmdW5jdGlvbiAoZGVwKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBkZXAgPT09ICdmdW5jdGlvbic7XG4gIH0pKSB7XG4gICAgdmFyIGRlcGVuZGVuY3lUeXBlcyA9IGRlcGVuZGVuY2llcy5tYXAoZnVuY3Rpb24gKGRlcCkge1xuICAgICAgcmV0dXJuIHR5cGVvZiBkZXA7XG4gICAgfSkuam9pbignLCAnKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1NlbGVjdG9yIGNyZWF0b3JzIGV4cGVjdCBhbGwgaW5wdXQtc2VsZWN0b3JzIHRvIGJlIGZ1bmN0aW9ucywgJyArICgnaW5zdGVhZCByZWNlaXZlZCB0aGUgZm9sbG93aW5nIHR5cGVzOiBbJyArIGRlcGVuZGVuY3lUeXBlcyArICddJykpO1xuICB9XG5cbiAgcmV0dXJuIGRlcGVuZGVuY2llcztcbn1cblxuZnVuY3Rpb24gY3JlYXRlU2VsZWN0b3JDcmVhdG9yKG1lbW9pemUpIHtcbiAgZm9yICh2YXIgX2xlbjIgPSBhcmd1bWVudHMubGVuZ3RoLCBtZW1vaXplT3B0aW9ucyA9IEFycmF5KF9sZW4yID4gMSA/IF9sZW4yIC0gMSA6IDApLCBfa2V5MiA9IDE7IF9rZXkyIDwgX2xlbjI7IF9rZXkyKyspIHtcbiAgICBtZW1vaXplT3B0aW9uc1tfa2V5MiAtIDFdID0gYXJndW1lbnRzW19rZXkyXTtcbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgZm9yICh2YXIgX2xlbjMgPSBhcmd1bWVudHMubGVuZ3RoLCBmdW5jcyA9IEFycmF5KF9sZW4zKSwgX2tleTMgPSAwOyBfa2V5MyA8IF9sZW4zOyBfa2V5MysrKSB7XG4gICAgICBmdW5jc1tfa2V5M10gPSBhcmd1bWVudHNbX2tleTNdO1xuICAgIH1cblxuICAgIHZhciByZWNvbXB1dGF0aW9ucyA9IDA7XG4gICAgdmFyIHJlc3VsdEZ1bmMgPSBmdW5jcy5wb3AoKTtcbiAgICB2YXIgZGVwZW5kZW5jaWVzID0gZ2V0RGVwZW5kZW5jaWVzKGZ1bmNzKTtcblxuICAgIHZhciBtZW1vaXplZFJlc3VsdEZ1bmMgPSBtZW1vaXplLmFwcGx5KHVuZGVmaW5lZCwgW2Z1bmN0aW9uICgpIHtcbiAgICAgIHJlY29tcHV0YXRpb25zKys7XG4gICAgICByZXR1cm4gcmVzdWx0RnVuYy5hcHBseSh1bmRlZmluZWQsIGFyZ3VtZW50cyk7XG4gICAgfV0uY29uY2F0KG1lbW9pemVPcHRpb25zKSk7XG5cbiAgICB2YXIgc2VsZWN0b3IgPSBmdW5jdGlvbiBzZWxlY3RvcihzdGF0ZSwgcHJvcHMpIHtcbiAgICAgIGZvciAodmFyIF9sZW40ID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW40ID4gMiA/IF9sZW40IC0gMiA6IDApLCBfa2V5NCA9IDI7IF9rZXk0IDwgX2xlbjQ7IF9rZXk0KyspIHtcbiAgICAgICAgYXJnc1tfa2V5NCAtIDJdID0gYXJndW1lbnRzW19rZXk0XTtcbiAgICAgIH1cblxuICAgICAgdmFyIHBhcmFtcyA9IGRlcGVuZGVuY2llcy5tYXAoZnVuY3Rpb24gKGRlcGVuZGVuY3kpIHtcbiAgICAgICAgcmV0dXJuIGRlcGVuZGVuY3kuYXBwbHkodW5kZWZpbmVkLCBbc3RhdGUsIHByb3BzXS5jb25jYXQoYXJncykpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gbWVtb2l6ZWRSZXN1bHRGdW5jLmFwcGx5KHVuZGVmaW5lZCwgX3RvQ29uc3VtYWJsZUFycmF5KHBhcmFtcykpO1xuICAgIH07XG5cbiAgICBzZWxlY3Rvci5yZXN1bHRGdW5jID0gcmVzdWx0RnVuYztcbiAgICBzZWxlY3Rvci5yZWNvbXB1dGF0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiByZWNvbXB1dGF0aW9ucztcbiAgICB9O1xuICAgIHNlbGVjdG9yLnJlc2V0UmVjb21wdXRhdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gcmVjb21wdXRhdGlvbnMgPSAwO1xuICAgIH07XG4gICAgcmV0dXJuIHNlbGVjdG9yO1xuICB9O1xufVxuXG5mdW5jdGlvbiBjcmVhdGVTZWxlY3RvcigpIHtcbiAgcmV0dXJuIGNyZWF0ZVNlbGVjdG9yQ3JlYXRvcihkZWZhdWx0TWVtb2l6ZSkuYXBwbHkodW5kZWZpbmVkLCBhcmd1bWVudHMpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVTdHJ1Y3R1cmVkU2VsZWN0b3Ioc2VsZWN0b3JzKSB7XG4gIHZhciBzZWxlY3RvckNyZWF0b3IgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDEgfHwgYXJndW1lbnRzWzFdID09PSB1bmRlZmluZWQgPyBjcmVhdGVTZWxlY3RvciA6IGFyZ3VtZW50c1sxXTtcblxuICBpZiAodHlwZW9mIHNlbGVjdG9ycyAhPT0gJ29iamVjdCcpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NyZWF0ZVN0cnVjdHVyZWRTZWxlY3RvciBleHBlY3RzIGZpcnN0IGFyZ3VtZW50IHRvIGJlIGFuIG9iamVjdCAnICsgKCd3aGVyZSBlYWNoIHByb3BlcnR5IGlzIGEgc2VsZWN0b3IsIGluc3RlYWQgcmVjZWl2ZWQgYSAnICsgdHlwZW9mIHNlbGVjdG9ycykpO1xuICB9XG4gIHZhciBvYmplY3RLZXlzID0gT2JqZWN0LmtleXMoc2VsZWN0b3JzKTtcbiAgcmV0dXJuIHNlbGVjdG9yQ3JlYXRvcihvYmplY3RLZXlzLm1hcChmdW5jdGlvbiAoa2V5KSB7XG4gICAgcmV0dXJuIHNlbGVjdG9yc1trZXldO1xuICB9KSwgZnVuY3Rpb24gKCkge1xuICAgIGZvciAodmFyIF9sZW41ID0gYXJndW1lbnRzLmxlbmd0aCwgdmFsdWVzID0gQXJyYXkoX2xlbjUpLCBfa2V5NSA9IDA7IF9rZXk1IDwgX2xlbjU7IF9rZXk1KyspIHtcbiAgICAgIHZhbHVlc1tfa2V5NV0gPSBhcmd1bWVudHNbX2tleTVdO1xuICAgIH1cblxuICAgIHJldHVybiB2YWx1ZXMucmVkdWNlKGZ1bmN0aW9uIChjb21wb3NpdGlvbiwgdmFsdWUsIGluZGV4KSB7XG4gICAgICBjb21wb3NpdGlvbltvYmplY3RLZXlzW2luZGV4XV0gPSB2YWx1ZTtcbiAgICAgIHJldHVybiBjb21wb3NpdGlvbjtcbiAgICB9LCB7fSk7XG4gIH0pO1xufVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Jlc2VsZWN0L2xpYi9pbmRleC5qc1xuICoqIG1vZHVsZSBpZCA9IDE2MlxuICoqIG1vZHVsZSBjaHVua3MgPSAyIDMgMTIgMTMgMTQgMTVcbiAqKi8iLCJpbXBvcnQgSW5mb1RhYmxlIGZyb20gJy4vSW5mb1RhYmxlJ1xuZXhwb3J0IGRlZmF1bHQgSW5mb1RhYmxlXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBzcmMvaXNvbW9ycGhpYy9jb21wb25lbnRzL0luZm9UYWJsZS9pbmRleC50c1xuICoqLyIsImltcG9ydCBSZWFjdCwgeyBDb21wb25lbnQgfSBmcm9tICdyZWFjdCdcbmltcG9ydCBfIGZyb20gJ2xvZGFzaCdcbmltcG9ydCBjbGFzc25hbWVzIGZyb20gJ2NsYXNzbmFtZXMnXG5pbXBvcnQgQ1NTTW9kdWxlcyBmcm9tICdyZWFjdC1jc3MtbW9kdWxlcydcbmNvbnN0IHN0eWxlcyA9IHJlcXVpcmUoJy4vSW5mb1RhYmxlLnNjc3MnKVxuXG5pbnRlcmZhY2UgSVByb3BzIHtcbiAgaGVhZGVyPzoge1xuICAgIGtleTogc3RyaW5nXG4gICAgbmFtZTogc3RyaW5nIHwgSlNYLkVsZW1lbnRcbiAgfVtdXG4gIGRhdGE6IGFueVtdXG4gIC8vIHRvZG9cbiAgZW5hYmxlVG9vbHRpcD86IGJvb2xlYW5cbiAgc3R5bGU/OiBhbnlcbiAgYWN0aW9ucz86IHtcbiAgICBuYW1lOiBzdHJpbmcgfCBKU1guRWxlbWVudFxuICAgIGZuOiAocm93RGF0YTogYW55KSA9PiB2b2lkXG4gIH1bXVxuICBvcGVyYXRpb25MYWJlbD86IHN0cmluZyB8IEpTWC5FbGVtZW50XG59XG5cbkBDU1NNb2R1bGVzKHN0eWxlcylcbmNsYXNzIEluZm9UYWJsZSBleHRlbmRzIENvbXBvbmVudDxJUHJvcHMsIHt9PiB7XG5cbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcylcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBsZXQgeyBoZWFkZXIsIGRhdGEsIGVuYWJsZVRvb2x0aXAsIHN0eWxlLCBhY3Rpb25zLCBvcGVyYXRpb25MYWJlbCB9ID0gdGhpcy5wcm9wc1xuICAgIGFjdGlvbnMgPSBhY3Rpb25zIHx8IFtdXG5cbiAgICBpZiAoIWhlYWRlcikge1xuICAgICAgaGVhZGVyID0gKGRhdGEubGVuZ3RoICE9PSAwICYmIF8ua2V5cyhkYXRhWzBdKS5tYXAoa2V5ID0+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBrZXksXG4gICAgICAgICAgbmFtZToga2V5XG4gICAgICAgIH1cbiAgICAgIH0pKSB8fCBbXVxuICAgIH1cblxuICAgIGNvbnN0IGNsYXNzTmFtZSA9IGNsYXNzbmFtZXMoe1xuICAgICAgJ2luZm8tdGFibGUnOiB0cnVlLFxuICAgICAgJ2luZm8tdGFibGUtLW5vLWhlYWRlcic6ICFoZWFkZXJcbiAgICB9KVxuXG4gICAgcmV0dXJuIChcbiAgICAgIDx0YWJsZSBzdHlsZU5hbWU9e2NsYXNzTmFtZX0gc3R5bGU9e3N0eWxlIHx8IHt9fT5cbiAgICAgICAgPHRib2R5PlxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGhlYWRlclxuICAgICAgICAgICAgICA/IChcbiAgICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGhlYWRlci5tYXAoKGl0ZW0sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBrZXk9e2luZGV4fT57aXRlbS5uYW1lfTwvdGg+XG4gICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBhY3Rpb25zLmxlbmd0aCAhPT0gMCAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgPHRoPnsgb3BlcmF0aW9uTGFiZWwgfHwgJ+aTjeS9nCcgfTwvdGg+XG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIDogPHRyPjwvdHI+XG4gICAgICAgICAgfVxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGRhdGEubWFwKChyb3csIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPHRyIGtleT17aW5kZXh9PlxuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBfLm1hcChoZWFkZXIsIChpdGVtLCBrZXkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGtleT17a2V5fT57cm93W2l0ZW0ua2V5XSAmJiByb3dbaXRlbS5rZXldLnRvU3RyaW5nKCl9PC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbnMubGVuZ3RoICE9PSAwICYmIChcbiAgICAgICAgICAgICAgICAgICAgICA8dGRcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlTmFtZT1cImFjdGlvbnNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb25zLmxlbmd0aCAhPT0gMCAmJiBhY3Rpb25zLm1hcCgoYWN0aW9uLCBpbmRleDIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZU5hbWU9XCJhY3Rpb25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2luZGV4Mn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17ZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uLmZuKGRhdGFbaW5kZXhdKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7YWN0aW9uLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICA8L3Rib2R5PlxuICAgICAgPC90YWJsZT5cbiAgICApXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgSW5mb1RhYmxlXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBzcmMvaXNvbW9ycGhpYy9jb21wb25lbnRzL0luZm9UYWJsZS9JbmZvVGFibGUudHN4XG4gKiovIiwiLy8gcmVtb3ZlZCBieSBleHRyYWN0LXRleHQtd2VicGFjay1wbHVnaW5cbm1vZHVsZS5leHBvcnRzID0ge1wiaW5mby10YWJsZS0tbm8taGVhZGVyXCI6XCJpbmZvLXRhYmxlLS1uby1oZWFkZXJfMnYzeHhcIixcImluZm8tdGFibGVcIjpcImluZm8tdGFibGVfQjdKWVVcIixcImFjdGlvbnNcIjpcImFjdGlvbnNfcFJfTnpcIixcImFjdGlvblwiOlwiYWN0aW9uXzNETEt5XCJ9O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvaXNvbW9ycGhpYy9jb21wb25lbnRzL0luZm9UYWJsZS9JbmZvVGFibGUuc2Nzc1xuICoqIG1vZHVsZSBpZCA9IDIyOFxuICoqIG1vZHVsZSBjaHVua3MgPSAxMiAxM1xuICoqLyIsImltcG9ydCBDb250ZW50UGFnZSBmcm9tICcuL0NvbnRlbnRQYWdlJ1xuZXhwb3J0IGRlZmF1bHQgQ29udGVudFBhZ2VcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHNyYy9pc29tb3JwaGljL2NvbXBvbmVudHMvQ29udGVudFBhZ2UvaW5kZXgudHNcbiAqKi8iLCJpbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgUGFnaW5hdG9yIGZyb20gJy4uLy4uL2VsZW1lbnRzL1BhZ2luYXRvcidcbmltcG9ydCB7IGNvbm5lY3QgfSBmcm9tICdyZWFjdC1yZWR1eCdcbmltcG9ydCAqIGFzIHNlbGVjdG9ycyBmcm9tICcuLi8uLi9zdG9yZS9zZWxlY3RvcnMnXG5cbnR5cGUgUGFnaW5hdGlvbkxpbmsgPSB7XG4gIHBhZ2U6IG51bWJlclxuICB1cmw6IHN0cmluZ1xufVxuXG5pbnRlcmZhY2UgUHJvcHMge1xuICBwYWdpbmF0aW9uOiB7XG4gICAgbmFtZTogc3RyaW5nXG4gICAga2V5Pzogc3RyaW5nXG4gIH1cbn1cblxuaW50ZXJmYWNlIEFsbFByb3BzIGV4dGVuZHMgUHJvcHMge1xuICByb3V0aW5nOiBhbnlcbiAgcGFnaW5hdGlvbkxpbmtzOiB7XG4gICAgbmV4dD86IFBhZ2luYXRpb25MaW5rXG4gICAgbGFzdDogUGFnaW5hdGlvbkxpbmtcbiAgfVxufVxuXG5jbGFzcyBDb250ZW50UGFnZSBleHRlbmRzIENvbXBvbmVudDxBbGxQcm9wcywge30+IHtcblxuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKVxuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgeyBjaGlsZHJlbiwgcm91dGluZywgcGFnaW5hdGlvbkxpbmtzOiB7IG5leHQsIGxhc3QgfSB9ID0gdGhpcy5wcm9wc1xuICAgIGNvbnN0IGFsbCA9IGxhc3QgJiYgbGFzdC5wYWdlIHx8IDFcbiAgICBjb25zdCBjdXJyZW50ID0gbmV4dFxuICAgICAgPyBuZXh0LnBhZ2UgLSAxXG4gICAgICA6IGFsbFxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXY+XG4gICAgICAgIHtjaGlsZHJlbn1cbiAgICAgICAgPFBhZ2luYXRvclxuICAgICAgICAgIGFsbD17YWxsfVxuICAgICAgICAgIGN1cnJlbnQ9e2N1cnJlbnR9XG4gICAgICAgICAgdXJsPXt7XG4gICAgICAgICAgICBwYXRobmFtZTogcm91dGluZy5wYXRobmFtZSxcbiAgICAgICAgICAgIHF1ZXJ5OiByb3V0aW5nLnF1ZXJ5IHx8IHt9XG4gICAgICAgICAgfX1cbiAgICAgICAgICAvPlxuICAgICAgPC9kaXY+XG4gICAgKVxuICB9XG59XG5cbmNvbnN0IG1hcFN0YXRlVG9Qcm9wcyA9IChzdGF0ZSwgb3duUHJvcHMpID0+IHtcbiAgY29uc3QgeyBwYWdpbmF0aW9uOiB7IG5hbWUsIGtleSB9IH0gPSBvd25Qcm9wc1xuXG4gIHJldHVybiB7XG4gICAgcm91dGluZzogc3RhdGUucm91dGluZy5sb2NhdGlvbkJlZm9yZVRyYW5zaXRpb25zIHx8IHt9LFxuICAgIHBhZ2luYXRpb25MaW5rczogc2VsZWN0b3JzLnBhZ2luYXRpb25MaW5rU2VsZWN0b3IobmFtZSwga2V5KShzdGF0ZSlcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBjb25uZWN0PHt9LCB7fSwgUHJvcHM+KFxuICBtYXBTdGF0ZVRvUHJvcHMsXG4gIHt9XG4pKENvbnRlbnRQYWdlKVxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogc3JjL2lzb21vcnBoaWMvY29tcG9uZW50cy9Db250ZW50UGFnZS9Db250ZW50UGFnZS50c3hcbiAqKi8iLCJpbXBvcnQgUGFnaW5hdG9yIGZyb20gJy4vUGFnaW5hdG9yJ1xuZXhwb3J0IGRlZmF1bHQgUGFnaW5hdG9yXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBzcmMvaXNvbW9ycGhpYy9lbGVtZW50cy9QYWdpbmF0b3IvaW5kZXgudHNcbiAqKi8iLCJpbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyBMaW5rIH0gZnJvbSAncmVhY3Qtcm91dGVyJ1xuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJ1xuaW1wb3J0IHV0aWxzIGZyb20gJy4uLy4uL3V0aWxzJ1xuaW1wb3J0IENTU01vZHVsZXMgZnJvbSAncmVhY3QtY3NzLW1vZHVsZXMnXG5jb25zdCBzdHlsZXMgPSByZXF1aXJlKCcuL1BhZ2luYXRvci5zY3NzJylcblxuLyog5qCX5a2QIPCfjLBcbiAqIHJhbmdlID0gMlxuICogfCByYW5nZSB8IGN1cnJlbnQgfCByYW5nZ2UgfFxuICogICAyLCAzLCAgICAgWzRdLCAgICAgNSwgNlxuICovXG5cbnR5cGUgT2piID0ge1xuICBba2V5OiBzdHJpbmddOiBzdHJpbmdcbn1cblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgYWxsOiBudW1iZXJcbiAgY3VycmVudDogbnVtYmVyXG4gIHJhbmdlPzogbnVtYmVyIC8vIGRlZmF1bHQgM1xuICB1cmw6IHtcbiAgICBwYXRobmFtZTogc3RyaW5nXG4gICAgcXVlcnk6IE9iamVjdFxuICB9XG4gIHVybFN0eWxlPzogJ3F1ZXJ5JyB8ICdzbGFzaCdcbn1cblxuQENTU01vZHVsZXMoc3R5bGVzKVxuY2xhc3MgUGFnaW5hdG9yIGV4dGVuZHMgQ29tcG9uZW50PFByb3BzLCB7fT4ge1xuXG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpXG4gIH1cblxuICBwYXJzZVVybChwYXRobmFtZTogc3RyaW5nLCBxdWVyeTogT2JqZWN0LCBwYWdlTnVtKSB7XG4gICAgbGV0IHVybFN0eWxlID0gdGhpcy5wcm9wcy51cmxTdHlsZVxuICAgICAgPyB0aGlzLnByb3BzLnVybFN0eWxlXG4gICAgICA6ICdxdWVyeSdcblxuICAgIGlmICh1cmxTdHlsZSA9PT0gJ3F1ZXJ5Jykge1xuICAgICAgbGV0IHF1ZXJ5UGFydCA9IHV0aWxzLnBhcnNlRm9ybURhdGEoXy5vbWl0KHF1ZXJ5LCBbJ3BhZ2UnXSkpXG4gICAgICByZXR1cm4gYCR7cGF0aG5hbWV9JHtxdWVyeVBhcnQgPyBgPyR7cXVlcnlQYXJ0fSZgIDogJz8nfXBhZ2U9JHtwYWdlTnVtfWBcbiAgICB9XG5cbiAgICBsZXQgcXVlcnlQYXJ0ID0gdXRpbHMucGFyc2VGb3JtRGF0YShxdWVyeSlcbiAgICByZXR1cm4gYCR7cGF0aG5hbWV9L3BhZ2UvJHtwYWdlTnVtfT8ke3F1ZXJ5UGFydH1gXG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgcmFuZ2UgPSB0aGlzLnByb3BzLnJhbmdlID8gdGhpcy5wcm9wcy5yYW5nZSA6IDNcbiAgICBjb25zdCB0b3RhbFJhbmdlRW5kSW5kZXggPSB0aGlzLnByb3BzLmFsbCAtIDFcbiAgICBjb25zdCBjdXJyZW50SW5kZXggPSBwYXJzZUludCh0aGlzLnByb3BzLmN1cnJlbnQgYXMgYW55KSAtIDFcbiAgICBsZXQgcmFuZ2VTdGFydEluZGV4ID0gY3VycmVudEluZGV4IC0gcmFuZ2VcbiAgICBsZXQgcmFuZ2VFbmRJbmRleCA9IGN1cnJlbnRJbmRleCArIHJhbmdlXG4gICAgbGV0IGxlZnRTcHJlYWQgPSBmYWxzZVxuICAgIGxldCByaWdodFNwcmVhZCA9IGZhbHNlXG4gICAgbGV0IHBhZ2VzID0gW11cbiAgICBsZXQgdXJsID0gdGhpcy5wcm9wcy51cmxcblxuICAgIGlmICh0eXBlb2YgdGhpcy5wcm9wcy5hbGwgIT09ICdudW1iZXInKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2FsbCDlv4XpobvkuLogbnVtYmVyIOexu+Wei++8gScpXG4gICAgfVxuXG4gICAgLy8g6aqM6K+BXG4gICAgaWYgKHR5cGVvZiBjdXJyZW50SW5kZXggIT09ICdudW1iZXInKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGDpobXnoIHlv4XpobvkuLrmlbDlrZfvvIzljbTlvpfliLAgJHt0eXBlb2YgY3VycmVudEluZGV4fWApXG4gICAgfVxuICAgIGlmIChjdXJyZW50SW5kZXggPiByYW5nZUVuZEluZGV4IHx8IGN1cnJlbnRJbmRleCA8IDApIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+mhteeggeS4jeiDveWkp+S6juaJgOaciemhtemdouaVsOebruaIluWwj+S6jiAx77yBJylcbiAgICB9XG5cbiAgICBpZiAocmFuZ2UgKiAyICsgMSA+PSB0b3RhbFJhbmdlRW5kSW5kZXgpIHtcbiAgICAgIC8vIOaAu+mVv+W6puWwj+S6jiByYW5nZSDnm7TlvoRcbiAgICAgIHJhbmdlRW5kSW5kZXggPSB0b3RhbFJhbmdlRW5kSW5kZXhcbiAgICAgIHJhbmdlU3RhcnRJbmRleCA9IDBcbiAgICB9IGVsc2Uge1xuICAgICAgLy8g5aSE55CG5Y+z5L6n5rqi5Ye6XG4gICAgICBpZiAocmFuZ2VFbmRJbmRleCA+PSB0b3RhbFJhbmdlRW5kSW5kZXgpIHtcbiAgICAgICAgcmFuZ2VFbmRJbmRleCA9IHRvdGFsUmFuZ2VFbmRJbmRleFxuICAgICAgICByYW5nZVN0YXJ0SW5kZXggPSB0b3RhbFJhbmdlRW5kSW5kZXggLSAocmFuZ2UgKiAyICsgMSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJpZ2h0U3ByZWFkID0gdHJ1ZVxuICAgICAgfVxuXG4gICAgICBpZiAocmFuZ2VTdGFydEluZGV4IDw9IDApIHtcbiAgICAgICAgcmFuZ2VTdGFydEluZGV4ID0gMFxuICAgICAgICByYW5nZUVuZEluZGV4ID0gcmFuZ2UgKiAyICsgMVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGVmdFNwcmVhZCA9IHRydWVcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKGxldCBpID0gcmFuZ2VTdGFydEluZGV4OyBpIDw9IHJhbmdlRW5kSW5kZXg7IGkrKykge1xuICAgICAgcGFnZXMgPSBwYWdlcy5jb25jYXQoW3tcbiAgICAgICAgcGFnZU51bTogaSArIDEsXG4gICAgICAgIGlzQ3VycmVudDogaSA9PT0gY3VycmVudEluZGV4XG4gICAgICB9XSlcbiAgICB9XG5cbiAgICAvLyBhZGQgc3ByZWFkXG4gICAgaWYgKGxlZnRTcHJlYWQpIHtcbiAgICAgIGNvbnN0IHNwZCA9IFtcbiAgICAgICAge1xuICAgICAgICAgIHBhZ2VOdW06IDFcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGlzU3ByZWFkOiB0cnVlXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICAgIHBhZ2VzID0gc3BkLmNvbmNhdChwYWdlcylcbiAgICB9XG5cbiAgICBpZiAocmlnaHRTcHJlYWQpIHtcbiAgICAgIGNvbnN0IHNwZCA9IFtcbiAgICAgICAge1xuICAgICAgICAgIGlzU3ByZWFkOiB0cnVlXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBwYWdlTnVtOiB0b3RhbFJhbmdlRW5kSW5kZXggKyAxXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICAgIHBhZ2VzID0gcGFnZXMuY29uY2F0KHNwZClcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgdGhpcy5wcm9wcy5hbGwgIT09IDEgJiYgKFxuICAgICAgICA8ZGl2IHN0eWxlTmFtZT1cInBhZ2luYXRvclwiPlxuICAgICAgICAgIDx1bD5cbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgcGFnZXMubWFwKChwYWdlLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChwYWdlLmlzQ3VycmVudCkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPGxpIGtleT17aW5kZXh9IHN0eWxlTmFtZT1cInBhZ2UtbnVtLS1jdXJyZW50XCI+e3BhZ2UucGFnZU51bX08L2xpPlxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocGFnZS5pc1NwcmVhZCkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPGxpIGtleT17aW5kZXh9IHN0eWxlTmFtZT1cInBhZ2Utc3ByZWFkXCI+Li4uPC9saT5cbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgPGxpIGtleT17aW5kZXh9IHN0eWxlTmFtZT1cInBhZ2UtbnVtXCI+PExpbmsgdG89e3RoaXMucGFyc2VVcmwodXJsLnBhdGhuYW1lLCB1cmwucXVlcnksIHBhZ2UucGFnZU51bSkgfT57cGFnZS5wYWdlTnVtfTwvTGluaz48L2xpPlxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICA8L3VsPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIClcbiAgICApXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUGFnaW5hdG9yXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBzcmMvaXNvbW9ycGhpYy9lbGVtZW50cy9QYWdpbmF0b3IvUGFnaW5hdG9yLnRzeFxuICoqLyIsIi8vIHJlbW92ZWQgYnkgZXh0cmFjdC10ZXh0LXdlYnBhY2stcGx1Z2luXG5tb2R1bGUuZXhwb3J0cyA9IHtcInBhZ2Utc3ByZWFkXCI6XCJwYWdlLXNwcmVhZF8ySU5IVVwiLFwicGFnZS1udW1cIjpcInBhZ2UtbnVtXzJvUFFVXCIsXCJwYWdlLW51bS0tY3VycmVudFwiOlwicGFnZS1udW0tLWN1cnJlbnRfMVkybUVcIixcInBhZ2luYXRvclwiOlwicGFnaW5hdG9yXzFSSEFtXCJ9O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvaXNvbW9ycGhpYy9lbGVtZW50cy9QYWdpbmF0b3IvUGFnaW5hdG9yLnNjc3NcbiAqKiBtb2R1bGUgaWQgPSAyMzNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMTIgMTNcbiAqKi8iLCJleHBvcnQgKiBmcm9tICcuL2xpZmVjaXJjbGUnXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogc3JjL2lzb21vcnBoaWMvaGVscGVycy9pbmRleC50c1xuICoqLyIsImltcG9ydCBfIGZyb20gJ2xvZGFzaCdcblxuLy8g5qOA5p+lIHN0b3JlIOmHjOmdoueahCByb3V0aW5nIOaYr+WQpuWPmOWMllxuZXhwb3J0IGNvbnN0IG9uUm91dGluZ0NoYW5nZSA9IGZuID0+IChuZXh0UHJvcHMsIGN1cnJlbnRQcm9wcykgPT4ge1xuICBpZiAoIWN1cnJlbnRQcm9wcy5yb3V0aW5nKSB7XG4gICAgY29uc29sZS5lcnJvcigncm91dGluZyDpnIDopoHnjrDlnKjnu4Tku7YgcHJvcHMg6YeM6Z2i5aOw5piO77yBJylcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGNvbnN0IGhhc1BhdGhQYXJhbUNoYW5nZWQgPSAhXy5pc0VxdWFsKG5leHRQcm9wcy5yb3V0aW5nLCBjdXJyZW50UHJvcHMucm91dGluZylcblxuICBpZiAoaGFzUGF0aFBhcmFtQ2hhbmdlZCkge1xuICAgIGZuKG5leHRQcm9wcy5yb3V0aW5nKVxuICB9XG59XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBzcmMvaXNvbW9ycGhpYy9oZWxwZXJzL2xpZmVjaXJjbGUudHNcbiAqKi8iLCJpbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyBjb25uZWN0IH0gZnJvbSAncmVhY3QtcmVkdXgnXG5pbXBvcnQgeyBmZXRjaFVzZXJzIH0gZnJvbSAnLi4vLi4vc3RvcmUvYWN0aW9ucydcbmltcG9ydCBJbmZvVGFibGUgZnJvbSAnLi4vLi4vY29tcG9uZW50cy9JbmZvVGFibGUnXG5pbXBvcnQgKiBhcyBzZWxlY3RvcnMgZnJvbSAnLi4vLi4vc3RvcmUvc2VsZWN0b3JzJ1xuaW1wb3J0IERvY0NvbnRhaW5lciBmcm9tICcuLi8uLi9jb250YWluZXJzL0RvY0NvbnRhaW5lcidcbmltcG9ydCBDb250ZW50UGFnZSBmcm9tICcuLi8uLi9jb21wb25lbnRzL0NvbnRlbnRQYWdlJ1xuaW1wb3J0ICogYXMgaGVscGVycyBmcm9tICcuLi8uLi9oZWxwZXJzJ1xuXG5pbnRlcmZhY2UgUHJvcHMge1xuICBmZXRjaFVzZXJzOiAob3B0aW9ucz86IGZldGNoVXNlcnMpID0+IHZvaWRcbiAgdXNlcnM6IGFueVtdXG4gIHJvdXRpbmc6IGFueVxufVxuXG5jbGFzcyBNYW5hZ2VVc2VycyBleHRlbmRzIENvbXBvbmVudDxQcm9wcywge30+IHtcblxuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKVxuICB9XG5cbiAgbG9hZFVzZXJzKHByb3BzID0gdGhpcy5wcm9wcykge1xuICAgIHRoaXMucHJvcHMuZmV0Y2hVc2Vycyh7XG4gICAgICBhcGk6IHtcbiAgICAgICAgcGFnZTogcHJvcHMucm91dGluZy5xdWVyeS5wYWdlIHx8ICcxJ1xuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcywgbmV4dFN0YXRlKSB7XG4gICAgaGVscGVycy5vblJvdXRpbmdDaGFuZ2Uocm91dGluZyA9PiB7XG4gICAgICBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCA9IDBcbiAgICAgIHRoaXMubG9hZFVzZXJzKG5leHRQcm9wcylcbiAgICB9KShuZXh0UHJvcHMsIHRoaXMucHJvcHMpXG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICB0aGlzLmxvYWRVc2VycygpXG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgbGV0IHt1c2Vyc30gPSB0aGlzLnByb3BzXG5cbiAgICByZXR1cm4gKFxuICAgICAgPERvY0NvbnRhaW5lciB0aXRsZT1cIueUqOaIt+euoeeQhlwiPlxuICAgICAgICA8Q29udGVudFBhZ2VcbiAgICAgICAgICBwYWdpbmF0aW9uPXt7XG4gICAgICAgICAgICBuYW1lOiAndXNlcnMnXG4gICAgICAgICAgfX1cbiAgICAgICAgICA+XG4gICAgICAgICAgPEluZm9UYWJsZVxuICAgICAgICAgICAgZGF0YT17dXNlcnN9XG4gICAgICAgICAgICAvPlxuICAgICAgICA8L0NvbnRlbnRQYWdlPlxuICAgICAgPC9Eb2NDb250YWluZXI+XG4gICAgKVxuICB9XG59XG5cbmZ1bmN0aW9uIG1hcFN0YXRlVG9Qcm9wcyhzdGF0ZSwgb3duUHJvcHMpIHtcbiAgcmV0dXJuIHtcbiAgICB1c2Vyczogc2VsZWN0b3JzLnVzZXJzU2VsZWN0b3Ioc3RhdGUpLFxuICAgIHJvdXRpbmc6IHN0YXRlLnJvdXRpbmcubG9jYXRpb25CZWZvcmVUcmFuc2l0aW9ucyxcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBjb25uZWN0KFxuICBtYXBTdGF0ZVRvUHJvcHMsXG4gIHsgZmV0Y2hVc2VycyB9XG4pKE1hbmFnZVVzZXJzIGFzIGFueSlcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHNyYy9pc29tb3JwaGljL3JvdXRlcy9NYW5hZ2VVc2Vycy9NYW5hZ2VVc2Vycy50c3hcbiAqKi8iXSwic291cmNlUm9vdCI6IiJ9