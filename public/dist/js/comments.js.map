{"version":3,"sources":["../../src/js/comments.js"],"names":[],"mappings":"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","file":"comments.js","sourcesContent":["// tutorial18.js\nvar CommentBox = React.createClass({\n  loadCommentsFromServer: function() {\n    $.ajax({\n      url: this.props.url,\n      dataType: 'json',\n      cache: false,\n      success: function(data) {\n        this.setState({data: data});\n      }.bind(this),\n      error: function(xhr, status, err) {\n        console.error(this.props.url, status, err.toString());\n      }.bind(this)\n    });\n  },\n  \n  handleCommentSubmit: function(comment) {\n    var comments = this.state.data;\n    // Optimistically set an id on the new comment. It will be replaced by an\n    // id generated by the server. In a production application you would likely\n    // not use Date.now() for this and would have a more robust system in place.\n    comment.id = Date.now();\n    var newComments = comments.concat([comment]);\n    this.setState({data: newComments});\n    $.ajax({\n      url: this.props.url,\n      dataType: 'json',\n      type: 'POST',\n      data: comment,\n      success: function(data) {\n        this.setState({data: data});\n      }.bind(this),\n      error: function(xhr, status, err) {\n        this.setState({data: comments});\n        console.error(this.props.url, status, err.toString());\n      }.bind(this)\n    });\n  },\n  getInitialState: function() {\n    return {data: []};\n  },\n  componentDidMount: function() {\n    this.loadCommentsFromServer();\n    setInterval(this.loadCommentsFromServer, this.props.pollInterval);\n  },\n  render: function() {\n    return (\n      <div className=\"commentBox\">\n        <h1>Comments</h1>\n        <CommentList data={this.state.data} />\n        <CommentForm onCommentSubmit={this.handleCommentSubmit} />\n      </div>\n    );\n  }\n});\n\n\nvar Comment = React.createClass({\n  rawMarkup: function() {\n    var rawMarkup = marked(this.props.children.toString(), {sanitize: true});\n    return { __html: rawMarkup };\n  },\n  render: function() {\n    return (\n      <div className=\"comment\">\n        <h2 className=\"commentAuthor\">\n          {this.props.author}\n        </h2>\n        <span dangerouslySetInnerHTML={this.rawMarkup()} />\n      </div>\n    );\n  }\n});\n\n\nvar CommentList = React.createClass({\n  render: function() {\n    var commentNodes = this.props.data.map(function(comment) {\n      return (\n        <Comment author={comment.author} key={comment.id}>\n          {comment.text}\n        </Comment>\n      );\n    });\n    return (\n      <div className=\"commentList\">\n        {commentNodes}\n      </div>\n    );\n  }\n});\n\nvar CommentForm = React.createClass({\n  getInitialState: function() {\n    return {author: '', text: ''};\n  },\n  handleAuthorChange: function(e) {\n    this.setState({author: e.target.value});\n  },\n  handleTextChange: function(e) {\n    this.setState({text: e.target.value});\n  },\n  handleSubmit: function(e) {\n    e.preventDefault();\n    var author = this.state.author.trim();\n    var text = this.state.text.trim();\n    if (!text || !author) {\n      return;\n    }\n    this.props.onCommentSubmit({author: author, text: text});\n    this.setState({author: '', text: ''});\n  },\n  render: function() {\n    return (\n      <form className=\"commentForm\" onSubmit={this.handleSubmit}>\n        <input\n          type=\"text\"\n          placeholder=\"Your name\"\n          value={this.state.author}\n          onChange={this.handleAuthorChange}\n        />\n        <input\n          type=\"text\"\n          placeholder=\"Say something...\"\n          value={this.state.text}\n          onChange={this.handleTextChange}\n        />\n        <input type=\"submit\" value=\"Post\" />\n      </form>\n    );\n  }\n});\n\nvar data = [\n  {id: 1, author: \"Pete Hunt\", text: \"This is the first comment\"},\n  {id: 2, author: \"Jordan Walke\", text: \"This is *another* comment\"}\n];\n\n\n\nReactDOM.render(\n  <CommentBox url=\"/api/comments\" pollInterval={2000} />,\n  document.getElementById('content')\n);\n\n\n// tutorial1-raw.js\n// var CommentBox = React.createClass({displayName: 'CommentBox',\n//   render: function() {\n//     return (\n//       React.createElement('div', {className: \"commentBox\"},\n//         \"Hello, world! I am a CommentBox.\"\n//       )\n//     );\n//   }\n// });\n// ReactDOM.render(\n//   React.createElement(CommentBox, null),\n//   document.getElementById('content')\n// );"]}