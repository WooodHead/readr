{"version":3,"sources":["../../webpack/bootstrap 5d6fea45042cc33093fb","../../external \"react\"","../.././~/css-loader/lib/css-base.js","../.././~/isomorphic-style-loader/lib/insertCss.js","../../external \"lodash/assign\"","../.././src/server/errors/generic-error.ts","../../external \"react-css-modules\"","../.././src/isomorphic/constants/actionTypes.ts","../../external \"lodash/omit\"","../.././src/isomorphic/constants/common.ts","../../external \"react-router\"","../.././src/isomorphic/helpers/index.ts","../.././src/server/data/schemas.ts","../.././src/server/models/model.ts","../../external \"lodash/get\"","../.././src/server/utils/i18n.ts","../.././src/isomorphic/store/actions/index.ts","../../external \"redux-saga/effects\"","../../external \"redux\"","../.././src/app.config.ts","../.././src/server/errors/index.ts","../../external \"react-redux\"","../../external \"classnames\"","../.././src/isomorphic/services/api/index.ts","../../external \"lodash/isEmpty\"","../.././src/isomorphic/utils/index.ts","../.././src/server/helpers/index.ts","../../external \"lodash/merge\"","../.././src/isomorphic/store/selectors/index.ts","../../external \"better-redux-form\"","../.././src/isomorphic/elements/Icon/index.ts","../.././src/isomorphic/elements/Container/index.ts","../.././src/isomorphic/utils/dom/isDescendant.ts","../../external \"lodash/pick\"","../.././src/isomorphic/services/utils/callApi.ts","../.././src/isomorphic/store/selectors/common.ts","../.././src/isomorphic/utils/parseUrlencoded.ts","../.././src/server/utils/index.ts","../.././src/isomorphic/components/Branding/Branding.scss","webpack:///./src/isomorphic/elements/Dropdown/Dropdown.scss?7d9b","webpack:///./src/isomorphic/elements/Modal/Modal.scss?ecca","../../external \"humps\"","../../external \"lodash/isNil\"","../../external \"lodash/last\"","../../external \"react-dom/server\"","../../external \"reselect\"","../.././src/isomorphic/containers/DocContainer.tsx","../.././src/isomorphic/elements/layout.ts","../../external \"lodash/isEqual\"","../../external \"lodash/map\"","../.././src/isomorphic/components/Logo/index.ts","../.././src/isomorphic/containers/AppDoc.tsx","../.././src/isomorphic/containers/ServerSideAppRoot.tsx","../.././src/isomorphic/elements/Alert/Alert.tsx","../.././src/isomorphic/elements/Dropdown/index.ts","../.././src/isomorphic/elements/Modal/Modal.tsx","../.././src/isomorphic/elements/Modal/index.ts","../.././src/isomorphic/helpers/isServerRoutingEnabled.ts","../.././src/isomorphic/services/schemas.ts","../.././src/isomorphic/services/utils/handleResponse.ts","../.././src/isomorphic/store/actions/utils.ts","../.././src/isomorphic/store/middleware/api.ts","../.././src/isomorphic/store/middleware/handleServerStore.ts","../.././src/isomorphic/store/middleware/logActionTypes.ts","../.././src/isomorphic/store/middleware/modifyResponse.ts","../.././src/isomorphic/store/sagas/utils.ts","../.././src/isomorphic/utils/padNumberWithZero.ts","../.././src/isomorphic/utils/parseQuery.ts","../.././src/server/api/file.ts","../.././src/server/models/output-empty-entity.ts","../.././src/server/models/paginate.ts","../.././src/server/utils/print.ts","../.././src/server/utils/validator.ts","webpack:///./src/isomorphic/elements/Alert/Alert.scss?dad9","../../external \"bluebird\"","../../external \"express\"","../../external \"lodash/isUndefined\"","../../external \"normalizr\"","../../external \"path\"","../../external \"react-router-redux\"","../../external \"redux-saga\"","../.././src/server/index.ts","../../external \"babel-polyfill\"","../.././src/isomorphic/elements/form.ts","../../external \"lodash/keys\"","../.././src/isomorphic/elements/Modal/ModalFooter.tsx","../.././src/isomorphic/constants/viewerDefs.ts","../.././src/isomorphic/elements/Button/index.ts","../.././src/isomorphic/elements/Fade/index.ts","../.././src/isomorphic/elements/Input/index.ts","../.././src/isomorphic/routes/Viewer/Viewer.utils.ts","webpack:///./src/isomorphic/routes/Viewer/components/BookPage.scss?42fb","../../external \"react-addons-css-transition-group\"","../.././build/static/assets.manifest.json","../.././src/app.config.dev.ts","../.././src/app.config.prod.ts","../.././src/isomorphic/components/Branding/Branding.tsx","../.././src/isomorphic/components/Branding/index.tsx","../.././src/isomorphic/components/Colophon/Colophon.tsx","../.././src/isomorphic/components/Colophon/index.ts","../.././src/isomorphic/components/ConsoleBranding/ConsoleBranding.tsx","../.././src/isomorphic/components/ConsoleBranding/index.ts","../.././src/isomorphic/components/ConsoleSidebar/ConsoleSidebar.tsx","../.././src/isomorphic/components/ConsoleSidebar/index.ts","../.././src/isomorphic/components/Logo/Logo.tsx","../.././src/isomorphic/constants/index.ts","../.././src/isomorphic/containers/App.tsx","../.././src/isomorphic/containers/BodyClass.tsx","../.././src/isomorphic/containers/Console.tsx","../.././src/isomorphic/containers/Master.tsx","../.././src/isomorphic/containers/Page500.tsx","../.././src/isomorphic/content/menus.ts","../.././src/isomorphic/data/cache.ts","../.././src/isomorphic/elements/Alert/Alerts.tsx","../.././src/isomorphic/elements/Alert/index.tsx","../.././src/isomorphic/elements/Button/Button.tsx","../.././src/isomorphic/elements/Container/Container.tsx","../.././src/isomorphic/elements/Dropdown/Dropdown.tsx","../.././src/isomorphic/elements/Dropdown/DropdownItem.tsx","../.././src/isomorphic/elements/Dropdown/DropdownItemSep.tsx","../.././src/isomorphic/elements/Fade/Fade.tsx","../.././src/isomorphic/elements/Icon/Icon.tsx","../.././src/isomorphic/elements/Icon/svg-icons.ts","../.././src/isomorphic/elements/Input/Input.tsx","../.././src/isomorphic/elements/Modal/ConfirmModal.tsx","../.././src/isomorphic/elements/Modal/ModalPlus.tsx","../.././src/isomorphic/elements/SelectizeInput/SelectizeInput.tsx","../.././src/isomorphic/elements/SelectizeInput/index.ts","../.././src/isomorphic/elements/Textarea/Textarea.tsx","../.././src/isomorphic/elements/Textarea/index.ts","../.././src/isomorphic/helpers/getApiRoot.ts","../.././src/isomorphic/helpers/isServerEnv.ts","../.././src/isomorphic/helpers/lifecircle.ts","../.././src/isomorphic/helpers/print.ts","../.././src/isomorphic/helpers/redirect.ts","../.././src/isomorphic/routes/AddBook/index.ts","../.././src/isomorphic/routes/AddCollection/index.ts","../.././src/isomorphic/routes/AppHome/index.ts","../.././src/isomorphic/routes/BookDetail/index.ts","../.././src/isomorphic/routes/Browse/index.ts","../.././src/isomorphic/routes/CollectionDetail/index.ts","../.././src/isomorphic/routes/Collections/index.ts","../.././src/isomorphic/routes/ManageBooks/index.ts","../.././src/isomorphic/routes/ManageUsers/index.ts","../.././src/isomorphic/routes/NoMatch/index.ts","../.././src/isomorphic/routes/Preference/index.ts","../.././src/isomorphic/routes/Profile/index.ts","../.././src/isomorphic/routes/Shelf/index.ts","../.././src/isomorphic/routes/Signin/index.ts","../.././src/isomorphic/routes/Signup/index.ts","../.././src/isomorphic/routes/TestPlace/index.ts","../.././src/isomorphic/routes/Viewer/index.ts","../.././src/isomorphic/routes/createRoutes.tsx","../.././src/isomorphic/services/api/api.ts","../.././src/isomorphic/services/utils/jsonp.ts","../.././src/isomorphic/services/utils/normalizeResponse.ts","../.././src/isomorphic/store/actions/api.ts","../.././src/isomorphic/store/actions/common.ts","../.././src/isomorphic/store/actions/test.ts","../.././src/isomorphic/store/actions/viewer.ts","../.././src/isomorphic/store/configureStore.ts","../.././src/isomorphic/store/handleInitialState.ts","../.././src/isomorphic/store/middleware/cache.ts","../.././src/isomorphic/store/middleware/index.ts","../.././src/isomorphic/store/reducers/components/index.ts","../.././src/isomorphic/store/reducers/components/viewer.ts","../.././src/isomorphic/store/reducers/index.ts","../.././src/isomorphic/store/reducers/paginate.ts","../.././src/isomorphic/store/reducers/pagination.ts","../.././src/isomorphic/store/sagas/index.ts","../.././src/isomorphic/store/sagas/loadRequests.ts","../.././src/isomorphic/store/sagas/loginFlow.ts","../.././src/isomorphic/store/sagas/test.ts","../.././src/isomorphic/store/sagas/viewerTasks.ts","../.././src/isomorphic/store/selectors/entities.ts","../.././src/isomorphic/store/selectors/viewer.ts","../.././src/isomorphic/utils/browser/getScreenInfo.ts","../.././src/isomorphic/utils/browser/index.ts","../.././src/isomorphic/utils/browser/isIE.ts","../.././src/isomorphic/utils/browser/lockScroll.ts","../.././src/isomorphic/utils/browser/unlockScroll.ts","../.././src/isomorphic/utils/dom/index.ts","../.././src/isomorphic/utils/getCurrentTime.ts","../.././src/server/api/basic-api.ts","../.././src/server/api/books.ts","../.././src/server/api/collections.ts","../.././src/server/api/index.ts","../.././src/server/api/user.ts","../.././src/server/api/users.ts","../.././src/server/bootstrap.ts","../.././src/server/data/types.ts","../.././src/server/endpoints/index.ts","../.././src/server/endpoints/make-basic-endpoint.ts","../.././src/server/errors/bad-request-error.ts","../.././src/server/errors/email-error.ts","../.././src/server/errors/internal-server-error.ts","../.././src/server/errors/method-not-allowed-error.ts","../.././src/server/errors/no-permission-error.ts","../.././src/server/errors/not-found-error.ts","../.././src/server/errors/request-too-large-error.ts","../.././src/server/errors/token-revocation-error.ts","../.././src/server/errors/too-many-requests-error.ts","../.././src/server/errors/unauthorized-error.ts","../.././src/server/errors/unsupported-file-type-error.ts","../.././src/server/errors/validation-error.ts","../.././src/server/helpers/compute-hash.ts","../.././src/server/initialize.ts","../.././src/server/middleware/auth.ts","../.././src/server/middleware/handle-api-not-found.ts","../.././src/server/middleware/handle-error.ts","../.././src/server/middleware/handle-json-response.ts","../.././src/server/middleware/index.ts","../.././src/server/middleware/log-file.ts","../.././src/server/middleware/parse-context.ts","../.././src/server/middleware/prepare-api.ts","../.././src/server/middleware/render/fetch-data.tsx","../.././src/server/middleware/render/handle-error.tsx","../.././src/server/middleware/render/index.ts","../.././src/server/middleware/render/init.tsx","../.././src/server/middleware/render/match-route.ts","../.././src/server/middleware/render/render-view.tsx","../.././src/server/middleware/require-permissions-of.ts","../.././src/server/middleware/set-header.ts","../.././src/server/models/database.ts","../.././src/server/models/schema.ts","../.././src/server/models/validate.ts","../.././src/server/parsers/index.ts","../.././src/server/parsers/txt-content.ts","../.././src/server/routes/api-routes.ts","../.././src/server/routes/index.ts","../.././src/server/translations/cn.ts","../.././src/server/utils/pipeline.ts","../.././src/server/utils/reduce-tasks.ts","../.././src/server/utils/sort-by-date.ts","../.././vendor_modules/md5/index.js","../.././vendor_modules/md5/md5.js","../.././src/isomorphic/components/Colophon/Colophon.scss","../.././src/isomorphic/components/ConsoleBranding/ConsoleBranding.scss","../.././src/isomorphic/components/ConsoleSidebar/ConsoleSidebar.scss","../.././src/isomorphic/components/Logo/Logo.scss","../.././src/isomorphic/elements/Alert/Alert.scss","../.././src/isomorphic/elements/Button/_button.scss","../.././src/isomorphic/elements/Dropdown/Dropdown.scss","../.././src/isomorphic/elements/Fade/Fade.scss","../.././src/isomorphic/elements/Icon/Icon.scss","../.././src/isomorphic/elements/Input/Input.scss","../.././src/isomorphic/elements/Modal/Modal.scss","../.././src/isomorphic/elements/Modal/ModalFooter.scss","../.././src/isomorphic/elements/SelectizeInput/SelectizeInput.scss","../.././src/isomorphic/elements/Textarea/Textarea.scss","../.././src/isomorphic/routes/Viewer/components/BookPage.scss","../.././src/isomorphic/components/Logo/logo-dark.png","../.././src/isomorphic/components/Logo/logo.png","webpack:///./src/isomorphic/components/Branding/Branding.scss?3c73","webpack:///./src/isomorphic/components/Colophon/Colophon.scss?643a","webpack:///./src/isomorphic/components/ConsoleBranding/ConsoleBranding.scss?ea7a","webpack:///./src/isomorphic/components/ConsoleSidebar/ConsoleSidebar.scss?e5b5","webpack:///./src/isomorphic/components/Logo/Logo.scss?7787","webpack:///./src/isomorphic/elements/Button/_button.scss?7d69","webpack:///./src/isomorphic/elements/Fade/Fade.scss?2662","webpack:///./src/isomorphic/elements/Icon/Icon.scss?ab6e","webpack:///./src/isomorphic/elements/Input/Input.scss?d587","webpack:///./src/isomorphic/elements/Modal/ModalFooter.scss?6ce4","webpack:///./src/isomorphic/elements/SelectizeInput/SelectizeInput.scss?b4bc","webpack:///./src/isomorphic/elements/Textarea/Textarea.scss?d835","../../external \"babel-runtime/core-js/get-iterator\"","../../external \"babel-runtime/core-js/json/stringify\"","../../external \"babel-runtime/helpers/slicedToArray\"","../../external \"body-parser\"","../../external \"colors/safe\"","../../external \"connect-mongo\"","../../external \"cookie-parser\"","../../external \"crypto\"","../../external \"express-session\"","../../external \"http\"","../../external \"isomorphic-fetch\"","../../external \"lodash/cloneDeep\"","../../external \"lodash/filter\"","../../external \"lodash/isNull\"","../../external \"lodash/mapValues\"","../../external \"lodash/union\"","../../external \"mongodb\"","../../external \"morgan\"","../../external \"multer\"","../../external \"react-dom\"","../../external \"react-helmet\"","../../external \"react-side-effect\"","../../external \"redux-logger\"","../../external \"redux-thunk\"","../../external \"simple-epub-parser\"","../../external \"validator\"","../../external \"jquery\"","../../external \"lodash/debounce\"","../../external \"moment\"","../../external \"lodash/forEach\"","../../external \"lodash/isEqualWith\"","../../external \"lodash/slice\"","../../external \"marked\"","../../external \"react-markdown\""],"names":["md5","require","$","safe_add","x","y","lsw","msw","bit_rol","num","cnt","md5_cmn","q","a","b","s","t","md5_ff","c","d","md5_gg","md5_hh","md5_ii","binl_md5","len","i","olda","oldb","oldc","oldd","length","binl2rstr","input","output","length32","String","fromCharCode","rstr2binl","undefined","length8","charCodeAt","rstr_md5","rstr_hmac_md5","key","data","bkey","ipad","opad","hash","concat","rstr2hex","hex_tab","charAt","str2rstr_utf8","unescape","encodeURIComponent","raw_md5","hex_md5","raw_hmac_md5","k","hex_hmac_md5","string","raw","define","module","exports"],"mappings":";;;AAAA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAAkB,qBAAqB;AACvC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;AACA;AACA,sBAAc;AACd,YAAI;AACJ;;AAEA;AACA;;;;;;;AC5FA,kC;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB,iBAAiB;AACjC;AACA;AACA,wCAAwC,gBAAgB;AACxD,IAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA,YAAY,oBAAoB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACjDA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,0DAA0D,EAAE;AAC5D;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gEAAgE,gEAAgE;AAChI;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AA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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded chunks\n \t// \"0\" means \"already loaded\"\n \tvar installedChunks = {\n \t\t17: 0\n \t};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\t// \"0\" is the signal for \"already loaded\"\n \t\tif(installedChunks[chunkId] !== 0) {\n \t\t\tvar chunk = require(\"./chunk.\" + chunkId + \".js\");\n \t\t\tvar moreModules = chunk.modules, chunkIds = chunk.ids;\n \t\t\tfor(var moduleId in moreModules) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t\tfor(var i = 0; i < chunkIds.length; i++)\n \t\t\t\tinstalledChunks[chunkIds[i]] = 0;\n \t\t}\n \t\treturn Promise.resolve();\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// uncatched error handler for webpack runtime\n \t__webpack_require__.oe = function(err) {\n \t\tprocess.nextTick(function() {\n \t\t\tthrow err; // catch this error by using System.import().catch()\n \t\t});\n \t};\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 290);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 5d6fea45042cc33093fb","module.exports = require(\"react\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react\"\n// module id = 0\n// module chunks = 17","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function() {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\tvar result = [];\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar item = this[i];\n\t\t\tif(item[2]) {\n\t\t\t\tresult.push(\"@media \" + item[2] + \"{\" + item[1] + \"}\");\n\t\t\t} else {\n\t\t\t\tresult.push(item[1]);\n\t\t\t}\n\t\t}\n\t\treturn result.join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader/lib/css-base.js\n// module id = 1\n// module chunks = 17","'use strict';\n\nvar _stringify = require('babel-runtime/core-js/json/stringify');\n\nvar _stringify2 = _interopRequireDefault(_stringify);\n\nvar _slicedToArray2 = require('babel-runtime/helpers/slicedToArray');\n\nvar _slicedToArray3 = _interopRequireDefault(_slicedToArray2);\n\nvar _getIterator2 = require('babel-runtime/core-js/get-iterator');\n\nvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Isomorphic CSS style loader for Webpack\n *\n * Copyright © 2015-2016 Kriasoft, LLC. All rights reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.txt file in the root directory of this source tree.\n */\n\nvar prefix = 's';\nvar inserted = {};\n\n// Base64 encoding and decoding - The \"Unicode Problem\"\n// https://developer.mozilla.org/en-US/docs/Web/API/WindowBase64/Base64_encoding_and_decoding#The_Unicode_Problem\nfunction b64EncodeUnicode(str) {\n  return btoa(encodeURIComponent(str).replace(/%([0-9A-F]{2})/g, function (match, p1) {\n    return String.fromCharCode('0x' + p1);\n  }));\n}\n\n/**\n * Remove style/link elements for specified node IDs\n * if they are no longer referenced by UI components.\n */\nfunction removeCss(ids) {\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = (0, _getIterator3.default)(ids), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var id = _step.value;\n\n      if (--inserted[id] <= 0) {\n        var elem = document.getElementById(prefix + id);\n        if (elem) {\n          elem.parentNode.removeChild(elem);\n        }\n      }\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n}\n\n/**\n * Example:\n *   // Insert CSS styles object generated by `css-loader` into DOM\n *   var removeCss = insertCss([[1, 'body { color: red; }']]);\n *\n *   // Remove it from the DOM\n *   removeCss();\n */\nfunction insertCss(styles) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref$replace = _ref.replace,\n      replace = _ref$replace === undefined ? false : _ref$replace,\n      _ref$prepend = _ref.prepend,\n      prepend = _ref$prepend === undefined ? false : _ref$prepend;\n\n  var ids = [];\n  for (var i = 0; i < styles.length; i++) {\n    var _styles$i = (0, _slicedToArray3.default)(styles[i], 4),\n        moduleId = _styles$i[0],\n        css = _styles$i[1],\n        media = _styles$i[2],\n        sourceMap = _styles$i[3];\n\n    var id = moduleId + '-' + i;\n\n    ids.push(id);\n\n    if (inserted[id]) {\n      if (!replace) {\n        inserted[id]++;\n        continue;\n      }\n    }\n\n    inserted[id] = 1;\n\n    var elem = document.getElementById(prefix + id);\n    var create = false;\n\n    if (!elem) {\n      create = true;\n\n      elem = document.createElement('style');\n      elem.setAttribute('type', 'text/css');\n      elem.id = prefix + id;\n\n      if (media) {\n        elem.setAttribute('media', media);\n      }\n    }\n\n    var cssText = css;\n    if (sourceMap && btoa) {\n      // skip IE9 and below, see http://caniuse.com/atob-btoa\n      cssText += '\\n/*# sourceMappingURL=data:application/json;base64,' + b64EncodeUnicode((0, _stringify2.default)(sourceMap)) + '*/';\n      cssText += '\\n/*# sourceURL=' + sourceMap.file + '?' + id + '*/';\n    }\n\n    if ('textContent' in elem) {\n      elem.textContent = cssText;\n    } else {\n      elem.styleSheet.cssText = cssText;\n    }\n\n    if (create) {\n      if (prepend) {\n        document.head.insertBefore(elem, document.head.childNodes[0]);\n      } else {\n        document.head.appendChild(elem);\n      }\n    }\n  }\n\n  return removeCss.bind(null, ids);\n}\n\nmodule.exports = insertCss;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/isomorphic-style-loader/lib/insertCss.js\n// module id = 2\n// module chunks = 17","module.exports = require(\"lodash/assign\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash/assign\"\n// module id = 3\n// module chunks = 17","export default class GenericError {\n  name: string\n  statusCode: number\n  message: string\n  stack: Object\n  type: string\n\n  constructor(message, name?) {\n    this.name = name || 'GenericError'\n    this.statusCode = 500\n    this.message = message\n    this.stack = (new Error() as any).stack\n    this.type = this.name\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/errors/generic-error.ts","module.exports = require(\"react-css-modules\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react-css-modules\"\n// module id = 5\n// module chunks = 17","import { createRequestTypes, createComponentActionType, createSagaTriggerActionType } from '../store/actions/utils'\n\n/**\n * api\n */\nexport const REMOVE_ENTITY = 'REMOVE_ENTITY'\n\nexport const BOOK = createRequestTypes('book')\nexport const LOAD_BOOK = createSagaTriggerActionType('LOAD_BOOK')\n\nexport const BOOK_CONTENT = createRequestTypes('book-content')\nexport const LOAD_BOOK_CONTENT = createSagaTriggerActionType('LOAD_BOOK_CONTENT')\n\nexport const BOOKS = createRequestTypes('books')\nexport const LOAD_BOOKS = createSagaTriggerActionType('LOAD_BOOKS')\n\nexport const USERS = createRequestTypes('users')\nexport const LOAD_USERS = createSagaTriggerActionType('LOAD_USERS')\n\nexport const LOGOUT = createRequestTypes('revoke')\nexport const USER_LOGOUT = createSagaTriggerActionType('USER_LOGOUT')\n\nexport const BOOK_PROGRESS = createRequestTypes('book-progress')\nexport const LOAD_BOOK_PROGRESS = createSagaTriggerActionType('LOAD_BOOK_PROGRESS')\n\nexport const AUTHORS = createRequestTypes('authors')\nexport const COLLECTIONS = createRequestTypes('collections')\nexport const COLLECTION = createRequestTypes('collection')\nexport const DOUBAN_BOOKS = createRequestTypes('douban-books')\nexport const PROFILE = createRequestTypes('profile')\nexport const AUTH = createRequestTypes('auth')\nexport const SHELF = createRequestTypes('shelf')\n\n/**\n * components\n */\n\n// general\nexport const NOTIFICATION = {\n  SHOW: createComponentActionType('notification', 'SHOW'),\n  HIDE: createComponentActionType('notification', 'HIDE'),\n}\nexport const OPEN_CONFIRM_MODAL = createComponentActionType('confirm-modal', 'OPEN')\nexport const CLOSE_CONFIRM_MODAL = createComponentActionType('confirm-modal', 'CLOSE')\nexport const MODAL = {\n  OPEN: createComponentActionType('modal', 'SHOW'),\n  CLOSE: createComponentActionType('modal', 'HIDE'),\n}\n\n// viewer\nexport const VIEWER = {\n  INITIALIZE: createSagaTriggerActionType(createComponentActionType('viewer', 'INITIALIZE')),\n  INITIALIZE_CONFIG: createSagaTriggerActionType(createComponentActionType('viewer', 'INITIALIZE_CONFIG')),\n  CONFIG: createComponentActionType('viewer', 'CONFIG'),\n  CALC_START: createSagaTriggerActionType(createComponentActionType('viewer', 'CALC_START')),\n  CALC_SUCCESS: createComponentActionType('viewer', 'CALC_SUCCESS'),\n  CALC_FAILURE: createComponentActionType('viewer', 'CALC_FAILURE'),\n  BOOK_PROGRESS_UPDATE: createSagaTriggerActionType(createComponentActionType('viewer/progress', 'UPDATE')),\n\n  // TODO: 这个好像没用\n  BOOK_PROGRESS_INITIALIZE: createComponentActionType('viewer/progress', 'INITIALIZE'),\n\n  // TODO: 这个好像也没用\n  BOOK_PROGRESS_DESTROY: createComponentActionType('viewer/progress', 'DESTROY'),\n\n  JUMP: createSagaTriggerActionType(createComponentActionType('viewer', 'JUMP')),\n  FONT_CHANGE: createComponentActionType('viewer/preference', 'CHANGE_FONT_SIZE'),\n  PANEL_TOGGLE: createComponentActionType('viewer/components/panel', 'TOGGLE'),\n  PREFERENCE_TOGGLE: createComponentActionType('viewer/components/preference', 'TOGGLE'),\n  NAVIGATION_TOGGLE: createComponentActionType('viewer/components/navigation', 'TOGGLE'),\n  THEME_CHANGE: createComponentActionType('viewer/theme', 'CHANGE'),\n  SCROLL_MODE_TOGGLE: createComponentActionType('viewer/scroll-mode', 'TOGGLE')\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/constants/actionTypes.ts","module.exports = require(\"lodash/omit\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash/omit\"\n// module id = 7\n// module chunks = 17","// 全局变量\nexport const ENABLE_SERVER_ROUTING = '__ENABLE_SERVER_ROUTING__'\nexport const INITIAL_STATE = '__INITIAL_STATE__'\n\n// 其他常量\nexport const DOUBAN_API_ROOT = 'https://api.douban.com/v2'\nexport const GITHUB_API_ROOT = 'https://api.github.com'\n\nexport const ROLES = {\n  USER: 'user',\n  ADMIN: 'admin',\n  VISITOR: 'visitor'\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/constants/common.ts","module.exports = require(\"react-router\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react-router\"\n// module id = 9\n// module chunks = 17","import * as lifecircle from './lifecircle'\nimport getApiRoot from './getApiRoot'\nimport isServerRoutingEnabled from './isServerRoutingEnabled'\nimport redirect from './redirect'\nimport isServerEnv from './isServerEnv'\nimport print from './print'\n\nexport default Object.assign({}, lifecircle, {\n  getApiRoot,\n  isServerRoutingEnabled,\n  redirect,\n  isServerEnv,\n  print\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/helpers/index.ts","import Schema from '../models/schema'\nimport i18n from '../utils/i18n'\nimport validator from '../utils/validator'\nimport DataTypes, { arrayOf } from '../data/types'\n\nexport const user = new Schema('users', [\n  {\n    name: 'username',\n    required: true,\n    unique: true,\n    validators: [\n      {\n        fn: validator.lengthMin(5),\n        errorMsg: i18n('errors.validation.valueLimit.minLength', 'name')\n      },\n      {\n        fn: validator.lengthMax(20),\n        errorMsg: i18n('errors.validation.valueLimit.maxLength', 'name')\n      }\n    ]\n  },\n  {\n    name: 'password',\n    required: true,\n    validators: [\n      {\n        fn: validator.lengthMin(6),\n        errorMsg: i18n('errors.validation.valueLimit.minLength', 'password')\n      },\n      {\n        fn: validator.lengthMax(20),\n        errorMsg: i18n('errors.validation.valueLimit.maxLength', 'password')\n      }\n    ]\n  },\n  {\n    name: 'email',\n    required: true,\n    unique: true,\n    validators: [\n      {\n        fn: validator.isEmail,\n        errorMsg: i18n('errors.validation.valueLimit.invalidFormat', 'email')\n      }\n    ]\n  },\n  {\n    name: 'role',\n    required: true\n  }\n])\n\nexport const file = new Schema('files', [\n  {\n    name: 'filename',\n    required: true\n  },\n  {\n    name: 'content',\n    required: true\n  },\n  {\n    name: 'mimetype'\n  },\n  {\n    name: 'size'\n  },\n  {\n    name: 'encoding'\n  },\n  {\n    name: 'hash',\n    unique: true\n  }\n])\n\nexport const progress = new Schema('reading_progress', [\n  {\n    name: 'percentage',\n    required: true,\n    type: DataTypes.Number\n  },\n  {\n    name: 'user_id',\n    type: DataTypes.ID\n  },\n  {\n    name: 'book_id',\n    type: DataTypes.ID\n  }\n])\n\nexport const tag = new Schema('tags', [\n  {\n    name: 'name',\n    required: true\n  },\n  {\n    name: 'slug',\n    unique: true\n  },\n  {\n    name: 'description'\n  }\n])\n\nexport const author = new Schema('authors', [\n  {\n    name: 'name',\n    required: true\n  },\n  {\n    name: 'slug',\n    unique: true,\n    validators: [\n      {\n        fn: validator.isAlphanumeric,\n        errorMsg: i18n('errors.validation.valueLimit.alphanumeric', 'slug')\n      }\n    ]\n  },\n  {\n    name: 'description'\n  }\n])\n\nexport const book = new Schema('books', [\n  {\n    name: 'title',\n    required: true\n  },\n  {\n    name: 'authors',\n    ref: author,\n    type: arrayOf(DataTypes.ID)\n  },\n  {\n    name: 'description'\n  },\n  {\n    name: 'cover'\n  },\n  {\n    name: 'file',\n    ref: file,\n    required: true\n  }\n])\n\nexport const collection = new Schema('collections', [\n  {\n    name: 'name',\n    required: true\n  },\n  {\n    name: 'items',\n    required: true,\n    ref: book,\n    type: arrayOf(DataTypes.ID)\n  },\n  {\n    name: 'description'\n  },\n  {\n    name: 'creator',\n    required: true,\n    ref: user\n  }\n])\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/data/schemas.ts","import _ from 'lodash'\nimport db, { embedRef, connect } from './database'\nimport errors from '../errors'\nimport i18n from '../utils/i18n'\nimport utils from '../utils'\nimport validate from './validate'\nimport Schema from './schema'\nimport outputEmptyEntity from './output-empty-entity'\nimport paginate from './paginate'\nimport { notFoundIn } from '../helpers'\n\ninterface ListRawOptions {\n  filter?: (entity, index: number) => boolean\n  mapping?: (entity, index: number) => any\n  query?: Object\n}\n\ninterface ListOptions {\n  raw?: boolean\n  disablePagination?: boolean\n  page?: number\n  filter?: (entity, index: number) => boolean\n  mapping?: (entity, index: number) => any\n  query?: Object\n}\n\ntype Match = string | Object\n\nclass Model {\n  _schema: Schema\n  _tableName: string\n\n  static parseQuery(idOrQuery: Match) {\n    if (typeof idOrQuery === 'undefined') {\n      throw new Error('Param idOrQuery is undefined!')\n    }\n\n    return typeof idOrQuery === 'string'\n      ? { _id: idOrQuery }\n      : idOrQuery\n  }\n\n  constructor(schema: Schema) {\n    this._schema = schema\n    this._tableName = schema.name\n  }\n\n  outputEmpty(id) {\n    return outputEmptyEntity(this._schema.fields, id)\n  }\n\n  findOne(idOrQuery: Match, raw?: boolean) {\n    const query = Model.parseQuery(idOrQuery)\n\n    return this.list({ raw, disablePagination: true, query }).then(result => {\n      const entity = result[0]\n\n      if (!entity) {\n        return Promise.reject(notFoundIn(this._schema._baseTable))\n      }\n\n      return entity\n    })\n  }\n\n  list(options: ListOptions = {}) {\n    const { raw, page, disablePagination, filter, mapping, query } = options\n    return connect().then(connection => {\n      const doQuery = () => {\n        const listRaw = listRawQuery => {\n          return connection.collection(this._tableName).find(listRawQuery).toArray()\n        }\n\n        const rawResults = listRaw(query || {})\n\n        if (raw) {\n          return rawResults\n        } else {\n          return rawResults.then(results => {\n            return embedRef(results, this._schema)\n          })\n        }\n      }\n\n      return doQuery().then(entities => {\n        const modifiedEntities = entities\n          .filter(filter || (() => true))\n          .map(mapping || (entity => entity))\n\n        connection.close()\n\n        if (!disablePagination) {\n          return paginate(modifiedEntities, {\n            page: page || 1\n          })\n        }\n\n        return modifiedEntities\n      })\n    })\n  }\n\n  listRaw(options: ListRawOptions = {}) {\n    const { filter, mapping, query } = options\n\n    return this.list({\n      disablePagination: true,\n      raw: true,\n      filter,\n      mapping,\n      query: query || {}\n    }) as any as Promise<any[]>\n  }\n\n  add(data): any {\n    const query = () => {\n      let dataWithID = Object.assign({}, data, {\n        _id: Math.random().toFixed(8).substr(2),\n        date_created: new Date().toString()\n      })\n\n      // 检查是否需要确认唯一性\n      const dataToCheck = this._schema.fields\n        .filter(field => Boolean(field.unique))\n        .map(field => ({\n          key: field.name,\n          value: data[field.name]\n        }))\n        .filter(fileld => {\n          return Boolean(fileld.value)\n        })\n\n      const exec = () => {\n        return connect()\n          .then(connection => {\n            const result = connection.collection(this._tableName).insert([dataWithID])\n            connection.close()\n            return result\n          })\n      }\n\n      // 过滤出和数据库中已存在数据相匹配的输入项\n      if (dataToCheck.length !== 0) {\n        const checkingResult = Promise\n          .all(dataToCheck\n            .map(dataItem => {\n              return db\n                .getRowByMatch({ [dataItem.key]: dataItem.value }, this._tableName)\n                .then(res => {\n                  if (res.length !== 0) {\n                    return dataItem\n                  }\n                  return false as any\n                })\n            }))\n          .then(res => {\n            return res.filter(r => r !== false)\n          })\n\n        return checkingResult.then(res => {\n          if (res.length !== 0) {\n            return Promise.reject(new errors.BadRequestError(i18n('errors.schema.unique', res[0].key)))\n          }\n\n          return exec()\n        })\n      }\n\n      return exec()\n    }\n\n    return utils.reduceTasks([\n      validate(data, this._schema),\n      query\n    ])\n  }\n\n  update(idOrQuery: Match, data, updateConfig: {\n    multi?: boolean\n    upsert?: boolean\n  } = {}) {\n    const { multi, upsert } = updateConfig\n    const query = Model.parseQuery(idOrQuery)\n\n    const doQuery = () => {\n      const data2 = Object.assign({}, data, {\n        date_updated: new Date().toString()\n      })\n\n      const exec = () => {\n        return connect()\n          .then(connection => {\n            const result = connection.collection(this._tableName).update(query, { $set: data2 }, {\n              upsert: Boolean(upsert),\n              multi: Boolean(multi)\n            })\n\n            connection.close()\n\n            return result\n          })\n      }\n\n      if (!upsert) {\n        return this.findOne(idOrQuery, true).then(result => {\n          return exec()\n        })\n      }\n\n      return exec()\n    }\n\n    return utils.reduceTasks([\n      validate(data, this._schema, true),\n      doQuery\n    ])\n  }\n\n  remove(idOrQuery: Match) {\n    const query = Model.parseQuery(idOrQuery)\n\n    return connect()\n      .then(connection => {\n        const result = connection.collection(this._tableName).remove(query)\n        connection.close()\n        return result\n      })\n  }\n}\n\nexport default Model\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/models/model.ts","module.exports = require(\"lodash/get\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash/get\"\n// module id = 13\n// module chunks = 17","/**\n * referenced ghost i18n.js, it's a simplified version\n * and I used js to store local translations instead of json\n */\nimport _ from 'lodash'\nimport cnTranslations from '../translations/cn'\n\nfunction addPadding(str) {\n  if (!str) {\n    return ''\n  }\n\n  if (escape(str.substr(-1)).indexOf('%u') !== 0) {\n    return ` ${str} `\n  }\n\n  return str\n}\n\nfunction getMatchingString(msgPath): any {\n  let matchingString = cnTranslations\n  const path = msgPath.split('.')\n\n  for (let i = 0; i < path.length; i++) {\n    if (matchingString[path[i]]) {\n      matchingString = matchingString[path[i]]\n    } else {\n      matchingString = null\n      break\n    }\n  }\n\n  return matchingString\n}\n\nfunction addPunc(str, lang?) {\n  // todo: lang\n  return `${str}！`\n}\n\nexport default function i18n(msgPath, value?) {\n  let matchingString = getMatchingString(msgPath)\n\n  if (_.isNull(matchingString)) {\n    console.error('Unable to find matching path [' + msgPath + '] in locale file.\\n')\n    matchingString = 'i18n error: path \"' + msgPath + '\" was not found.'\n  } else {\n    const placeholderIndex = matchingString.indexOf('{value}')\n\n    if (placeholderIndex !== -1) {\n      const before = matchingString.substring(0, placeholderIndex)\n      const after = matchingString.substr(placeholderIndex + 7)\n      let matchingValue = ''\n\n      if (typeof value !== 'undefined') {\n        matchingValue = getMatchingString(`common.terms.${value}`)\n        if (_.isNull(matchingValue)) {\n          matchingValue = value\n        }\n        matchingValue = addPadding(matchingValue)\n      }\n\n      matchingString = addPunc(before + matchingValue + after)\n    } else {\n      matchingString = addPunc(matchingString)\n    }\n  }\n\n  return matchingString.trim()\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/utils/i18n.ts","import { actions as form } from 'better-redux-form'\n\nexport * from './api'\nexport * from './common'\nexport * from './test'\nexport * from './viewer'\n// form\nexport const initializeForm = form.initialize\nexport const resetForm = form.reset\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/store/actions/index.ts","module.exports = require(\"redux-saga/effects\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"redux-saga/effects\"\n// module id = 16\n// module chunks = 17","module.exports = require(\"redux\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"redux\"\n// module id = 17\n// module chunks = 17","import appConfigDev from './app.config.dev'\nimport appConfigProd from './app.config.prod'\n\nlet appConfig = appConfigDev\n\nif (process.env.NODE_ENV === 'production') {\n  appConfig = appConfigProd\n}\n\nexport default appConfig\n\n\n\n// WEBPACK FOOTER //\n// ./src/app.config.ts","import NotFoundError from './not-found-error'\nimport ValidationError from './validation-error'\nimport BadRequestError from './bad-request-error'\nimport InternalServerError from './internal-server-error'\nimport NoPermissionError from './no-permission-error'\nimport UnauthorizedError from './unauthorized-error'\nimport RequestEntityTooLargeError from './request-too-large-error'\nimport UnsupportedMediaTypeError from './unsupported-file-type-error'\nimport EmailError from './email-error'\nimport MethodNotAllowedError from './method-not-allowed-error'\nimport TooManyRequestsError from './too-many-requests-error'\nimport TokenRevocationError from './token-revocation-error'\nimport GenericError from './generic-error'\n\nexport default {\n  NotFoundError,\n  ValidationError,\n  BadRequestError,\n  InternalServerError,\n  NoPermissionError,\n  UnauthorizedError,\n  RequestEntityTooLargeError,\n  UnsupportedMediaTypeError,\n  EmailError,\n  MethodNotAllowedError,\n  TooManyRequestsError,\n  TokenRevocationError,\n  GenericError,\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/errors/index.ts","module.exports = require(\"react-redux\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react-redux\"\n// module id = 20\n// module chunks = 17","module.exports = require(\"classnames\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"classnames\"\n// module id = 21\n// module chunks = 17","import * as api from './api'\n\nexport * from './api'\nexport default Object.assign({}, api)\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/services/api/index.ts","module.exports = require(\"lodash/isEmpty\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash/isEmpty\"\n// module id = 23\n// module chunks = 17","import getCurrentTime from './getCurrentTime'\nimport padNumberWithZero from './padNumberWithZero'\nimport parseQuery from './parseQuery'\nimport parseUrlencoded from './parseUrlencoded'\nimport dom from './dom'\nimport browser from './browser'\n\nexport default Object.assign({\n  getCurrentTime,\n  padNumberWithZero,\n  parseQuery,\n  parseUrlencoded\n}, dom, browser)\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/utils/index.ts","import errors from '../errors'\nimport i18n from '../utils/i18n'\nimport computeHash from './compute-hash'\n\nexport function notFoundError(itemName?) {\n  return new errors.NotFoundError(i18n('errors.api.general.notFound', itemName))\n}\n\nexport function notFoundIn(collectionName?) {\n  return new errors.NotFoundError(i18n('errors.api.general.notFoundIn', collectionName))\n}\n\nexport { computeHash }\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/helpers/index.ts","module.exports = require(\"lodash/merge\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash/merge\"\n// module id = 26\n// module chunks = 17","import * as common from './common'\nimport { selectors as form } from 'better-redux-form'\nimport * as viewer from './viewer'\n\nexport * from './entities'\nexport { common, form, viewer }\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/store/selectors/index.ts","module.exports = require(\"better-redux-form\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"better-redux-form\"\n// module id = 28\n// module chunks = 17","import Icon from './Icon'\nexport default Icon\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/elements/Icon/index.ts","import Container from './Container'\nexport default Container\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/elements/Container/index.ts","export default function isDescendant(parent: HTMLElement, child: HTMLElement) {\n  let node = child.parentNode\n\n  while (node != null) {\n    if (node === parent) {\n      return true\n    }\n    node = node.parentNode\n  }\n  return false\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/utils/dom/isDescendant.ts","module.exports = require(\"lodash/pick\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash/pick\"\n// module id = 32\n// module chunks = 17","import 'isomorphic-fetch'\nimport parseUrlencoded from '../../utils/parseUrlencoded'\nimport jsonp from './jsonp'\n\nexport type CallApiOptions = {\n  method?: 'GET' | 'POST' | 'DELETE' | 'PUT'\n  credentials?: 'include' | 'same-origin'\n  dataType?: 'urlencoded' | 'json'\n  data?: {}\n  useJsonp?: boolean\n}\n\ntype FetchOptions = {\n  method?: string\n  credentials?: 'include' | 'same-origin'\n  headers?: any\n  body?: string\n  useJsonp?: boolean\n}\n\nconst defaultOptions: CallApiOptions = {\n  dataType: 'json',\n  method: 'GET',\n  credentials: 'same-origin'\n}\n\n// return fetch options\nconst parseOptions = (originanOptions: CallApiOptions) => {\n  let { method, data, credentials, dataType, useJsonp } = Object.assign({}, defaultOptions, originanOptions)\n  let fetchOptions: FetchOptions = {}\n\n  if (useJsonp) {\n    return {\n      useJsonp: true\n    }\n  }\n\n  if (method) {\n    fetchOptions.method = method\n  }\n\n  if (credentials) {\n    fetchOptions.credentials = credentials\n  }\n\n  // handle request headers and body\n  if (method === 'POST' || method === 'PUT') {\n    let contentType\n    let body\n\n    if (dataType === 'json') {\n      contentType = 'application/json'\n      body = JSON.stringify(data)\n    } else {\n      contentType = 'application/x-www-form-urlencoded'\n      body = parseUrlencoded(data)\n\n      if (dataType !== 'urlencoded') {\n        console.warn('Unsupported dataType used \"urlencoded\" instead!')\n      }\n    }\n\n    fetchOptions.headers = {\n      'Content-Type': contentType,\n      'Access-Control-Request-Method': method\n    }\n\n    fetchOptions.body = body\n  }\n\n  if (method === 'DELETE') {\n    fetchOptions.headers = {\n      'Access-Control-Request-Method': 'DELETE'\n    }\n  }\n\n  return fetchOptions\n}\n\n// type Result = {\n//   json: any\n//   _response: any\n// }\nexport function callApi(fullUrl: string, options: CallApiOptions = {}): any {\n  if (options.useJsonp) {\n    return jsonp(fullUrl)\n  }\n\n  return fetch(fullUrl, parseOptions(options))\n    .then(response => {\n      if (response.status !== 204) {\n        return response.json().then(json => {\n          if (!response.ok) {\n            return Promise.reject(json) as any\n          }\n\n          return { json, _response: response }\n        })\n      }\n\n      return { json: {}, _response: response }\n    })\n}\n\nexport default callApi\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/services/utils/callApi.ts","import { createSelector } from 'reselect'\nimport _ from 'lodash'\n\nconst DEFAULT_KEY = 'default'\n\nexport const session = state => {\n  return _.get(state, ['session'], {})\n}\n\nexport const entities = name => state => {\n  return state.entities[name] || {}\n}\n\nexport const entity = (name, id) => state => {\n  return _.get(state, ['entities', name, id], {})\n}\n\nexport const isPaginationFetching = (name, key = DEFAULT_KEY) => state => {\n  return _.get(state, ['pagination', name, key, 'isFetching'], true)\n}\n\nexport const paginationPages = (name, key = DEFAULT_KEY) => state => {\n  return _.get(state, ['pagination', name, key, 'pages'], {})\n}\n\nexport const paginationLinks = (name, key = DEFAULT_KEY) => state => {\n  return _.pick(_.get(state.pagination, `${name}.${key}`, {}), ['next', 'last'])\n}\n\nexport const nextPage = (name, key = DEFAULT_KEY) => createSelector(\n  paginationLinks(name, key),\n  selectedPaginationLinks => {\n    return _.get(selectedPaginationLinks, 'next.page', 0)\n  }\n)\n\nexport const currentPage = (name, key = DEFAULT_KEY) => createSelector(\n  paginationLinks(name, key),\n  selectedPaginationLinks => {\n    const next = _.get(selectedPaginationLinks, 'next.page')\n    const last = _.get(selectedPaginationLinks, 'last.page')\n\n    return next\n      ? next as any - 1\n      : last\n  }\n)\n\ninterface EntityPagesOptions {\n  entitiesName: string\n  paginationName: string\n  paginationKey?: string\n}\nexport const entityPages = (options: EntityPagesOptions) => {\n  const {entitiesName, paginationName, paginationKey} = options\n\n  return createSelector(\n    entities(entitiesName),\n    paginationPages(paginationName, paginationKey),\n    (selectedEntities, pages) => {\n      return _.mapValues(pages, ids => {\n        return (ids as string[])\n          .map(id => selectedEntities[id])\n          .filter(item => Boolean(item))\n      })\n    }\n  )\n}\n\ninterface PagedEntitiesOptions extends EntityPagesOptions {\n  page?: string | number\n}\nexport const pagedEntities = (options: PagedEntitiesOptions) => {\n  const { page } = options\n\n  return createSelector(\n    entityPages(options),\n    pages => {\n      if (page) {\n        return _.get(pages, [page], [])\n      }\n\n      let allEntities = []\n      _.keys(pages).forEach(p => {\n        allEntities = allEntities.concat(pages[p])\n      })\n\n      return allEntities\n    }\n  )\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/store/selectors/common.ts","import _ from 'lodash'\n\n// todo\nexport default function parseUrlencoded(originalObj) {\n  if (_.isEmpty(originalObj)) {\n    return ''\n  }\n\n  let object = _.cloneDeep(originalObj)\n  let encodedurl = ''\n\n  for (let prop in object) {\n    if (typeof object[prop] === 'object' && object[prop] !== null) {\n      object[prop] = object[prop].toString()\n    }\n\n    encodedurl = `${encodedurl}${prop}=${encodeURI(object[prop])}&`\n  }\n\n  return encodedurl.substr(0, encodedurl.length - 1)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/utils/parseUrlencoded.ts","import validator from './validator'\nimport i18n from './i18n'\nimport pipeline from './pipeline'\nimport reduceTasks from './reduce-tasks'\nimport sortByDate from './sort-by-date'\n\nexport default { validator, i18n, pipeline, reduceTasks, sortByDate }\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/utils/index.ts","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".nav-link_3X0T8 {\\n  color: #fff; }\\n  .nav-link_3X0T8:hover {\\n    color: #ddd; }\\n\\n.branding_8EVAt {\\n  min-height: 60px;\\n  background: #222; }\\n\\n.dropdown-menu_5Sc50 {\\n  position: absolute;\\n  top: 60px;\\n  right: 0;\\n  z-index: 999; }\\n\\n.username_3Mm6z,\\n.nav-links_2wTYY {\\n  line-height: 60px; }\\n\\n.nav_1oj1z, .nav--user_1L7Lb {\\n  position: relative;\\n  color: #fff;\\n  cursor: pointer;\\n  padding: 0 10px;\\n  line-height: 60px;\\n  display: inline-block; }\\n\\n.dropdown-recent-reading_2oyjH {\\n  margin-right: 15px; }\\n\\n.nav--user_1L7Lb {\\n  float: right; }\\n\\n.nav-link_3X0T8 {\\n  padding: 0 5px; }\\n\\n.nav-item_f83bh {\\n  display: inline-block; }\\n\\n.recent-reading_1kJKh {\\n  margin-right: 15px; }\\n\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"nav-link\": \"nav-link_3X0T8\",\n\t\"branding\": \"branding_8EVAt\",\n\t\"dropdown-menu\": \"dropdown-menu_5Sc50\",\n\t\"username\": \"username_3Mm6z\",\n\t\"nav-links\": \"nav-links_2wTYY\",\n\t\"nav\": \"nav_1oj1z\",\n\t\"nav--user\": \"nav--user_1L7Lb\",\n\t\"dropdown-recent-reading\": \"dropdown-recent-reading_2oyjH\",\n\t\"nav-item\": \"nav-item_f83bh\",\n\t\"recent-reading\": \"recent-reading_1kJKh\"\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"modules\":true,\"importLoaders\":1,\"localIdentName\":\"[local]_[hash:base64:5]\"}!./~/sass-loader!./src/isomorphic/components/Branding/Branding.scss\n// module id = 37\n// module chunks = 17","\n    var content = require(\"!!../../../../node_modules/css-loader/index.js??ref--3-1!../../../../node_modules/sass-loader/index.js!./Dropdown.scss\");\n    var insertCss = require(\"!../../../../node_modules/isomorphic-style-loader/lib/insertCss.js\");\n\n    if (typeof content === 'string') {\n      content = [[module.id, content, '']];\n    }\n\n    module.exports = content.locals || {};\n    module.exports._getContent = function() { return content; };\n    module.exports._getCss = function() { return content.toString(); };\n    module.exports._insertCss = function(options) { return insertCss(content, options) };\n    \n    // Hot Module Replacement\n    // https://webpack.github.io/docs/hot-module-replacement\n    // Only activated in browser context\n    if (module.hot && typeof window !== 'undefined' && window.document) {\n      var removeCss = function() {};\n      module.hot.accept(\"!!../../../../node_modules/css-loader/index.js??ref--3-1!../../../../node_modules/sass-loader/index.js!./Dropdown.scss\", function() {\n        content = require(\"!!../../../../node_modules/css-loader/index.js??ref--3-1!../../../../node_modules/sass-loader/index.js!./Dropdown.scss\");\n\n        if (typeof content === 'string') {\n          content = [[module.id, content, '']];\n        }\n\n        removeCss = insertCss(content, { replace: true });\n      });\n      module.hot.dispose(function() { removeCss(); });\n    }\n  \n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/isomorphic/elements/Dropdown/Dropdown.scss\n// module id = 38\n// module chunks = 17","\n    var content = require(\"!!../../../../node_modules/css-loader/index.js??ref--3-1!../../../../node_modules/sass-loader/index.js!./Modal.scss\");\n    var insertCss = require(\"!../../../../node_modules/isomorphic-style-loader/lib/insertCss.js\");\n\n    if (typeof content === 'string') {\n      content = [[module.id, content, '']];\n    }\n\n    module.exports = content.locals || {};\n    module.exports._getContent = function() { return content; };\n    module.exports._getCss = function() { return content.toString(); };\n    module.exports._insertCss = function(options) { return insertCss(content, options) };\n    \n    // Hot Module Replacement\n    // https://webpack.github.io/docs/hot-module-replacement\n    // Only activated in browser context\n    if (module.hot && typeof window !== 'undefined' && window.document) {\n      var removeCss = function() {};\n      module.hot.accept(\"!!../../../../node_modules/css-loader/index.js??ref--3-1!../../../../node_modules/sass-loader/index.js!./Modal.scss\", function() {\n        content = require(\"!!../../../../node_modules/css-loader/index.js??ref--3-1!../../../../node_modules/sass-loader/index.js!./Modal.scss\");\n\n        if (typeof content === 'string') {\n          content = [[module.id, content, '']];\n        }\n\n        removeCss = insertCss(content, { replace: true });\n      });\n      module.hot.dispose(function() { removeCss(); });\n    }\n  \n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/isomorphic/elements/Modal/Modal.scss\n// module id = 39\n// module chunks = 17","module.exports = require(\"humps\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"humps\"\n// module id = 40\n// module chunks = 17","module.exports = require(\"lodash/isNil\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash/isNil\"\n// module id = 41\n// module chunks = 17","module.exports = require(\"lodash/last\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash/last\"\n// module id = 42\n// module chunks = 17","module.exports = require(\"react-dom/server\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react-dom/server\"\n// module id = 43\n// module chunks = 17","module.exports = require(\"reselect\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"reselect\"\n// module id = 44\n// module chunks = 17","import React, { Component } from 'react'\nimport _ from 'lodash'\nimport Helmet from 'react-helmet'\nimport BodyClass from './BodyClass'\n\ninterface Props {\n  className?: string\n  styleName?: string\n  bodyClass?: string\n\n  // shortcut for head\n  // override title in head\n  title?: string\n\n  // from helmet\n  head?: {\n    base?: any\n    defaultTitle?: string\n    htmlAttributes?: any\n    title?: string\n    link?: Array<any>\n    meta?: Array<any>\n    script?: Array<any>\n    style?: Array<any>\n    titleTemplate?: string\n    onChangeClientState?: (newState: any) => void\n  }\n}\n\nclass DocContainer extends Component<Props, void> {\n\n  static rewind: () => {\n    bodyClass: string\n    head: Object\n  }\n\n  render() {\n    const { bodyClass, title, head } = this.props\n    const helmetProps = {\n      ...head,\n      ...{\n        title\n      }\n    }\n\n    return (\n      <div className={'gb-doc-container'}>\n        <Helmet {...helmetProps} />\n        <BodyClass className={bodyClass}>{this.props.children}</BodyClass>\n      </div>\n    )\n  }\n}\n\nDocContainer.rewind = () => {\n  const bodyClass = BodyClass.rewind()\n  const head = Helmet.rewind()\n\n  return {\n    head,\n    bodyClass\n  }\n}\n\nexport default DocContainer\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/containers/DocContainer.tsx","import Container from './Container'\nexport { Container }\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/elements/layout.ts","module.exports = require(\"lodash/isEqual\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash/isEqual\"\n// module id = 47\n// module chunks = 17","module.exports = require(\"lodash/map\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash/map\"\n// module id = 48\n// module chunks = 17","import Logo from './Logo'\nexport default Logo\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/components/Logo/index.ts","import React from 'react'\nimport { INITIAL_STATE } from '../constants/common'\n\nexport const DOCTYPE = '<!DOCTYPE html>'\n\ninterface Props {\n  bodyClass?: string\n  appMarkup: string | JSX.Element\n  initialState?: Object\n  helmetHeadObject?: {\n    htmlAttributes?\n    title?\n    base?\n    meta?\n    link?\n    script?\n    noscript?\n    style?\n  }\n\n  // override title in helmetHeadObject\n  title?: string\n\n  script?: ({\n    src?: string\n    type?: string\n    innerHTML?: string\n  } | string)[]\n\n  link?: ({\n    rel?: string\n    href: string\n  } | string)[]\n\n  children?: Object\n}\n\nconst AppDoc = (props: Props) => {\n  const {\n    script: bodyScript,\n    link: otherLink,\n    bodyClass, appMarkup, initialState,\n    helmetHeadObject: {\n      title, meta, link: helmetLink, script: headScript\n    },\n    title: masterTitle\n  } = props\n\n  return (\n    <html lang=\"zh-CN\">\n      <head>\n        <meta httpEquiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\" />\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, user-scalable=no\" />\n        <meta name=\"description\" content=\"\" />\n        {\n          masterTitle\n            ? <title>{masterTitle || (title && title.toString())}</title>\n            : (title && title.toComponent())\n        }\n        {meta && meta.toComponent()}\n        {helmetLink && helmetLink.toComponent()}\n        {\n          otherLink && (\n            otherLink.map((link, index) => {\n              let href\n              let rel = 'stylesheet'\n\n              if (typeof link === 'string') {\n                href = link\n              } else {\n                href = link.href\n                if (link.rel) {\n                  rel = link.rel\n                }\n              }\n\n              return (\n                <link key={index} href={href} rel={rel} />\n              )\n            })\n          )\n        }\n        {headScript && headScript.toComponent()}\n      </head>\n      <body {...bodyClass && { className: bodyClass }}>\n        {props.children}\n        {\n          typeof appMarkup === 'string'\n            ? <div id=\"root\" dangerouslySetInnerHTML={{ __html: appMarkup || '' }} />\n            : <div id=\"root\">{appMarkup}</div>\n        }\n        {\n          initialState && (\n            <script\n              dangerouslySetInnerHTML={{ __html: `var ${INITIAL_STATE} = ${JSON.stringify(initialState || {})};` }}\n            />\n          )\n        }\n        {\n          bodyScript && (\n            bodyScript.map((script, index) => {\n              if (typeof script === 'string') {\n                return (\n                  <script key={index} src={script} />\n                )\n              }\n\n              const { src, type, innerHTML } = script\n\n              return (\n                <script\n                  key={index}\n                  src={src}\n                  type={type || 'text/javascript'}\n                  dangerouslySetInnerHTML={{ __html: innerHTML }}\n                />\n              )\n            })\n          )\n        }\n      </body>\n    </html>\n  )\n}\n\nAppDoc['defaultProps'] = {\n  helmetHeadObject: {}\n}\n\nexport default AppDoc\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/containers/AppDoc.tsx","import React from 'react'\nimport { Provider } from 'react-redux'\nimport { RouterContext } from 'react-router'\nimport _ from 'lodash'\n\n// type TProps = {\n//   store: any\n//   renderProps: any\n//   renderPageContent?: boolean\n// }\n\nconst ServerSideAppRoot = (props) => {\n  const { store, renderProps, renderPageContent } = props\n\n  return (\n    !_.isEmpty(renderProps) && (\n      <Provider store={store}>\n        {\n          renderPageContent\n            ? (\n              <RouterContext {...renderProps} />\n            )\n            : <div className=\"text-loading\">Loading...</div>\n        }\n      </Provider>\n    )\n  )\n}\n\nexport default ServerSideAppRoot\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/containers/ServerSideAppRoot.tsx","import React, { Component } from 'react'\nimport Icon from '../Icon'\nimport CSSModules from 'react-css-modules'\nconst styles = require('./Alert.scss')\n\ninterface Props {\n  message: string\n  type?: TNotification\n  onRequestClose?: () => void\n  visible: boolean\n}\n\n@CSSModules(styles, {\n  allowMultiple: true\n})\nclass Alert extends Component<Props, {}> {\n  render() {\n    const type = this.props.type ? this.props.type : 'success'\n    return (\n      <div>\n        {\n          this.props.visible && (\n            <div\n              styleName={`alert--${type}`}\n              >\n              <div styleName=\"alert-close\">\n                <Icon\n                  onClick={this.props.onRequestClose}\n                  name=\"close\"\n                  size={15}\n                  />\n              </div>\n              <div styleName=\"content\">{this.props.message}</div>\n            </div>\n          )\n        }\n      </div>\n    )\n  }\n}\n\nexport default Alert\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/elements/Alert/Alert.tsx","import Dropdown from './Dropdown'\nimport DropdownItem from './DropdownItem'\nimport DropdownItemSep from './DropdownItemSep'\n\nexport { DropdownItem, Dropdown, DropdownItemSep }\nexport default Dropdown\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/elements/Dropdown/index.ts","import React, { Component } from 'react'\nimport ReactDOM from 'react-dom'\nimport utils from '../../utils'\nimport Fade from '../Fade'\nimport _ from 'lodash'\nimport styles from './Modal.scss'\n\nexport interface Props {\n  width: number\n  onRequestClose: () => void\n  open: boolean\n  className?: string\n}\n\ninterface State {\n  modalHeight?: number\n  isModalHidden?: boolean\n  isModalVerticalCenter?: boolean\n  documentHeight?: number\n  clicks?: number\n}\n\nclass Modal extends Component<Props, State> {\n\n  modal: HTMLDivElement\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      modalHeight: 0,\n      isModalHidden: false,\n      isModalVerticalCenter: true,\n      clicks: 0\n    }\n    this.setView = this.setView.bind(this)\n    this.hideModal = this.hideModal.bind(this)\n  }\n\n  hideModal() {\n    this.props.onRequestClose()\n    utils.unlockScroll()\n  }\n\n  setView() {\n    let modalHeight = ReactDOM.findDOMNode(this.modal).clientHeight\n    let isModalVerticalCenter = true\n    let documentHeight = document.body.clientHeight\n\n    if (window.innerHeight < modalHeight) {\n      isModalVerticalCenter = false\n    }\n\n    if (window.innerHeight > document.body.clientHeight) {\n      documentHeight = window.innerHeight\n    }\n\n    this.setState({\n      modalHeight,\n      isModalVerticalCenter,\n      documentHeight\n    })\n  }\n\n  componentWillReceiveProps(nextProps) {\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    return !_.isEqual(this.state, nextState) || !_.isEqual(this.props, nextProps)\n  }\n\n  componentDidUpdate(prevProps) {\n    // modal show\n    if (!prevProps.open && this.props.open === true) {\n      this.setView()\n      utils.lockScroll()\n      window.addEventListener('resize', this.setView)\n    }\n\n    // modal hide\n    if (prevProps.open === true && this.props.open === false) {\n      window.removeEventListener('resize', this.setView)\n      utils.unlockScroll()\n    }\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.setView)\n  }\n\n  render() {\n    const { open } = this.props\n\n    const defaultClass = 'modal'\n    const modalId = `modal-${(new Date()).valueOf()}`\n\n    let className = this.props.className ? `${defaultClass} ${this.props.className}` : defaultClass\n\n    let width = this.props.width ? this.props.width : 500\n    let height = this.state.modalHeight\n    let style = {\n      backdrop: {},\n      verticalCenter: {},\n      scroll: {},\n      modal: {}\n    }\n\n    style.backdrop = {\n      position: 'fixed',\n      height: '100%',\n      width: '100%',\n      left: 0,\n      top: 0,\n      background: 'rgba(0, 0, 0, 0.23)',\n      overflow: 'scroll'\n    }\n\n    style.verticalCenter = {\n      width,\n      marginTop: -height / 2,\n      marginLeft: -width / 2,\n      position: 'absolute',\n      left: '50%',\n      top: '50%'\n    }\n\n    style.scroll = {\n      width,\n      margin: '50px auto'\n    }\n\n    style.modal = {}\n\n    if (this.state.isModalVerticalCenter) {\n      style.modal = Object.assign({}, style.modal, style.verticalCenter)\n    } else {\n      style.modal = Object.assign({}, style.modal, style.scroll)\n    }\n\n    return (\n      <Fade>\n        {\n          open === true && (\n            <div\n              onClick={e => {\n                // 使用阻止冒泡会造成问题\n                if ((e.target as any).querySelector(`#${modalId}`)) {\n                  this.hideModal()\n                }\n              } }\n              className={styles['modal-backdrop']}\n              style={style.backdrop}\n              >\n              <div\n                id={modalId}\n                style={style.modal}\n                className={`${styles['modal']} ${className}`}\n                ref={ref => { this.modal = ref } }\n                >\n                {this.props.children}\n              </div>\n            </div>\n          )\n        }\n      </Fade>\n    )\n  }\n}\n\nexport default Modal\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/elements/Modal/Modal.tsx","import Modal from './Modal'\nimport ModalPlus from './ModalPlus'\nimport ConfirmModal from './ConfirmModal'\n\nexport default Modal\nexport * from './Modal'\nexport { ModalPlus, ConfirmModal }\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/elements/Modal/index.ts","import { ENABLE_SERVER_ROUTING } from '../constants/common'\n\nexport default function isServerRoutingEnabled() {\n  return Boolean(window[ENABLE_SERVER_ROUTING])\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/helpers/isServerRoutingEnabled.ts","import { Schema, arrayOf, normalize, unionOf } from 'normalizr'\n\nconst book = new Schema('books', {\n  idAttribute: 'id'\n})\n\nconst bookContent = new Schema('bookContents', {\n  idAttribute: 'id'\n})\n\nconst author = new Schema('authors', {\n  idAttribute: 'id'\n})\n\nconst collection = new Schema('bookCollections', {\n  idAttribute: 'id'\n})\n\ncollection.define({\n  items: arrayOf(book)\n})\n\nconst profile = new Schema('profiles', {\n  idAttribute: 'id'\n})\n\nconst user = new Schema('users', {\n  idAttribute: 'id'\n})\n\nconst doubanBook = new Schema('doubanBooks', {\n  idAttribute: 'id'\n})\n\nconst shelfBook = new Schema('shelfBooks', {\n  idAttribute: 'id'\n})\n\nconst bookProgress = new Schema('bookProgress', {\n  idAttribute: 'bookId'\n})\n\nconst matchedBooks = new Schema('books', {\n  idAttribute: 'bookId'\n})\n\nexport default {\n  BOOK: book,\n  BOOK_CONTENT: bookContent,\n  BOOK_PROGRESS: bookProgress,\n  BOOK_ARRAY: arrayOf(book),\n  DOUBAN_BOOK_SEARCH_RESULTS: {books: arrayOf(doubanBook)},\n  USER_ARRAY: arrayOf(user),\n  MATCHED_BOOK_ARRAY: arrayOf(matchedBooks),\n  COLLECTION: collection,\n  COLLECTION_ARRAY: arrayOf(collection),\n  PROFILE: profile,\n  AUTHOR: author,\n  AUTHOR_ARRAY: arrayOf(author),\n  SHELF_BOOK_ARRAY: arrayOf(shelfBook)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/services/schemas.ts","import { normalize } from 'normalizr'\nimport parseQuery from '../../utils/parseQuery'\nimport _ from 'lodash'\nimport humps from 'humps'\n\nconst parseHeaderPageLinkByRel = (links: string, rel: string) => {\n  const link = links.split(',').find(s => s.indexOf(`rel=\"${rel}\"`) > -1)\n\n  if (!link) {\n    return undefined\n  }\n\n  const url = link.split(';')[0].trim().slice(1, -1)\n\n  return {\n    // todo\n    page: parseInt(_.get(parseQuery(url.split('?')[1] || ''), 'page', 0) as any, 10),\n    url\n  }\n}\n\nfunction parseResHeaderToPagination(response) {\n  if (!response) {\n    return {}\n  }\n\n  const links = response.headers.get('link')\n  if (!links) {\n    return {}\n  }\n\n  const next = parseHeaderPageLinkByRel(links, 'next')\n  const last = parseHeaderPageLinkByRel(links, 'last')\n\n  return {\n    next,\n    last\n  } as any\n}\n\nfunction handleResponse({ json, _response }, schema) {\n  const camelizedJson = humps.camelizeKeys(json)\n  const { next, last } = parseResHeaderToPagination(_response)\n\n  if (typeof schema !== 'undefined') {\n    return  _.assign({},\n      normalize(camelizedJson, schema),\n      {\n        _next: next,\n        _last: last\n      }\n    )\n  }\n\n  return camelizedJson\n}\n\nexport default handleResponse\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/services/utils/handleResponse.ts","const REQUEST = 'REQUEST'\nconst SUCCESS = 'SUCCESS'\nconst FAILURE = 'FAILURE'\nconst LOAD_CACHE = 'LOAD_CACHE'\n\nexport const action = (type, payload = {}) => {\n  return Object.assign({}, {\n    type\n  }, payload)\n}\n\nexport const createRequestTypes = base => {\n  return [REQUEST, SUCCESS, FAILURE, LOAD_CACHE].reduce((acc, type) => {\n    acc[type] = `api/${base}/${type}`\n    return acc\n  }, {}) as RequestTypes\n}\n\nexport const createComponentActionType = (name, operation) =>\n  `components/${name}/${operation}`\n\nexport const createSagaTriggerActionType = (operation: string) =>\n  `saga-triggers/${operation}`\n\nexport const createActionEntity = (requestTypes: RequestTypes) => {\n  return {\n    request: (payload?: Object) => action(requestTypes.REQUEST, payload),\n    success: (response?, payload?: Object) => action(requestTypes.SUCCESS, Object.assign({}, { response }, payload)),\n    // TODO\n    loadCache: (response, payload: Object) => action(requestTypes.SUCCESS, Object.assign({}, { response }, payload, { loadedFromCache: true })),\n    failure: (error, payload?: Object) => action(requestTypes.FAILURE, Object.assign({}, { error }, payload)),\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/store/actions/utils.ts","import callApi, { CallApiOptions } from '../../services/utils/callApi'\nimport helpers from '../../helpers'\nimport _ from 'lodash'\nimport handleResponse from '../../services/utils/handleResponse'\n\nexport type Pagination = {\n  name: string\n  q?: string\n  key?: string\n  merge?: boolean\n}\n\nexport type CALL_API_OBJ = {\n  // todo\n  // 可以是函数或者字符串，但是 ts 不知道怎么写能通过，所以先这样\n  endpoint: any\n\n  types: string[]\n  apiUrl?: string\n  schema?: any\n  options?: CallApiOptions\n  pagination?: Pagination\n}\n\nexport default store => next => action => {\n  const CALL_API: CALL_API_OBJ = action.CALL_API\n  if (typeof CALL_API === 'undefined') {\n    return next(action)\n  }\n\n  let { endpoint, apiUrl, options, pagination } = CALL_API\n  const { types, schema } = CALL_API\n  const [requestType, successType, failureType] = types\n\n  const actionWith = ({data, hasPagination}) => {\n    let finalAction = Object.assign({}, action, data)\n    finalAction = _.omit(finalAction, ['CALL_API'])\n\n    if (!hasPagination) {\n      finalAction = _.omit(finalAction, ['CALL_API', 'pagination'])\n    }\n\n    return finalAction\n  }\n\n  next(actionWith({\n    data: {\n      type: requestType,\n      pagination\n    },\n    hasPagination: Boolean(pagination)\n  }))\n\n  if (typeof endpoint === 'function') {\n    endpoint = endpoint(store.getState())\n  }\n\n  if (typeof apiUrl === 'undefined') {\n    apiUrl = helpers.getApiRoot()\n  }\n\n  const fullUrl = `${apiUrl}/${endpoint}`\n\n  return callApi(fullUrl, options || {}).then(\n    response => {\n      const normalizedRes = handleResponse(response, schema)\n      let finalAction = {\n        response: normalizedRes,\n        type: successType,\n        pagination\n      }\n\n      return next(dispatch => {\n        dispatch(actionWith({ data: finalAction, hasPagination: Boolean(pagination) }))\n        return {\n          ok: true,\n          response\n        }\n      })\n    },\n    error => next(dispatch => {\n      dispatch(actionWith({\n        data: {\n          type: failureType,\n          pagination,\n          error\n        },\n        hasPagination: Boolean(pagination)\n      }))\n      return {\n        ok: false,\n        error\n      }\n    })\n  )\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/store/middleware/api.ts","import _ from 'lodash'\n\nexport default store => next => action => {\n  if (typeof action.SERVER_STORE === 'undefined') {\n    return next(action)\n  }\n\n  const actionBody = new Promise(resolve => {\n    resolve(action.SERVER_STORE.body)\n  })\n\n  return actionBody.then(body => {\n    return next(dispatch => {\n      dispatch(body)\n      return {\n        ok: true,\n        response: action.body.response\n      }\n    })\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/store/middleware/handleServerStore.ts","export default store => next => action => {\n  console.info(action.type)\n  next(action)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/store/middleware/logActionTypes.ts","import * as ACTION_TYPES from '../../constants/actionTypes'\n\nexport default store => next => action => {\n\n  if (action.type === ACTION_TYPES.DOUBAN_BOOKS.SUCCESS) {\n    action.response.result = action.response.result.books\n  }\n\n  return next(action)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/store/middleware/modifyResponse.ts","import * as cache from '../../data/cache'\nimport { put, call } from 'redux-saga/effects'\nimport _ from 'lodash'\nimport appConfig from '../../../app.config'\n\nconst OPTIONS = 'options'\nconst ID = 'id'\nconst DATA = 'data'\nconst TYPE = 'type'\n\nexport const API_CONFIG_KEYS = [OPTIONS, ID, DATA]\nexport const RESERVED_ACTION_KYES = [TYPE, ...API_CONFIG_KEYS]\n\n// TODO\n// 似乎需要优化，缓存的逻辑和获取的耦合太深了\nexport function* fetchEntity(entity: ActionEntity, apiFn, apiConfig, payload): any {\n  const fullPayload = _.assign({}, apiConfig, payload)\n  const id = apiConfig[ID]\n  const options = apiConfig[OPTIONS]\n  const apiArgs = [id, options].filter(arg => !_.isUndefined(arg))\n\n  let hasCache\n  let cacheId\n\n  if (id && appConfig.enableEntityCache) {\n    cacheId = cache.createCacheId(apiFn + id + options)\n    let cacheContent = cache.getCache(cacheId)\n\n    hasCache = Boolean(cacheContent)\n\n    if (hasCache) {\n      let action = entity.loadCache(cacheContent, fullPayload)\n      yield put(entity.request(fullPayload))\n      yield put(action)\n      return action\n    }\n  }\n\n  yield put(entity.request(fullPayload))\n  const {response, error} = yield call(apiFn, ...apiArgs)\n\n  if (response) {\n    // 如果是 undefined 也不会有任何处理\n    if (hasCache === false) {\n      cache.setCache(cacheId, response)\n    }\n\n    let action = entity.success(response, fullPayload)\n\n    yield put(action)\n    return action\n  } else {\n    let action = entity.failure(error, fullPayload)\n    yield put(action)\n    return action\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/store/sagas/utils.ts","export default function padNumberWithZero(num) {\n  let numStrWithZero\n\n  if (num < 10) {\n    numStrWithZero = '0' + num.toString()\n  } else {\n    numStrWithZero = num.toString()\n  }\n\n  return numStrWithZero\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/utils/padNumberWithZero.ts","import _ from 'lodash'\n\nexport default function parseQuery(queryString) {\n  const params = queryString.split('&')\n  let object = {}\n\n  params.forEach(param => {\n    const key = param.split('=')[0]\n    const val = param.split('=')[1]\n\n    object[key] = val\n  })\n\n  return object\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/utils/parseQuery.ts","import Model from '../models/model'\nimport * as schemas from '../data/schemas'\nimport _ from 'lodash'\n\nconst fileModel = new Model(schemas.file)\n\nexport function readFile(fileId, parser?: (file: any) => Promise<any>): Promise<any> {\n  return fileModel.findOne(fileId).then(fileResult => {\n    if (parser && typeof parser === 'function') {\n      const binaryFile = fileResult.content.buffer\n\n      return parser(binaryFile).then(content => {\n        return _.assign({}, fileResult, {\n          content\n        })\n      })\n    }\n\n    return fileResult\n  })\n}\n\n// TODO\nexport function delFile(fileId) {\n  return fileModel.findOne(fileId).then(resultFile => {\n    return fileModel.remove(fileId)\n  }, error => {\n    if (error.type === 'NotFoundError') {\n      return {\n        message: 'File record not found, probably because it doesn\\'t exist, or hasn\\'t been created in the first place!'\n      }\n    }\n    return Promise.reject(error) as any\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/api/file.ts","import _ from 'lodash'\nimport { Field } from './schema'\n\nexport default function outputEmptyEntity(fields: Field[], idObjOrIdString = {}) {\n  // id 可以为对象，此时会直接被扩展到输出结果里面\n  let idObj = idObjOrIdString\n\n  if (typeof idObjOrIdString === 'string') {\n    idObj = { _id: idObjOrIdString }\n  }\n\n  const entity = {}\n\n  fields.forEach(field => {\n    // todo\n    // 添加类型判断\n    entity[field.name] = ''\n  })\n\n  return _.assign({}, entity, idObj)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/models/output-empty-entity.ts","import _ from 'lodash'\n\nexport type Fields = string[]\n\nexport interface ListingOptions {\n  page?: number\n  limit?: number\n  order?: 'new' | 'old'\n}\n\nconst defaultOptions = {\n  page: 1,\n  limit: 10,\n  order: 'new'\n}\n\nexport default function paginate(results, options?: ListingOptions) {\n  let { page, limit, order } = Object.assign({}, defaultOptions, options)\n  // query 里面传过来的都是 string\n  page = parseInt(page as any, 10)\n  // 如果 page 小于 0 则当做 1 来处理，大于最大页面则不管\n  // 此逻辑参照 GitHub api\n  page = page <= 0 ? 1 : page\n  limit = parseInt(limit as any, 10)\n\n  if (order === 'new') {\n    results.reverse()\n  }\n\n  const startIndex = (page - 1) * limit\n\n  return {\n    entities: results.slice(startIndex, limit + startIndex),\n    _pagination: {\n      current: page,\n      all: Math.ceil(results.length / limit) || 1\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/models/paginate.ts","const colors = require('colors/safe')\n\nconst print = {\n  info(message) {\n    console.info('\\n' + colors.bgGreen.bold.white(' INFO '), colors.green(message))\n  },\n\n  test(message) {\n    console.info('\\n' + colors.bgCyan.bold.black(' INFO '), typeof message !== 'object' ? colors.cyan(message) : message)\n  },\n\n  warn(message) {\n    console.error('\\n' + colors.bgYellow.bold.black(' WARNING '), typeof message !== 'object' ? colors.yellow(message) : message)\n  },\n\n  error(message) {\n    console.error('\\n' + colors.bgRed.bold.white(' ERROR '), typeof message !== 'object' ? colors.red(message) : message)\n  }\n}\n\nexport default print\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/utils/print.ts","const validator = require('validator')\n\nconst additionalValidators = {\n  lengthMin(len) {\n    return input => {\n      return input.length >= len\n    }\n  },\n\n  lengthMax(len) {\n    return input => {\n      return input.length <= len\n    }\n  }\n}\n\nexport default Object.assign({}, validator, additionalValidators) as any\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/utils/validator.ts","\n    var content = require(\"!!../../../../node_modules/css-loader/index.js??ref--3-1!../../../../node_modules/sass-loader/index.js!./Alert.scss\");\n    var insertCss = require(\"!../../../../node_modules/isomorphic-style-loader/lib/insertCss.js\");\n\n    if (typeof content === 'string') {\n      content = [[module.id, content, '']];\n    }\n\n    module.exports = content.locals || {};\n    module.exports._getContent = function() { return content; };\n    module.exports._getCss = function() { return content.toString(); };\n    module.exports._insertCss = function(options) { return insertCss(content, options) };\n    \n    // Hot Module Replacement\n    // https://webpack.github.io/docs/hot-module-replacement\n    // Only activated in browser context\n    if (module.hot && typeof window !== 'undefined' && window.document) {\n      var removeCss = function() {};\n      module.hot.accept(\"!!../../../../node_modules/css-loader/index.js??ref--3-1!../../../../node_modules/sass-loader/index.js!./Alert.scss\", function() {\n        content = require(\"!!../../../../node_modules/css-loader/index.js??ref--3-1!../../../../node_modules/sass-loader/index.js!./Alert.scss\");\n\n        if (typeof content === 'string') {\n          content = [[module.id, content, '']];\n        }\n\n        removeCss = insertCss(content, { replace: true });\n      });\n      module.hot.dispose(function() { removeCss(); });\n    }\n  \n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/isomorphic/elements/Alert/Alert.scss\n// module id = 72\n// module chunks = 17","module.exports = require(\"bluebird\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"bluebird\"\n// module id = 73\n// module chunks = 17","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 74\n// module chunks = 17","module.exports = require(\"lodash/isUndefined\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash/isUndefined\"\n// module id = 75\n// module chunks = 17","module.exports = require(\"normalizr\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"normalizr\"\n// module id = 76\n// module chunks = 17","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 77\n// module chunks = 17","module.exports = require(\"react-router-redux\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react-router-redux\"\n// module id = 78\n// module chunks = 17","module.exports = require(\"redux-saga\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"redux-saga\"\n// module id = 79\n// module chunks = 17","import initialize from './initialize'\n\nexport default initialize\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/index.ts","module.exports = require(\"babel-polyfill\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-polyfill\"\n// module id = 81\n// module chunks = 17","import Button from './Button'\nimport Input from './Input'\nimport SelectizeInput from './SelectizeInput'\nimport Textarea from './Textarea'\n\nexport { Button, Input, SelectizeInput, Textarea }\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/elements/form.ts","module.exports = require(\"lodash/keys\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash/keys\"\n// module id = 83\n// module chunks = 17","import React from 'react'\nimport { Button } from '../form'\nconst styles = require('./ModalFooter.scss')\n\ntype Props = {\n  children?: any\n  onConfirm: () => void\n  onCancel?: () => void\n}\n\nfunction ModalFooter(props: Props) {\n  const { onConfirm, onCancel } = props\n\n  return (\n    <div className={styles['modal-footer']}>\n      <Button color=\"blue\" onClick={onConfirm}>确认</Button>\n      {\n        onCancel && (\n          <Button color=\"white\" onClick={onCancel}>取消</Button>\n        )\n      }\n    </div>\n  )\n}\n\nexport default ModalFooter\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/elements/Modal/ModalFooter.tsx","export const THEMES = {\n  WHITE: 'WHITE',\n  NIGHT: 'NIGHT',\n  SEPIA: 'SEPIA'\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/constants/viewerDefs.ts","import Button from './Button'\nexport default Button\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/elements/Button/index.ts","import Fade from './Fade'\nexport default Fade\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/elements/Fade/index.ts","import Input from './Input'\nexport default Input\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/elements/Input/index.ts","import _ from 'lodash'\nimport helpers from '../../helpers'\nconst styles = require('./components/BookPage.scss')\n\n// 暂不支持包含图片的计算\n// 计算没有等待图片加载完成，所以结果是不正确的\nexport function getNodeHeights(nodes) {\n  let nodesHeight = []\n\n  Array.prototype.forEach.call(nodes, (node, index) => {\n    if (node.className !== styles['gb-line']) {\n      console.error('Unsupported content found!')\n    }\n    nodesHeight.push(node.clientHeight)\n  })\n\n  return nodesHeight\n}\n\n// long paragraph situation doesn't seem to affect this function\n// offset distance is always negtive or zero\n// the index will be of the paragraph with this offset at the end\nfunction getPageOffset({pageIndex, pageHeight, nodeHeights}: {\n  pageIndex: number\n  pageHeight: number\n  nodeHeights: number[]\n}) {\n  let offset = 0\n  let nodeIndex = 0\n  let nodeStartIndex\n\n  if (pageIndex !== 0) {\n    let nodeHeightSum = 0\n    while (nodeHeightSum <= pageHeight * pageIndex) {\n      nodeHeightSum += nodeHeights[nodeIndex]\n      nodeIndex++\n    }\n    offset = nodeHeightSum - nodeHeights[nodeIndex - 1] - pageIndex * pageHeight\n    nodeStartIndex = nodeIndex - 1\n  } else {\n    nodeStartIndex = 0\n  }\n\n  return { offset, nodeStartIndex }\n}\n\n\nfunction getNodesOfPage({pageIndex, nodes, pageHeight, nodeHeights}: {\n  pageIndex: number\n  nodes: any\n  pageHeight: number\n  nodeHeights: number[]\n}) {\n  let { offset, nodeStartIndex } = getPageOffset({ pageIndex, pageHeight, nodeHeights })\n  let nodeIndex = nodeStartIndex\n  let nodeEndIndex\n  let pageNodes = []\n\n  let nodeHeightSum = offset + nodeHeights[nodeStartIndex]\n\n  nodeIndex++\n  if (nodeHeightSum < pageHeight) {\n    while (nodeHeightSum <= pageHeight && nodeIndex !== nodes.length) {\n      nodeHeightSum += nodeHeights[nodeIndex]\n      nodeIndex++\n    }\n    nodeEndIndex = nodeIndex - 1\n  } else {\n    nodeEndIndex = nodeStartIndex\n  }\n\n  for (let i = nodeStartIndex; i <= nodeEndIndex && i <= nodes.length - 1; i++) {\n    pageNodes.push(nodes[i])\n  }\n\n  return { pageNodes, offset }\n}\n\n\nexport type TPage = {\n  nodes: string[]\n  meta: any\n}\nexport type TPageList = TPage[]\nexport function groupNodesByPage(nodes: any, nodeHeights: number[], pageHeight: number, pageStartFrom = 0, chapterId?): TPageList {\n  let pages = []\n  let pageHeightSum = nodeHeights.reduce((a, b) => (a + b), 0)\n  let pageSum = Math.ceil(pageHeightSum / pageHeight)\n\n  if (nodeHeights.length === 0) {\n    return [{\n      nodes,\n      meta: {\n        pageNo: 1 + pageStartFrom,\n        offset: 0,\n        chapterId\n      }\n    }]\n  }\n\n  // finally\n  for (let i = 0; i < pageSum; i++) {\n    const { pageNodes, offset } = getNodesOfPage({ pageIndex: i, nodes, nodeHeights, pageHeight })\n\n    const findIdOfHTags = (mdNode: string) => {\n      const pattern = /<h\\d id=\"(.*)\">(.*)<\\/h\\d>/\n      const result = mdNode.match(pattern)\n\n      if (result) {\n        return result[1]\n      }\n\n      return null\n    }\n\n    const hash = pageNodes\n      .map(node => {\n        return findIdOfHTags(node)\n      })\n      .filter(id => Boolean(id))\n\n    pages.push({\n      nodes: pageNodes,\n      meta: {\n        pageNo: pageStartFrom + i + 1,\n        offset,\n        chapterId,\n        hash\n      },\n    })\n  }\n\n  return pages\n}\n\nexport function groupPageFromChapters(contentOfChapters: TBookFlesh, nodeHeightsOfChapters: {\n  id: string\n  nodeHeights: number[]\n}[], pageHeight: number) {\n  let pageStartFrom = 0\n  let allPages = []\n  const t0 = new Date().valueOf()\n\n  contentOfChapters.forEach((chapter, index) => {\n    const pages = groupNodesByPage(chapter.markdown.split('\\n\\n'), nodeHeightsOfChapters[index].nodeHeights, pageHeight, pageStartFrom, chapter.id)\n    allPages = allPages.concat(pages)\n    pageStartFrom = pageStartFrom + pages.length\n  })\n\n  const t1 = new Date().valueOf()\n  helpers.print(`Grouping nodes takes ${t1 - t0}ms`)\n\n  return allPages\n}\n\nexport function resolveBookLocation(href, computedPages: TBookPage[]) {\n  const chapterId = href.split('$')[0]\n  const hash = href.split('$')[1]\n\n  let i = 0\n  let foundChapterPage\n\n  while (i < computedPages.length) {\n    const page = computedPages[i]\n    if (`#${page.meta.chapterId}` === chapterId) {\n      foundChapterPage = page.meta.pageNo\n\n      if (hash) {\n        if (page.meta.hash && page.meta.hash.indexOf(hash) !== -1) {\n          helpers.print('with hash', page.meta.pageNo)\n          return page.meta.pageNo\n        }\n      } else {\n        helpers.print('without hash', page.meta.pageNo)\n        return page.meta.pageNo\n      }\n    }\n    i++\n  }\n\n  if (!foundChapterPage) {\n    throw new Error('未找到位置！')\n  }\n  console.warn('所在章节未找到位置，已跳转至章节！')\n\n  helpers.print('foundChapterPage', foundChapterPage)\n  return foundChapterPage\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/routes/Viewer/Viewer.utils.ts","\n    var content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--3-1!../../../../../node_modules/sass-loader/index.js!./BookPage.scss\");\n    var insertCss = require(\"!../../../../../node_modules/isomorphic-style-loader/lib/insertCss.js\");\n\n    if (typeof content === 'string') {\n      content = [[module.id, content, '']];\n    }\n\n    module.exports = content.locals || {};\n    module.exports._getContent = function() { return content; };\n    module.exports._getCss = function() { return content.toString(); };\n    module.exports._insertCss = function(options) { return insertCss(content, options) };\n    \n    // Hot Module Replacement\n    // https://webpack.github.io/docs/hot-module-replacement\n    // Only activated in browser context\n    if (module.hot && typeof window !== 'undefined' && window.document) {\n      var removeCss = function() {};\n      module.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--3-1!../../../../../node_modules/sass-loader/index.js!./BookPage.scss\", function() {\n        content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--3-1!../../../../../node_modules/sass-loader/index.js!./BookPage.scss\");\n\n        if (typeof content === 'string') {\n          content = [[module.id, content, '']];\n        }\n\n        removeCss = insertCss(content, { replace: true });\n      });\n      module.hot.dispose(function() { removeCss(); });\n    }\n  \n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/isomorphic/routes/Viewer/components/BookPage.scss\n// module id = 90\n// module chunks = 17","module.exports = require(\"react-addons-css-transition-group\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react-addons-css-transition-group\"\n// module id = 91\n// module chunks = 17","module.exports = {\n\t\"app.css\": \"css/app.c0ad828ecd.css\",\n\t\"app.js\": \"js/app.c0ad828ecd.js\",\n\t\"base.global.css\": \"css/base.global.30e3ea3a4f.css\",\n\t\"base.global.js\": \"js/base.global.30e3ea3a4f.js\",\n\t\"js/chunk.0b7ce24747.12.js\": \"js/chunk.0b7ce24747.12.js\",\n\t\"js/chunk.17e3d2e5dd.16.js\": \"js/chunk.17e3d2e5dd.16.js\",\n\t\"js/chunk.1a0245146e.0.js\": \"js/chunk.1a0245146e.0.js\",\n\t\"js/chunk.2515738e81.9.js\": \"js/chunk.2515738e81.9.js\",\n\t\"js/chunk.398e617134.15.js\": \"js/chunk.398e617134.15.js\",\n\t\"js/chunk.39fb5c583d.13.js\": \"js/chunk.39fb5c583d.13.js\",\n\t\"js/chunk.4434c9d188.3.js\": \"js/chunk.4434c9d188.3.js\",\n\t\"js/chunk.4e117530d8.10.js\": \"js/chunk.4e117530d8.10.js\",\n\t\"js/chunk.5c3753c8ad.7.js\": \"js/chunk.5c3753c8ad.7.js\",\n\t\"js/chunk.5ed7e6452d.14.js\": \"js/chunk.5ed7e6452d.14.js\",\n\t\"js/chunk.628e1c5a04.11.js\": \"js/chunk.628e1c5a04.11.js\",\n\t\"js/chunk.8ae3db504f.1.js\": \"js/chunk.8ae3db504f.1.js\",\n\t\"js/chunk.93c4e9de43.5.js\": \"js/chunk.93c4e9de43.5.js\",\n\t\"js/chunk.97c4421996.4.js\": \"js/chunk.97c4421996.4.js\",\n\t\"js/chunk.b17f6166ea.2.js\": \"js/chunk.b17f6166ea.2.js\",\n\t\"js/chunk.bc3869013b.6.js\": \"js/chunk.bc3869013b.6.js\",\n\t\"js/chunk.fa685f655e.8.js\": \"js/chunk.fa685f655e.8.js\",\n\t\"media/logo-dark.png\": \"media/logo-dark.4754e8aa78.png\",\n\t\"media/logo.png\": \"media/logo.81eb83d7f7.png\",\n\t\"media/shadow.png\": \"media/shadow.471ea37f96.png\",\n\t\"modifiers.global.css\": \"css/modifiers.global.d52679eb9d.css\",\n\t\"modifiers.global.js\": \"js/modifiers.global.d52679eb9d.js\",\n\t\"vendor.global.css\": \"css/vendor.global.cab0d0e8a2.css\",\n\t\"vendor.global.js\": \"js/vendor.global.cab0d0e8a2.js\",\n\t\"vendor.js\": \"js/vendor.ee5dcf7869.js\"\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/static/assets.manifest.json\n// module id = 92\n// module chunks = 17","const appConfig: AppConfig = {\n  api: {\n    prefix: 'api'\n  },\n  database: {\n    host: 'mongodb://localhost:27017',\n    name: 'readr',\n    mongoStoreName: 'readr_session'\n  },\n  siteUrl: 'http://localhost',\n  siteName: 'readr',\n  apiPort: 3091,\n  assetsPort: 3090,\n  pagesPort: 3000,\n  enableEntityCache: false\n}\n\nexport default appConfig\n\n\n\n// WEBPACK FOOTER //\n// ./src/app.config.dev.ts","const appConfig: AppConfig = {\n  api: {\n    prefix: 'api'\n  },\n  database: {\n    host: 'mongodb://localhost:27017',\n    name: 'readr',\n    mongoStoreName: 'readr_session'\n  },\n  siteUrl: 'http://readrweb.com',\n  siteName: 'readr',\n  apiPort: 4001,\n  assetsPort: 4000,\n  pagesPort: 4002,\n  enableEntityCache: true\n}\n\nexport default appConfig\n\n\n\n// WEBPACK FOOTER //\n// ./src/app.config.prod.ts","import React, { Component } from 'react'\nimport { Container } from '../../elements/layout'\nimport { Dropdown, DropdownItem, DropdownItemSep } from '../../elements/Dropdown'\nimport Logo from '../Logo'\nimport CSSModules from 'react-css-modules'\nimport { Link } from 'react-router'\nconst styles = require('./Branding.scss')\n\ninterface IProps {\n  username: string\n  isAdmin?: boolean\n  className?: string\n  recentReading?: {\n    title: string\n    id: string\n  }[]\n  onLogout: () => void\n}\n\ninterface IState {\n  isDropdownMenuVisible: boolean\n}\n\n@CSSModules(styles, {\n  allowMultiple: true\n})\nclass Branding extends Component<IProps, IState> {\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      isDropdownMenuVisible: false\n    }\n    this.handleLogoutClick = this.handleLogoutClick.bind(this)\n  }\n\n  toggleDropdownMenu() {\n    this.setState({\n      isDropdownMenuVisible: !this.state.isDropdownMenuVisible\n    })\n  }\n\n  handleLogoutClick(e) {\n    this.props.onLogout()\n    e.preventDefault()\n  }\n\n  render() {\n    let isAdmin = this.props.isAdmin ? this.props.isAdmin : false\n\n    const { username, recentReading } = this.props\n\n    return (\n      <div styleName={`branding ${this.props.className ? this.props.className : ''}`}>\n        <Container className=\"clearfix\">\n          <div>\n            <div className=\"left\">\n              <Logo/>\n            </div>\n            <div className=\"left\" styleName=\"nav\">\n              <ul styleName=\"nav-links\">\n                <li styleName=\"nav-item\">\n                  <Link styleName=\"nav-link\" to=\"/browse\">浏览</Link>\n                </li>\n              </ul>\n            </div>\n            {\n              username\n                ? (\n                  <div styleName=\"nav--user\">\n                    {\n                      recentReading.length !== 0 && (\n                        <Dropdown styleName=\"dropdown-recent-reading\" title=\"最近阅读\">\n                          {\n                            recentReading.slice(0, 5).map((book, index) => {\n                              return (\n                                <DropdownItem key={index}>\n                                  <Link to={`/viewer/book/${book.id}`}>{book.title}</Link>\n                                </DropdownItem>\n                              )\n                            })\n                          }\n                          <DropdownItemSep />\n                          <DropdownItem><Link to={`/user/shelf`}>查看全部</Link></DropdownItem>\n                        </Dropdown>\n                      )\n                    }\n                    <Dropdown\n                      title={(\n                        <div style={{ display: 'inline-block' }}>{username}{ isAdmin && <span className=\"badge\">管理员</span> }</div>\n                      ) }\n                      >\n                      {\n                        isAdmin === true && (\n                          <DropdownItem><Link to=\"/console\">控制台</Link></DropdownItem>\n                        )\n                      }\n                      <DropdownItem><Link to={`/user/shelf`}>书架</Link></DropdownItem>\n                      <DropdownItem><Link to={`/user/profile`}>个人主页</Link></DropdownItem>\n                      <DropdownItem><Link to={`/user/preference`}>设置</Link></DropdownItem>\n                      <DropdownItemSep />\n                      <DropdownItem><a onClick={this.handleLogoutClick} href=\"#\">退出</a></DropdownItem>\n                    </Dropdown>\n                  </div>\n                )\n                : (\n                  <div styleName=\"nav--user\">\n                    <ul styleName=\"nav-links\">\n                      <li styleName=\"nav-item\">\n                        <Link styleName=\"nav-link\" to=\"/signin\">登录</Link>\n                      </li>\n                      <li styleName=\"nav-item\">\n                        <Link styleName=\"nav-link\" to=\"/signup\">注册</Link>\n                      </li>\n                    </ul>\n                  </div>\n                )\n            }\n          </div>\n        </Container>\n      </div>\n    )\n  }\n}\n\nexport default Branding\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/components/Branding/Branding.tsx","import Branding from './Branding'\nexport default Branding\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/components/Branding/index.tsx","import React, { Component } from 'react'\nimport Container from '../../elements/Container'\nimport CSSModules from 'react-css-modules'\nconst styles = require('./Colophon.scss')\n\n@CSSModules(styles, {\n  allowMultiple: true\n})\nclass Colophon extends Component<any, any> {\n  render() {\n    return (\n      <div className=\"colophon\" styleName=\"colophon\">\n        <Container>\n          <p>© 2015－2016 readrweb.com, all rights reserved</p>\n        </Container>\n      </div>\n    )\n  }\n}\n\nexport default Colophon\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/components/Colophon/Colophon.tsx","import Colophon from './Colophon'\nexport default Colophon\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/components/Colophon/index.ts","import React, { Component } from 'react'\nimport { Link } from 'react-router'\nimport Container from '../../elements/Container'\nimport { Dropdown, DropdownItem, DropdownItemSep } from '../../elements/Dropdown'\nimport CSSModules from 'react-css-modules'\nimport Logo from '../Logo'\nconst styles = require('./ConsoleBranding.scss')\n\ninterface Props {\n  username: string\n  isAdmin?: boolean\n  onLogout: () => void\n}\n\ninterface State {\n  isDropdownMenuVisible: boolean\n}\n\n@CSSModules(styles, {\n  allowMultiple: true\n})\nclass ConsoleBranding extends Component<Props, State> {\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      isDropdownMenuVisible: false\n    }\n    this.handleLogoutClick = this.handleLogoutClick.bind(this)\n  }\n\n  handleLogoutClick(e) {\n    this.props.onLogout()\n    e.preventDefault()\n  }\n\n  toggleDropdownMenu() {\n    this.setState({\n      isDropdownMenuVisible: !this.state.isDropdownMenuVisible\n    })\n  }\n\n  render() {\n    let username = this.props.username\n    let isAdmin = this.props.isAdmin ? this.props.isAdmin : 'false'\n\n    return (\n      <div styleName=\"branding\">\n        <Container isFluid={true} className=\"clearfix\">\n          <div>\n            <div className=\"left\">\n              <Logo to=\"/console\" />\n            </div>\n            <div styleName=\"sub-name\">\n              <span styleName=\"sub\">控制台</span>\n            </div>\n            <div styleName=\"nav right\">\n              {\n                username && (\n                  <Dropdown\n                    style=\"dark\"\n                    title={(\n                      <span>{username}{ isAdmin && <span className=\"badge badge--dark\">管理员</span> }</span>\n                    ) }\n                    >\n                    <DropdownItem><Link to=\"/\">回到 Readr</Link></DropdownItem>\n                    <DropdownItem><Link to={`/user/profile`}>个人主页</Link></DropdownItem>\n                    <DropdownItem><Link to={`/user/preference`}>设置</Link></DropdownItem>\n                    <DropdownItemSep />\n                    <DropdownItem><a onClick={this.handleLogoutClick} href=\"#\">退出</a></DropdownItem>\n                  </Dropdown>\n                )\n              }\n            </div>\n          </div>\n        </Container>\n      </div>\n    )\n  }\n}\n\nexport default ConsoleBranding\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/components/ConsoleBranding/ConsoleBranding.tsx","import ConsoleBranding from './ConsoleBranding'\nexport default ConsoleBranding\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/components/ConsoleBranding/index.ts","import React, { Component } from 'react'\nimport { Link } from 'react-router'\nimport Icon from '../../elements/Icon'\nimport CSSModules from 'react-css-modules'\nconst styles = require('./ConsoleSidebar.scss')\n\ninterface IProps {\n  currentPath?: any\n  menuMapping?: any\n}\n\ninterface IState {\n}\n\n@CSSModules(styles, {\n  allowMultiple: true\n})\nclass ConsoleSidebar extends Component<IProps, IState> {\n\n  constructor(props) {\n    super(props)\n  }\n\n  componentDidMount() {\n  }\n\n  render() {\n    const { menuMapping, currentPath } = this.props\n\n    let currentMenu = {\n      rootIndex: 0,\n      subIndex: 0\n    }\n\n    menuMapping.forEach((menu, rootIndex) => {\n      let subIndex\n\n      let result = menu.subMenu.filter((item, index) => {\n        if (item.path === currentPath) {\n          subIndex = index\n          return true\n        }\n      })\n\n      if (result.length > 0) {\n        currentMenu.rootIndex = rootIndex\n        currentMenu.subIndex = subIndex\n      }\n    })\n\n    let rootMenu = (\n      <ul styleName=\"nav-side-root\">\n        {\n          menuMapping.map((menu, index) => {\n            return (\n              <li key={index} styleName={index !== currentMenu.rootIndex ? 'root-item' : 'root-item--current'}>\n                <Link to={menu.path}>\n                  <Icon size={25} styleName=\"icon\" name={menu.component} />\n                </Link>\n              </li>\n            )\n          })\n        }\n      </ul>\n    )\n\n    let subMenu = (\n      <ul styleName=\"nav-side-sub\">\n        {\n          menuMapping[currentMenu.rootIndex].subMenu.map((menu, index) => {\n            return (\n              <li key={index} styleName={index !== currentMenu.subIndex ? 'sub-item' : 'sub-item--current'}>\n                <Link to={menu.path}>{menu.displayName}</Link>\n              </li>\n            )\n          })\n        }\n      </ul>\n    )\n\n    return (\n      <div styleName=\"sidebar-left\">\n        {rootMenu}\n        {subMenu}\n      </div>\n    )\n  }\n}\n\nexport default ConsoleSidebar\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/components/ConsoleSidebar/ConsoleSidebar.tsx","import ConsoleSidebar from './ConsoleSidebar'\nexport default ConsoleSidebar\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/components/ConsoleSidebar/index.ts","import React from 'react'\nimport { Link } from 'react-router'\nimport styles from './Logo.scss'\n\ntype TProps = {\n  children?: any\n  to?: string\n  dark?: boolean\n}\n\nfunction Logo(props: TProps) {\n  const { dark, to } = props\n  const styleName = dark ? 'logo--dark' : 'logo'\n\n  return (\n    <h1 className={styles['logo-wrap']}>\n      <Link className={styles[styleName]} to={to}>readr</Link>\n    </h1>\n  )\n}\n\nLogo['defaultProps'] = {\n  to: '/'\n}\n\nexport default Logo\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/components/Logo/Logo.tsx","import * as ACTION_TYPES from './actionTypes'\nimport * as COMMON from './common'\nimport * as VIEWER_DEFS from './viewerDefs'\n\nexport { ACTION_TYPES, COMMON, VIEWER_DEFS }\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/constants/index.ts","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport Branding from '../components/Branding'\nimport Colophon from '../components/Colophon'\nimport { fetchShelf, userLogout } from '../store/actions'\nimport _ from 'lodash'\nimport * as selectors from '../store/selectors'\n\ninterface Props {\n  fetchShelf: any\n  session: any\n  bookShelf: any\n  userLogout: typeof userLogout\n}\n\nclass App extends Component<Props, {}> {\n\n  constructor(props) {\n    super(props)\n    this.handleLogout = this.handleLogout.bind(this)\n  }\n\n  handleLogout() {\n    this.props.userLogout()\n  }\n\n  componentDidMount() {\n    if (this.props.session.user.role !== 'visitor') {\n      this.props.fetchShelf()\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const userLoggedIn = this.props.session.user.role === 'visitor'\n      && nextProps.session.user.role !== 'visitor'\n\n    if (userLoggedIn) {\n      this.props.fetchShelf()\n    }\n  }\n\n  render() {\n    let isAdmin = false\n    let username = null\n\n    if (this.props.session.user.role !== 'visitor') {\n      isAdmin = this.props.session.user.role === 'admin'\n      username = this.props.session.user.username\n    }\n\n    const {bookShelf} = this.props\n    const bookShelfList = bookShelf\n      .map(book => ({\n        title: book.title,\n        id: book.id\n      }))\n\n    return (\n      <div>\n        <Branding\n          recentReading={bookShelfList}\n          isAdmin={isAdmin}\n          username={username}\n          onLogout={this.handleLogout}\n          />\n        {this.props.children}\n        <Colophon />\n      </div>\n    )\n  }\n}\n\nexport default connect<{}, {}, Props>(\n  state => ({\n    notification: state.components.notification,\n    session: state.session,\n    bookShelf: selectors.shelfBooks()(state)\n  }),\n  { fetchShelf, userLogout }\n)(App)\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/containers/App.tsx","import React, { Component, PropTypes as pt } from 'react'\nimport withSideEffect from 'react-side-effect'\nimport _ from 'lodash'\n\ninterface Props {\n  className: string\n  styleName?: string\n}\n\n@withSideEffect(\n  reducePropsToState,\n  handleStateChangeOnClient\n)\nclass BodyClass extends Component<Props, void> { // eslint-disable-line\n\n  static rewind: () => string\n\n  render() {\n    return (\n      <div className=\"body-class\">{this.props.children}</div>\n    )\n  }\n}\n\nBodyClass['propTypes'] = {\n  children: pt.object\n}\n\nfunction reducePropsToState(propsList) {\n  const innermostProps = _.last(propsList)\n\n  if (innermostProps) {\n    const props = _.pick(innermostProps, ['className']) as any\n\n    const className = props.className = propsList\n      .filter(prop => prop.className)\n      .map(prop => prop.className)\n      .join(' ')\n\n    return className\n  }\n\n  return null\n}\n\nfunction handleStateChangeOnClient(className) {\n  if (typeof className !== 'undefined') {\n    document.body.className = className\n  } else {\n    document.body.removeAttribute('class')\n  }\n}\n\nexport default BodyClass\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/containers/BodyClass.tsx","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { Container } from '../elements/layout'\nimport ConsoleBranding from '../components/ConsoleBranding'\nimport { userAuth, sendNotification, userLogout } from '../store/actions'\nimport ConsoleSidebar from '../components/ConsoleSidebar'\nimport menus from '../content/menus'\nimport DocContainer from '../containers/DocContainer'\nimport helpers from '../helpers'\n\ninterface Props {\n  notifications?: any\n  userAuth?: any\n  session?: any\n  routing?: any\n  userLogout: typeof userLogout\n}\n\nclass Console extends Component<Props, {}> {\n\n  constructor(props) {\n    super(props)\n    this.handleLogout = this.handleLogout.bind(this)\n  }\n\n  redirectIfNotAdmin(props = this.props) {\n    if (props.session.user.role !== 'admin') {\n      helpers.redirect('/')\n    }\n  }\n\n  handleLogout() {\n    this.props.userLogout()\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const userRoleChanged = this.props.session.user.role !== nextProps.session.user.role\n\n    if (userRoleChanged) {\n      this.redirectIfNotAdmin(nextProps)\n    }\n  }\n\n  render() {\n    let isAdmin = this.props.session.user.role === 'admin'\n    let username = this.props.session.user.username\n    let pathname = this.props.routing.locationBeforeTransitions\n      ? this.props.routing.locationBeforeTransitions.pathname\n      : 'console'\n\n    const contentStyle = {\n      marginLeft: 320,\n      paddingTop: 60\n    }\n\n    return (\n      isAdmin\n        ? (\n          <DocContainer bodyClass=\"console\">\n            <ConsoleBranding isAdmin={isAdmin} username={username} onLogout={this.handleLogout} />\n            <Container isFluid={true}>\n              <ConsoleSidebar\n                menuMapping={menus}\n                currentPath={pathname}\n                />\n              <div style={contentStyle}>\n                {this.props.children}\n              </div>\n            </Container>\n          </DocContainer>\n        )\n        : (\n          <div style={{textAlign: 'center', margin: '20px 0'}}>ACCESS DENIED!</div>\n        )\n    )\n  }\n}\n\nexport default connect<{}, {}, {}>(\n  state => ({\n    notifications: state.components.notifications,\n    session: state.session,\n    routing: state.routing\n  }),\n  { sendNotification, userAuth, userLogout }\n)(Console)\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/containers/Console.tsx","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { sendNotification, hideNotification, closeConfirmModal, userAuth, closeModal } from '../store/actions'\nimport { Alerts } from '../elements/Alert'\nimport _ from 'lodash'\nimport { ConfirmModal } from '../elements/Modal'\nimport { ModalPlus } from '../elements/Modal'\n\ninterface Props {\n  notifications: any\n  hideNotification: any\n  errorMessage: any[]\n  sendNotification: typeof sendNotification\n  confirmModal: any\n  closeConfirmModal: any\n  userAuth: any\n  routing: any\n  session: any\n  modal: any\n  closeModal: any\n}\n\nclass Master extends Component<Props, {}> {\n\n  static fetchData({ store, userSession }) {\n    return store.dispatch(userAuth(userSession))\n  }\n\n  constructor(props) {\n    super(props)\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const hasNewErrorMsg = this.props.errorMessage.length !== nextProps.errorMessage.length\n    const routerChanged = nextProps.routing.locationBeforeTransitions.pathname !== this.props.routing.locationBeforeTransitions.pathname\n\n    if (hasNewErrorMsg) {\n      this.props.sendNotification(_.last(nextProps.errorMessage).toString(), 'error', 0)\n    }\n\n    if (routerChanged) {\n      // 返回顶部\n      window.document.body.scrollTop = 0\n    }\n  }\n\n  componentDidMount() {\n    this.props.userAuth()\n  }\n\n  render() {\n    const { confirmModal, closeConfirmModal, modal, closeModal } = this.props\n\n    return (\n      <div className=\"app-root\">\n        <ConfirmModal\n          open={confirmModal.open}\n          title={confirmModal.title}\n          onConfirm={confirmModal.onConfirm}\n          onRequestClose={closeConfirmModal}\n          width={500}\n          >\n          {confirmModal.content}\n        </ConfirmModal>\n        <ModalPlus\n          open={modal.open}\n          width={500}\n          onRequestClose={closeModal}\n          title={modal.title}\n          >\n          {modal.content}\n        </ModalPlus>\n        {\n          this.props.notifications.filter(noti => noti.visible).length > 0 && (\n            <Alerts\n              onRequestClose={this.props.hideNotification}\n              messages={this.props.notifications.map(noti => ({\n                content: noti.message || '发生错误！',\n                type: noti.type,\n                visible: noti.visible,\n                id: noti.id\n              }))}\n              />\n          )\n        }\n        { this.props.children }\n      </div>\n    )\n  }\n}\n\nexport default connect<{}, {}, Props>(\n  state => ({\n    notifications: state.components.notifications,\n    errorMessage: state.errorMessage,\n    confirmModal: state.components.confirmModal,\n    modal: state.components.modal,\n    routing: state.routing,\n    session: state.session,\n  }),\n  { sendNotification, hideNotification, closeConfirmModal, userAuth, closeModal }\n)(Master)\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/containers/Master.tsx","import React, { Component } from 'react'\nimport AppDoc from './AppDoc'\n\ninterface Props {\n  message: string\n}\n\nexport default class Page500 extends Component<Props, void> {\n\n  constructor(props) {\n    super(props)\n  }\n\n  componentDidMount() {\n  }\n\n  render() {\n    const { message } = this.props\n    // todo: use AppError\n    return (\n      <AppDoc\n        title=\"500 Server Error\"\n        appMarkup={(\n          <div className=\"page500\">\n            <h1>500</h1>\n            <p>{message}</p>\n          </div>\n        )}\n      />\n    )\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/containers/Page500.tsx","const menus = [\n  {\n    component: 'books',\n    displayName: '',\n    path: '/console/books',\n    subMenu: [\n      {\n        component: 'managebooks',\n        displayName: '书籍管理',\n        path: '/console/books'\n      },\n      // {\n      //   component: 'addbook',\n      //   displayName: '添加书籍',\n      //   path: '/console/books/new'\n      // },\n      {\n        component: 'addcollection',\n        displayName: '添加合集',\n        path: '/console/collections/new'\n      }\n    ]\n  },\n  {\n    component: 'users',\n    displayName: '',\n    path: '/console/users',\n    subMenu: [\n      {\n        component: 'manageusers',\n        displayName: '用户管理',\n        path: '/console/users'\n      }\n    ]\n  },\n  // {\n  //   component: 'database',\n  //   displayName: '',\n  //   path: '/console/db',\n  //   subMenu: []\n  // },\n  // {\n  //   component: 'statistics',\n  //   displayName: '',\n  //   path: '/console/statistics',\n  //   subMenu: []\n  // }\n]\n\nexport default menus\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/content/menus.ts","import _ from 'lodash'\nimport md5 from 'vendor/md5'\n\nexport function createCacheId(identifier: any) {\n  if (_.isEmpty(identifier)) {\n    throw new Error('缓存标识符不能为空！')\n  }\n  return md5(identifier.toString())\n}\n\nexport function getCache(key) {\n  if (typeof key !== 'string') {\n    throw new Error('Name should be string!')\n  }\n  let content = localStorage.getItem(key)\n  if (!content) {\n    return undefined\n  }\n\n  try {\n    content = JSON.parse(content)\n  } catch (error) {\n    throw error\n  }\n  return content\n}\n\nexport function setCache(key, content) {\n  if (typeof key !== 'string') {\n    throw new Error('Name should be string!')\n  }\n  if (typeof content !== 'object') {\n    throw new Error('Cache content type should be object!')\n  }\n\n  const save = () => {\n    localStorage.setItem(key, JSON.stringify(content))\n  }\n\n  try {\n    save()\n  } catch (error) {\n    if (error.name === 'QuotaExceededError') {\n      // TODO: 能否只清除最旧的\n      console.warn('本地缓存已满，旧的缓存将被清除！')\n      localStorage.clear()\n      save()\n    } else {\n      console.error(error)\n    }\n  }\n\n  return true\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/data/cache.ts","import React from 'react'\nimport Alert from './Alert'\nconst styles: any = require('./Alert.scss')\n\ntype TProps = {\n  children?: any\n  onRequestClose?: (id: string) => void\n  messages: {\n    content: string\n    visible: boolean\n    type: 'success' | 'error' | 'warning'\n    id: string\n  }[]\n}\n\nfunction Alerts(props: TProps) {\n  return (\n    <div className={styles.alerts}>\n      {\n        props.messages.map((msg, index) => (\n          <Alert\n            key={index}\n            type={msg.type}\n            message={msg.content}\n            visible={msg.visible}\n            onRequestClose={() => {\n              props.onRequestClose(msg.id)\n            }}\n          />\n        ))\n      }\n    </div>\n  )\n}\n\nexport default Alerts\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/elements/Alert/Alerts.tsx","import Alert from './Alert'\nimport Alerts from './Alerts'\nexport { Alerts, Alert }\nexport default Alert\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/elements/Alert/index.tsx","import React, { Component } from 'react'\nimport CSSModules from 'react-css-modules'\nimport classnames from 'classnames'\nimport _ from 'lodash'\nimport helpers from '../../helpers'\nconst styles = require('./_button.scss')\n\ninterface IProps {\n  className?: string\n  styleName?: any\n  size?: 'small' | 'medium' | 'large'\n  isFluid?: boolean\n  color?: 'red' | 'blue' | 'green' | 'orange' | 'white'\n  to?: string\n  onClick?: any\n  width?: number | string\n}\n\ninterface IState {\n  isMouseOver?: boolean\n}\n\n@CSSModules(styles, {\n  allowMultiple: true\n})\nclass Button extends Component<IProps, IState> {\n  constructor(props) {\n    super(props)\n    this.state = {\n      isMouseOver: false,\n    }\n  }\n\n  render() {\n    let { onClick, className, color, size, isFluid, width, to } = this.props\n    let style = {}\n\n    const styleName = classnames({\n      'btn': true,\n      'btn--hover': this.state.isMouseOver,\n      'btn--fluid': isFluid,\n      [`btn--${color}`]: Boolean(color),\n      [`btn--${size}`]: Boolean(size),\n    })\n    if (this.props.to) {\n      onClick = e => {\n        e.preventDefault()\n        helpers.redirect(to)\n      }\n    } else {\n      onClick = e => {\n        e.preventDefault()\n        if (this.props.onClick) {\n          this.props.onClick(e)\n        }\n      }\n    }\n\n    if (typeof width !== 'undefined') {\n      style = {\n        width\n      }\n    }\n\n    let props = _.omit(this.props, ['to', 'color', 'size', 'isFluid', 'width', 'styles'])\n    props = _.assign({}, props, {\n      className: className || '',\n      onClick,\n      style\n    })\n\n    return (\n      <button\n        {...props}\n        styleName={styleName}\n        onMouseOver={() => {\n          this.setState({\n            isMouseOver: true\n          })\n        }}\n        onMouseOut={() => {\n          this.setState({\n            isMouseOver: false\n          })\n        }}\n      >\n        {this.props.children}\n      </button>\n    )\n  }\n}\n\n(Button as any).defaultProps = {\n  color: 'blue'\n}\n\nexport default Button\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/elements/Button/Button.tsx","import React, { Component } from 'react'\n\nclass Container extends Component<any, any> {\n  render() {\n    let className = (this.props.isFluid ? 'container-fluid' : 'container') + (this.props.className ? ` ${this.props.className}` : '')\n\n    return (\n      <div className={className}>\n        {this.props.children}\n      </div>\n    )\n  }\n}\n\nexport default Container\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/elements/Container/Container.tsx","import React, { Component } from 'react'\nimport CSSModules from 'react-css-modules'\nimport isDescendant from '../../utils/dom/isDescendant'\nconst styles = require('./Dropdown.scss')\n\ninterface IProps {\n  title: string | JSX.Element\n  className?: string\n  styleName?: string\n  style?: 'blue' | 'dark'\n}\n\ninterface IState {\n  showMenu?: boolean\n}\n\n@CSSModules(styles, {\n  allowMultiple: true\n})\nclass Dropdown extends Component<IProps, IState> {\n\n  dropdown: any\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      showMenu: false\n    }\n    this.handleGlobalClick = this.handleGlobalClick.bind(this)\n  }\n\n  handleGlobalClick(e) {\n    // 检查点击的 dom 是否是 dropdown 的子元素\n    // 如果是那么就不做处理，而 toggleDropdown 会响应\n    // 解决了页面上同时用两个 dropdown 时，其中一个展开，点击另一个前者不合上的问题\n    if (!isDescendant(this.dropdown, e.target)) {\n      this.setState({\n        showMenu: false\n      })\n    } else {\n      // 如果使用了原生事件，尽量不要混合使用 synthetic 事件，react 的生产版本似乎会出现相关的 bug\n      this.setState({\n        showMenu: !this.state.showMenu\n      })\n    }\n  }\n\n  componentDidMount() {\n    window.addEventListener('click', this.handleGlobalClick)\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('click', this.handleGlobalClick)\n  }\n\n  render() {\n    const { className, style } = this.props\n\n    return (\n      <div ref={ref => { this.dropdown = ref } } styleName=\"dropdown\" className={className || ''}>\n        <div styleName=\"dropdown-toggle\">\n          <span>{this.props.title}</span>\n          <span styleName=\"dropdown-caret\"/>\n        </div>\n        {\n          this.state.showMenu && (\n            <div styleName={ style === 'dark' ? 'dropdown-menu--dark' : 'dropdown-menu'}>\n              <ul>\n                {this.props.children}\n              </ul>\n            </div>\n          )\n        }\n      </div>\n    )\n  }\n}\n\nexport default Dropdown\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/elements/Dropdown/Dropdown.tsx","import React from 'react'\nconst styles = require('./Dropdown.scss')\n\ntype TProps = {\n  children?: any\n}\n\nfunction DropdownItem(props: TProps) {\n  return (\n    <li>\n      {\n        typeof props.children === 'string'\n          ? (\n            <div className={styles['dropdown-item']}>{props.children}</div>\n          )\n          : React.cloneElement(props.children, {\n            className: styles['dropdown-item']\n          })\n      }\n    </li>\n  )\n}\n\nexport default DropdownItem\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/elements/Dropdown/DropdownItem.tsx","import React from 'react'\nconst styles = require('./Dropdown.scss')\n\ntype TProps = {\n}\n\nfunction DropdownItemSep(props: TProps) {\n  return (\n    <li className={styles['sep']}></li>\n  )\n}\n\nexport default DropdownItemSep\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/elements/Dropdown/DropdownItemSep.tsx","import React from 'react'\nimport ReactCSSTransitionGroup from 'react-addons-css-transition-group'\nconst styles = require('./Fade.scss')\n\nexport default props => {\n  return (\n    <ReactCSSTransitionGroup\n      component=\"div\"\n      transitionName={styles}\n      transitionEnterTimeout={300}\n      transitionLeaveTimeout={300}\n      >\n      {props.children}\n    </ReactCSSTransitionGroup>\n  )\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/elements/Fade/Fade.tsx","import React, { Component } from 'react'\nimport classnames from 'classnames'\nimport svgIcons from './svg-icons'\nimport CSSModules from 'react-css-modules'\nconst styles = require('./Icon.scss')\n\ninterface IProps {\n  name: string\n  onClick?: any\n  size?: number\n  className?: string\n  styleName?: string\n}\n\n@CSSModules(styles, {\n  allowMultiple: true\n})\nclass Icon extends Component<IProps, {}> {\n  constructor(props) {\n    super(props)\n  }\n\n  render() {\n    let { name, onClick, size } = this.props\n    let className = classnames('icon', `icon-${name}`, this.props.className)\n\n    if (typeof svgIcons[name] === 'undefined') {\n      console.error('Icon name (%s) not found! ', name)\n    }\n\n    size = size || 30\n\n    const svgWrapStyle = {\n      position: 'absolute',\n      top: '50%',\n      marginTop: - size / 2\n    }\n\n    return (\n      <span styleName=\"icon\" style={{minWidth: size, minHeight: size}} className={className} onClick={onClick}>\n        <div style={svgWrapStyle}>\n          <svg {...svgIcons[name].viewBox && { viewBox: svgIcons[name].viewBox }} width={size} height={size} styleName=\"svg-shape\">\n            <path d={svgIcons[name].path} />\n          </svg>\n        </div>\n      </span>\n    )\n  }\n}\n\nexport default Icon\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/elements/Icon/Icon.tsx","export default {\n  close: {\n    path: 'M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48z',\n    viewBox: '0 0 12 16'\n  },\n  star: {\n    path: 'M14 6l-4.9-.64L7 1 4.9 5.36 0 6l3.6 3.26L2.67 14 7 11.67 11.33 14l-.93-4.74z',\n  },\n  users: {\n    path: 'M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z',\n  },\n  folder: {\n    path: 'M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z',\n  },\n  database: {\n    path: 'M20.2 5.9l.8-.8C19.6 3.7 17.8 3 16 3s-3.6.7-5 2.1l.8.8C13 4.8 14.5 4.2 16 4.2s3 .6 4.2 1.7zm-.9.8c-.9-.9-2.1-1.4-3.3-1.4s-2.4.5-3.3 1.4l.8.8c.7-.7 1.6-1 2.5-1 .9 0 1.8.3 2.5 1l.8-.8zM19 13h-2V9h-2v4H5c-1.1 0-2 .9-2 2v4c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-4c0-1.1-.9-2-2-2zM8 18H6v-2h2v2zm3.5 0h-2v-2h2v2zm3.5 0h-2v-2h2v2z'\n  },\n  statistics: {\n    path: 'M21 2H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h7v2H8v2h8v-2h-2v-2h7c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H3V4h18v12z',\n  },\n  books: {\n    path: 'M20.54 5.23l-1.39-1.68C18.88 3.21 18.47 3 18 3H6c-.47 0-.88.21-1.16.55L3.46 5.23C3.17 5.57 3 6.02 3 6.5V19c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6.5c0-.48-.17-.93-.46-1.27zM12 17.5L6.5 12H10v-2h4v2h3.5L12 17.5zM5.12 5l.81-1h12l.94 1H5.12z',\n    // viewBox: '3 3 18 18'\n  },\n  back: {\n    // path: 'M732 832l-55 55l-505 -505l505 -505l55 54l-451 451z'\n    // path: 'M14 6l-4.9-.64L7 1 4.9 5.36 0 6l3.6 3.26L2.67 14 7 11.67 11.33 14l-.93-4.74z',\n    path: 'm 26,25 c -0.467574,0 -0.909434,0.16865 -1.25,0.4375 C 24.555279,25.591215 6.6130516,42.546285 6.46875,42.71875 6.1782332,43.06596 6,43.51187 6,44 6,44.51946 6.2065566,44.98818 6.53125,45.34375 6.6683992,45.493941 24.625,62.4375 24.625,62.4375 c 0.759842,0.725152 2.121842,0.700421 2.84375,-0.0625 0.721908,-0.76293 0.672244,-2.125099 -0.09375,-2.84375 L 13.03125,46 64,46 c 13.888871,0 25.660392,11.63955 26,26.03125 0.0035,0.140557 0,0.77485 0,0.96875 0,1.108 0.892,2 2,2 1.108,0 2,-0.892 2,-2 l 0,-1.0625 C 93.610208,55.4194 80.118529,42 64,42 L 13.03125,42 C 13.03125,42 27.362732,28.495959 27.5,28.34375 27.81971,27.98925 28,27.51497 28,27 28,25.89543 27.104569,25 26,25 z',\n    viewBox: '0 0 100 125'\n  },\n  preference: {\n    path: 'M 17.78125 8.96875 A 2.0002 2.0002 0 0 0 16 11 L 16 56.25 C 12.008188 57.168302 9 60.741406 9 65 C 9 69.259224 12.007427 72.863534 16 73.78125 L 16 89 A 2.0002 2.0002 0 1 0 20 89 L 20 73.78125 C 23.992573 72.863534 27 69.259224 27 65 C 27 60.741406 23.991812 57.168302 20 56.25 L 20 11 A 2.0002 2.0002 0 0 0 17.78125 8.96875 z M 49.78125 8.96875 A 2.0002 2.0002 0 0 0 48 11 L 48 26.25 C 44.008188 27.168305 41 30.741423 41 35 C 41 39.25912 44.007427 42.863511 48 43.78125 L 48 89 A 2.0002 2.0002 0 1 0 52 89 L 52 43.78125 C 55.992573 42.863511 59 39.25912 59 35 C 59 30.741423 55.991812 27.168305 52 26.25 L 52 11 A 2.0002 2.0002 0 0 0 49.78125 8.96875 z M 81.78125 8.96875 A 2.0002 2.0002 0 0 0 80 11 L 80 56.25 C 76.008188 57.168302 73 60.741406 73 65 C 73 69.259224 76.007427 72.863534 80 73.78125 L 80 89 A 2.0002 2.0002 0 1 0 84 89 L 84 73.78125 C 87.992573 72.863534 91 69.259224 91 65 C 91 60.741406 87.991812 57.168302 84 56.25 L 84 11 A 2.0002 2.0002 0 0 0 81.78125 8.96875 z M 50 30 C 52.785116 30 55 32.21488 55 35 C 55 37.78512 52.785116 40 50 40 C 47.214884 40 45 37.78512 45 35 C 45 32.21488 47.214884 30 50 30 z M 18 60 C 20.785116 60 23 62.2149 23 65 C 23 67.7852 20.785116 70 18 70 C 15.214884 70 13 67.7852 13 65 C 13 62.2149 15.214884 60 18 60 z M 82 60 C 84.785116 60 87 62.2149 87 65 C 87 67.7852 84.785116 70 82 70 C 79.214884 70 77 67.7852 77 65 C 77 62.2149 79.214884 60 82 60 z ',\n    viewBox: '0 0 100 125'\n  },\n  font: {\n    // path: 'M14 8.77v-1.6l-1.94-.64-.45-1.09.88-1.84-1.13-1.13-1.81.91-1.09-.45-.69-1.92h-1.6l-.63 1.94-1.11.45-1.84-.88-1.13 1.13.91 1.81-.45 1.09L0 7.23v1.59l1.94.64.45 1.09-.88 1.84 1.13 1.13 1.81-.91 1.09.45.69 1.92h1.59l.63-1.94 1.11-.45 1.84.88 1.13-1.13-.92-1.81.47-1.09L14 8.75v.02zM7 11c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3z'\n    path: 'M14 6l-4.9-.64L7 1 4.9 5.36 0 6l3.6 3.26L2.67 14 7 11.67 11.33 14l-.93-4.74z',\n  },\n  arrowRight: {\n    path: 'M-290.9,430.1l-0.7-0.7l8.2-8.6l-8.2-8.2l0.7-0.7l8.9,8.9L-290.9,430.1z',\n    viewBox: '-292 411.9 11 18'\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/elements/Icon/svg-icons.ts","import React, { Component } from 'react'\nimport CSSModules from 'react-css-modules'\nimport classnames from 'classnames'\nconst styles = require('./Input.scss')\n\nexport interface Props {\n  className?: string\n  placeholder?: string\n  onChange?: any\n  value?: string\n  type?: string\n  name?: string\n  error?: any\n  touched?: boolean\n}\n\n@CSSModules(styles, {\n  allowMultiple: true\n})\nclass Input extends Component<Props, any> {\n  constructor(props) {\n    super(props)\n  }\n\n  render() {\n    let props = Object.assign({}, this.props)\n    delete props.className\n    const { error, touched } = this.props\n\n    const showError = error && touched\n\n    return (\n      <div styleName={classnames({'input-wrap': !showError, 'input-wrap--error': showError})} className={this.props.className || ''}>\n        <input\n          styleName=\"input\"\n          placeholder={this.props.placeholder}\n          value={this.props.value}\n          onChange={e => {\n            this.props.onChange(e)\n          }}\n          type={this.props.type ? this.props.type : 'text'}\n          name={this.props.name ? this.props.name : null}\n        />\n        {\n          showError && (\n            <div styleName=\"error-msg\">{error}</div>\n          )\n        }\n      </div>\n    )\n  }\n}\n\nexport default Input\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/elements/Input/Input.tsx","import React, { Component } from 'react'\nimport Modal, { Props as IModalProps } from '../Modal'\nimport ModalFooter from './ModalFooter'\nimport CSSModules from 'react-css-modules'\nconst styles = require('./Modal.scss')\n\ninterface IProps extends IModalProps {\n  onConfirm: any\n  title: string\n}\n\ninterface IState {\n}\n\n@CSSModules(styles)\nclass Dialog extends Component<IProps, IState> {\n\n  constructor(props) {\n    super(props)\n  }\n\n  componentDidMount() {\n  }\n\n  render() {\n    const { onConfirm, onRequestClose, open } = this.props\n\n    return (\n      <Modal\n        open={open}\n        onRequestClose={onRequestClose}\n        width={this.props.width}\n      >\n        <div styleName=\"confirm-modal\">\n          {\n            this.props.title && (\n              <div styleName=\"modal-header\">\n                <h1 styleName=\"modal-title\">{this.props.title}</h1>\n              </div>\n            )\n          }\n          <div styleName=\"modal-content\">\n            {this.props.children}\n          </div>\n          <ModalFooter\n            onConfirm={onConfirm}\n            onCancel={onRequestClose}\n          />\n        </div>\n      </Modal>\n    )\n  }\n}\n\nexport default Dialog\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/elements/Modal/ConfirmModal.tsx","import React, { Component } from 'react'\nimport Modal from './Modal'\nimport styles from './Modal.scss'\n\ninterface Props {\n  title?: string\n  open: boolean\n  onRequestClose: () => void\n  width?: number\n  actions?: JSX.Element[]\n}\n\nclass ModalPlus extends Component<Props, void> {\n\n  render() {\n    const { title, open, onRequestClose, width, actions } = this.props\n\n    return (\n      <Modal\n        open={open}\n        onRequestClose={onRequestClose}\n        width={width || 600}\n        >\n        <div className={styles['modal-plus']}>\n          {\n            title && (\n              <div className={styles['modal-header']}>\n                <h1 className={styles['modal-title']}>{title}</h1>\n              </div>\n            )\n          }\n          <div className={styles['modal-body']}>\n            {\n              this.props.children\n            }\n          </div>\n          {\n            actions && (\n              actions.map((action, index) => {\n                return React.cloneElement(action, {\n                  key: index\n                })\n              })\n            )\n          }\n        </div>\n      </Modal>\n    )\n  }\n}\n\nexport default ModalPlus\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/elements/Modal/ModalPlus.tsx","import React, { Component } from 'react'\nimport Icon from '../Icon'\nimport classnames from 'classnames'\nimport CSSModules from 'react-css-modules'\nimport isDescendant from '../../utils/dom/isDescendant'\nimport _ from 'lodash'\nconst styles = require('./SelectizeInput.scss')\n\ntype TypeOption = {\n  value: string\n  name: string\n  disabled?: boolean\n  additional?: any\n}\n\ntype TypeValue = {\n  value: string\n  name: string\n}\n\ninterface IProps {\n  className?: string\n  placeholder?: string\n  label?: string\n  stayFocused?: boolean // default true\n  omitSelectedValuesFromOptions?: boolean\n\n  value: string\n  onInputChange: (newValue: string) => void\n\n  // 使用 value 而不是 values 作为输入 \n  useValue?: boolean\n\n  options: Array<TypeOption>\n  onOptionsChange?: (newValues: Array<TypeOption>) => void\n\n  values: Array<TypeValue>\n  onValuesChange?: (newValues: Array<TypeValue>) => void\n\n  // 额外功能\n  onAddNewValue?: (newValue: string) => void\n  onOptionClick?: (selectedValue: TypeOption) => void\n}\n\ninterface IState {\n  focus?: boolean\n  showOptions?: boolean\n  value?: string\n  expendedOptionIndex?: number\n}\n\n@CSSModules(styles, {\n  allowMultiple: true\n})\nclass SelectizeInput extends Component<IProps, IState> {\n\n  input: HTMLInputElement\n  inputWrap: HTMLDivElement\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      showOptions: false,\n      focus: false,\n      value: '',\n      expendedOptionIndex: 0\n    }\n    this.handleOutsideClick = this.handleOutsideClick.bind(this)\n    this.focusInput = this.focusInput.bind(this)\n    this.handleInputChange = this.handleInputChange.bind(this)\n  }\n\n  addValue(newValue) {\n    if (!this.props.useValue) {\n      this.props.onValuesChange(this.props.values.concat(newValue))\n      if (this.props.onOptionsChange) {\n        this.props.onOptionsChange(this.props.options.map(option => (option.value === newValue.value\n          ? Object.assign({}, option, { disabled: true })\n          : option)))\n      }\n\n      // React setState 是异步的，如果都是用 state 管理则会出现同时调用 setState 的情况，从而造成问题\n      setTimeout(() => {\n        this.clearInputValue()\n      }, 1)\n\n      if (typeof this.props.stayFocused === 'undefined' || this.props.stayFocused !== false) {\n        this.focusInput()\n      }\n      this.hideOptions()\n    } else {\n      this.props.onInputChange(newValue.name)\n      this.hideOptions()\n    }\n  }\n\n  showOptions() {\n    this.setState({\n      showOptions: true\n    })\n  }\n\n  hideOptions() {\n    this.setState({\n      showOptions: false\n    })\n  }\n\n  removeValue(index) {\n    let newValues = []\n    let removedValue\n\n    if (index === -1) {\n      newValues = this.props.values.slice(0, this.props.values.length - 1)\n      removedValue = this.props.values[this.props.values.length - 1].value\n    } else {\n      newValues = this.props.values\n        .filter((v, i) => {\n          removedValue = v.value\n          return i !== index\n        })\n    }\n\n    if (this.props.onOptionsChange) {\n      this.props.onOptionsChange(this.props.options.map(option => (option.value === removedValue\n        ? Object.assign({}, option, { disabled: false })\n        : option)))\n    }\n\n    this.props.onValuesChange(newValues)\n  }\n\n  clearInputValue() {\n    this.props.onInputChange('')\n  }\n\n  handleKeyPress(e) {\n    if (e.keyCode === 8 && !this.props.value && this.props.values.length !== 0) {\n      this.removeValue(-1)\n    }\n  }\n\n  handleInputChange(e) {\n    this.props.onInputChange(e.target.value)\n    if ((this.props.options || []).length !== 0) {\n      this.showOptions()\n    }\n  }\n\n  focusInput() {\n    this.input.focus()\n  }\n\n  handleOutsideClick(e) {\n    if (isDescendant(this.inputWrap, e.target) || this.inputWrap === e.target) {\n      this.focusInput()\n      this.showOptions()\n    } else {\n      this.hideOptions()\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const optionsLoaded = (nextProps.options || []).length !== 0 && (this.props.options || []).length === 0\n    if (optionsLoaded && this.state.focus) {\n      this.showOptions()\n    }\n  }\n\n  componentDidMount() {\n    window.addEventListener('click', this.handleOutsideClick)\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('click', this.handleOutsideClick)\n  }\n\n  render() {\n    const { label, values, onAddNewValue, omitSelectedValuesFromOptions } = this.props\n\n    let value = this.props.value || ''\n    let options = this.props.options || []\n\n    let inputWidth = values.length > 0 ? (value.length === 0 ? 16 : value.length * 16) : '100%'\n    let placeholder = values.length > 0 ? '' : this.props.placeholder\n\n    let filteredOptions = options\n      .filter(option => {\n        if (omitSelectedValuesFromOptions) {\n          const valueOfValues = _.map(values, 'value')\n          return valueOfValues.indexOf(option.value) === -1\n        }\n\n        return true\n      })\n\n    const selectizeInputStyleName = classnames({\n      'selectize-input': true,\n      'selectize-input--focus': this.state.focus,\n      'selectize-input--empty': values.length === 0\n    })\n\n    return (\n      <div styleName=\"selectize-wrap\" className={this.props.className || ''}>\n        {\n          label ? (\n            <label className=\"form-label\">{label}</label>\n          ) : null\n        }\n        <div\n          styleName={selectizeInputStyleName}\n          ref={ref => { this.inputWrap = ref } }\n          >\n          {\n            values.map((v, index) => {\n              return (\n                <span key={index} styleName=\"selectize-tag\">\n                  {v.name}\n                  <Icon\n                    styleName=\"icon-remove\"\n                    size={20}\n                    name=\"close\"\n                    onClick={e => {\n                      this.removeValue(index)\n                    } }\n                    />\n                </span>\n              )\n            })\n          }\n          <input\n            style={{ width: inputWidth }}\n            ref={ref => { this.input = ref } }\n            value={value}\n            placeholder={placeholder}\n            onBlur={e => {\n              this.setState({ focus: false })\n            } }\n            onFocus={e => {\n              this.setState({ focus: true })\n            } }\n            onChange={this.handleInputChange}\n            onKeyDown={e => {\n              this.handleKeyPress(e)\n            } }\n            />\n        </div>\n        {\n          this.state.showOptions && (filteredOptions.length !== 0 || onAddNewValue) ? (\n            <ul styleName=\"query-results\">\n              {\n                filteredOptions\n                  .map((option, index) => {\n                    if (option.disabled) {\n                      return <li key={index} className=\"disabled\">{option.name}</li>\n                    }\n                    return (\n                      <li\n                        key={index}\n                        onClick={e => {\n                          this.addValue(option)\n                          if (this.props.onOptionClick) {\n                            this.props.onOptionClick(option)\n                          }\n                        } }\n                        >\n                        <span>{option.name}</span>\n                      </li>\n                    )\n                  })\n              }\n              {\n                onAddNewValue ? (\n                  <li\n                    onClick={e => {\n                      onAddNewValue(this.props.value)\n                    } }\n                    className=\"add\">添加 <strong>{this.props.value}</strong></li>\n                ) : null\n              }\n            </ul>\n          ) : null\n        }\n      </div>\n    )\n  }\n}\n\nSelectizeInput['defaultProps'] = {\n  omitSelectedValuesFromOptions: true\n}\n\nexport default SelectizeInput\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/elements/SelectizeInput/SelectizeInput.tsx","import SelectizeInput from './SelectizeInput'\nexport default SelectizeInput\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/elements/SelectizeInput/index.ts","import React, { Component } from 'react'\nimport { Props as InputProps } from '../Input/Input'\nimport CSSModules from 'react-css-modules'\nconst styles = require('./Textarea.scss')\n\nexport interface Props extends InputProps {\n}\n\n@CSSModules(styles, {\n  allowMultiple: true\n})\nclass Textarea extends Component<Props, any> {\n  constructor(props) {\n    super(props)\n  }\n\n  render() {\n    return (\n      <div styleName=\"textarea-wrap\" className={this.props.className || ''}>\n        <textarea\n          placeholder={this.props.placeholder}\n          value={this.props.value}\n          onChange={e => {\n            this.props.onChange(e)\n          }}\n          styleName=\"textarea\"\n          type={this.props.type ? this.props.type : 'text'}\n          name={this.props.name ? this.props.name : null}\n        />\n      </div>\n    )\n  }\n}\n\nexport default Textarea\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/elements/Textarea/Textarea.tsx","import Textarea from './Textarea'\nexport default Textarea\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/elements/Textarea/index.ts","import appConfig from '../../app.config'\n\nexport default function getApiRoot() {\n  // const host = typeof window !== 'undefined'\n  //   ? window.location.origin\n  //   : 'http://localhost:3000'\n\n  const host = 'http://localhost:4001'\n\n  return `${host}/${appConfig.api.prefix}`\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/helpers/getApiRoot.ts","export default function isServerEnv() {\n  return typeof window === 'undefined'\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/helpers/isServerEnv.ts","import _ from 'lodash'\n\n// 检查 store 里面的 routing 是否变化\nexport const onRoutingChange = fn => (nextProps, currentProps) => {\n  if (!currentProps.routing) {\n    console.error('routing 需要现在组件 props 里面声明！')\n    return false\n  }\n\n  const hasPathParamChanged = !_.isEqual(nextProps.routing, currentProps.routing)\n\n  if (hasPathParamChanged) {\n    fn(nextProps.routing)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/helpers/lifecircle.ts","export default function print(...args) {\n  if (process.env.NODE_ENV !== 'production') {\n    const style = 'color: blue;'\n    const mergedArgs = [args.join(' ')]\n    let modArgs = mergedArgs.map((arg, index) => {\n      if (index === 0) {\n        return `%c [DEV] ${arg}`\n      }\n    })\n\n    modArgs = modArgs.concat(style)\n    console.trace.apply(null, modArgs)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/helpers/print.ts","import isServerRoutingEnabled from './isServerRoutingEnabled'\nimport { hashHistory, browserHistory } from 'react-router'\n\nexport default function redirect(url: string) {\n  if (isServerRoutingEnabled()) {\n    browserHistory.push(url)\n  } else {\n    hashHistory.push(url)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/helpers/redirect.ts","module.exports = {\n  getComponent(nextState, fn) {\n    require.ensure([], function (require) {\n      fn(null, require('./AddBook').default)\n    })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/routes/AddBook/index.ts","module.exports = {\n  getComponent(nextState, fn) {\n    require.ensure([], function (require) {\n      fn(null, (require('./AddCollection') as any).default)\n    })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/routes/AddCollection/index.ts","module.exports = {\n  getComponent(nextState, fn) {\n    require.ensure([], function (require) {\n      fn(null, (require('./AppHome') as any).default)\n    })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/routes/AppHome/index.ts","module.exports = {\n  getComponent(nextState, fn) {\n    require.ensure([], function (require) {\n      fn(null, (require('./BookDetail') as any).default)\n    })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/routes/BookDetail/index.ts","module.exports = {\n  getComponent(nextState, fn) {\n    require.ensure([], function (require) {\n      fn(null, (require('./Browse') as any).default)\n    })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/routes/Browse/index.ts","module.exports = {\n  getComponent(nextState, fn) {\n    require.ensure([], function (require) {\n      fn(null, (require('./CollectionDetail') as any).default)\n    })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/routes/CollectionDetail/index.ts","module.exports = {\n  getComponent(nextState, fn) {\n    require.ensure([], function (require) {\n      fn(null, (require('./Collections') as any).default)\n    })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/routes/Collections/index.ts","module.exports = {\n  getComponent(nextState, fn) {\n    require.ensure([], function (require) {\n      fn(null, (require('./ManageBooks') as any).default)\n    })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/routes/ManageBooks/index.ts","module.exports = {\n  getComponent(nextState, fn) {\n    require.ensure([], function (require) {\n      fn(null, (require('./ManageUsers') as any).default)\n    })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/routes/ManageUsers/index.ts","module.exports = {\n  getComponent(nextState, fn) {\n    require.ensure([], function (require) {\n      fn(null, (require('./NoMatch') as any).default)\n    })\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/routes/NoMatch/index.ts","module.exports = {\n  getComponent(nextState, fn) {\n    require.ensure([], function (require) {\n      fn(null, (require('./Preference') as any).default)\n    })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/routes/Preference/index.ts","module.exports = {\n  getComponent(nextState, fn) {\n    require.ensure([], function (require) {\n      fn(null, (require('./Profile') as any).default)\n    })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/routes/Profile/index.ts","module.exports = {\n  getComponent(nextState, fn) {\n    require.ensure([], function (require) {\n      fn(null, (require('./Shelf') as any).default)\n    })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/routes/Shelf/index.ts","module.exports = {\n  getComponent(nextState, fn) {\n    require.ensure([], function (require) {\n      fn(null, (require('./Signin') as any).default)\n    })\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/routes/Signin/index.ts","module.exports = {\n  getComponent(nextState, fn) {\n    require.ensure([], function (require) {\n      fn(null, (require('./Signup') as any).default)\n    })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/routes/Signup/index.ts","module.exports = {\n  getComponent(nextState, fn) {\n    require.ensure([], function (require) {\n      fn(null, (require('./TestPlace') as any).default)\n    })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/routes/TestPlace/index.ts","module.exports = {\n  getComponent(nextState, fn) {\n    require.ensure([], function (require) {\n      fn(null, (require('./Viewer') as any).default)\n    })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/routes/Viewer/index.ts","import React from 'react'\nimport Master from '../containers/Master'\nimport App from '../containers/App'\nimport Console from '../containers/Console'\nimport { Route, IndexRedirect, IndexRoute } from 'react-router'\nimport api from '../services/api'\nimport { ROLES } from '../constants/common'\n\nconst createRoutes = (context = {}) => {\n  const { request, response } = context as any\n\n  const handleConsoleEnter = (nextState, replace, callback?) => {\n    if (request) {\n      // 服务端校验方式\n      const { context: { user: { role } } } = request\n      if (role !== ROLES.ADMIN) {\n        response.redirect('/')\n      }\n      callback()\n    } else {\n      // 客户端校验方式\n      try {\n        api.auth().then(res => {\n          if (res.json.role !== ROLES.ADMIN) {\n            replace('/')\n          }\n          callback()\n        })\n      } catch (error) {\n        alert('服务器异常，请稍后再试！')\n        console.error(error)\n      }\n    }\n  }\n\n  return (\n    <Route path=\"/\" component={Master}>\n      <Route path=\"viewer/book/:id\" {...require('./Viewer') } />\n      <Route path=\"test\" {...require('./TestPlace') } />\n      <Route component={App}>\n        <IndexRoute {...require('./AppHome') } />\n        <Route path=\"browse\" {...require('./Browse') } />\n        <Route path=\"book/:id\" {...require('./BookDetail') } />\n        <Route path=\"collections\" {...require('./Collections') } />\n        <Route path=\"collections/:id\" {...require('./CollectionDetail') } />\n        <Route path=\"signin\" {...require('./Signin') } />\n        <Route path=\"signup\" {...require('./Signup') } />\n        <Route path=\"user\">\n          <IndexRedirect to=\"/user/profile\" />\n          <Route path=\"shelf\" {...require('./Shelf') } />\n          <Route path=\"preference\" {...require('./Preference') } />\n          <Route path=\"profile\" {...require('./Profile') } />\n        </Route>\n      </Route>\n      <Route onEnter={handleConsoleEnter} path=\"console\" component={Console}>\n        <IndexRedirect to=\"/console/books\" />\n        <Route path=\"books\" {...require('./ManageBooks') } />\n        <Route path=\"users\" {...require('./ManageUsers') } />\n        <Route path=\"books/new\" {...require('./AddBook') } />\n        <Route path=\"collections/new\" {...require('./AddCollection') } />\n      </Route>\n      <Route path=\"*\" {...require('./NoMatch') } />\n    </Route>\n  )\n}\n\nexport default createRoutes\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/routes/createRoutes.tsx","import callApi from '../utils/callApi'\nimport helpers from '../../helpers'\nimport normalizeResponse from '../utils/normalizeResponse'\nimport schemas from '../schemas'\nimport utils from '../../utils'\nimport _ from 'lodash'\nimport { DOUBAN_API_ROOT } from '../../constants/common'\n\nconst API_ROOT = helpers.getApiRoot()\n\ninterface GeneralApiOptions {\n  q?: string\n  page?: number\n}\n\n/**\n * general helper functions\n */\nconst parseEndpointWithOptions = (endpoint, options) => {\n  if (typeof options === 'string') {\n    return options\n  } else {\n    const queryString = utils.parseUrlencoded(options)\n    return `${endpoint}?${queryString}`\n  }\n}\n\nexport function fetchNormalized(endpoint, schema, fetchOptions = {}) {\n  if (endpoint.indexOf('http://') !== -1) {\n    return normalizeResponse(callApi(endpoint, fetchOptions), schema)\n  }\n\n  return normalizeResponse(callApi(`${API_ROOT}/${endpoint}`, fetchOptions), schema)\n}\n\n\n/**\n * specific api services\n */\nexport const fetchBookProgress = id => {\n  return fetchNormalized(\n    `user/books/${id}/progress`,\n    schemas.BOOK_PROGRESS\n  )\n}\n\nexport const fetchBook = id => {\n  return fetchNormalized(\n    `books/${id}`,\n    schemas.BOOK\n  )\n}\n\nexport const fetchBookContent = id => {\n  return fetchNormalized(\n    `books/${id}/content`,\n    schemas.BOOK_CONTENT\n  )\n}\n\nexport interface FetchBooksOptions extends GeneralApiOptions {\n  withContent?: boolean\n}\nexport const fetchBooks = (options: FetchBooksOptions = {}) => {\n  const {withContent} = options\n  let apiOptions = !withContent\n    ? {\n      exclude: 'content'\n    }\n    : {}\n  apiOptions = _.assign({}, _.omit(options, ['withContent']), apiOptions)\n  return fetchNormalized(\n    parseEndpointWithOptions('books', apiOptions)\n    , schemas.BOOK_ARRAY\n  )\n}\n\nexport type FetchUsersOptions = GeneralApiOptions\nexport const fetchUsers = (options?: FetchUsersOptions) => {\n  return fetchNormalized(\n    parseEndpointWithOptions('users', options)\n    , schemas.USER_ARRAY\n  )\n}\n\n// external apis\nexport const fetchDoubanBooks = keyword => callApi(`${DOUBAN_API_ROOT}/book/search?count=10&q=${keyword}`, {\n  useJsonp: true\n})\n\n// auth\nexport type UserLoginOptions = {\n  login: string\n  password: string\n}\nexport const userLogin = (data: UserLoginOptions) => callApi(`${API_ROOT}/auth`, {\n  method: 'POST',\n  data\n})\n\nexport type UserSignupOptions = {\n  username: string\n  email: string\n  password: string\n}\nexport const userSignup = (data: UserSignupOptions) => callApi(`${API_ROOT}/users`, {\n  method: 'POST',\n  data\n})\n\nexport const auth = () => {\n  return callApi(`${API_ROOT}/auth`, {\n    method: 'GET'\n  })\n}\n\nexport const logout = () => {\n  return callApi(`${API_ROOT}/auth/revoke`, {\n    method: 'PUT'\n  })\n}\n\n// data posting\nexport interface AddCollectionData {\n  name: string\n  items: string\n  description: string\n}\nexport function addCollection(data: AddCollectionData) {\n  return callApi(`${API_ROOT}/collections`, { method: 'POST', data })\n}\n\nexport interface AddBookData {\n  title: string\n  authors?: string\n  description?: string\n  cover?: string\n}\nexport function addBook(data: AddBookData) {\n  return callApi(`${API_ROOT}/books`, { method: 'POST', data })\n}\n\nexport interface BookMeta {\n  title?: string\n  authors?: string\n  description?: string\n  cover?: string\n}\nexport function editBookMeta(bookId: string, data: BookMeta) {\n  return callApi(`${API_ROOT}/books/${bookId}`, { method: 'PUT', data })\n}\n\nexport interface AddAuthorData {\n  name: string\n  slug?: string\n  description?: string\n}\nexport function addAuthor(data: AddAuthorData) {\n  return callApi(`${API_ROOT}/authors`, { method: 'POST', data })\n}\n\nexport type SetProgressData = {\n  percentage: number\n}\nexport function setProgress(bookId, data: SetProgressData) {\n  callApi(`${API_ROOT}/user/books/${bookId}/progress`, { method: 'PUT', data })\n}\n\nexport function deleteBook(id) {\n  return callApi(`${API_ROOT}/books/${id}`, {\n    method: 'DELETE'\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/services/api/api.ts","export default function jsonp(fullUrl) {\n  if (fullUrl.indexOf('douban') !== -1) {\n    let id = new Date().valueOf()\n    let jsonpId = 'jsonp-' + id\n    let jsonpCallback = 'jsonpCallback' + id\n    let jsonpCallbackData = `__JSONP_DATA_${id}__`\n\n    window[jsonpCallback] = function (data) {\n      window[jsonpCallbackData] = data\n    }\n\n    let script = document.createElement('script')\n\n    script.setAttribute('src', `${fullUrl}&callback=${jsonpCallback}`)\n    script.setAttribute('id', jsonpId)\n    document.body.appendChild(script)\n\n    return new Promise(resolve => {\n      script.onload = function () {\n        document.body.removeChild(document.getElementById(jsonpId))\n\n        resolve({ json: window[jsonpCallbackData]})\n      }\n    })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/services/utils/jsonp.ts","import handleResponse from './handleResponse'\n\nexport default function normalizeResponse(resultPromise, schema) {\n  return resultPromise.then(\n    response => ({ response: handleResponse(response, schema) }),\n    error => ({ error })\n  )\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/services/utils/normalizeResponse.ts","import _ from 'lodash'\nimport utils from '../../utils'\nimport * as api from '../../services/api'\nimport schemas from '../../services/schemas'\nimport { CALL_API_OBJ } from '../middleware/api'\nimport { DOUBAN_API_ROOT } from '../../constants/common'\nimport { createActionEntity, action } from './utils'\nimport * as ActionTypes from '../../constants/actionTypes'\n\nexport const removeEntity = (name: string, id: string) =>\n  ({ type: ActionTypes.REMOVE_ENTITY, name, id })\n\nexport const book = createActionEntity(ActionTypes.BOOK)\nexport const loadBook = (id: string) => action(ActionTypes.LOAD_BOOK, { id })\n\nexport const bookContent = createActionEntity(ActionTypes.BOOK_CONTENT)\nexport const loadBookContent = (id: string) => action(ActionTypes.LOAD_BOOK_CONTENT, { id })\n\nexport const books = createActionEntity(ActionTypes.BOOKS)\nexport const loadBooks = (options?: api.FetchBooksOptions, key?: string) =>\n  action(ActionTypes.LOAD_BOOKS, { options, key })\n\nexport const users = createActionEntity(ActionTypes.USERS)\nexport const loadUsers = (options?: api.FetchUsersOptions) =>\n  action(ActionTypes.LOAD_USERS, { options })\n\nexport const logout = createActionEntity(ActionTypes.LOGOUT)\nexport const userLogout = () => action(ActionTypes.USER_LOGOUT)\n\nexport const progress = createActionEntity(ActionTypes.BOOK_PROGRESS)\nexport const loadBookProgress = (id: string) =>\n  action(ActionTypes.LOAD_BOOK_PROGRESS, { id })\n\n// define load actions handled in sagas\nexport const LOAD_ACTIONS = [ActionTypes.LOAD_BOOK, ActionTypes.LOAD_BOOK_CONTENT, ActionTypes.LOAD_BOOKS, ActionTypes.LOAD_USERS]\n\n\n/**\n * legacy call api actions\n */\nexport function fetchAuthors(options) {\n  const CALL_API: CALL_API_OBJ = {\n    types: [ActionTypes.AUTHORS.REQUEST, ActionTypes.AUTHORS.SUCCESS, ActionTypes.AUTHORS.FAILURE],\n    endpoint: `authors?${utils.parseUrlencoded(options)}`,\n    schema: schemas.AUTHOR_ARRAY,\n    pagination: {\n      name: 'authors',\n      q: options.q\n    }\n  }\n\n  return { CALL_API }\n}\n\nexport function fetchCollections(flowType: 'newest' | 'hot' = 'newest') {\n  return {\n    flowType,\n    CALL_API: {\n      types: [ActionTypes.COLLECTIONS.REQUEST, ActionTypes.COLLECTIONS.SUCCESS, ActionTypes.COLLECTIONS.FAILURE],\n      endpoint: `collections`,\n      schema: schemas.COLLECTION_ARRAY\n    }\n  }\n}\n\nexport function fetchCollection(collectionId) {\n  return {\n    collectionId,\n    CALL_API: {\n      types: [ActionTypes.COLLECTION.REQUEST, ActionTypes.COLLECTION.SUCCESS, ActionTypes.COLLECTION.FAILURE],\n      endpoint: `collections/${collectionId}`,\n      schema: schemas.COLLECTION\n    }\n  }\n}\n\nexport function searchDoubanBooks(q) {\n  const CALL_API: CALL_API_OBJ = {\n    types: [ActionTypes.DOUBAN_BOOKS.REQUEST, ActionTypes.DOUBAN_BOOKS.SUCCESS, ActionTypes.DOUBAN_BOOKS.FAILURE],\n    endpoint: `book/search?count=10&q=${q}`,\n    apiUrl: DOUBAN_API_ROOT,\n    schema: schemas.DOUBAN_BOOK_SEARCH_RESULTS,\n    options: { useJsonp: true },\n    pagination: {\n      name: 'doubanBooks',\n      q\n    }\n  }\n\n  return { q, CALL_API }\n}\n\nexport function fetchProfile() {\n  const CALL_API: CALL_API_OBJ = {\n    types: [ActionTypes.PROFILE.REQUEST, ActionTypes.PROFILE.SUCCESS, ActionTypes.PROFILE.FAILURE],\n    endpoint: `user/profile`,\n    schema: schemas.PROFILE\n  }\n  return { CALL_API }\n}\n\nexport function userAuth(userSession?): Object {\n  // 服务端渲染 session\n  if (userSession) {\n    return {\n      SERVER_STORE: {\n        body: {\n          response: userSession,\n          type: ActionTypes.AUTH.SUCCESS\n        }\n      }\n    }\n  }\n\n  return {\n    CALL_API: {\n      types: [ActionTypes.AUTH.REQUEST, ActionTypes.AUTH.SUCCESS, ActionTypes.AUTH.FAILURE],\n      endpoint: 'auth'\n    }\n  }\n}\n\nexport function fetchShelf() {\n  const CALL_API: CALL_API_OBJ = {\n    types: [ActionTypes.SHELF.REQUEST, ActionTypes.SHELF.SUCCESS, ActionTypes.SHELF.FAILURE],\n    endpoint: `user/books/shelf`,\n    schema: schemas.SHELF_BOOK_ARRAY,\n    pagination: {\n      name: 'bookShelves'\n    }\n  }\n  return { CALL_API }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/store/actions/api.ts","import * as ActionTypes from '../../constants/actionTypes'\n\nexport const sendNotification = (message: string, msgType: TNotification = 'success', t: number = 2000) => {\n  return (dispatch, getState) => {\n    const id = Math.random().toFixed(8).substr(2)\n\n    dispatch(showNotification(id, message, msgType))\n    if (t !== 0) {\n      setTimeout(() => {\n        dispatch(hideNotification(id))\n      }, t)\n    }\n  }\n}\n\nexport function showNotification(id: string, message: string, msgType: TNotification = 'success') {\n  return {\n    type: ActionTypes.NOTIFICATION.SHOW,\n    message,\n    msgType,\n    id\n  }\n}\nexport function hideNotification(id: string) {\n  return {\n    type: ActionTypes.NOTIFICATION.HIDE,\n    id\n  }\n}\n\n// confirm modal\ntype openConfirmModal = {\n  title?: string\n  content: string\n  onConfirm: () => void\n}\nexport function openConfirmModal(data: openConfirmModal) {\n  return {\n    type: ActionTypes.OPEN_CONFIRM_MODAL,\n    data\n  }\n}\nexport function closeConfirmModal() {\n  return {\n    type: ActionTypes.CLOSE_CONFIRM_MODAL\n  }\n}\n\n// modal\nexport type openModal = {\n  title: string\n  subTitle?: string\n  content?: JSX.Element\n}\nexport function openModal(data: openModal) {\n  return {\n    type: ActionTypes.MODAL.OPEN,\n    data\n  }\n}\nexport function closeModal() {\n  return {\n    type: ActionTypes.MODAL.CLOSE\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/store/actions/common.ts","export const loadSomething = () => {\n  return {\n    type: 'LOAD'\n  }\n}\n\nexport const saveSomething = () => {\n  return {\n    type: 'SAVE'\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/store/actions/test.ts","import * as selectors from '../selectors'\nimport * as ACTION_TYPES from '../../constants/actionTypes'\nimport helpers from '../../helpers'\n\n// viewer\nexport const initializeViewerConfig = (bookId: string, config: ViewerConfig = {}) =>\n  ({ bookId, config, type: ACTION_TYPES.VIEWER.INITIALIZE_CONFIG })\n\nexport const initializeViewer = (bookId: string) =>\n  ({ bookId, type: ACTION_TYPES.VIEWER.INITIALIZE })\n\nexport const configViewer = (bookId: string, payload) => ({\n  bookId,\n  payload,\n  type: ACTION_TYPES.VIEWER.CONFIG,\n})\n\n// book\nexport const calcBook = (bookId: string, wrap: HTMLElement) => ({\n  bookId,\n  wrap,\n  type: ACTION_TYPES.VIEWER.CALC_START,\n})\n\nexport const calcBookSuccess = (bookId: string, computed) => {\n  return {\n    bookId,\n    computed,\n    type: ACTION_TYPES.VIEWER.CALC_SUCCESS,\n  }\n}\n\nexport const calcBookFailure = (bookId: string, error: Error) => {\n  return {\n    bookId,\n    error,\n    type: ACTION_TYPES.VIEWER.CALC_FAILURE,\n  }\n}\n\nexport const initializeBookProgress = () =>\n  ({ type: ACTION_TYPES.VIEWER.BOOK_PROGRESS_INITIALIZE })\n\n// progress\nexport const updateBookProgress = (percentage: number) => (dispatch, getState) => {\n  helpers.print('Action updateBookProgress')\n  const state = getState()\n  const { bookId } = selectors.viewer.config(state)\n  const computed = selectors.viewer.computed(bookId)(state)\n  const pageNo = Math.floor(computed.length * percentage) + 1\n\n  return dispatch({\n    id: bookId,\n    percentage,\n    pageNo,\n    type: ACTION_TYPES.VIEWER.BOOK_PROGRESS_UPDATE,\n  })\n}\n\nexport const destroyBookProgress = () => {\n  return {\n    type: ACTION_TYPES.VIEWER.BOOK_PROGRESS_DESTROY,\n  }\n}\n\nexport const viewerJumpTo = (percentage: number) =>\n  ({ type: ACTION_TYPES.VIEWER.JUMP, percentage })\n\n// sub components\nexport const toggleViewerPanel = (reset?: boolean) =>\n  ({ type: ACTION_TYPES.VIEWER.PANEL_TOGGLE, reset })\n\nexport const toggleViewerPreference = (reset?: boolean) =>\n  ({ type: ACTION_TYPES.VIEWER.PREFERENCE_TOGGLE, reset })\n\nexport const toggleViewerNavigation = (reset?: boolean) =>\n  ({ type: ACTION_TYPES.VIEWER.NAVIGATION_TOGGLE, reset })\n\n// config\nexport const changeViewerFontSize = (fontSizeInPixel: number) =>\n  ({ type: ACTION_TYPES.VIEWER.FONT_CHANGE, fontSize: fontSizeInPixel })\n\nexport const changeViewerTheme = (themeName: string) =>\n  ({ type: ACTION_TYPES.VIEWER.THEME_CHANGE, theme: themeName })\n\nexport const toggleViewerScrollMode = (reset?: boolean) =>\n  ({ type: ACTION_TYPES.VIEWER.SCROLL_MODE_TOGGLE, reset })\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/store/actions/viewer.ts","import { createStore, applyMiddleware } from 'redux'\nimport thunk from 'redux-thunk'\nimport rootReducer from './reducers'\nimport api from './middleware/api'\nimport modifyResponse from './middleware/modifyResponse'\nimport handleServerStore from './middleware/handleServerStore'\nimport handleInitialState from './handleInitialState'\nimport logActionTypes from './middleware/logActionTypes'\nimport createLogger from 'redux-logger'\nimport middleware from './middleware'\nimport createSagaMiddleware, { END } from 'redux-saga'\nimport helpers from '../helpers'\n\nconst sagaMiddleware = createSagaMiddleware()\n\nconst SERVER_MIDDLEWARES_DEV = [handleServerStore, sagaMiddleware, api, middleware.cache, modifyResponse, thunk, logActionTypes]\nconst SERVER_MIDDLEWARES_PROD = [handleServerStore, sagaMiddleware, api, middleware.cache, modifyResponse, thunk]\nconst MIDDLEWARES_DEV = [sagaMiddleware, api, middleware.cache, modifyResponse, thunk, createLogger({ collapsed: true })]\nconst MIDDLEWARES_PROD = [sagaMiddleware, api, middleware.cache, modifyResponse, thunk]\n\nexport default function configureStore() {\n  let middlewares\n\n  if (helpers.isServerEnv()) {\n    // server side\n    if (process.env.NODE_ENV === 'production') {\n      middlewares = SERVER_MIDDLEWARES_PROD\n    } else {\n      middlewares = SERVER_MIDDLEWARES_DEV\n    }\n  } else {\n    // client side\n    if (process.env.NODE_ENV === 'production') {\n      middlewares = MIDDLEWARES_PROD\n    } else {\n      middlewares = MIDDLEWARES_DEV\n    }\n  }\n\n  const store = createStore(\n    rootReducer,\n    handleInitialState(),\n    applyMiddleware.apply(null, middlewares)\n  )\n\n  if (module.hot) {\n    module.hot.accept('./reducers', () => {\n      console.info('hot updating reducers')\n      const nextRootReducer = require('./reducers').default\n      store.replaceReducer(nextRootReducer)\n    })\n  }\n\n  return {\n    ...store,\n    ...{\n      runSaga: sagaMiddleware.run,\n      close: () => store.dispatch(END)\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/store/configureStore.ts","import { INITIAL_STATE } from '../constants/common'\n\nexport default function handleInitialState() {\n  if (typeof window === 'undefined') {\n    return {}\n  }\n\n  return window[INITIAL_STATE] || {}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/store/handleInitialState.ts","import _ from 'lodash'\n// import md5 from '../../../../vendor_modules/md5'\n\nconst SUCCESS = 'SUCCESS'\n\nconst isSuccessAction = action => {\n  // console.log(action)\n  // return true\n  // return _.last(action.type.split('/')) === SUCCESS\n}\n\nconst cacheResponseAction = action => {\n  // console.log('cached')\n}\n\nexport default store => next => action => {\n  // if (action.cacheKey) {\n\n  //   // function* gen() {\n  //   //   yield 1\n  //   // }\n\n  //   // const fuck = gen()\n  //   // console.log(fuck.next())\n\n  //   next({\n  //     type: 'cache'\n  //   })\n  //   // return false\n  // }\n\n  // if (action.cacheKey && isSuccessAction(action)) {\n  //   cacheResponseAction(action)\n  //   next(action)\n  //   return false\n  // }\n\n  return next(action)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/store/middleware/cache.ts","import api from './api'\nimport modifyResponse from './modifyResponse'\nimport handleServerStore from './handleServerStore'\nimport logActionTypes from './logActionTypes'\nimport cache from './cache'\n\nexport default {\n  api,\n  modifyResponse,\n  handleServerStore,\n  logActionTypes,\n  cache\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/store/middleware/index.ts","import { combineReducers } from 'redux'\nimport _ from 'lodash'\nimport * as ACTION_TYPES from '../../../constants/actionTypes'\nimport viewer from './viewer'\n\nfunction notifications(state = [], action) {\n  if (action.type === ACTION_TYPES.NOTIFICATION.HIDE) {\n    return state.map(n => n.id === action.id ? Object.assign({}, n, { visible: false }) : n)\n  }\n\n  if (action.type === ACTION_TYPES.NOTIFICATION.SHOW) {\n    return [...state, {\n      visible: true,\n      message: action.message,\n      type: action.msgType,\n      id: action.id\n    }]\n  }\n\n  return state\n}\n\nfunction confirmModal(state = {}, action) {\n  if (action.type === ACTION_TYPES.OPEN_CONFIRM_MODAL) {\n    return Object.assign({}, state, { open: true }, action.data)\n  }\n\n  if (action.type === ACTION_TYPES.CLOSE_CONFIRM_MODAL) {\n    return {\n      open: false\n    }\n  }\n\n  return state\n}\n\nfunction modal(state = {}, action) {\n  if (action.type === ACTION_TYPES.MODAL.OPEN) {\n    return Object.assign({}, state, { open: true }, action.data)\n  }\n\n  if (action.type === ACTION_TYPES.MODAL.CLOSE) {\n    return {\n      open: false\n    }\n  }\n\n  return state\n}\n\nconst components = combineReducers({\n  notifications,\n  confirmModal,\n  modal,\n  viewer\n})\n\nexport default components\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/store/reducers/components/index.ts","import { combineReducers } from 'redux'\nimport _ from 'lodash'\nimport * as ACTION_TYPES from '../../../constants/actionTypes'\nimport * as CONSTANTS from '../../../constants'\n\nconst getFlag = (reset, currentFlag) => {\n  if (typeof reset === 'undefined') {\n    return !currentFlag\n  }\n\n  return reset\n}\n\nfunction contents(state = {}, action) {\n  switch (action.type) {\n    case ACTION_TYPES.VIEWER.CALC_SUCCESS:\n      return _.merge({}, state, {\n        [action.bookId]: {\n          computed: action.computed\n        }\n      })\n\n    default:\n      return state\n  }\n}\n\nfunction config(state = { theme: CONSTANTS.VIEWER_DEFS.THEMES.WHITE, isScrollMode: true }, action): any {\n  switch (action.type) {\n    case ACTION_TYPES.VIEWER.SCROLL_MODE_TOGGLE:\n      const { reset } = action\n\n      return _.merge({}, state, {\n        isScrollMode: getFlag(reset, state.isScrollMode)\n      })\n\n    case ACTION_TYPES.VIEWER.THEME_CHANGE:\n      return _.merge({}, state, {\n        theme: action.theme\n      })\n\n    case ACTION_TYPES.VIEWER.FONT_CHANGE:\n      return _.merge({}, state, {\n        fontSize: action.fontSize\n      })\n\n    case ACTION_TYPES.VIEWER.CONFIG:\n      return _.merge({}, state, {\n        bookId: action.bookId\n      }, action.payload)\n\n    default:\n      return state\n  }\n}\n\nfunction progress(state = {}, action): any {\n  switch (action.type) {\n    case ACTION_TYPES.VIEWER.BOOK_PROGRESS_UPDATE:\n      return _.merge({}, state, {\n        [action.id]: {\n          isFetching: false,\n          percentage: action.percentage,\n          pageNo: action.pageNo\n        }\n      })\n\n    case ACTION_TYPES.VIEWER.BOOK_PROGRESS_DESTROY:\n      return _.assign({}, state, {\n        [action.id]: {\n          isFetching: false\n        }\n      })\n\n    default:\n      return state\n  }\n}\n\nconst panel = (state = { show: false }, action) => {\n  switch (action.type) {\n    case ACTION_TYPES.VIEWER.PANEL_TOGGLE:\n      const { reset } = action\n\n      const a = getFlag(reset, state.show)\n\n      return {\n        show: a\n      }\n\n    default:\n      return state\n  }\n}\n\nconst preference = (state = { show: false }, action) => {\n  switch (action.type) {\n    case ACTION_TYPES.VIEWER.PREFERENCE_TOGGLE:\n      const { reset } = action\n\n      return {\n        show: getFlag(reset, state.show)\n      }\n\n    default:\n      return state\n  }\n}\n\nconst navigation = (state = { show: false }, action) => {\n  switch (action.type) {\n    case ACTION_TYPES.VIEWER.NAVIGATION_TOGGLE:\n      const { reset } = action\n\n      return {\n        show: getFlag(reset, state.show)\n      }\n\n    default:\n      return state\n  }\n}\n\nconst components = combineReducers({\n  panel,\n  preference,\n  navigation\n})\n\nexport default combineReducers({\n  config,\n  contents,\n  progress,\n  components\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/store/reducers/components/viewer.ts","import _ from 'lodash'\nimport { combineReducers } from 'redux'\nimport { routerReducer as routing } from 'react-router-redux'\nimport components from './components'\nimport pagination from './pagination'\nimport { reducer as form } from 'better-redux-form'\nimport * as ActionTypes from '../../constants/actionTypes'\n\nfunction errorMessage(state = [], action) {\n  const { error } = action\n\n  if (error) {\n    return [...state, action.error.message || '发生未知错误！']\n  }\n\n  return state\n}\n\nexport function entities(state = {}, action) {\n  if (action.response && action.response.entities) {\n    return _.merge({}, state, action.response.entities)\n  }\n\n  if (action.type === ActionTypes.REMOVE_ENTITY) {\n    const {name, id} = action\n    return _.assign({}, state, {\n      [name]: _.omit(state[name], [id])\n    })\n  }\n\n  return state\n}\n\nconst DEFAULT_VISTOR_STATE = { user: { role: 'visitor' }, isFetching: false, determined: false }\nexport function session(state = DEFAULT_VISTOR_STATE, action) {\n  switch (action.type) {\n    case ActionTypes.AUTH.REQUEST:\n      return Object.assign({}, state, {\n        isFetching: true\n      })\n\n    case ActionTypes.AUTH.SUCCESS:\n      return Object.assign({}, state, {\n        isFetching: false,\n        determined: true,\n        user: action.response\n      })\n\n    case ActionTypes.AUTH.FAILURE:\n      return Object.assign({}, state, {\n        isFetching: false,\n        determined: true\n      })\n\n    case ActionTypes.LOGOUT.SUCCESS:\n      return Object.assign({}, DEFAULT_VISTOR_STATE, {\n        determined: true\n      })\n\n    default:\n      return state\n  }\n}\n\nconst rootReducer = combineReducers({\n  components,\n  entities,\n  errorMessage,\n  session,\n  routing,\n  form,\n  pagination\n})\n\nexport default rootReducer\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/store/reducers/index.ts","import _ from 'lodash'\n\nexport const DEFAULT_PAGINATION_STATE = {\n  isFetching: false,\n  pages: {},\n  ids: [],\n  pageCount: 0,\n}\n\nexport function computePaginationState(state, action) {\n  const currentPage = action.response._next\n    ? action.response._next.page - 1\n    : (action.response._last && action.response._last.page || 1)\n\n  const pages = _.assign({}, {\n    [currentPage]: action.response.result\n  })\n\n  return _.assign({}, state, {\n    isFetching: false,\n    pages,\n    ids: _.union(state.ids, action.response.result),\n    // 如果不使用 null 在外层的 merge 会忽略 undefined 从而导致一些边缘问题\n    next: action.response._next || null,\n    last: action.response._last || null,\n    pageCount: state.pageCount + 1\n  })\n}\n\nexport default function paginate({ types, mapActionToKey }) {\n  if (!Array.isArray(types) || types.length !== 3) {\n    throw new Error('Expected types to be an array of three elements.')\n  }\n  if (!types.every(t => typeof t === 'string')) {\n    throw new Error('Expected types to be strings.')\n  }\n  if (typeof mapActionToKey !== 'function') {\n    throw new Error('Expected mapActionToKey to be a function.')\n  }\n\n  const [requestType, successType, failureType] = types\n\n  function updatePagination(state = DEFAULT_PAGINATION_STATE, action) {\n    switch (action.type) {\n      case requestType:\n        return _.assign({}, state, {\n          isFetching: true\n        })\n      case successType:\n        return computePaginationState(state, action)\n      case failureType:\n        return _.assign({}, state, {\n          isFetching: false\n        })\n      default:\n        return state\n    }\n  }\n\n  return function updatePaginationByKey(state = {}, action) {\n\n    switch (action.type) {\n      case requestType:\n      case successType:\n      case failureType:\n        const key = mapActionToKey(action)\n        if (typeof key !== 'string') {\n          throw new Error('Expected key to be a string.')\n        }\n        return _.merge({}, state, {\n          [key]: updatePagination(state[key], action)\n        })\n      default:\n        return state\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/store/reducers/paginate.ts","import paginate from './paginate'\nimport { combineReducers } from 'redux'\nimport * as ActionTypes from '../../constants/actionTypes'\nimport _ from 'lodash'\nimport { computePaginationState, DEFAULT_PAGINATION_STATE } from './paginate'\nimport { Pagination } from '../middleware/api'\n\nconst DEFAULT_KEY = 'default'\nconst SEARCH_KEY = 'search'\n\nconst parseTypes = actionTypes => {\n  return [\n    actionTypes.REQUEST,\n    actionTypes.SUCCESS,\n    actionTypes.FAILURE,\n  ]\n}\n\nconst generalMapActionToKey = action => {\n  const {options, key} = action\n  const {q} = options || {} as any\n  if (key) {\n    return key\n  }\n  if (q) {\n    return SEARCH_KEY\n  }\n  return DEFAULT_KEY\n}\n\nfunction pagination(state: any = {}, action) {\n  const combinedReducer = combineReducers({\n    books: paginate({\n      mapActionToKey: generalMapActionToKey,\n      types: parseTypes(ActionTypes.BOOKS)\n    }),\n    users: paginate({\n      mapActionToKey: generalMapActionToKey,\n      types: parseTypes(ActionTypes.USERS)\n    }),\n    authors: () => (state.authors || {}),\n    doubanBooks: () => (state.doubanBooks || {}),\n    bookShelves: () => (state.bookShelves || {}),\n  })\n\n  return combinedReducer(state, action)\n}\n\n// legacy pagination support\nconst updatePagination = (state = DEFAULT_PAGINATION_STATE, action, merge) => {\n  if (!action.response) {\n    return Object.assign({}, state, {\n      isFetching: true\n    })\n  } else {\n    return computePaginationState(state, action)\n  }\n}\n\nfunction legacyPagination(state = {}, action) {\n  if (action.pagination) {\n    const { name, q, key, merge } = action.pagination as Pagination\n    const qKey = q ? SEARCH_KEY : null\n    const finalKey = qKey || key || DEFAULT_KEY\n\n    const originalState = (state[name] && state[name][finalKey]) || undefined\n\n    return Object.assign({}, state, {\n      [name]: {\n        [finalKey]: updatePagination(originalState, action, merge)\n      }\n    })\n  }\n\n  return state\n}\n\n\nexport default function combined(state, action) {\n  return pagination(legacyPagination(state, action), action)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/store/reducers/pagination.ts","import { take, put, call, fork, select, apply } from 'redux-saga/effects'\nimport { takeEvery } from 'redux-saga'\nimport _ from 'lodash'\nimport watchAllLoadRequests from './loadRequests'\nimport watchLoginFlow from './loginFlow'\nimport watchViewer from './viewerTasks'\nimport watchTest, { watchTest2 } from './test'\n\nexport default function* rootSaga() {\n  yield [\n    fork(watchAllLoadRequests),\n    fork(watchLoginFlow),\n    fork(watchViewer),\n    fork(watchTest2),\n    fork(watchTest)\n  ]\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/store/sagas/index.ts","import { take, call, fork } from 'redux-saga/effects'\nimport * as actions from '../actions'\nimport api from '../../services/api'\nimport _ from 'lodash'\nimport { fetchEntity } from './utils'\nimport * as ACTION_TYPES from '../../constants/actionTypes'\n\nconst OPTIONS = 'options'\nconst ID = 'id'\nconst DATA = 'data'\nconst TYPE = 'type'\n\nexport const API_CONFIG_KEYS = [OPTIONS, ID, DATA]\nexport const RESERVED_ACTION_KYES = [TYPE, ...API_CONFIG_KEYS]\n\nconst fetchBook = fetchEntity.bind(null, actions.book, api.fetchBook)\nconst fetchBookContent = fetchEntity.bind(null, actions.bookContent, api.fetchBookContent)\nconst fetchBooks = fetchEntity.bind(null, actions.books, api.fetchBooks)\nconst fetchUsers = fetchEntity.bind(null, actions.users, api.fetchUsers)\n\nfunction* handleLoad(fetchFn, parsedAction, callApi?): any {\n  const {apiConfig, payload} = parsedAction\n  // 在检查是否有数据的算法完成之前默认直接 call api\n  if (typeof callApi === 'undefined' || callApi === true) {\n    yield call(fetchFn, apiConfig, payload)\n  }\n}\n\nexport default function* watchAllLoadRequests(): any {\n  while (true) {\n    const action = yield take(actions.LOAD_ACTIONS)\n    const apiConfig = _.pick(action, API_CONFIG_KEYS)\n\n    // 如果直接使用 payload 可能在 pagination 之类的 reducer 里面会有一些麻烦\n    // 因为可能比较难判断哪个是 key\n    const payload = _.omit(action, RESERVED_ACTION_KYES)\n\n    const parsedAction = { apiConfig, payload }\n\n    switch (action.type) {\n      case ACTION_TYPES.LOAD_USERS:\n        yield fork(handleLoad, fetchUsers, parsedAction)\n        break\n\n      case ACTION_TYPES.LOAD_BOOKS:\n        yield fork(handleLoad, fetchBooks, parsedAction)\n        break\n\n      case ACTION_TYPES.LOAD_BOOK:\n        yield fork(handleLoad, fetchBook, parsedAction)\n        break\n\n      case ACTION_TYPES.LOAD_BOOK_CONTENT:\n        yield fork(handleLoad, fetchBookContent, parsedAction)\n        break\n\n      default:\n      // nothing happens here\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/store/sagas/loadRequests.ts","import { take, put, call } from 'redux-saga/effects'\nimport * as actions from '../actions'\nimport api from '../../services/api'\nimport _ from 'lodash'\nimport * as ACTION_TYPES from '../../constants/actionTypes'\n\nexport default function* watchLoginFlow(): any {\n  // 使用 fetchEntity 会更好么？\n  // 目前因为这种 put 类型的请求的返回值和一般的 entity 不一样所以不能直接使用\n  while (true) {\n    yield take(ACTION_TYPES.USER_LOGOUT)\n    yield put(actions.logout.request())\n    try {\n      yield call(api.logout)\n      yield put(actions.logout.success())\n    } catch (error) {\n      yield put(actions.logout.failure(error))\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/store/sagas/loginFlow.ts","import { take, put, call, cancelled, fork, cancel } from 'redux-saga/effects'\nimport * as actions from '../actions'\nimport api from '../../services/api'\nimport _ from 'lodash'\n\nfunction someAsyncTask() {\n  return new Promise((resolve) => {\n    setTimeout(function () {\n      console.log('loaded')\n      resolve('load done')\n      // yield put({ type: 'LOADED'})\n    }, 1000)\n  })\n}\n\nfunction doLoad() {\n  return new Promise((resolve) => {\n    setTimeout(function () {\n      resolve('load done')\n    }, 3000)\n  })\n}\n\nfunction* doLoadWithCancel(): any {\n  // while (true) {\n  try {\n    const res = yield someAsyncTask()\n    yield put({type: 'done', res})\n    // setTimeout(function () {\n    //   // console.log('loaded')\n    //   // resolve('load done')\n    //   yield put({ type: 'LOADED'})\n    // }, 3000)\n  } catch (error) {\n\n  } finally {\n    if (yield cancelled()) {\n      console.log('canceled')\n      yield put({ type: 'CANCEL_LOAD' })\n      // return Promise.resolve('canceled p')\n    }\n  }\n  // }\n}\n\nfunction doSave() {\n  return new Promise((resolve) => {\n    setTimeout(function () {\n      resolve('save done')\n    }, 3000)\n  })\n}\n\nexport default function* watchTest(): any {\n  while (true) {\n    const action = yield take(['LOAD', 'SAVE'])\n    let res\n\n    if (action.type === 'LOAD') {\n      res = yield doLoad()\n      console.log(res)\n    }\n    if (action.type === 'SAVE') {\n      res = yield doSave()\n      console.log(res)\n    }\n  }\n}\n\nexport function* watchTest2(): any {\n  while (true) {\n    const loadAction = yield take('LOAD')\n    const loadTask = yield fork(doLoadWithCancel)\n    const saveAction = yield take('SAVE')\n    if (saveAction.type === 'SAVE') {\n      console.log('save?')\n      yield cancel(loadTask)\n    }\n    yield put({ type: 'then what'})\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/store/sagas/test.ts","import { takeEvery, takeLatest } from 'redux-saga'\nimport { take, put, call, select, fork, cancel, cancelled } from 'redux-saga/effects'\nimport * as actions from '../actions'\nimport * as ACTION_TYPES from '../../constants/actionTypes'\nimport api from '../../services/api'\nimport _ from 'lodash'\nimport * as selectors from '../../store/selectors'\nimport { ROLES } from '../../constants/common'\nimport { fetchEntity } from './utils'\nimport helpers from '../../helpers'\nimport * as viewerUtils from '../../routes/Viewer/Viewer.utils'\nimport utils from '../../utils'\n\nconst DEFAULT_PAGE_HEIGHT = 900\nconst DEFAULT_FONT_SIZE = 16\n\nconst fetchBookProgress = fetchEntity.bind(null, actions.progress, api.fetchBookProgress)\n\nfunction* setViewer(bookId, config: ViewerConfig = {}) {\n  const viewerWidth = utils.getScreenInfo().view.width\n  const isSmallScreen = viewerWidth < 700\n\n  let initialized = {\n    bookId,\n    isCalcMode: true,\n    fluid: isSmallScreen,\n    isTouchMode: isSmallScreen,\n    pageHeight: DEFAULT_PAGE_HEIGHT,\n    fontSize: DEFAULT_FONT_SIZE,\n    width: isSmallScreen\n      ? viewerWidth\n      : 'max'\n  }\n\n  const computed = yield select(selectors.viewer.computed(bookId))\n\n  if (computed.length > 0) {\n    initialized.isCalcMode = false\n  }\n  initialized = _.merge({}, initialized, config)\n\n  yield put(actions.configViewer(bookId, initialized))\n}\n\nfunction* setViewerWithAction(action) {\n  const bookId = action.bookId\n  const config: ViewerConfig = action.config\n\n  yield setViewer(bookId, config)\n}\n\nfunction* watchInitViewer() {\n  yield* takeEvery(ACTION_TYPES.VIEWER.INITIALIZE_CONFIG, setViewerWithAction)\n}\n\nfunction calcBook(wrap: HTMLElement, flesh: TBookFlesh) {\n  const startCalcHtmlTime = new Date().valueOf()\n  const computedChapters = Array.prototype\n    .map.call(wrap.childNodes, child => {\n      const childDiv = child as HTMLDivElement\n      const id = childDiv.getAttribute('id')\n      const nodeHeights = viewerUtils.getNodeHeights(childDiv.querySelector('.lines').childNodes)\n\n      return {\n        id,\n        nodeHeights\n      }\n    })\n  const endCalcHtmlTime = new Date().valueOf()\n  helpers.print(`Calculating html takes ${endCalcHtmlTime - startCalcHtmlTime}ms`)\n\n  const computedPages = viewerUtils.groupPageFromChapters(flesh, computedChapters, 900)\n\n  return computedPages\n}\n\nfunction* updateProgress(bookId, percentage) {\n  try {\n    yield call(api.setProgress, bookId, {\n      percentage\n    })\n  } catch (error) {\n    console.error(error)\n  } finally {\n    if (yield cancelled()) {\n      helpers.print('updateProgress canceled')\n    }\n  }\n}\n\nfunction* watchCalcBook() {\n  while (true) {\n    const { bookId, wrap } = yield take(ACTION_TYPES.VIEWER.CALC_START)\n    const bookContent = yield select(selectors.common.entity('bookContents', bookId))\n    const flesh = bookContent.flesh || {}\n\n    try {\n      const computed = calcBook(wrap, flesh)\n      yield put(actions.calcBookSuccess(bookId, computed))\n      yield put(actions.configViewer(bookId, {\n        isCalcMode: false\n      }))\n    } catch (error) {\n      yield put(actions.calcBookFailure(bookId, error))\n    }\n  }\n}\n\nfunction* watchProgressOperations() {\n  while (true) {\n    const action = yield take([ACTION_TYPES.VIEWER.BOOK_PROGRESS_UPDATE, ACTION_TYPES.LOAD_BOOK_PROGRESS])\n    const session = yield select(selectors.common.session)\n    const userRole = _.get(session, 'user.role')\n\n    if (userRole !== ROLES.VISITOR) {\n      if (action.type === ACTION_TYPES.LOAD_BOOK_PROGRESS) {\n        yield call(fetchBookProgress, { id: action.id })\n      }\n\n      if (action.type === ACTION_TYPES.VIEWER.BOOK_PROGRESS_UPDATE) {\n        yield updateProgress(action.id, action.percentage)\n      }\n    } else {\n      helpers.print('Not logged in, progress will not be fetched!')\n    }\n  }\n}\n\nfunction* jumpTo(action) {\n  const { percentage } = action\n  const { bookId, pageHeight, isScrollMode } = yield select(selectors.viewer.config)\n  const allPages = yield select(selectors.viewer.computed(bookId))\n  const pageCount = allPages.length\n  const totalHeight = pageCount * pageHeight\n\n  if (isScrollMode) {\n    document.body.scrollTop = percentage\n      ? totalHeight * percentage\n      : 0\n  } else {\n    yield put(actions.updateBookProgress(percentage) as any)\n  }\n}\n\nfunction* watchJumpRequest() {\n  yield* takeEvery(ACTION_TYPES.VIEWER.JUMP, jumpTo)\n}\n\nfunction* fetchProgressAndJump(bookId) {\n  yield put(actions.loadBookProgress(bookId))\n  yield take(ACTION_TYPES.BOOK_PROGRESS.SUCCESS)\n  const { percentage } = yield select(selectors.common.entity('bookProgress', bookId))\n  yield put(actions.viewerJumpTo(percentage))\n}\n\nfunction* initializeViewer() {\n  while (true) {\n    const { bookId } = yield take(ACTION_TYPES.VIEWER.INITIALIZE)\n    const computed = yield select(selectors.viewer.computed(bookId))\n\n    if (_.isEmpty(computed)) {\n      yield [put(actions.loadBook(bookId)), put(actions.loadBookContent(bookId))]\n      yield put(actions.initializeViewerConfig(bookId))\n\n      yield take(ACTION_TYPES.VIEWER.CALC_SUCCESS)\n      yield fetchProgressAndJump(bookId)\n    } else {\n      yield fetchProgressAndJump(bookId)\n    }\n  }\n}\n\nexport default function* watchViewer() {\n  yield [\n    fork(watchProgressOperations),\n    fork(watchCalcBook),\n    fork(watchInitViewer),\n    fork(watchJumpRequest),\n    fork(initializeViewer)\n  ]\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/store/sagas/viewerTasks.ts","import { createSelector } from 'reselect'\nimport _ from 'lodash'\nimport { pagedEntities } from './common'\n\nexport const doubanBooks = key => createSelector(\n  pagedEntities({\n    entitiesName: 'doubanBooks',\n    paginationName: 'doubanBooks',\n    paginationKey: key\n  }),\n  books => books\n)\n\nexport const authors = key => pagedEntities({\n  entitiesName: 'authors',\n  paginationName: 'authors',\n  paginationKey: key\n})\n\nexport const shelfBooks = (key?) => pagedEntities({\n  entitiesName: 'shelfBooks',\n  paginationName: 'bookShelves',\n  paginationKey: key\n})\n\nexport const books = (key?, page?) => pagedEntities({\n  entitiesName: 'books',\n  paginationName: 'books',\n  paginationKey: key,\n  page\n})\n\nexport const doubanBooksAsOptions = key => createSelector(\n  doubanBooks(key),\n  selectedBooks => {\n    return selectedBooks.map(book => ({\n      name: book.title,\n      value: book.id,\n      additional: {\n        description: book.summary,\n        cover: book.images.large,\n        author: book.author.join(', ')\n      }\n    }))\n  }\n)\n\nexport const authorsAsOptions = key => createSelector(\n  authors(key),\n  items => {\n    return items.map(item => ({\n      name: item.name,\n      value: item.id\n    }))\n  }\n)\n\nexport const booksAsOptions = (key?) => createSelector(\n  books(key),\n  items => {\n    return items.map(item => ({\n      name: item.title,\n      value: item.id\n    }))\n  }\n)\n\nexport const users = pagedEntities({\n  entitiesName: 'users',\n  paginationName: 'users',\n})\n\nexport const sessionUserId = state => {\n  return _.get(state, ['session', 'user', 'id'])\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/store/selectors/entities.ts","import _ from 'lodash'\nimport * as common from './common'\nimport { createSelector } from 'reselect'\n\nexport const self = state => {\n  return _.get(state, ['components', 'viewer'], {}) as any\n}\n\nexport const config = state => {\n  return _.get(state, ['components', 'viewer', 'config'], {}) as ViewerConfig & {\n    bookId: string\n  }\n}\n\nexport const computed = bookId => state => {\n  return _.get(state, ['components', 'viewer', 'contents', bookId, 'computed'], []) as TBookPage[]\n}\n\nexport const navData = bookId => state => {\n  const bookContent = common.entity('bookContents', bookId)(state)\n  return _.get(bookContent, 'nav', []) as TBookNav[]\n}\n\nexport const progress = bookId => state => {\n  return _.get(state, ['components', 'viewer', 'progress', bookId], {}) as {\n    pageNo: number,\n    percentage: number,\n    isFetching: boolean\n  }\n}\n\n// sub components\nexport const panel = createSelector(self, _self => {\n  return _.get(_self, ['components', 'panel'], {}) as {\n    show: boolean\n  }\n})\n\nexport const preference = createSelector(self, _self => {\n  return _.get(_self, ['components', 'preference'], {}) as {\n    show: boolean\n  }\n})\n\nexport const navigation = createSelector(self, _self => {\n  return _.get(_self, ['components', 'navigation'], {}) as {\n    show: boolean\n  }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/store/selectors/viewer.ts","export default function getScreenInfo(): {\n  view: any\n  screen: any\n} {\n  if (typeof window === 'undefined') {\n    console.error('window is undefined, empty info object will be returned!')\n\n    return {\n      view: {},\n      screen: {}\n    }\n  }\n\n  return {\n    view: {\n      width:  window.innerWidth,\n      height: window.innerHeight,\n      aspectRatio: window.innerWidth / window.innerHeight\n    },\n    screen: window.screen\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/utils/browser/getScreenInfo.ts","import getScreenInfo from './getScreenInfo'\nimport isIE from './isIE'\nimport lockScroll from './lockScroll'\nimport unlockScroll from './unlockScroll'\n\nexport default {\n  getScreenInfo,\n  isIE,\n  lockScroll,\n  unlockScroll\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/utils/browser/index.ts","export function isIE(ver){\n  if(typeof ver === 'undefined') {\n    ver = null\n  }\n  var b = document.createElement('b')\n  b.innerHTML = '<!--[if IE ' + ver + ']><i></i><![endif]-->'\n  return b.getElementsByTagName('i').length === 1\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/utils/browser/isIE.ts","export default function lockScroll() {\n  document.body.style.overflow = 'hidden'\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/utils/browser/lockScroll.ts","export default function unlockScroll() {\n  document.body.style.overflow = 'visible'\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/utils/browser/unlockScroll.ts","import isDescendant from './isDescendant'\nexport default {\n  isDescendant\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/utils/dom/index.ts","import padNumberWithZero from './padNumberWithZero'\n\nexport default function getCurrentTime() {\n  const d = new Date()\n  const time = [d.getFullYear(), d.getMonth() + 1, d.getDate(), d.getHours(), d.getMinutes(), d.getSeconds()]\n\n  return time.map(t => {\n    return padNumberWithZero(t)\n  }).join('')\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/isomorphic/utils/getCurrentTime.ts","import _ from 'lodash'\nimport Schema from '../models/schema'\nimport Model from '../models/model'\n\nclass BasicApi {\n  _model: Model\n  _schema: Schema\n\n  constructor(schema: Schema) {\n    this._schema = schema\n    this._model = new Model(schema)\n  }\n\n  findOne(id) {\n    return this._model.findOne(id)\n  }\n\n  list(page, keyword?: string) {\n    return this._model.list({\n      page,\n      disablePagination: _.isNil(page),\n      // TODO\n      filter: entity => true\n    })\n  }\n\n  add(data) {\n    return this._model.add(data)\n  }\n\n  update(id: string, data) {\n    // todo\n    // 无法提前知道是否为 upsert，所以无法预先决定是否验证 fields\n    // 可能会造成 upsert 的数据 fields 不全的问题\n    return this._model.update(id, data)\n  }\n\n  remove(id: string) {\n    return this._model.remove(id)\n  }\n}\n\nexport default BasicApi\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/api/basic-api.ts","import Model from '../models/model'\nimport paginate from '../models/paginate'\nimport * as schemas from '../data/schemas'\nimport _ from 'lodash'\nimport utils from '../utils'\nimport { notFoundError } from '../helpers'\nimport { readFile, delFile } from './file'\nimport parsers from '../parsers'\nimport callApi from '../../isomorphic/services/utils/callApi'\n\nconst bookModel = new Model(schemas.book)\nconst fileModel = new Model(schemas.file)\nconst progressModel = new Model(schemas.progress)\nconst authorModel = new Model(schemas.author)\n\n/**\n * helpers\n */\nasync function getAuthorId(authorName, description) {\n  try {\n    const authorEntity = await authorModel.findOne({ name: authorName })\n    return authorEntity._id\n  } catch (error) {\n    const result = await authorModel.add({\n      name: authorName,\n      description\n    })\n    return result.ops[0]._id\n  }\n}\n\n\n/**\n * 3rd party\n */\nasync function fetchBookByTitle(title: string) {\n  const keyword = title\n\n  const { json: bookJson } = await callApi(`https://api.douban.com/v2/book/search?q=${encodeURI(keyword)}&count=1`)\n  return _.get(bookJson, ['books', 0], {})\n}\n\nasync function fetchBookMetaByTitle(title: string) {\n  const book = await fetchBookByTitle(title)\n  return {\n    cover: _.get(book, ['images', 'large']),\n    description: _.get(book, 'summary'),\n    authorInfo: _.get(book, 'author_intro'),\n  }\n}\n\n\n/**\n * apis\n */\nexport function findBook(id) {\n  return bookModel.findOne(id).then(result => {\n    const data = _.omit(result, ['file'])\n    let contentType = 'txt'\n\n    if (!result.file) {\n      contentType = ''\n    } else if (result.file.mimetype === 'application/epub+zip') {\n      contentType = 'epub'\n    }\n\n    return _.assign({}, data, {\n      content_type: contentType\n    })\n  })\n}\n\nexport async function addBook(meta, fileId) {\n  const mergeBookMeta = (title, authorId, extMeta) => {\n    return _.assign({}, {\n      title,\n      authors: [authorId],\n      file: fileId\n    }, meta, extMeta)\n  }\n\n  async function doSave(title, authorName) {\n    const bookMeta = await fetchBookMetaByTitle(title)\n    const authorId = await getAuthorId(authorName, bookMeta.authorInfo)\n    const bookData = mergeBookMeta(title, authorId, _.omit(bookMeta, 'authorInfo'))\n\n    return bookModel.add(bookData)\n  }\n\n  if (fileId) { // resolve file to get book meta\n    const fileResult = await readFile(fileId)\n\n    if (fileResult.mimetype === 'application/epub+zip') {\n      try {\n        const file = await readFile(fileId, parsers.epub)\n        const parsedContent = file.content\n        const authorName = parsedContent.meta.author\n\n        return doSave(parsedContent.meta.title, authorName)\n      } catch (error) {\n        await fileModel.remove(fileId)\n        throw error\n      }\n    } else if (fileResult.mimetype === 'text/plain') { // 处理 txt\n      const file = await readFile(fileId)\n      const fileContentArray = file.content.buffer.toString('utf-8').split('\\n')\n      const title = fileContentArray[0]\n      const authorName = fileContentArray[1]\n\n      return doSave(title, authorName)\n    } else {\n      return Promise.reject(new Error('Unsupported file type!'))\n    }\n  }\n\n  // TODO: 好像不对吧\n  return bookModel.add(meta)\n}\n\ninterface BookMeta {\n  authors: string\n  cover: string\n  description: string\n  title: string\n}\nexport async function editBookMeta(bookId, meta: BookMeta) {\n  await bookModel.findOne(bookId, true)\n  // todo: 多个作者情况\n  const { authorInfo } = await fetchBookMetaByTitle(meta.authors)\n  const authorId = await getAuthorId(meta.authors, authorInfo)\n  const bookMeta = {\n    ...meta,\n    ...{\n      authors: [authorId]\n    }\n  }\n\n  return bookModel.update(bookId, bookMeta, {\n    upsert: false\n  })\n}\n\nexport async function resolveBookContent(bookId) {\n  const bookEntity = await bookModel.findOne(bookId)\n  const fileId = bookEntity.file._id\n  let bookContent\n\n  if (!fileId) {\n    // 从这边报出的 404 和下面的提示会不一样\n    // 下面报的 404 可能是文件被删了\n    // 这边报 404 则是一开始数据库里就没存 file\n    return Promise.reject(notFoundError('book'))\n  }\n\n  if (bookEntity.file.mimetype === 'application/epub+zip') {\n    const fileResult = await readFile(fileId, parsers.epub)\n    bookContent = _.omit(fileResult.content, ['meta'])\n  } else if (bookEntity.file.mimetype === 'text/plain') {\n    const fileResult = await readFile(fileId, parsers.txtContent)\n    bookContent = fileResult.content\n  } else {\n    return Promise.reject(new Error('Unsupported file type!'))\n  }\n\n  return _.assign({}, bookContent, { _id: bookId, content_id: fileId })\n}\n\nexport function listBooks(page?) {\n  return bookModel.list({\n    page,\n    disablePagination: _.isNil(page),\n    mapping: entity => _.omit(entity, ['content', 'file'])\n  })\n}\n\nexport function listShelfBooks(userId, page?) {\n  return progressModel.listRaw({ query: { user_id: userId } }).then(results => {\n    if (results.length === 0) {\n      return results\n    }\n\n    return Promise\n      .all(results\n        .sort(utils.sortByDate())\n        .map(result => {\n          return bookModel.findOne(result.book_id, true).then(res => {\n            return res\n          }, error => {\n            // 如果错误不是 404 也输出空的 entity\n            return bookModel.outputEmpty(result.book_id)\n          })\n        })\n      )\n      .then(res => {\n        return paginate(res.map(entity => _.omit(entity, ['content'])), {\n          page\n        }) as Object\n      })\n  })\n}\n\nexport async function removeBook(bookId: string) {\n  const book = await bookModel.findOne(bookId, true)\n  const fileId = book.file\n  await bookModel.remove(bookId)\n  return delFile(fileId)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/api/books.ts","import Model from '../models/model'\nimport * as schemas from '../data/schemas'\nimport _ from 'lodash'\n\nconst collectionModel = new Model(schemas.collection)\n\nexport function listCollection(page?) {\n  return collectionModel.list({\n    page,\n    disablePagination: _.isNil(page),\n    mapping: entity => {\n      return _.assign({}, entity, {\n        items: entity['items'].map(item => _.omit(item, 'content'))\n      })\n    }\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/api/collections.ts","import * as schemas from '../data/schemas'\nimport _ from 'lodash'\nimport BasicApi from './basic-api'\n\nexport * from './file'\nexport * from './books'\nexport * from './user'\nexport * from './users'\nexport * from './collections'\n\nexport const author = new BasicApi(schemas.author)\nexport const collection = new BasicApi(schemas.collection)\nexport const book = new BasicApi(schemas.book)\nexport const tag = new BasicApi(schemas.tag)\nexport const user = new BasicApi(schemas.user)\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/api/index.ts","import Model from '../models/model'\nimport * as schemas from '../data/schemas'\nimport _ from 'lodash'\nimport humps from 'humps'\n\nconst progressModel = new Model(schemas.progress)\n\nexport function getReadingProgress(userId, bookId) {\n  const query = humps.decamelizeKeys({ userId, bookId })\n\n  return progressModel.list({ disablePagination: true, raw: true, query }).then(res => {\n    if (res['length'] === 0) {\n      return progressModel.outputEmpty({\n        user_id: userId,\n        book_id: bookId\n      })\n    }\n    return res[0]\n  })\n}\n\nexport function setReadingProgress(userId, bookId, data) {\n  const query = humps.decamelizeKeys({ userId, bookId })\n\n  return progressModel.update(query, data, {\n    upsert: true\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/api/user.ts","import Model from '../models/model'\nimport * as schemas from '../data/schemas'\nimport _ from 'lodash'\nimport { ROLES } from '../../isomorphic/constants/common'\n\nconst userModel = new Model(schemas.user)\n\nexport function findUser(id) {\n  return userModel.findOne(id).then(entity => {\n    return _.omit(entity, ['password'])\n  })\n}\n\nexport function addUser(userInfo) {\n  return userModel.add(_.assign({}, userInfo, {\n    role: ROLES.USER\n  }))\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/api/users.ts","import http from 'http'\n// import appConfig from '../app.config'\nimport print from './utils/print'\n\ninterface BootstrapConfig {\n  port?: number\n  serviceName: 'api' | 'pages'\n  isProduction: boolean\n}\n\nexport default function bootstrap(app, config: BootstrapConfig) {\n  let portInConfigFile\n  const { port: overidePort, serviceName, isProduction } = config\n  const server = http.createServer(app)\n  const serviceName2 = serviceName || 'pages'\n\n  switch (serviceName2) {\n    case 'api':\n      portInConfigFile = process.env.API_PORT\n      break\n\n    case 'pages':\n      portInConfigFile = process.env.SERVER_PORT\n      break\n\n    default:\n      throw new Error('serviceName undefined!')\n  }\n\n  const port = overidePort || portInConfigFile\n\n  app.set('port', port)\n  server.listen(port)\n\n  print.info(`Service[${serviceName2}] running in ${isProduction ? 'production' : 'development'} at port ${port}`)\n\n  return app\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/bootstrap.ts","export class DataType {\n  mark: string\n  isTypeArray: boolean\n\n  constructor(mark, isTypeArray?) {\n    this.mark = mark\n    this.isTypeArray = typeof isTypeArray === 'undefined'\n      ? false\n      : isTypeArray\n  }\n\n  isArray() {\n    if (typeof this.isTypeArray === 'undefined' || !this.isTypeArray) {\n      return false\n    }\n    return true\n  }\n\n  equals(type) {\n    return (type.mark === this.mark && type.isArray() === this.isTypeArray)\n  }\n}\n\nexport const arrayOf = (type: DataType) => {\n  return new DataType(type.mark, true)\n}\n\nconst DataTypes = {\n  String: new DataType('STRING'),\n  Number: new DataType('NUMBER'),\n  ID: new DataType('ID'),\n}\n\nexport default DataTypes\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/data/types.ts","import * as api from '../api'\nimport _ from 'lodash'\nimport makeBasicEndpoint from './make-basic-endpoint'\n\n// basic endpoints\nexport const author = makeBasicEndpoint(api.author)\nexport const collection = makeBasicEndpoint(api.collection)\nexport const book = makeBasicEndpoint(api.book)\nexport const tag = makeBasicEndpoint(api.tag)\nexport const user = makeBasicEndpoint(api.user)\n\n// common endpoints\n// books\nexport const addBook = (req, res, next) => {\n  req.apiResults = api.addBook(req.body, req.loggedFileId)\n  next()\n}\n\nexport const findBook = (req, res, next) => {\n  req.apiResults = api.findBook(req.params.book)\n  next()\n}\n\nexport const resolveBookContent = (req, res, next) => {\n  req.apiResults = api.resolveBookContent(req.params.book)\n  next()\n}\n\nexport const listBooks = (req, res, next) => {\n  req.apiResults = api.listBooks(req.query.page || 1)\n  next()\n}\n\nexport const editBookMeta = (req, res, next) => {\n  req.apiResults = api.editBookMeta(req.params.book, req.body)\n  next()\n}\n\nexport const removeBook = (req, res, next) => {\n  req.apiResults = api.removeBook(req.params.book)\n  next()\n}\n\n// users\nexport const findUser = (req, res, next) => {\n  req.apiResults = api.findUser(req.context.user.id)\n  next()\n}\n\nexport const addUser = (req, res, next) => {\n  req.apiResults = api.addUser(req.body)\n  next()\n}\n\n// user\nexport const listShelfBooks = (req, res, next) => {\n  req.apiResults = api.listShelfBooks(req.context.user.id, req.query.page || 1)\n  next()\n}\n\nexport const getReadingProgress = (req, res, next) => {\n  req.apiResults = api.getReadingProgress(req.context.user.id, req.params.book)\n  next()\n}\n\nexport const setReadingProgress = (req, res, next) => {\n  req.apiResults = api.setReadingProgress(req.context.user.id, req.params.book, req.body)\n  next()\n}\n\n// file\nexport const readFile = (req, res, next) => {\n  req.apiResults = api.readFile(req.params.file)\n  next()\n}\n\nexport const delFile = (req, res, next) => {\n  req.apiResults = api.delFile(req.params.file)\n  next()\n}\n\n// other\nexport const listCollections = (req, res, next) => {\n  req.apiResults = api.listCollection(req.query.page || 1)\n  next()\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/endpoints/index.ts","import BasicApi from '../api/basic-api'\n\nconst makeBasicEndpoint = (apiFns: BasicApi) => {\n  const findOne = (req, res, next) => {\n    req.apiResults = apiFns.findOne(req.params.id)\n    next()\n  }\n\n  const list = (req, res, next) => {\n    req.apiResults = apiFns.list(req.query.page || 1)\n    next()\n  }\n\n  const add = (req, res, next) => {\n    req.apiResults = apiFns.add(req.body)\n    next()\n  }\n\n  const update = (req, res, next) => {\n    req.apiResults = apiFns.update(req.params.id, req.body)\n    next()\n  }\n\n  const remove = (req, res, next) => {\n    req.apiResults = apiFns.remove(req.params.id)\n    next()\n  }\n\n  return { findOne, list, add, update, remove }\n}\n\nexport default makeBasicEndpoint\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/endpoints/make-basic-endpoint.ts","import GenericError from './generic-error'\n\nexport default class BadRequestError extends GenericError {\n  code: number\n\n  constructor(message, code?) {\n    super(message, 'BadRequestError')\n    this.statusCode = 400\n\n    if (code) {\n      this.code = code\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/errors/bad-request-error.ts","import GenericError from './generic-error'\n\nexport default class EmailError extends GenericError {\n  constructor(message) {\n    super(message, 'EmailError')\n\n    this.statusCode = 500\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/errors/email-error.ts","import GenericError from './generic-error'\n\nexport default class InternalServerError extends GenericError {\n  constructor(message) {\n    super(message, 'InternalServerError')\n\n    this.statusCode = 500\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/errors/internal-server-error.ts","import GenericError from './generic-error'\n\nexport default class MethodNotAllowedError extends GenericError {\n  constructor(message) {\n    super(message, 'MethodNotAllowedError')\n\n    this.statusCode = 405\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/errors/method-not-allowed-error.ts","import GenericError from './generic-error'\n\nexport default class NoPermissionError extends GenericError {\n  constructor(message) {\n    super(message, 'NoPermissionError')\n\n    this.statusCode = 403\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/errors/no-permission-error.ts","import GenericError from './generic-error'\n\nexport default class NotFoundError extends GenericError {\n  constructor(message) {\n    super(message, 'NotFoundError')\n\n    this.statusCode = 404\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/errors/not-found-error.ts","import GenericError from './generic-error'\n\nexport default class RequestEntityTooLargeError extends GenericError {\n  constructor(message) {\n    super(message, 'RequestEntityTooLargeError')\n\n    this.statusCode = 413\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/errors/request-too-large-error.ts","import GenericError from './generic-error'\n\nexport default class TokenRevocationError extends GenericError {\n  constructor(message) {\n    super(message, 'TokenRevocationError')\n\n    this.statusCode = 503\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/errors/token-revocation-error.ts","import GenericError from './generic-error'\n\nexport default class TooManyRequestsError extends GenericError {\n  constructor(message) {\n    super(message, 'TooManyRequestsError')\n\n    this.statusCode = 429\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/errors/too-many-requests-error.ts","import GenericError from './generic-error'\n\nexport default class UnauthorizedError extends GenericError {\n  constructor(message) {\n    super(message, 'UnauthorizedError')\n\n    this.statusCode = 401\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/errors/unauthorized-error.ts","import GenericError from './generic-error'\n\nexport default class UnsupportedFileTypeError extends GenericError {\n  constructor(message) {\n    super(message, 'UnsupportedFileTypeError')\n\n    this.statusCode = 415\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/errors/unsupported-file-type-error.ts","import GenericError from './generic-error'\n\nexport default class ValidationError extends GenericError {\n  property: string\n\n  constructor(message, offendingProperty?) {\n    super(message, 'ValidationError')\n    this.statusCode = 422\n\n    if (offendingProperty) {\n      this.property = offendingProperty\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/errors/validation-error.ts","import crypto from 'crypto'\n/**\n * source:\n * http://stackoverflow.com/questions/6984139/how-can-i-get-the-sha1-hash-of-a-string-in-node-js\n */\n\nexport default function computeHash(buffer: string) {\n  const shasum = crypto.createHash('sha1')\n  shasum.update(buffer)\n  return shasum.digest('hex')\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/helpers/compute-hash.ts","import express from 'express'\nimport session from 'express-session'\nimport path from 'path'\nimport morgan from 'morgan'\nimport cookieParser from 'cookie-parser'\nimport bodyParser from 'body-parser'\nimport connectMongo from 'connect-mongo'\nimport render from './middleware/render'\nimport bootServer from './bootstrap'\nimport appConfig from '../app.config'\nimport routes from './routes'\n\nconst MongoStore = connectMongo(session)\nconst app = express()\n\nconst PUBLIC_DIR = 'build/static'\nconst PUBLIC_URL = '/static'\nconst SESSION_SECRET = 'key'\nconst REQ_SIZE_LIMIT = '5mb'\n// todo: resolve url\nconst MONGO_STORE_URL = appConfig.database.host + '/' + appConfig.database.mongoStoreName\n\ninterface InitConfig {\n  basePath: string\n  serviceName: 'api' | 'pages'\n  isProduction: boolean\n}\n\nexport default function initialize(config: InitConfig) {\n  const { basePath, serviceName, isProduction } = config\n\n  // locals\n  app.locals.basePath = basePath\n\n  app.use(session({\n    secret: SESSION_SECRET,\n    resave: true,\n    saveUninitialized: true,\n    store: new MongoStore({ url: MONGO_STORE_URL })\n  }))\n\n  app.use(bodyParser.urlencoded({ limit: REQ_SIZE_LIMIT, extended: false }))\n  app.use(bodyParser.json({ limit: REQ_SIZE_LIMIT }))\n  app.use(cookieParser())\n  app.use(PUBLIC_URL, express.static(path.join(basePath, PUBLIC_DIR)))\n\n  switch (serviceName) {\n    case 'api':\n      // api routing\n      app.use(`/${appConfig.api.prefix}`, routes.api())\n      break\n\n    case 'pages':\n    default:\n      app.use(render(isProduction))\n      break\n  }\n\n  // log error info\n  app.use(morgan('dev', {\n    skip(req, res) { return res.statusCode < 400 }\n  }))\n\n  return bootServer(app, {\n    serviceName,\n    isProduction\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/initialize.ts","import _ from 'lodash'\nimport errors from '../errors'\nimport i18n from '../utils/i18n'\nimport Model from '../models/model'\nimport humps from 'humps'\nimport * as schemas from '../data/schemas'\n\nexport function basicAuth(req, res, next) {\n  const user = new Model(schemas.user)\n\n  const login = req.body.login ? req.body.login.toLowerCase() : undefined\n  const password = req.body.password\n\n  if (typeof login === 'undefined') {\n    next(new errors.ValidationError(i18n('errors.validation.preCheck.missRequiredFields', 'login')))\n  }\n\n  if (typeof password === 'undefined') {\n    next(new errors.ValidationError(i18n('errors.validation.preCheck.missRequiredFields', 'password')))\n  }\n\n  const query = { $or: [{ username: login, password }, { email: login, password }] }\n\n  user.findOne(query).then(result => {\n    req.session.user = humps.camelizeKeys(result)\n    req.apiResults = Promise.resolve({ ok: 1 })\n    next()\n  }, error => {\n    next(new errors.UnauthorizedError(i18n('errors.middleware.auth.wrongCombination')))\n  })\n}\n\nexport function check(req, res) {\n  res.send(humps.decamelizeKeys(req.context.user))\n}\n\nexport function revoke(req, res) {\n  req.session.destroy()\n  res.status(204).send(null)\n}\n\nexport default { basicAuth, check, revoke }\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/middleware/auth.ts","import { notFoundError } from '../helpers'\n\nexport default function handleApiNotFound(req, res, next) {\n  if (!req.__apiTouched) {\n    next(notFoundError('API'))\n  }\n  next()\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/middleware/handle-api-not-found.ts","import print from '../utils/print'\nimport i18n from '../utils/i18n'\nimport _ from 'lodash'\n\nexport default function handleError(error, req, res, next) {\n  const statusCode = error.statusCode || 500\n  let errorJson = error\n\n  if (Error.prototype.isPrototypeOf(error)) {\n    errorJson = {\n      message: error.message || i18n('errors.general.unknownErrorOccurred'),\n      type: error.name,\n    }\n  }\n\n  if (!error.statusCode) {\n    print.error(error)\n  }\n\n  res.status(statusCode).send(_.omit(errorJson, ['statusCode', 'name', 'stack']))\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/middleware/handle-error.ts","import _ from 'lodash'\nimport parseUrlencoded from '../../isomorphic/utils/parseUrlencoded'\nimport helpers from '../../isomorphic/helpers'\n\nconst API_ROOT = helpers.getApiRoot()\n\nfunction parsePagination({ fullPath, query }, { current, all }) {\n  const getLintByPage = page => (`${fullPath}?${parseUrlencoded(_.assign({}, query, { page }))}`)\n\n  const links = {\n    first: getLintByPage(1),\n    last: getLintByPage(all),\n    prev: getLintByPage(current - 1),\n    next: getLintByPage(current + 1),\n  }\n\n  if (current > all) {\n    links.prev = links.last\n  }\n\n  if (all === 1) {\n    if (current > 1) {\n      return _.omit(links, ['next'])\n    }\n\n    if (current === 1) {\n      return _.omit(links, ['prev', 'next'])\n    }\n  }\n\n  if (current <= 1) {\n    return _.omit(links, ['prev'])\n  }\n\n  if (current >= all) {\n    return _.omit(links, ['next'])\n  }\n\n  return links\n}\n\nconst handleSuccess = (apiResults, req, res) => {\n  if (req.method === 'POST') {\n    res.status(201).send(apiResults)\n  } else {\n    if (apiResults._pagination) {\n      const host = API_ROOT\n\n      res.links(parsePagination({\n        fullPath: host + req.path,\n        query: req.query,\n      }, apiResults._pagination))\n\n      res.status(200).send(apiResults.entities)\n      return false\n    }\n\n    res.status(200).send(apiResults)\n  }\n}\n\nfunction handleJSONResponse(req, res, next) {\n  const { apiResults } = req\n\n  if (!apiResults) {\n    next(new Error('\"apiResults\" is not present!'))\n  }\n\n  apiResults.then(results => {\n    handleSuccess(results, req, res)\n  }, error => {\n    next(error)\n  })\n}\n\nexport default handleJSONResponse\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/middleware/handle-json-response.ts","import parseContext from './parse-context'\nimport auth from './auth'\nimport requirePermissionsOf from './require-permissions-of'\nimport handleError from './handle-error'\nimport handleJSONResponse from './handle-json-response'\nimport logFile from './log-file'\nimport prepareApi from './prepare-api'\nimport handleApiNotFound from './handle-api-not-found'\nimport setHeader from './set-header'\n\nexport default {\n  parseContext,\n  auth,\n  requirePermissionsOf,\n  handleError,\n  handleJSONResponse,\n  logFile,\n  prepareApi,\n  handleApiNotFound,\n  setHeader\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/middleware/index.ts","import * as schemas from '../data/schemas'\nimport Model from '../models/model'\nimport _ from 'lodash'\nimport * as helpers from '../helpers'\n\nconst fileModel = new Model(schemas.file)\n\n// @req#loggedFileId\nexport default function logFile(req, res, next) {\n  const file = req.file\n  const hash = helpers.computeHash(file.buffer)\n  const data = {\n    filename: file.originalname,\n    // 会被转换为 binData 的 BSON type\n    content: file.buffer,\n    mimetype: file.mimetype,\n    size: file.size,\n    encoding: file.encoding,\n    hash\n  }\n\n  fileModel.findOne({ hash }).then(result => {\n    // req.loggedFileId = result._id\n    // TODO: 404 处理\n    const err = new Error('File already exists!')\n    next(err)\n  }, notFoundError => {\n    // TODO: 不使用 404\n    // 为了确定是未找到而不是其他错误需要做额外的判断\n    fileModel\n      .add(data)\n      .then(result => {\n        const loggedFileId = _.get(result, ['ops', 0, '_id'])\n        if (!loggedFileId) {\n          // TODO\n          // throw new Error('File not Found!')\n          const err = new Error('File not Found!')\n          next(err)\n        } else {\n          req.loggedFileId = loggedFileId\n          next()\n        }\n      })\n      .catch(error => {\n        next(error)\n      })\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/middleware/log-file.ts","import _ from 'lodash'\n\nexport default function parseContext(req, res, next) {\n  if (req.session.user) {\n    req.context = {\n      user: _.omit(req.session.user, ['password', 'dateCreated', 'email'])\n    }\n  } else {\n    req.context = {\n      user: {\n        role: 'visitor'\n      }\n    }\n  }\n\n  next()\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/middleware/parse-context.ts","export default function prepareApi(req, res, next) {\n  req.__apiTouched = true\n  next()\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/middleware/prepare-api.ts","import React from 'react'\nimport { renderToString } from 'react-dom/server'\nimport ServerSideAppRoot from '../../../isomorphic/containers/ServerSideAppRoot'\nimport rootSaga from '../../../isomorphic/store/sagas'\n\nfunction fetchData(req, res, next) {\n  const { matchedResults: { renderProps } } = req.locals\n  const store = req.locals.store\n\n  const fetchDataFns = renderProps.components\n    .map(comp => {\n      return (comp && comp.fetchData) || null\n    })\n    .filter(comp => Boolean(comp))\n\n  if (fetchDataFns.length === 0) {\n    const rootComponent = (\n      <ServerSideAppRoot\n        renderPageContent\n        renderProps={renderProps}\n        store={req.locals.store}\n      />\n    )\n\n    store.runSaga(rootSaga).done\n      .then(() => {\n        next()\n      })\n\n    renderToString(rootComponent)\n    store.close()\n  } else {\n    next()\n  }\n}\n\nexport default fetchData\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/middleware/render/fetch-data.tsx","import React from 'react'\nimport { renderToStaticMarkup } from 'react-dom/server'\nimport Page500 from '../../../isomorphic/containers/Page500'\n\nfunction handleError(error, req, res, next) {\n  const html = renderToStaticMarkup(\n    <Page500\n      message={error.message || 'Unknown error occurred!'}\n    />\n  )\n\n  res.send('<!DOCTYPE html>\\n' + html)\n}\n\nexport default handleError\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/middleware/render/handle-error.tsx","import init from './init'\nimport matchRoute from './match-route'\nimport fetchData from './fetch-data'\nimport renderView from './render-view'\nimport handleError from './handle-error'\n\nconst render = (isProduction) => {\n  return [init, matchRoute, fetchData, renderView(isProduction), handleError]\n}\n\nexport default render\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/middleware/render/index.ts","import { syncHistoryWithStore } from 'react-router-redux'\nimport { createMemoryHistory } from 'react-router'\nimport configureStore from '../../../isomorphic/store/configureStore'\n\n// import createRoutes from '../../isomorphic/routes/createRoutes'\n// import render, { render500 } from '../render'\n\n// const PROD_ERROR_MSG = '稍安勿躁，工程师正在解决问题 ...'\n\n// const isRoot = url => {\n//   let urlParts = url.split('?')[0].split('/')\n//   if (urlParts.length !== 2) {\n//     return false\n//   }\n\n//   if (_.last(urlParts) !== '') {\n//     return false\n//   }\n//   return true\n// }\n\n// interface RenderPageConfig {\n//   serverRouting: boolean\n//   isProduction: boolean\n// }\n\nexport default function init(req, res, next) {\n  const memoryHistory = createMemoryHistory(req.url)\n  const store = configureStore()\n  const history = syncHistoryWithStore(memoryHistory as any, store)\n  req.locals = {}\n  req.locals.history = history\n  req.locals.store = store\n  next()\n}\n\n// render500(errorMsg, isProduction)\n//     // 服务端路由关闭（仅限开发模式）\n//     if (serverRouting === false) {\n//       if (!isRoot(req.url)) {\n//         res.status(404).send(`\n//         <div style=\"margin: 60px auto; width: 600px; padding: 5px 20px; border: 1px solid #222;\">\n//           <h1 style=\"font-weight: bold; font-size: 22px; margin: 10px 0;\">404 Not Found</h1>\n//           <p style=\"margin: 10px 0;\">Dev mode with server routing disabled</p>\n//         </div>\n//       `)\n//         return false\n//       }\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/middleware/render/init.tsx","import { match } from 'react-router'\nimport _ from 'lodash'\nimport createRoutes from '../../../isomorphic/routes/createRoutes'\n\nfunction matchRoute(req, res, next) {\n  match(\n    {\n      history: req.locals.history,\n      routes: createRoutes(),\n      location: req.url\n    },\n    (error, redirectLocation, renderProps) => {\n      if (error) {\n        next(error)\n      } else if (redirectLocation) {\n        res.redirect(302, redirectLocation.pathname + redirectLocation.search)\n      } else if (renderProps) {\n        const wrappedComponent = _.last(renderProps.components)['WrappedComponent']\n        const statusCode = wrappedComponent ? 200 : 404\n\n        req.locals.matchedResults = { renderProps, statusCode }\n        next()\n      } else {\n        // todo\n        next(new Error('Missing 404 handle page in routes!'))\n      }\n    }\n  )\n}\n\nexport default matchRoute\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/middleware/render/match-route.ts","import React from 'react'\nimport path from 'path'\nimport _ from 'lodash'\nimport { renderToStaticMarkup, renderToString } from 'react-dom/server'\nimport DocContainer from '../../../isomorphic/containers/DocContainer'\nimport ServerSideAppRoot from '../../../isomorphic/containers/ServerSideAppRoot'\nimport AppDoc, { DOCTYPE } from '../../../isomorphic/containers/AppDoc'\nimport manifest from '../../../../build/static/assets.manifest.json'\n\nconst CLIENT_ENV_VARS = ['API_PORT', 'SERVER_PORT', 'API_PREFIX']\n\nconst resolveDevAssets = (assetName) => {\n  const assetUrl = `http://localhost:${process.env.WEBPACK_PORT}/static/`\n\n  return assetUrl + assetName\n}\n\nfunction renderView(isProduction) {\n  let cssAssets\n  let jsAssets\n\n  if (isProduction) {\n    const prefix = '/static'\n    cssAssets = [\n      path.join(prefix, manifest['base.global.css']),\n      path.join(prefix, manifest['vendor.global.css']),\n      path.join(prefix, manifest['modifiers.global.css']),\n      path.join(prefix, manifest['app.css'])\n    ]\n    jsAssets = [\n      path.join(prefix, manifest['vendor.js']),\n      path.join(prefix, manifest['app.js'])\n    ]\n  } else {\n    cssAssets = [\n      resolveDevAssets('css/base.global.css'),\n      resolveDevAssets('css/vendor.global.css'),\n      resolveDevAssets('css/modifiers.global.css'),\n      resolveDevAssets('css/app.css')\n    ]\n    jsAssets = [\n      resolveDevAssets('js/vendor.dll.js'),\n      resolveDevAssets('js/app.js')\n    ]\n  }\n\n  const clientEnv = _.pick(process.env, CLIENT_ENV_VARS)\n\n  return (req, res) => {\n    // test 500 page\n    // if (req) {\n    //   throw new Error('Server fucked up!')\n    // }\n\n    const { renderProps, statusCode } = req.locals.matchedResults\n    const appRootMarkup = renderToString(<ServerSideAppRoot\n      renderPageContent\n      renderProps={renderProps}\n      store={req.locals.store}\n    />)\n\n    // 需要在 render 之后调用\n    // 不调用 rewind 会造成内存泄漏\n    const { bodyClass, head } = DocContainer.rewind()\n\n    // todo: global var name\n    const html = renderToStaticMarkup(\n      <AppDoc\n        appMarkup={appRootMarkup}\n        helmetHeadObject={head}\n        bodyClass={bodyClass}\n        initialState={req.locals.store.getState()}\n        link={cssAssets}\n        script={[\n          { innerHTML: 'var __ENABLE_SERVER_ROUTING__ = true;' },\n          { innerHTML: `var __ENV__ = ${JSON.stringify(clientEnv)}` }\n        ].concat(jsAssets)}\n      />\n    )\n    res.status(statusCode).send(DOCTYPE + html)\n  }\n}\n\nexport default renderView\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/middleware/render/render-view.tsx","import { ROLES } from '../../isomorphic/constants/common'\nimport errors from '../errors'\nimport i18n from '../utils/i18n'\n\n/**\n * 权限等级排序\n * admin | user | visitor | none\n */\n\nexport default function requirePermissionsOf(userRole: string) {\n  return (req, res, next) => {\n    switch (userRole) {\n      case ROLES.ADMIN:\n        if (req.context.user.role === ROLES.ADMIN) {\n          next()\n          break\n        }\n\n        next(new errors.NoPermissionError(i18n('errors.api.auth.needPermissionsOf', 'admin')))\n        break\n\n      case ROLES.USER:\n        if (req.context.user.role === ROLES.USER || req.context.user.role === ROLES.ADMIN) {\n          next()\n          break\n        }\n        next(new errors.NoPermissionError(i18n('errors.api.auth.loginRequired')))\n        break\n\n      default:\n        if (userRole !== ROLES.VISITOR) {\n          next(new Error('Undefined role!'))\n          break\n        }\n        next()\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/middleware/require-permissions-of.ts","// todo\nconst ALLOWED_ORIGINS = [\n  'http://localhost:4000',\n  'http://localhost:4001',\n  'http://localhost:4002',\n]\n\nconst setHeader = (req, res, next) => {\n  const origin = req.headers.origin\n  if (ALLOWED_ORIGINS.indexOf(origin) !== -1) {\n    res.setHeader('Access-Control-Allow-Origin', origin)\n  }\n  next()\n}\n\nexport default setHeader\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/middleware/set-header.ts","import appConfig from '../../app.config'\nimport _ from 'lodash'\nimport Schema, { Field } from './schema'\nimport outputEmptyEntity from './output-empty-entity'\nimport mongodb from 'mongodb'\n\nconst MongoClient = mongodb.MongoClient\n\nexport function connect() {\n  return MongoClient.connect(`${appConfig.database.host}/${appConfig.database.name}`)\n}\n\nexport function getRowById(id, table) {\n  return getRowByMatch({ _id: id }, table)\n}\n\nexport function getRowByMatch(match, table) {\n  return connect().then(connection => {\n    const results = connection.collection(table).find(match).toArray()\n    connection.close()\n    return results\n  })\n}\n\n\n/**\n * embedRef & its little functions\n */\ninterface FieldWithIds extends Field {\n  ids: string[]\n}\nconst getRefFieldsWithIds = (rawResult, schema: Schema): FieldWithIds[] => {\n  return schema.fields\n    .filter(field => {\n      return (typeof field.ref !== 'undefined')\n    })\n    .map(field => {\n      let ids = rawResult[field.name]\n\n      // 将 ids 通通转换为数组\n      // 这里包括本该传数组却得到字符串被转换的情况\n      if (!Array.isArray(ids)) {\n        ids = [ids]\n      }\n\n      return Object.assign({}, field, { ids })\n    })\n}\n\n// 并且添加相应错误信息\nconst handleRefResult = (rawRefResult, refSchema: Schema, id) => {\n  if (typeof rawRefResult === 'object') {\n    return rawRefResult\n  }\n\n  return outputEmptyEntity(refSchema.fields, id)\n}\n\nconst doesRefHaveRefInside = (ref: Schema) => {\n  return _.filter(ref.fields, field => Boolean(field.ref)).length !== 0\n}\n\nexport function embedRef(rawResults: any[], schema: Schema) {\n  if (rawResults.length === 0) {\n    return Promise.resolve([])\n  }\n\n  // 获取 ref 数据，生成由 ref 字段组成的对象\n  const getRefFieldsWithData = (fieldsWithRefIds: FieldWithIds[]) => {\n    const fieldsWithData = fieldsWithRefIds\n      .map(field => {\n        // 一个 field 里面的 ids 返回的查询结果\n        return Promise\n          .all(field.ids\n            .map(id => {\n              return getRowById(id, field.ref.name)\n                .then(results => {\n                  const isRefInRef = doesRefHaveRefInside(field.ref)\n                  const refSchema = field.ref\n\n                  if (isRefInRef) {\n                    // 递归！！\n                    return embedRef(results, refSchema).then(reRefedResult =>\n                      handleRefResult(reRefedResult[0], refSchema, id))\n                  }\n\n                  return handleRefResult(results[0], refSchema, id)\n                })\n            })\n          )\n          .then(refResults => {\n            // 处理单个 ref field 数据，都是数组形式，最终是否为数组取决于 ref field 的 type\n            let fieldData = refResults\n\n            if (!field.type || !field.type.isArray()) {\n              fieldData = refResults[0]\n            }\n\n            return {\n              name: field.name,\n              data: fieldData,\n            }\n          })\n      })\n\n    return Promise.all<{ name: string; data: any }>(fieldsWithData).then(fields => {\n      return fields.reduce((fieldsObj, field) => {\n        return Object.assign({}, fieldsObj, {\n          [field.name]: field.data\n        })\n      }, {})\n    })\n  }\n\n  return Promise.all(rawResults\n    .map(rawResult => {\n      const fieldsWithIds = getRefFieldsWithIds(rawResult, schema)\n\n      return getRefFieldsWithData(fieldsWithIds).then(refObj => {\n        return _.assign({}, rawResult, refObj)\n      })\n    }))\n}\n\nexport default {\n  embedRef,\n  getRowByMatch,\n  getRowById\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/models/database.ts","import { DataType } from '../data/types'\n\nexport interface Validator {\n  (value: any): boolean\n}\n\nexport type Validators = {\n  fn: Validator\n  errorMsg: string\n}[]\n\nexport interface Field {\n  name: string\n  validators?: Validators\n  unique?: boolean\n  required?: boolean\n  ref?: Schema\n  type?: DataType\n}\n\ntype FieldDefinition = Field[]\n\nexport default class Schema {\n  _baseTable: string\n  _fieldDefinition: FieldDefinition\n\n  constructor(baseTable, fieldDefinition: FieldDefinition) {\n    this._fieldDefinition = fieldDefinition\n    this._baseTable = baseTable\n  }\n\n  get name() {\n    return this._baseTable\n  }\n\n  get fields() {\n    return this._fieldDefinition\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/models/schema.ts","import utils from '../utils'\nimport errors from '../errors'\nimport _ from 'lodash'\nimport Schema, { Validators } from './schema'\n\nconst reduceTasks = utils.reduceTasks\nconst i18n = utils.i18n\n\nexport default function validate(data, schema: Schema, isEditing?): any {\n  if (typeof data === 'undefined') {\n    return Promise.reject(new errors.BadRequestError(i18n('errors.validation.preCheck.emptyObject')))\n  }\n\n  const suppliedFields = Object.keys(data).filter(key => !_.isUndefined(data[key]))\n  const suppliedFieldsInSchema = schema.fields.filter(field => !_.isUndefined(data[field.name]))\n  const allFields = _.map(schema.fields, 'name')\n  const requiredFields = schema.fields\n    .filter(field => Boolean(field.required))\n    .map(field => field.name)\n  const unsupportedFields = suppliedFields.filter(key => allFields.indexOf(key) === -1)\n  const missedFields = requiredFields.filter(key => suppliedFields.indexOf(key) === -1)\n\n  if (unsupportedFields.length > 0) {\n    return Promise.reject(new errors.BadRequestError(i18n('errors.validation.preCheck.unsupportedInput', unsupportedFields[0])))\n  }\n\n  if (missedFields.length > 0 && !isEditing) {\n    return Promise.reject(new errors.BadRequestError(i18n('errors.validation.preCheck.missRequiredFields', missedFields[0])))\n  }\n\n  // 验证 fields，因为每个 field 可能有不止一个 validator\n  const validateField = (val, validators: Validators) => {\n    return reduceTasks(validators.map(validation => {\n      if (validation.fn(val)) {\n        return Promise.resolve(true)\n      }\n      return Promise.reject(new errors.BadRequestError(validation.errorMsg))\n    }))\n  }\n\n  // 所有 fields 验证一遍\n  return reduceTasks(suppliedFieldsInSchema.map(field => {\n    const validators = field.validators\n\n    if (validators) {\n      return validateField(data[field.name], validators)\n    }\n    // 跳过未定义 validation 的 filed\n    return Promise.resolve(true)\n  }))\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/models/validate.ts","import epub from 'simple-epub-parser'\nimport txtContent from './txt-content'\nexport default { epub, txtContent }\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/parsers/index.ts","export default async function txtContent(target) {\n  const nav = [{\n    ref: 'part01',\n    label: '第一章节',\n    index: 0\n  }]\n  let content\n\n  if (typeof target === 'string') {\n    const buffer = new Buffer(target, 'binary')\n    content = buffer.toString()\n  } else if (Buffer.isBuffer(target)) {\n    content = target.toString()\n  } else {\n    throw new Error('Only string or buffer is supported!')\n  }\n\n  const flesh = [{\n    src: 'part01',\n    markdown: content\n  }]\n\n  return { nav, flesh }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/parsers/txt-content.ts","import express from 'express'\nimport _ from 'lodash'\nimport multer from 'multer'\nimport * as endpoints from '../endpoints'\nimport { ROLES } from '../../isomorphic/constants/common'\nimport middleware from '../middleware'\n\nconst FORM_DATA_FILE_KEY = 'file'\nconst upload = multer()\n\nconst authenticatePublic = [\n  middleware.prepareApi,\n  middleware.parseContext\n]\n\nconst authenticatePrivate = [\n  middleware.prepareApi,\n  middleware.parseContext,\n  middleware.requirePermissionsOf(ROLES.USER)\n]\n\nconst authenticateAdmin = [\n  middleware.prepareApi,\n  middleware.parseContext,\n  middleware.requirePermissionsOf(ROLES.ADMIN)\n]\n\nfunction apiRoutes() {\n  const router = express.Router()\n\n  // authors\n  router.get('/authors/:id', authenticatePublic, endpoints.author.findOne) // basic\n  router.get('/authors', authenticatePublic, endpoints.author.list) // basic\n  router.post('/authors', authenticatePublic, endpoints.author.add) // basic\n  router.put('/authors/:id', authenticatePublic, endpoints.author.update) // basic\n  router.delete('/authors/:id', authenticatePublic, endpoints.author.remove) // basic\n\n  // collections\n  router.get('/collections/:id', authenticatePublic, endpoints.collection.findOne) // basic\n  router.get('/collections', authenticatePublic, endpoints.listCollections)\n  router.post('/collections', authenticatePublic, endpoints.collection.add) // basic\n  router.put('/collections/:id', authenticatePublic, endpoints.collection.update) // basic\n  router.delete('/collections/:id', authenticatePublic, endpoints.collection.remove) // basic\n\n  // books\n  router.get('/books/:book', authenticatePublic, endpoints.findBook)\n  router.get('/books/:book/content', authenticatePublic, endpoints.resolveBookContent)\n  router.get('/books', authenticatePublic, endpoints.listBooks)\n  // router.post('/books', authenticateAdmin, endpoints.book.add) // basic\n  router.post('/books', authenticateAdmin, upload.single(FORM_DATA_FILE_KEY), middleware.logFile, endpoints.addBook) // 处理文件\n  router.put('/books/:book', authenticateAdmin, endpoints.editBookMeta)\n  router.delete('/books/:book', authenticateAdmin, endpoints.removeBook)\n\n  // tags\n  router.get('/tags/:id', authenticatePublic, endpoints.tag.findOne) // basic\n  router.get('/tags', authenticatePublic, endpoints.tag.list) // basic\n  router.post('/tags', authenticatePublic, endpoints.tag.add) // basic\n  router.put('/tags/:id', authenticatePublic, endpoints.tag.update) // basic\n  router.delete('/tags/:id', authenticatePublic, endpoints.tag.remove) // basic\n\n  // users\n  router.get('/users', authenticateAdmin, endpoints.user.list) // basic\n  router.post('/users', authenticatePublic, endpoints.addUser)\n\n  // user\n  router.get('/user/profile', authenticatePrivate, endpoints.findUser)\n  router.get('/user/books/shelf', authenticatePrivate, endpoints.listShelfBooks)\n\n  // progress\n  router.get('/user/books/:book/progress', authenticatePrivate, endpoints.getReadingProgress)\n  router.put('/user/books/:book/progress', authenticatePrivate, endpoints.setReadingProgress)\n\n  // file\n  router.get('/files/:file', authenticateAdmin, endpoints.readFile)\n  router.delete('/files/:file', authenticateAdmin, endpoints.delFile)\n\n  // auth\n  router.post('/auth', authenticatePublic, middleware.auth.basicAuth)\n  router.get('/auth', authenticatePublic, middleware.auth.check)\n  router.put('/auth/revoke', authenticatePublic, middleware.auth.revoke)\n\n  return router\n}\n\nexport default function setupApiApp() {\n  const apiApp = express()\n\n  apiApp.use(middleware.setHeader)\n  apiApp.use(apiRoutes())\n  apiApp.use(middleware.handleApiNotFound)\n  apiApp.use(middleware.handleJSONResponse)\n  apiApp.use(middleware.handleError)\n\n  return apiApp\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/routes/api-routes.ts","import api from './api-routes'\n\nexport default {\n  api\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/routes/index.ts","export default {\n  common: {\n    terms: {\n      id: 'ID',\n      username: '用户名',\n      password: '密码',\n      percentage: '进度百分比',\n      email: '邮箱',\n      login: '登录项',\n      description: '描述',\n      name: '名称',\n      creator: '创建者',\n      title: '标题',\n      progress: '进度',\n      user: '用户',\n      admin: '管理员',\n      file: '文件',\n      files: '文件',\n      book: '书籍',\n      books: '书籍'\n    },\n  },\n  errors: {\n    validation: {\n      valueLimit: {\n        notString: '{value}不是字符串',\n        stringOnly: '输入项类型只能为字符串',\n        alphanumeric: '{value}只能为字母或数字',\n        undefined: '{value}未定义',\n        invalidFormat: '{value}格式不对',\n        noPureNumber: '{value}不能为纯数字',\n        onlyStartWithLetters: '{value}只能以字母开头',\n        length: '长度不匹配',\n        minLength: '{value}长度不足',\n        maxLength: '{value}超出最大长度',\n        username: {\n          allowedChars: '用户名只能包含字母，数字及以下字符 \"-\",\"_\"',\n        },\n      },\n      preCheck: {\n        emptyObject: '提交数据不能为空',\n        missRequiredFields: '{value}为必填项',\n        unsupportedInput: '发现未知的输入项{value}',\n        inputEmpty: '{value}输入不能为空',\n      },\n    },\n    api: {\n      general: {\n        notFound: '{value}未找到',\n        notFoundIn: '在{value}中未找到',\n        exists: '{value}已存在',\n      },\n      auth: {\n        needPermissionsOf: '需要 {value} 权限',\n        loginRequired: '需要登录',\n      },\n    },\n    schema: {\n      unique: '{value}已存在'\n    },\n    middleware: {\n      auth: {\n        accessDenied: '访问被禁止',\n        wrongPassword: '密码错误',\n        wrongCombination: '用户名或密码错误'\n      },\n      oauth: {\n        tokenExpired: 'token 过期',\n      },\n      spamprevention: {\n        tooManyAttempts: '您的访问过于频繁',\n        noUsername: '无用户名',\n        noPassword: '无密码',\n      },\n    },\n    mail: {\n      failedSendingEmail: '邮件发送失败',\n    },\n    general: {\n      anErrorOccurred: '发生错误',\n      unknownErrorOccurred: '发生未知错误',\n      notFound: '{value}未找到',\n    },\n  },\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/translations/cn.ts","/**\n * # Pipeline Utility (borrowed from Ghost)\n *\n * Based on pipeline.js from when.js:\n * https://github.com/cujojs/when/blob/3.7.4/pipeline.js\n */\nimport Promise from 'bluebird'\n\nfunction pipeline(tasks /* initial arguments */) {\n  const args = Array.prototype.slice.call(arguments, 1)\n\n  let runTask = (task, args) => {\n    // Self-optimizing function to run first task with multiple\n    // args using apply, but subsequent tasks via direct invocation\n    runTask = (task, arg) => {\n      return task(arg)\n    }\n\n    return task.apply(null, args)\n  }\n\n  // Resolve any promises for the arguments passed in first\n  return Promise.all(args).then(args => {\n    // Iterate through the tasks passing args from one into the next\n    return Promise.reduce(tasks, (arg, task) => {\n      return runTask(task, arg)\n    }, args)\n  })\n}\n\nexport default pipeline\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/utils/pipeline.ts","import Promise from 'bluebird'\n\n// tasks 可以是返回 Promise 的 fn\n// 也可以是 Promise\nexport default function reduceTasks(tasks: (any)[]) {\n  return Promise.reduce(tasks, (result, task) => {\n    if (typeof task === 'function') {\n      return task.call(this)\n    }\n    // 如果 task 是 Promise blue bird 貌似会自动把 promise resolve 出来，是 reject 直接就终止执行\n    // 所以 写 task()#then 会出错\n    return task\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/utils/reduce-tasks.ts","// 最新的在前面\nexport default function sortByDate() {\n  return (a, b) => {\n    return new Date(b.date_updated).valueOf() - new Date(a.date_updated).valueOf()\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/utils/sort-by-date.ts","const md5 = require('./md5.js')\nexport default md5\n\n\n\n// WEBPACK FOOTER //\n// ./vendor_modules/md5/index.js","/*\n * JavaScript MD5\n * https://github.com/blueimp/JavaScript-MD5\n *\n * Copyright 2011, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * http://www.opensource.org/licenses/MIT\n *\n * Based on\n * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message\n * Digest Algorithm, as defined in RFC 1321.\n * Version 2.2 Copyright (C) Paul Johnston 1999 - 2009\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n * Distributed under the BSD License\n * See http://pajhome.org.uk/crypt/md5 for more info.\n */\n\n/*global unescape, define, module */\n\n;(function ($) {\n  'use strict'\n\n  /*\n  * Add integers, wrapping at 2^32. This uses 16-bit operations internally\n  * to work around bugs in some JS interpreters.\n  */\n  function safe_add (x, y) {\n    var lsw = (x & 0xFFFF) + (y & 0xFFFF)\n    var msw = (x >> 16) + (y >> 16) + (lsw >> 16)\n    return (msw << 16) | (lsw & 0xFFFF)\n  }\n\n  /*\n  * Bitwise rotate a 32-bit number to the left.\n  */\n  function bit_rol (num, cnt) {\n    return (num << cnt) | (num >>> (32 - cnt))\n  }\n\n  /*\n  * These functions implement the four basic operations the algorithm uses.\n  */\n  function md5_cmn (q, a, b, x, s, t) {\n    return safe_add(bit_rol(safe_add(safe_add(a, q), safe_add(x, t)), s), b)\n  }\n  function md5_ff (a, b, c, d, x, s, t) {\n    return md5_cmn((b & c) | ((~b) & d), a, b, x, s, t)\n  }\n  function md5_gg (a, b, c, d, x, s, t) {\n    return md5_cmn((b & d) | (c & (~d)), a, b, x, s, t)\n  }\n  function md5_hh (a, b, c, d, x, s, t) {\n    return md5_cmn(b ^ c ^ d, a, b, x, s, t)\n  }\n  function md5_ii (a, b, c, d, x, s, t) {\n    return md5_cmn(c ^ (b | (~d)), a, b, x, s, t)\n  }\n\n  /*\n  * Calculate the MD5 of an array of little-endian words, and a bit length.\n  */\n  function binl_md5 (x, len) {\n    /* append padding */\n    x[len >> 5] |= 0x80 << (len % 32)\n    x[(((len + 64) >>> 9) << 4) + 14] = len\n\n    var i\n    var olda\n    var oldb\n    var oldc\n    var oldd\n    var a = 1732584193\n    var b = -271733879\n    var c = -1732584194\n    var d = 271733878\n\n    for (i = 0; i < x.length; i += 16) {\n      olda = a\n      oldb = b\n      oldc = c\n      oldd = d\n\n      a = md5_ff(a, b, c, d, x[i], 7, -680876936)\n      d = md5_ff(d, a, b, c, x[i + 1], 12, -389564586)\n      c = md5_ff(c, d, a, b, x[i + 2], 17, 606105819)\n      b = md5_ff(b, c, d, a, x[i + 3], 22, -1044525330)\n      a = md5_ff(a, b, c, d, x[i + 4], 7, -176418897)\n      d = md5_ff(d, a, b, c, x[i + 5], 12, 1200080426)\n      c = md5_ff(c, d, a, b, x[i + 6], 17, -1473231341)\n      b = md5_ff(b, c, d, a, x[i + 7], 22, -45705983)\n      a = md5_ff(a, b, c, d, x[i + 8], 7, 1770035416)\n      d = md5_ff(d, a, b, c, x[i + 9], 12, -1958414417)\n      c = md5_ff(c, d, a, b, x[i + 10], 17, -42063)\n      b = md5_ff(b, c, d, a, x[i + 11], 22, -1990404162)\n      a = md5_ff(a, b, c, d, x[i + 12], 7, 1804603682)\n      d = md5_ff(d, a, b, c, x[i + 13], 12, -40341101)\n      c = md5_ff(c, d, a, b, x[i + 14], 17, -1502002290)\n      b = md5_ff(b, c, d, a, x[i + 15], 22, 1236535329)\n\n      a = md5_gg(a, b, c, d, x[i + 1], 5, -165796510)\n      d = md5_gg(d, a, b, c, x[i + 6], 9, -1069501632)\n      c = md5_gg(c, d, a, b, x[i + 11], 14, 643717713)\n      b = md5_gg(b, c, d, a, x[i], 20, -373897302)\n      a = md5_gg(a, b, c, d, x[i + 5], 5, -701558691)\n      d = md5_gg(d, a, b, c, x[i + 10], 9, 38016083)\n      c = md5_gg(c, d, a, b, x[i + 15], 14, -660478335)\n      b = md5_gg(b, c, d, a, x[i + 4], 20, -405537848)\n      a = md5_gg(a, b, c, d, x[i + 9], 5, 568446438)\n      d = md5_gg(d, a, b, c, x[i + 14], 9, -1019803690)\n      c = md5_gg(c, d, a, b, x[i + 3], 14, -187363961)\n      b = md5_gg(b, c, d, a, x[i + 8], 20, 1163531501)\n      a = md5_gg(a, b, c, d, x[i + 13], 5, -1444681467)\n      d = md5_gg(d, a, b, c, x[i + 2], 9, -51403784)\n      c = md5_gg(c, d, a, b, x[i + 7], 14, 1735328473)\n      b = md5_gg(b, c, d, a, x[i + 12], 20, -1926607734)\n\n      a = md5_hh(a, b, c, d, x[i + 5], 4, -378558)\n      d = md5_hh(d, a, b, c, x[i + 8], 11, -2022574463)\n      c = md5_hh(c, d, a, b, x[i + 11], 16, 1839030562)\n      b = md5_hh(b, c, d, a, x[i + 14], 23, -35309556)\n      a = md5_hh(a, b, c, d, x[i + 1], 4, -1530992060)\n      d = md5_hh(d, a, b, c, x[i + 4], 11, 1272893353)\n      c = md5_hh(c, d, a, b, x[i + 7], 16, -155497632)\n      b = md5_hh(b, c, d, a, x[i + 10], 23, -1094730640)\n      a = md5_hh(a, b, c, d, x[i + 13], 4, 681279174)\n      d = md5_hh(d, a, b, c, x[i], 11, -358537222)\n      c = md5_hh(c, d, a, b, x[i + 3], 16, -722521979)\n      b = md5_hh(b, c, d, a, x[i + 6], 23, 76029189)\n      a = md5_hh(a, b, c, d, x[i + 9], 4, -640364487)\n      d = md5_hh(d, a, b, c, x[i + 12], 11, -421815835)\n      c = md5_hh(c, d, a, b, x[i + 15], 16, 530742520)\n      b = md5_hh(b, c, d, a, x[i + 2], 23, -995338651)\n\n      a = md5_ii(a, b, c, d, x[i], 6, -198630844)\n      d = md5_ii(d, a, b, c, x[i + 7], 10, 1126891415)\n      c = md5_ii(c, d, a, b, x[i + 14], 15, -1416354905)\n      b = md5_ii(b, c, d, a, x[i + 5], 21, -57434055)\n      a = md5_ii(a, b, c, d, x[i + 12], 6, 1700485571)\n      d = md5_ii(d, a, b, c, x[i + 3], 10, -1894986606)\n      c = md5_ii(c, d, a, b, x[i + 10], 15, -1051523)\n      b = md5_ii(b, c, d, a, x[i + 1], 21, -2054922799)\n      a = md5_ii(a, b, c, d, x[i + 8], 6, 1873313359)\n      d = md5_ii(d, a, b, c, x[i + 15], 10, -30611744)\n      c = md5_ii(c, d, a, b, x[i + 6], 15, -1560198380)\n      b = md5_ii(b, c, d, a, x[i + 13], 21, 1309151649)\n      a = md5_ii(a, b, c, d, x[i + 4], 6, -145523070)\n      d = md5_ii(d, a, b, c, x[i + 11], 10, -1120210379)\n      c = md5_ii(c, d, a, b, x[i + 2], 15, 718787259)\n      b = md5_ii(b, c, d, a, x[i + 9], 21, -343485551)\n\n      a = safe_add(a, olda)\n      b = safe_add(b, oldb)\n      c = safe_add(c, oldc)\n      d = safe_add(d, oldd)\n    }\n    return [a, b, c, d]\n  }\n\n  /*\n  * Convert an array of little-endian words to a string\n  */\n  function binl2rstr (input) {\n    var i\n    var output = ''\n    var length32 = input.length * 32\n    for (i = 0; i < length32; i += 8) {\n      output += String.fromCharCode((input[i >> 5] >>> (i % 32)) & 0xFF)\n    }\n    return output\n  }\n\n  /*\n  * Convert a raw string to an array of little-endian words\n  * Characters >255 have their high-byte silently ignored.\n  */\n  function rstr2binl (input) {\n    var i\n    var output = []\n    output[(input.length >> 2) - 1] = undefined\n    for (i = 0; i < output.length; i += 1) {\n      output[i] = 0\n    }\n    var length8 = input.length * 8\n    for (i = 0; i < length8; i += 8) {\n      output[i >> 5] |= (input.charCodeAt(i / 8) & 0xFF) << (i % 32)\n    }\n    return output\n  }\n\n  /*\n  * Calculate the MD5 of a raw string\n  */\n  function rstr_md5 (s) {\n    return binl2rstr(binl_md5(rstr2binl(s), s.length * 8))\n  }\n\n  /*\n  * Calculate the HMAC-MD5, of a key and some data (raw strings)\n  */\n  function rstr_hmac_md5 (key, data) {\n    var i\n    var bkey = rstr2binl(key)\n    var ipad = []\n    var opad = []\n    var hash\n    ipad[15] = opad[15] = undefined\n    if (bkey.length > 16) {\n      bkey = binl_md5(bkey, key.length * 8)\n    }\n    for (i = 0; i < 16; i += 1) {\n      ipad[i] = bkey[i] ^ 0x36363636\n      opad[i] = bkey[i] ^ 0x5C5C5C5C\n    }\n    hash = binl_md5(ipad.concat(rstr2binl(data)), 512 + data.length * 8)\n    return binl2rstr(binl_md5(opad.concat(hash), 512 + 128))\n  }\n\n  /*\n  * Convert a raw string to a hex string\n  */\n  function rstr2hex (input) {\n    var hex_tab = '0123456789abcdef'\n    var output = ''\n    var x\n    var i\n    for (i = 0; i < input.length; i += 1) {\n      x = input.charCodeAt(i)\n      output += hex_tab.charAt((x >>> 4) & 0x0F) +\n      hex_tab.charAt(x & 0x0F)\n    }\n    return output\n  }\n\n  /*\n  * Encode a string as utf-8\n  */\n  function str2rstr_utf8 (input) {\n    return unescape(encodeURIComponent(input))\n  }\n\n  /*\n  * Take string arguments and return either raw or hex encoded strings\n  */\n  function raw_md5 (s) {\n    return rstr_md5(str2rstr_utf8(s))\n  }\n  function hex_md5 (s) {\n    return rstr2hex(raw_md5(s))\n  }\n  function raw_hmac_md5 (k, d) {\n    return rstr_hmac_md5(str2rstr_utf8(k), str2rstr_utf8(d))\n  }\n  function hex_hmac_md5 (k, d) {\n    return rstr2hex(raw_hmac_md5(k, d))\n  }\n\n  function md5 (string, key, raw) {\n    if (!key) {\n      if (!raw) {\n        return hex_md5(string)\n      }\n      return raw_md5(string)\n    }\n    if (!raw) {\n      return hex_hmac_md5(key, string)\n    }\n    return raw_hmac_md5(key, string)\n  }\n\n  if (typeof define === 'function' && define.amd) {\n    define(function () {\n      return md5\n    })\n  } else if (typeof module === 'object' && module.exports) {\n    module.exports = md5\n  } else {\n    $.md5 = md5\n  }\n}(this))\n\n\n\n// WEBPACK FOOTER //\n// ./vendor_modules/md5/md5.js","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".colophon_3cQJ0 {\\n  font-size: 1rem;\\n  padding: 20px 0;\\n  color: #999; }\\n\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"colophon\": \"colophon_3cQJ0\"\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"modules\":true,\"importLoaders\":1,\"localIdentName\":\"[local]_[hash:base64:5]\"}!./~/sass-loader!./src/isomorphic/components/Colophon/Colophon.scss\n// module id = 235\n// module chunks = 17","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\nexports.i(require(\"-!../../../../node_modules/css-loader/index.js?{\\\"modules\\\":true,\\\"importLoaders\\\":1,\\\"localIdentName\\\":\\\"[local]_[hash:base64:5]\\\"}!../../../../node_modules/sass-loader/index.js!../Branding/Branding.scss\"), undefined);\n\n// module\nexports.push([module.id, \".branding_3goRG {\\n  background: #1B267F;\\n  position: fixed;\\n  top: 0;\\n  left: 0;\\n  width: 100%;\\n  z-index: 800;\\n  height: 60px; }\\n\\n.sep_AT6Gl {\\n  margin: 0 10px;\\n  opacity: .6;\\n  font-size: 1rem; }\\n\\n.sub_Iyhms {\\n  opacity: .8;\\n  font-size: 1.2rem;\\n  text-transform: uppercase;\\n  margin-top: -3px;\\n  display: inline-block; }\\n\\n.right_1ZAQP {\\n  float: right; }\\n\\n.sub-name_2T8ah {\\n  float: left;\\n  margin-left: 15px; }\\n  .sub-name_2T8ah span {\\n    display: inline-block;\\n    line-height: 60px;\\n    height: 60px;\\n    color: #fff; }\\n\\n.nav_10yn4 {\\n  color: #fff;\\n  line-height: 60px;\\n  height: 60px; }\\n\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"branding\": \"branding_3goRG\",\n\t\"sep\": \"sep_AT6Gl\",\n\t\"sub\": \"sub_Iyhms\",\n\t\"right\": \"right_1ZAQP\",\n\t\"sub-name\": \"sub-name_2T8ah\",\n\t\"nav\": \"nav_10yn4 \" + require(\"-!../../../../node_modules/css-loader/index.js?{\\\"modules\\\":true,\\\"importLoaders\\\":1,\\\"localIdentName\\\":\\\"[local]_[hash:base64:5]\\\"}!../../../../node_modules/sass-loader/index.js!../Branding/Branding.scss\").locals[\"nav\"] + \"\"\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"modules\":true,\"importLoaders\":1,\"localIdentName\":\"[local]_[hash:base64:5]\"}!./~/sass-loader!./src/isomorphic/components/ConsoleBranding/ConsoleBranding.scss\n// module id = 236\n// module chunks = 17","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".sidebar-left_mE1mo {\\n  position: fixed;\\n  left: 0;\\n  top: 60px;\\n  height: 100%;\\n  width: 300px;\\n  background: #E4E4E4; }\\n\\n.nav-side_3R0DN {\\n  position: fixed;\\n  left: 0;\\n  height: 100%; }\\n\\n.nav-side-root_Jfwbj {\\n  width: 80px;\\n  background: #04082E; }\\n\\n.nav-side-root--current_4d7LC {\\n  background: red; }\\n\\n.nav-side-sub_2RYLG {\\n  width: 220px;\\n  left: 80px; }\\n\\n/* item */\\n.nav-item_2um33 {\\n  height: 50px;\\n  line-height: 50px; }\\n  .nav-item_2um33 a {\\n    display: block;\\n    padding: 0 15px;\\n    color: #fff;\\n    height: 50px; }\\n\\n.icon_3waCK {\\n  margin-top: 12px; }\\n\\n.root-item_1T0Vm {\\n  text-align: center; }\\n  .root-item_1T0Vm a:hover {\\n    background: black; }\\n\\n.root-item--current_vCL9O {\\n  background: #1B267F; }\\n\\n.sub-item_2_3a7 { }\\n  .sub-item_2_3a7 a {\\n    color: #666; }\\n  .sub-item_2_3a7 a:hover {\\n    background: gray(200); }\\n\\n.sub-item--current_8i_7w { }\\n  .sub-item--current_8i_7w a,\\n  .sub-item--current_8i_7w a:hover {\\n    color: #1B267F;\\n    background: #fff; }\\n\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"sidebar-left\": \"sidebar-left_mE1mo\",\n\t\"nav-side\": \"nav-side_3R0DN\",\n\t\"nav-side-root\": \"nav-side-root_Jfwbj nav-side_3R0DN\",\n\t\"nav-side-root--current\": \"nav-side-root--current_4d7LC nav-side-root_Jfwbj nav-side_3R0DN\",\n\t\"nav-side-sub\": \"nav-side-sub_2RYLG nav-side_3R0DN\",\n\t\"nav-item\": \"nav-item_2um33\",\n\t\"icon\": \"icon_3waCK\",\n\t\"root-item\": \"root-item_1T0Vm nav-item_2um33\",\n\t\"root-item--current\": \"root-item--current_vCL9O root-item_1T0Vm nav-item_2um33\",\n\t\"sub-item\": \"sub-item_2_3a7 nav-item_2um33\",\n\t\"sub-item--current\": \"sub-item--current_8i_7w sub-item_2_3a7 nav-item_2um33\"\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"modules\":true,\"importLoaders\":1,\"localIdentName\":\"[local]_[hash:base64:5]\"}!./~/sass-loader!./src/isomorphic/components/ConsoleSidebar/ConsoleSidebar.scss\n// module id = 237\n// module chunks = 17","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".logo-wrap_2xU1t {\\n  margin: 0;\\n  line-height: 60px;\\n  color: #fff;\\n  margin-top: -3px;\\n  display: inline-block; }\\n\\n.logo_rp-__ {\\n  background: url(\" + require(\"./logo.png\") + \") no-repeat left;\\n  width: 70px;\\n  height: 60px;\\n  background-size: 70px;\\n  text-indent: -999em;\\n  display: inline-block; }\\n\\n.logo--dark_1U19_ {\\n  background: url(\" + require(\"./logo-dark.png\") + \") no-repeat left;\\n  background-size: 70px; }\\n\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"logo-wrap\": \"logo-wrap_2xU1t\",\n\t\"logo\": \"logo_rp-__\",\n\t\"logo--dark\": \"logo--dark_1U19_ logo_rp-__\"\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"modules\":true,\"importLoaders\":1,\"localIdentName\":\"[local]_[hash:base64:5]\"}!./~/sass-loader!./src/isomorphic/components/Logo/Logo.scss\n// module id = 238\n// module chunks = 17","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".alerts_lNYyS {\\n  position: fixed;\\n  width: 100%;\\n  padding: 0 20px;\\n  top: 10px;\\n  left: 0;\\n  z-index: 9999; }\\n\\n.alert_Tg6AL, .alert--success_ibIol, .alert--error_36iOd, .alert--warning_6_19X {\\n  padding: 10px 0;\\n  font-size: 16px;\\n  text-align: center;\\n  background: #fff;\\n  position: relative;\\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.32);\\n  font-size: 1rem;\\n  font-weight: bold;\\n  border-radius: 3px;\\n  width: 700px;\\n  margin: 0 auto 10px; }\\n  @media (max-width: 540px) {\\n    .alert_Tg6AL, .alert--success_ibIol, .alert--error_36iOd, .alert--warning_6_19X {\\n      max-width: 100%; } }\\n\\n.content_2CILg {\\n  overflow: hidden;\\n  padding: 0 30px; }\\n\\n.alert-close_3Ckz- {\\n  cursor: pointer;\\n  position: absolute;\\n  right: 10px;\\n  top: 11px;\\n  display: inline-block; }\\n\\n.alert--success_ibIol {\\n  background: #72efa8;\\n  color: #204d33; }\\n\\n.alert--error_36iOd {\\n  background: #cc0000;\\n  color: #fff; }\\n\\n.alert--warning_6_19X {\\n  background: orange;\\n  color: black; }\\n\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"alerts\": \"alerts_lNYyS\",\n\t\"alert\": \"alert_Tg6AL\",\n\t\"alert--success\": \"alert--success_ibIol\",\n\t\"alert--error\": \"alert--error_36iOd\",\n\t\"alert--warning\": \"alert--warning_6_19X\",\n\t\"content\": \"content_2CILg\",\n\t\"alert-close\": \"alert-close_3Ckz-\"\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"modules\":true,\"importLoaders\":1,\"localIdentName\":\"[local]_[hash:base64:5]\"}!./~/sass-loader!./src/isomorphic/elements/Alert/Alert.scss\n// module id = 239\n// module chunks = 17","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".btn_M2NhQ {\\n  color: #fff;\\n  background-color: #1B267F;\\n  border-color: #1B267F;\\n  padding: 3px 12px;\\n  font-size: 1rem;\\n  border-radius: 3px;\\n  transition: all 0.2s 0s;\\n  outline: none;\\n  border: 1px solid transparent;\\n  display: inline-block;\\n  margin: 5px 0;\\n  cursor: pointer; }\\n  .btn_M2NhQ:hover {\\n    color: #fff;\\n    background-color: #121955;\\n    border-color: #10174d; }\\n  .btn_M2NhQ:focus, .btn_M2NhQ.focus_ptKD_ {\\n    color: #fff;\\n    background-color: #121955;\\n    border-color: #10174d;\\n    box-shadow: 0 0 0 1px #fff, 0 0 0 3px #2433a9; }\\n  .btn_M2NhQ:active, .btn_M2NhQ.active_156lK {\\n    color: #fff;\\n    background-color: #121955;\\n    border-color: #10174d;\\n    background-image: none;\\n    box-shadow: 0 0 0 1px #fff, 0 0 0 3px #2433a9; }\\n    .btn_M2NhQ:active:hover, .btn_M2NhQ:active:focus, .btn_M2NhQ:active.focus_ptKD_, .btn_M2NhQ.active_156lK:hover, .btn_M2NhQ.active_156lK:focus, .btn_M2NhQ.active_156lK.focus_ptKD_ {\\n      color: #fff;\\n      background-color: #0c1138;\\n      border-color: #050716;\\n      box-shadow: 0 0 0 1px #fff, 0 0 0 3px #2433a9 !important; }\\n  .btn_M2NhQ.disabled_2GlXh:focus, .btn_M2NhQ.disabled_2GlXh.focus_ptKD_, .btn_M2NhQ:disabled:focus, .btn_M2NhQ:disabled.focus_ptKD_ {\\n    background-color: #1B267F;\\n    border-color: #1B267F; }\\n  .btn_M2NhQ.disabled_2GlXh:hover, .btn_M2NhQ:disabled:hover {\\n    background-color: #1B267F;\\n    border-color: #1B267F; }\\n  .btn_M2NhQ.disabled_2GlXh, .btn_M2NhQ:disabled {\\n    cursor: not-allowed;\\n    opacity: .65; }\\n  .btn_M2NhQ:active:hover {\\n    box-shadow: none; }\\n\\n.btn--hover_2KwUv {\\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24); }\\n\\n.btn_M2NhQ.btn--blue_20YQo {\\n  color: #fff;\\n  background-color: #1B267F;\\n  border-color: #1B267F; }\\n  .btn_M2NhQ.btn--blue_20YQo:hover {\\n    color: #fff;\\n    background-color: #121955;\\n    border-color: #10174d; }\\n  .btn_M2NhQ.btn--blue_20YQo:focus, .btn_M2NhQ.btn--blue_20YQo.focus_ptKD_ {\\n    color: #fff;\\n    background-color: #121955;\\n    border-color: #10174d;\\n    box-shadow: 0 0 0 1px #fff, 0 0 0 3px #2433a9; }\\n  .btn_M2NhQ.btn--blue_20YQo:active, .btn_M2NhQ.btn--blue_20YQo.active_156lK {\\n    color: #fff;\\n    background-color: #121955;\\n    border-color: #10174d;\\n    background-image: none;\\n    box-shadow: 0 0 0 1px #fff, 0 0 0 3px #2433a9; }\\n    .btn_M2NhQ.btn--blue_20YQo:active:hover, .btn_M2NhQ.btn--blue_20YQo:active:focus, .btn_M2NhQ.btn--blue_20YQo:active.focus_ptKD_, .btn_M2NhQ.btn--blue_20YQo.active_156lK:hover, .btn_M2NhQ.btn--blue_20YQo.active_156lK:focus, .btn_M2NhQ.btn--blue_20YQo.active_156lK.focus_ptKD_ {\\n      color: #fff;\\n      background-color: #0c1138;\\n      border-color: #050716;\\n      box-shadow: 0 0 0 1px #fff, 0 0 0 3px #2433a9 !important; }\\n  .btn_M2NhQ.btn--blue_20YQo.disabled_2GlXh:focus, .btn_M2NhQ.btn--blue_20YQo.disabled_2GlXh.focus_ptKD_, .btn_M2NhQ.btn--blue_20YQo:disabled:focus, .btn_M2NhQ.btn--blue_20YQo:disabled.focus_ptKD_ {\\n    background-color: #1B267F;\\n    border-color: #1B267F; }\\n  .btn_M2NhQ.btn--blue_20YQo.disabled_2GlXh:hover, .btn_M2NhQ.btn--blue_20YQo:disabled:hover {\\n    background-color: #1B267F;\\n    border-color: #1B267F; }\\n\\n.btn_M2NhQ.btn--orange_Ecn3s {\\n  color: #fff;\\n  background-color: #ee9333;\\n  border-color: #ee9333; }\\n  .btn_M2NhQ.btn--orange_Ecn3s:hover {\\n    color: #fff;\\n    background-color: #dc7a12;\\n    border-color: #d27412; }\\n  .btn_M2NhQ.btn--orange_Ecn3s:focus, .btn_M2NhQ.btn--orange_Ecn3s.focus_ptKD_ {\\n    color: #fff;\\n    background-color: #dc7a12;\\n    border-color: #d27412;\\n    box-shadow: 0 0 0 1px #fff, 0 0 0 3px #f2ac62; }\\n  .btn_M2NhQ.btn--orange_Ecn3s:active, .btn_M2NhQ.btn--orange_Ecn3s.active_156lK {\\n    color: #fff;\\n    background-color: #dc7a12;\\n    border-color: #d27412;\\n    background-image: none;\\n    box-shadow: 0 0 0 1px #fff, 0 0 0 3px #f2ac62; }\\n    .btn_M2NhQ.btn--orange_Ecn3s:active:hover, .btn_M2NhQ.btn--orange_Ecn3s:active:focus, .btn_M2NhQ.btn--orange_Ecn3s:active.focus_ptKD_, .btn_M2NhQ.btn--orange_Ecn3s.active_156lK:hover, .btn_M2NhQ.btn--orange_Ecn3s.active_156lK:focus, .btn_M2NhQ.btn--orange_Ecn3s.active_156lK.focus_ptKD_ {\\n      color: #fff;\\n      background-color: #bb6710;\\n      border-color: #95530c;\\n      box-shadow: 0 0 0 1px #fff, 0 0 0 3px #f2ac62 !important; }\\n  .btn_M2NhQ.btn--orange_Ecn3s.disabled_2GlXh:focus, .btn_M2NhQ.btn--orange_Ecn3s.disabled_2GlXh.focus_ptKD_, .btn_M2NhQ.btn--orange_Ecn3s:disabled:focus, .btn_M2NhQ.btn--orange_Ecn3s:disabled.focus_ptKD_ {\\n    background-color: #ee9333;\\n    border-color: #ee9333; }\\n  .btn_M2NhQ.btn--orange_Ecn3s.disabled_2GlXh:hover, .btn_M2NhQ.btn--orange_Ecn3s:disabled:hover {\\n    background-color: #ee9333;\\n    border-color: #ee9333; }\\n\\n.btn_M2NhQ.btn--red_3EKC3 {\\n  color: #fff;\\n  background-color: #d42020;\\n  border-color: #d42020; }\\n  .btn_M2NhQ.btn--red_3EKC3:hover {\\n    color: #fff;\\n    background-color: #a81919;\\n    border-color: #9f1818; }\\n  .btn_M2NhQ.btn--red_3EKC3:focus, .btn_M2NhQ.btn--red_3EKC3.focus_ptKD_ {\\n    color: #fff;\\n    background-color: #a81919;\\n    border-color: #9f1818;\\n    box-shadow: 0 0 0 1px #fff, 0 0 0 3px #e34444; }\\n  .btn_M2NhQ.btn--red_3EKC3:active, .btn_M2NhQ.btn--red_3EKC3.active_156lK {\\n    color: #fff;\\n    background-color: #a81919;\\n    border-color: #9f1818;\\n    background-image: none;\\n    box-shadow: 0 0 0 1px #fff, 0 0 0 3px #e34444; }\\n    .btn_M2NhQ.btn--red_3EKC3:active:hover, .btn_M2NhQ.btn--red_3EKC3:active:focus, .btn_M2NhQ.btn--red_3EKC3:active.focus_ptKD_, .btn_M2NhQ.btn--red_3EKC3.active_156lK:hover, .btn_M2NhQ.btn--red_3EKC3.active_156lK:focus, .btn_M2NhQ.btn--red_3EKC3.active_156lK.focus_ptKD_ {\\n      color: #fff;\\n      background-color: #891515;\\n      border-color: #650f0f;\\n      box-shadow: 0 0 0 1px #fff, 0 0 0 3px #e34444 !important; }\\n  .btn_M2NhQ.btn--red_3EKC3.disabled_2GlXh:focus, .btn_M2NhQ.btn--red_3EKC3.disabled_2GlXh.focus_ptKD_, .btn_M2NhQ.btn--red_3EKC3:disabled:focus, .btn_M2NhQ.btn--red_3EKC3:disabled.focus_ptKD_ {\\n    background-color: #d42020;\\n    border-color: #d42020; }\\n  .btn_M2NhQ.btn--red_3EKC3.disabled_2GlXh:hover, .btn_M2NhQ.btn--red_3EKC3:disabled:hover {\\n    background-color: #d42020;\\n    border-color: #d42020; }\\n\\n.btn_M2NhQ.btn--white_3Rv2J {\\n  color: #333;\\n  background-color: #fff;\\n  border-color: #fff; }\\n  .btn_M2NhQ.btn--white_3Rv2J:hover {\\n    color: #333;\\n    background-color: #e6e6e6;\\n    border-color: #e0e0e0; }\\n  .btn_M2NhQ.btn--white_3Rv2J:focus, .btn_M2NhQ.btn--white_3Rv2J.focus_ptKD_ {\\n    color: #333;\\n    background-color: #e6e6e6;\\n    border-color: #e0e0e0;\\n    box-shadow: 0 0 0 1px #fff, 0 0 0 3px white; }\\n  .btn_M2NhQ.btn--white_3Rv2J:active, .btn_M2NhQ.btn--white_3Rv2J.active_156lK {\\n    color: #333;\\n    background-color: #e6e6e6;\\n    border-color: #e0e0e0;\\n    background-image: none;\\n    box-shadow: 0 0 0 1px #fff, 0 0 0 3px white; }\\n    .btn_M2NhQ.btn--white_3Rv2J:active:hover, .btn_M2NhQ.btn--white_3Rv2J:active:focus, .btn_M2NhQ.btn--white_3Rv2J:active.focus_ptKD_, .btn_M2NhQ.btn--white_3Rv2J.active_156lK:hover, .btn_M2NhQ.btn--white_3Rv2J.active_156lK:focus, .btn_M2NhQ.btn--white_3Rv2J.active_156lK.focus_ptKD_ {\\n      color: #333;\\n      background-color: #d4d4d4;\\n      border-color: #bfbfbf;\\n      box-shadow: 0 0 0 1px #fff, 0 0 0 3px white !important; }\\n  .btn_M2NhQ.btn--white_3Rv2J.disabled_2GlXh:focus, .btn_M2NhQ.btn--white_3Rv2J.disabled_2GlXh.focus_ptKD_, .btn_M2NhQ.btn--white_3Rv2J:disabled:focus, .btn_M2NhQ.btn--white_3Rv2J:disabled.focus_ptKD_ {\\n    background-color: #fff;\\n    border-color: #fff; }\\n  .btn_M2NhQ.btn--white_3Rv2J.disabled_2GlXh:hover, .btn_M2NhQ.btn--white_3Rv2J:disabled:hover {\\n    background-color: #fff;\\n    border-color: #fff; }\\n\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"btn\": \"btn_M2NhQ\",\n\t\"focus\": \"focus_ptKD_\",\n\t\"active\": \"active_156lK\",\n\t\"disabled\": \"disabled_2GlXh\",\n\t\"btn--hover\": \"btn--hover_2KwUv\",\n\t\"btn--blue\": \"btn--blue_20YQo\",\n\t\"btn--orange\": \"btn--orange_Ecn3s\",\n\t\"btn--red\": \"btn--red_3EKC3\",\n\t\"btn--white\": \"btn--white_3Rv2J\"\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"modules\":true,\"importLoaders\":1,\"localIdentName\":\"[local]_[hash:base64:5]\"}!./~/sass-loader!./src/isomorphic/elements/Button/_button.scss\n// module id = 240\n// module chunks = 17","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".dropdown-item_2C1dz {\\n  text-overflow: ellipsis;\\n  white-space: nowrap;\\n  overflow: hidden; }\\n\\n.light-link_2QDeA {\\n  color: #ddd; }\\n  .light-link_2QDeA:hover {\\n    color: #fff; }\\n\\n.dropdown_SZfyp {\\n  display: inline-block;\\n  cursor: pointer;\\n  position: relative; }\\n\\n.dropdown-toggle_34Qfd {\\n  display: block;\\n  user-select: none;\\n  -webkit-user-select: none;\\n  max-height: 100%; }\\n\\n.dropdown-menu_1HgbS {\\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.22);\\n  line-height: 2.2;\\n  font-size: 1rem;\\n  text-align: left;\\n  background: #222;\\n  position: absolute;\\n  right: 0;\\n  width: 150px;\\n  overflow: hidden;\\n  padding: 5px 0;\\n  z-index: 900; }\\n\\n.dropdown-caret_FcBWI {\\n  display: inline-block;\\n  width: 0;\\n  height: 0;\\n  vertical-align: middle;\\n  content: \\\"\\\";\\n  border: 4px solid;\\n  border-right-color: transparent;\\n  border-bottom-color: transparent;\\n  border-left-color: transparent;\\n  margin-left: 5px; }\\n\\n.dropdown-item_2C1dz {\\n  display: block;\\n  padding: 0 25px;\\n  transition: all 0s; }\\n  .dropdown-item_2C1dz:hover {\\n    background: #3c3c3c; }\\n  .dropdown-item_2C1dz:active {\\n    background: #3c3c3c; }\\n\\n.sep_10Y0o {\\n  margin: 5px 0;\\n  height: 1px;\\n  background: #3c3c3c; }\\n\\n.dropdown-menu--dark_6eVPX {\\n  background: #1B267F; }\\n  .dropdown-menu--dark_6eVPX .sep_10Y0o {\\n    background: #1f2c94; }\\n  .dropdown-menu--dark_6eVPX .dropdown-item_2C1dz:hover {\\n    background: #1f2c94; }\\n\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"dropdown-item\": \"dropdown-item_2C1dz light-link_2QDeA\",\n\t\"light-link\": \"light-link_2QDeA\",\n\t\"dropdown\": \"dropdown_SZfyp\",\n\t\"dropdown-toggle\": \"dropdown-toggle_34Qfd\",\n\t\"dropdown-menu\": \"dropdown-menu_1HgbS\",\n\t\"dropdown-caret\": \"dropdown-caret_FcBWI\",\n\t\"sep\": \"sep_10Y0o\",\n\t\"dropdown-menu--dark\": \"dropdown-menu--dark_6eVPX dropdown-menu_1HgbS\"\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"modules\":true,\"importLoaders\":1,\"localIdentName\":\"[local]_[hash:base64:5]\"}!./~/sass-loader!./src/isomorphic/elements/Dropdown/Dropdown.scss\n// module id = 241\n// module chunks = 17","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \":root {\\n  --time: .3s; }\\n\\n.enter_b08lF {\\n  opacity: 0.01;\\n  transition: opacity var(--time) ease-in; }\\n\\n.enterActive_2lPGz {\\n  opacity: 1; }\\n\\n.leave_3S2Q- {\\n  opacity: 1;\\n  transition: opacity var(--time) ease-in; }\\n\\n.leaveActive_2i4qH {\\n  opacity: 0; }\\n\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"enter\": \"enter_b08lF\",\n\t\"enterActive\": \"enterActive_2lPGz\",\n\t\"leave\": \"leave_3S2Q-\",\n\t\"leaveActive\": \"leaveActive_2i4qH\"\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"modules\":true,\"importLoaders\":1,\"localIdentName\":\"[local]_[hash:base64:5]\"}!./~/sass-loader!./src/isomorphic/elements/Fade/Fade.scss\n// module id = 242\n// module chunks = 17","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".svg-shape_423Wb {\\n  fill: currentColor;\\n  overflow: hidden; }\\n\\n.icon_2s6T3 {\\n  display: inline-block;\\n  position: relative; }\\n\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"svg-shape\": \"svg-shape_423Wb\",\n\t\"icon\": \"icon_2s6T3\"\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"modules\":true,\"importLoaders\":1,\"localIdentName\":\"[local]_[hash:base64:5]\"}!./~/sass-loader!./src/isomorphic/elements/Icon/Icon.scss\n// module id = 243\n// module chunks = 17","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".input-wrap_1uL9i, .input-wrap--error_oOHxx {\\n  margin: 10px 0;\\n  position: relative; }\\n\\n.input_c1thg {\\n  width: 100%;\\n  padding: 5px 5px;\\n  border: 1px solid #ddd;\\n  transition: border-color .3s;\\n  line-height: 25px;\\n  outline: none; }\\n\\n.input_c1thg:focus {\\n  border-color: #1B267F; }\\n\\n.input-wrap--error_oOHxx .input_c1thg {\\n  border-color: #cc0000; }\\n\\n.error-msg_1VjPs {\\n  position: absolute;\\n  right: 10px;\\n  top: 6px;\\n  line-height: 25px;\\n  color: #cc0000; }\\n\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"input-wrap\": \"input-wrap_1uL9i\",\n\t\"input-wrap--error\": \"input-wrap--error_oOHxx\",\n\t\"input\": \"input_c1thg\",\n\t\"error-msg\": \"error-msg_1VjPs\"\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"modules\":true,\"importLoaders\":1,\"localIdentName\":\"[local]_[hash:base64:5]\"}!./~/sass-loader!./src/isomorphic/elements/Input/Input.scss\n// module id = 244\n// module chunks = 17","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".modal_20AZ1 {\\n  background: #fff;\\n  padding: 0;\\n  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.15);\\n  border-radius: 3px; }\\n  .modal_20AZ1 .icon-close_5uuLa {\\n    cursor: pointer; }\\n\\n.modal-backdrop_3rq0k {\\n  z-index: 900; }\\n\\n.modal-body_2gT23 {\\n  margin: 10px 0 0; }\\n\\n.modal-header_2dz68 {\\n  margin: 10px 0; }\\n\\n.modal-title_8pOfE {\\n  font-size: 1.4rem;\\n  font-weight: normal;\\n  color: #333;\\n  margin: 5px 0; }\\n\\n.modal-footer_fyZtS {\\n  border-top: 3px solid #e9ebf2;\\n  text-align: right;\\n  overflow: hidden; }\\n  .modal-footer_fyZtS .btn-red_3zomi {\\n    float: left;\\n    margin-left: 0; }\\n  .modal-footer_fyZtS button {\\n    margin: 5px 0 5px 10px; }\\n\\n.modal-content_3ZIHb {\\n  margin: 15px 0;\\n  line-height: 1.5; }\\n\\n.confirm-modal_k5GF0 {\\n  background: #fff;\\n  padding: 20px 30px; }\\n  .confirm-modal_k5GF0 p {\\n    font-size: 1.2rem; }\\n\\n.modal-plus_1_TST {\\n  padding: 20px 30px; }\\n\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"modal\": \"modal_20AZ1\",\n\t\"icon-close\": \"icon-close_5uuLa\",\n\t\"modal-backdrop\": \"modal-backdrop_3rq0k\",\n\t\"modal-body\": \"modal-body_2gT23\",\n\t\"modal-header\": \"modal-header_2dz68\",\n\t\"modal-title\": \"modal-title_8pOfE\",\n\t\"modal-footer\": \"modal-footer_fyZtS\",\n\t\"btn-red\": \"btn-red_3zomi\",\n\t\"modal-content\": \"modal-content_3ZIHb\",\n\t\"confirm-modal\": \"confirm-modal_k5GF0\",\n\t\"modal-plus\": \"modal-plus_1_TST\"\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"modules\":true,\"importLoaders\":1,\"localIdentName\":\"[local]_[hash:base64:5]\"}!./~/sass-loader!./src/isomorphic/elements/Modal/Modal.scss\n// module id = 245\n// module chunks = 17","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".modal-footer_FaHiU button {\\n  margin-right: 10px; }\\n\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"modal-footer\": \"modal-footer_FaHiU\"\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"modules\":true,\"importLoaders\":1,\"localIdentName\":\"[local]_[hash:base64:5]\"}!./~/sass-loader!./src/isomorphic/elements/Modal/ModalFooter.scss\n// module id = 246\n// module chunks = 17","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".selectize-wrap_P-y2- {\\n  margin: 10px 0;\\n  position: relative; }\\n\\n.selectize-input_36ULe {\\n  min-width: 300px;\\n  border: 1px solid #ddd;\\n  margin: 10px 0;\\n  box-sizing: border-box;\\n  transition: all 0s;\\n  cursor: text;\\n  background: #fff; }\\n  .selectize-input_36ULe input {\\n    background: transparent;\\n    line-height: 22px; }\\n\\n.selectize-input--focus_30LU5 {\\n  border-color: #1B267F; }\\n\\n.selectize-input--empty_3eAmI {\\n  background: #fff;\\n  padding: 5px 5px 0; }\\n\\n.selectize-input_36ULe input {\\n  border: none;\\n  outline: none;\\n  margin-bottom: 5px; }\\n\\n.query-results_3Ph-Z {\\n  margin-top: -3px;\\n  margin-bottom: 5px;\\n  padding: 5px;\\n  border-radius: 3px;\\n  position: absolute;\\n  left: 0;\\n  width: 100%;\\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.32);\\n  background: #fff;\\n  z-index: 900; }\\n\\n.query-results_3Ph-Z li {\\n  padding: 0 7px;\\n  line-height: 2;\\n  cursor: pointer;\\n  border-radius: 3px; }\\n  .query-results_3Ph-Z li:hover {\\n    background: #1B267F;\\n    color: #fff; }\\n\\n.selectize-tag_1PWDE {\\n  background: #1B267F;\\n  cursor: pointer;\\n  border-radius: 3px;\\n  padding: 3px 25px 3px 5px;\\n  margin: 5px;\\n  color: #fff;\\n  display: inline-block;\\n  position: relative; }\\n\\n.icon-remove_2BuSV {\\n  font-size: 0.8rem;\\n  margin-left: 5px;\\n  position: absolute;\\n  right: 5px;\\n  top: 2px; }\\n\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"selectize-wrap\": \"selectize-wrap_P-y2-\",\n\t\"selectize-input\": \"selectize-input_36ULe\",\n\t\"selectize-input--focus\": \"selectize-input--focus_30LU5\",\n\t\"selectize-input--empty\": \"selectize-input--empty_3eAmI\",\n\t\"query-results\": \"query-results_3Ph-Z\",\n\t\"selectize-tag\": \"selectize-tag_1PWDE\",\n\t\"icon-remove\": \"icon-remove_2BuSV\"\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"modules\":true,\"importLoaders\":1,\"localIdentName\":\"[local]_[hash:base64:5]\"}!./~/sass-loader!./src/isomorphic/elements/SelectizeInput/SelectizeInput.scss\n// module id = 247\n// module chunks = 17","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".textarea-wrap_YWll5 {\\n  margin: 10px 0;\\n  position: relative; }\\n\\n.textarea_1svNZ {\\n  width: 100%;\\n  padding: 5px;\\n  border: 1px solid #ddd;\\n  outline: none;\\n  height: 100px;\\n  transition: border-color .3s; }\\n\\n.textarea_1svNZ:focus {\\n  border-color: #1B267F; }\\n\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"textarea-wrap\": \"textarea-wrap_YWll5\",\n\t\"textarea\": \"textarea_1svNZ\"\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"modules\":true,\"importLoaders\":1,\"localIdentName\":\"[local]_[hash:base64:5]\"}!./~/sass-loader!./src/isomorphic/elements/Textarea/Textarea.scss\n// module id = 248\n// module chunks = 17","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".content_deYS4 {\\n  margin: 0 auto;\\n  width: 550px;\\n  position: relative;\\n  overflow: hidden;\\n  line-height: 1.9; }\\n  .content_deYS4 p {\\n    margin: 0;\\n    min-height: 25px; }\\n\\n.page_26Jj7 {\\n  display: block;\\n  width: 100%;\\n  overflow: hidden; }\\n\\n.page--fluid_20eQM { }\\n  .page--fluid_20eQM .content_deYS4 {\\n    width: 100%;\\n    padding: 0 20px; }\\n\\n.page--init_1VHVM {\\n  position: relative;\\n  height: auto; }\\n  .page--init_1VHVM .content_deYS4 {\\n    height: auto; }\\n\\n.gb-line_3RYqK {\\n  overflow: hidden; }\\n\\n.page-no_2_187 {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n  border-top: 1px solid #e6e6e6;\\n  padding: 0 10px;\\n  color: #e6e6e6;\\n  font-size: 0.8rem; }\\n\\n.white_1TVO9 {\\n  color: #333; }\\n\\n.night_3alh8 {\\n  color: #eee; }\\n  .night_3alh8 a {\\n    color: #fff;\\n    text-decoration: underline; }\\n\\n.sepia_1CF69 {\\n  color: #503220; }\\n\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"content\": \"content_deYS4\",\n\t\"page\": \"page_26Jj7\",\n\t\"page--fluid\": \"page--fluid_20eQM page_26Jj7\",\n\t\"page--init\": \"page--init_1VHVM\",\n\t\"gb-line\": \"gb-line_3RYqK\",\n\t\"page-no\": \"page-no_2_187\",\n\t\"white\": \"white_1TVO9\",\n\t\"night\": \"night_3alh8\",\n\t\"sepia\": \"sepia_1CF69\"\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"modules\":true,\"importLoaders\":1,\"localIdentName\":\"[local]_[hash:base64:5]\"}!./~/sass-loader!./src/isomorphic/routes/Viewer/components/BookPage.scss\n// module id = 249\n// module chunks = 17","module.exports = __webpack_public_path__ + \"media/logo-dark.4754e8aa78.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/isomorphic/components/Logo/logo-dark.png\n// module id = 250\n// module chunks = 17","module.exports = __webpack_public_path__ + \"media/logo.81eb83d7f7.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/isomorphic/components/Logo/logo.png\n// module id = 251\n// module chunks = 17","\n    var content = require(\"!!../../../../node_modules/css-loader/index.js??ref--3-1!../../../../node_modules/sass-loader/index.js!./Branding.scss\");\n    var insertCss = require(\"!../../../../node_modules/isomorphic-style-loader/lib/insertCss.js\");\n\n    if (typeof content === 'string') {\n      content = [[module.id, content, '']];\n    }\n\n    module.exports = content.locals || {};\n    module.exports._getContent = function() { return content; };\n    module.exports._getCss = function() { return content.toString(); };\n    module.exports._insertCss = function(options) { return insertCss(content, options) };\n    \n    // Hot Module Replacement\n    // https://webpack.github.io/docs/hot-module-replacement\n    // Only activated in browser context\n    if (module.hot && typeof window !== 'undefined' && window.document) {\n      var removeCss = function() {};\n      module.hot.accept(\"!!../../../../node_modules/css-loader/index.js??ref--3-1!../../../../node_modules/sass-loader/index.js!./Branding.scss\", function() {\n        content = require(\"!!../../../../node_modules/css-loader/index.js??ref--3-1!../../../../node_modules/sass-loader/index.js!./Branding.scss\");\n\n        if (typeof content === 'string') {\n          content = [[module.id, content, '']];\n        }\n\n        removeCss = insertCss(content, { replace: true });\n      });\n      module.hot.dispose(function() { removeCss(); });\n    }\n  \n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/isomorphic/components/Branding/Branding.scss\n// module id = 252\n// module chunks = 17","\n    var content = require(\"!!../../../../node_modules/css-loader/index.js??ref--3-1!../../../../node_modules/sass-loader/index.js!./Colophon.scss\");\n    var insertCss = require(\"!../../../../node_modules/isomorphic-style-loader/lib/insertCss.js\");\n\n    if (typeof content === 'string') {\n      content = [[module.id, content, '']];\n    }\n\n    module.exports = content.locals || {};\n    module.exports._getContent = function() { return content; };\n    module.exports._getCss = function() { return content.toString(); };\n    module.exports._insertCss = function(options) { return insertCss(content, options) };\n    \n    // Hot Module Replacement\n    // https://webpack.github.io/docs/hot-module-replacement\n    // Only activated in browser context\n    if (module.hot && typeof window !== 'undefined' && window.document) {\n      var removeCss = function() {};\n      module.hot.accept(\"!!../../../../node_modules/css-loader/index.js??ref--3-1!../../../../node_modules/sass-loader/index.js!./Colophon.scss\", function() {\n        content = require(\"!!../../../../node_modules/css-loader/index.js??ref--3-1!../../../../node_modules/sass-loader/index.js!./Colophon.scss\");\n\n        if (typeof content === 'string') {\n          content = [[module.id, content, '']];\n        }\n\n        removeCss = insertCss(content, { replace: true });\n      });\n      module.hot.dispose(function() { removeCss(); });\n    }\n  \n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/isomorphic/components/Colophon/Colophon.scss\n// module id = 253\n// module chunks = 17","\n    var content = require(\"!!../../../../node_modules/css-loader/index.js??ref--3-1!../../../../node_modules/sass-loader/index.js!./ConsoleBranding.scss\");\n    var insertCss = require(\"!../../../../node_modules/isomorphic-style-loader/lib/insertCss.js\");\n\n    if (typeof content === 'string') {\n      content = [[module.id, content, '']];\n    }\n\n    module.exports = content.locals || {};\n    module.exports._getContent = function() { return content; };\n    module.exports._getCss = function() { return content.toString(); };\n    module.exports._insertCss = function(options) { return insertCss(content, options) };\n    \n    // Hot Module Replacement\n    // https://webpack.github.io/docs/hot-module-replacement\n    // Only activated in browser context\n    if (module.hot && typeof window !== 'undefined' && window.document) {\n      var removeCss = function() {};\n      module.hot.accept(\"!!../../../../node_modules/css-loader/index.js??ref--3-1!../../../../node_modules/sass-loader/index.js!./ConsoleBranding.scss\", function() {\n        content = require(\"!!../../../../node_modules/css-loader/index.js??ref--3-1!../../../../node_modules/sass-loader/index.js!./ConsoleBranding.scss\");\n\n        if (typeof content === 'string') {\n          content = [[module.id, content, '']];\n        }\n\n        removeCss = insertCss(content, { replace: true });\n      });\n      module.hot.dispose(function() { removeCss(); });\n    }\n  \n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/isomorphic/components/ConsoleBranding/ConsoleBranding.scss\n// module id = 254\n// module chunks = 17","\n    var content = require(\"!!../../../../node_modules/css-loader/index.js??ref--3-1!../../../../node_modules/sass-loader/index.js!./ConsoleSidebar.scss\");\n    var insertCss = require(\"!../../../../node_modules/isomorphic-style-loader/lib/insertCss.js\");\n\n    if (typeof content === 'string') {\n      content = [[module.id, content, '']];\n    }\n\n    module.exports = content.locals || {};\n    module.exports._getContent = function() { return content; };\n    module.exports._getCss = function() { return content.toString(); };\n    module.exports._insertCss = function(options) { return insertCss(content, options) };\n    \n    // Hot Module Replacement\n    // https://webpack.github.io/docs/hot-module-replacement\n    // Only activated in browser context\n    if (module.hot && typeof window !== 'undefined' && window.document) {\n      var removeCss = function() {};\n      module.hot.accept(\"!!../../../../node_modules/css-loader/index.js??ref--3-1!../../../../node_modules/sass-loader/index.js!./ConsoleSidebar.scss\", function() {\n        content = require(\"!!../../../../node_modules/css-loader/index.js??ref--3-1!../../../../node_modules/sass-loader/index.js!./ConsoleSidebar.scss\");\n\n        if (typeof content === 'string') {\n          content = [[module.id, content, '']];\n        }\n\n        removeCss = insertCss(content, { replace: true });\n      });\n      module.hot.dispose(function() { removeCss(); });\n    }\n  \n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/isomorphic/components/ConsoleSidebar/ConsoleSidebar.scss\n// module id = 255\n// module chunks = 17","\n    var content = require(\"!!../../../../node_modules/css-loader/index.js??ref--3-1!../../../../node_modules/sass-loader/index.js!./Logo.scss\");\n    var insertCss = require(\"!../../../../node_modules/isomorphic-style-loader/lib/insertCss.js\");\n\n    if (typeof content === 'string') {\n      content = [[module.id, content, '']];\n    }\n\n    module.exports = content.locals || {};\n    module.exports._getContent = function() { return content; };\n    module.exports._getCss = function() { return content.toString(); };\n    module.exports._insertCss = function(options) { return insertCss(content, options) };\n    \n    // Hot Module Replacement\n    // https://webpack.github.io/docs/hot-module-replacement\n    // Only activated in browser context\n    if (module.hot && typeof window !== 'undefined' && window.document) {\n      var removeCss = function() {};\n      module.hot.accept(\"!!../../../../node_modules/css-loader/index.js??ref--3-1!../../../../node_modules/sass-loader/index.js!./Logo.scss\", function() {\n        content = require(\"!!../../../../node_modules/css-loader/index.js??ref--3-1!../../../../node_modules/sass-loader/index.js!./Logo.scss\");\n\n        if (typeof content === 'string') {\n          content = [[module.id, content, '']];\n        }\n\n        removeCss = insertCss(content, { replace: true });\n      });\n      module.hot.dispose(function() { removeCss(); });\n    }\n  \n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/isomorphic/components/Logo/Logo.scss\n// module id = 256\n// module chunks = 17","\n    var content = require(\"!!../../../../node_modules/css-loader/index.js??ref--3-1!../../../../node_modules/sass-loader/index.js!./_button.scss\");\n    var insertCss = require(\"!../../../../node_modules/isomorphic-style-loader/lib/insertCss.js\");\n\n    if (typeof content === 'string') {\n      content = [[module.id, content, '']];\n    }\n\n    module.exports = content.locals || {};\n    module.exports._getContent = function() { return content; };\n    module.exports._getCss = function() { return content.toString(); };\n    module.exports._insertCss = function(options) { return insertCss(content, options) };\n    \n    // Hot Module Replacement\n    // https://webpack.github.io/docs/hot-module-replacement\n    // Only activated in browser context\n    if (module.hot && typeof window !== 'undefined' && window.document) {\n      var removeCss = function() {};\n      module.hot.accept(\"!!../../../../node_modules/css-loader/index.js??ref--3-1!../../../../node_modules/sass-loader/index.js!./_button.scss\", function() {\n        content = require(\"!!../../../../node_modules/css-loader/index.js??ref--3-1!../../../../node_modules/sass-loader/index.js!./_button.scss\");\n\n        if (typeof content === 'string') {\n          content = [[module.id, content, '']];\n        }\n\n        removeCss = insertCss(content, { replace: true });\n      });\n      module.hot.dispose(function() { removeCss(); });\n    }\n  \n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/isomorphic/elements/Button/_button.scss\n// module id = 257\n// module chunks = 17","\n    var content = require(\"!!../../../../node_modules/css-loader/index.js??ref--3-1!../../../../node_modules/sass-loader/index.js!./Fade.scss\");\n    var insertCss = require(\"!../../../../node_modules/isomorphic-style-loader/lib/insertCss.js\");\n\n    if (typeof content === 'string') {\n      content = [[module.id, content, '']];\n    }\n\n    module.exports = content.locals || {};\n    module.exports._getContent = function() { return content; };\n    module.exports._getCss = function() { return content.toString(); };\n    module.exports._insertCss = function(options) { return insertCss(content, options) };\n    \n    // Hot Module Replacement\n    // https://webpack.github.io/docs/hot-module-replacement\n    // Only activated in browser context\n    if (module.hot && typeof window !== 'undefined' && window.document) {\n      var removeCss = function() {};\n      module.hot.accept(\"!!../../../../node_modules/css-loader/index.js??ref--3-1!../../../../node_modules/sass-loader/index.js!./Fade.scss\", function() {\n        content = require(\"!!../../../../node_modules/css-loader/index.js??ref--3-1!../../../../node_modules/sass-loader/index.js!./Fade.scss\");\n\n        if (typeof content === 'string') {\n          content = [[module.id, content, '']];\n        }\n\n        removeCss = insertCss(content, { replace: true });\n      });\n      module.hot.dispose(function() { removeCss(); });\n    }\n  \n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/isomorphic/elements/Fade/Fade.scss\n// module id = 258\n// module chunks = 17","\n    var content = require(\"!!../../../../node_modules/css-loader/index.js??ref--3-1!../../../../node_modules/sass-loader/index.js!./Icon.scss\");\n    var insertCss = require(\"!../../../../node_modules/isomorphic-style-loader/lib/insertCss.js\");\n\n    if (typeof content === 'string') {\n      content = [[module.id, content, '']];\n    }\n\n    module.exports = content.locals || {};\n    module.exports._getContent = function() { return content; };\n    module.exports._getCss = function() { return content.toString(); };\n    module.exports._insertCss = function(options) { return insertCss(content, options) };\n    \n    // Hot Module Replacement\n    // https://webpack.github.io/docs/hot-module-replacement\n    // Only activated in browser context\n    if (module.hot && typeof window !== 'undefined' && window.document) {\n      var removeCss = function() {};\n      module.hot.accept(\"!!../../../../node_modules/css-loader/index.js??ref--3-1!../../../../node_modules/sass-loader/index.js!./Icon.scss\", function() {\n        content = require(\"!!../../../../node_modules/css-loader/index.js??ref--3-1!../../../../node_modules/sass-loader/index.js!./Icon.scss\");\n\n        if (typeof content === 'string') {\n          content = [[module.id, content, '']];\n        }\n\n        removeCss = insertCss(content, { replace: true });\n      });\n      module.hot.dispose(function() { removeCss(); });\n    }\n  \n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/isomorphic/elements/Icon/Icon.scss\n// module id = 259\n// module chunks = 17","\n    var content = require(\"!!../../../../node_modules/css-loader/index.js??ref--3-1!../../../../node_modules/sass-loader/index.js!./Input.scss\");\n    var insertCss = require(\"!../../../../node_modules/isomorphic-style-loader/lib/insertCss.js\");\n\n    if (typeof content === 'string') {\n      content = [[module.id, content, '']];\n    }\n\n    module.exports = content.locals || {};\n    module.exports._getContent = function() { return content; };\n    module.exports._getCss = function() { return content.toString(); };\n    module.exports._insertCss = function(options) { return insertCss(content, options) };\n    \n    // Hot Module Replacement\n    // https://webpack.github.io/docs/hot-module-replacement\n    // Only activated in browser context\n    if (module.hot && typeof window !== 'undefined' && window.document) {\n      var removeCss = function() {};\n      module.hot.accept(\"!!../../../../node_modules/css-loader/index.js??ref--3-1!../../../../node_modules/sass-loader/index.js!./Input.scss\", function() {\n        content = require(\"!!../../../../node_modules/css-loader/index.js??ref--3-1!../../../../node_modules/sass-loader/index.js!./Input.scss\");\n\n        if (typeof content === 'string') {\n          content = [[module.id, content, '']];\n        }\n\n        removeCss = insertCss(content, { replace: true });\n      });\n      module.hot.dispose(function() { removeCss(); });\n    }\n  \n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/isomorphic/elements/Input/Input.scss\n// module id = 260\n// module chunks = 17","\n    var content = require(\"!!../../../../node_modules/css-loader/index.js??ref--3-1!../../../../node_modules/sass-loader/index.js!./ModalFooter.scss\");\n    var insertCss = require(\"!../../../../node_modules/isomorphic-style-loader/lib/insertCss.js\");\n\n    if (typeof content === 'string') {\n      content = [[module.id, content, '']];\n    }\n\n    module.exports = content.locals || {};\n    module.exports._getContent = function() { return content; };\n    module.exports._getCss = function() { return content.toString(); };\n    module.exports._insertCss = function(options) { return insertCss(content, options) };\n    \n    // Hot Module Replacement\n    // https://webpack.github.io/docs/hot-module-replacement\n    // Only activated in browser context\n    if (module.hot && typeof window !== 'undefined' && window.document) {\n      var removeCss = function() {};\n      module.hot.accept(\"!!../../../../node_modules/css-loader/index.js??ref--3-1!../../../../node_modules/sass-loader/index.js!./ModalFooter.scss\", function() {\n        content = require(\"!!../../../../node_modules/css-loader/index.js??ref--3-1!../../../../node_modules/sass-loader/index.js!./ModalFooter.scss\");\n\n        if (typeof content === 'string') {\n          content = [[module.id, content, '']];\n        }\n\n        removeCss = insertCss(content, { replace: true });\n      });\n      module.hot.dispose(function() { removeCss(); });\n    }\n  \n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/isomorphic/elements/Modal/ModalFooter.scss\n// module id = 261\n// module chunks = 17","\n    var content = require(\"!!../../../../node_modules/css-loader/index.js??ref--3-1!../../../../node_modules/sass-loader/index.js!./SelectizeInput.scss\");\n    var insertCss = require(\"!../../../../node_modules/isomorphic-style-loader/lib/insertCss.js\");\n\n    if (typeof content === 'string') {\n      content = [[module.id, content, '']];\n    }\n\n    module.exports = content.locals || {};\n    module.exports._getContent = function() { return content; };\n    module.exports._getCss = function() { return content.toString(); };\n    module.exports._insertCss = function(options) { return insertCss(content, options) };\n    \n    // Hot Module Replacement\n    // https://webpack.github.io/docs/hot-module-replacement\n    // Only activated in browser context\n    if (module.hot && typeof window !== 'undefined' && window.document) {\n      var removeCss = function() {};\n      module.hot.accept(\"!!../../../../node_modules/css-loader/index.js??ref--3-1!../../../../node_modules/sass-loader/index.js!./SelectizeInput.scss\", function() {\n        content = require(\"!!../../../../node_modules/css-loader/index.js??ref--3-1!../../../../node_modules/sass-loader/index.js!./SelectizeInput.scss\");\n\n        if (typeof content === 'string') {\n          content = [[module.id, content, '']];\n        }\n\n        removeCss = insertCss(content, { replace: true });\n      });\n      module.hot.dispose(function() { removeCss(); });\n    }\n  \n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/isomorphic/elements/SelectizeInput/SelectizeInput.scss\n// module id = 262\n// module chunks = 17","\n    var content = require(\"!!../../../../node_modules/css-loader/index.js??ref--3-1!../../../../node_modules/sass-loader/index.js!./Textarea.scss\");\n    var insertCss = require(\"!../../../../node_modules/isomorphic-style-loader/lib/insertCss.js\");\n\n    if (typeof content === 'string') {\n      content = [[module.id, content, '']];\n    }\n\n    module.exports = content.locals || {};\n    module.exports._getContent = function() { return content; };\n    module.exports._getCss = function() { return content.toString(); };\n    module.exports._insertCss = function(options) { return insertCss(content, options) };\n    \n    // Hot Module Replacement\n    // https://webpack.github.io/docs/hot-module-replacement\n    // Only activated in browser context\n    if (module.hot && typeof window !== 'undefined' && window.document) {\n      var removeCss = function() {};\n      module.hot.accept(\"!!../../../../node_modules/css-loader/index.js??ref--3-1!../../../../node_modules/sass-loader/index.js!./Textarea.scss\", function() {\n        content = require(\"!!../../../../node_modules/css-loader/index.js??ref--3-1!../../../../node_modules/sass-loader/index.js!./Textarea.scss\");\n\n        if (typeof content === 'string') {\n          content = [[module.id, content, '']];\n        }\n\n        removeCss = insertCss(content, { replace: true });\n      });\n      module.hot.dispose(function() { removeCss(); });\n    }\n  \n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/isomorphic/elements/Textarea/Textarea.scss\n// module id = 263\n// module chunks = 17","module.exports = require(\"babel-runtime/core-js/get-iterator\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/core-js/get-iterator\"\n// module id = 264\n// module chunks = 17","module.exports = require(\"babel-runtime/core-js/json/stringify\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/core-js/json/stringify\"\n// module id = 265\n// module chunks = 17","module.exports = require(\"babel-runtime/helpers/slicedToArray\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/helpers/slicedToArray\"\n// module id = 266\n// module chunks = 17","module.exports = require(\"body-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"body-parser\"\n// module id = 267\n// module chunks = 17","module.exports = require(\"colors/safe\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"colors/safe\"\n// module id = 268\n// module chunks = 17","module.exports = require(\"connect-mongo\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"connect-mongo\"\n// module id = 269\n// module chunks = 17","module.exports = require(\"cookie-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"cookie-parser\"\n// module id = 270\n// module chunks = 17","module.exports = require(\"crypto\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"crypto\"\n// module id = 271\n// module chunks = 17","module.exports = require(\"express-session\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express-session\"\n// module id = 272\n// module chunks = 17","module.exports = require(\"http\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"http\"\n// module id = 273\n// module chunks = 17","module.exports = require(\"isomorphic-fetch\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"isomorphic-fetch\"\n// module id = 274\n// module chunks = 17","module.exports = require(\"lodash/cloneDeep\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash/cloneDeep\"\n// module id = 275\n// module chunks = 17","module.exports = require(\"lodash/filter\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash/filter\"\n// module id = 276\n// module chunks = 17","module.exports = require(\"lodash/isNull\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash/isNull\"\n// module id = 277\n// module chunks = 17","module.exports = require(\"lodash/mapValues\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash/mapValues\"\n// module id = 278\n// module chunks = 17","module.exports = require(\"lodash/union\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash/union\"\n// module id = 279\n// module chunks = 17","module.exports = require(\"mongodb\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongodb\"\n// module id = 280\n// module chunks = 17","module.exports = require(\"morgan\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"morgan\"\n// module id = 281\n// module chunks = 17","module.exports = require(\"multer\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"multer\"\n// module id = 282\n// module chunks = 17","module.exports = require(\"react-dom\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react-dom\"\n// module id = 283\n// module chunks = 17","module.exports = require(\"react-helmet\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react-helmet\"\n// module id = 284\n// module chunks = 17","module.exports = require(\"react-side-effect\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react-side-effect\"\n// module id = 285\n// module chunks = 17","module.exports = require(\"redux-logger\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"redux-logger\"\n// module id = 286\n// module chunks = 17","module.exports = require(\"redux-thunk\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"redux-thunk\"\n// module id = 287\n// module chunks = 17","module.exports = require(\"simple-epub-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"simple-epub-parser\"\n// module id = 288\n// module chunks = 17","module.exports = require(\"validator\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"validator\"\n// module id = 289\n// module chunks = 17","module.exports = require(\"jquery\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jquery\"\n// module id = 329\n// module chunks = ","module.exports = require(\"lodash/debounce\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash/debounce\"\n// module id = 415\n// module chunks = ","module.exports = require(\"moment\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"moment\"\n// module id = 416\n// module chunks = ","module.exports = require(\"lodash/forEach\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash/forEach\"\n// module id = 417\n// module chunks = ","module.exports = require(\"lodash/isEqualWith\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash/isEqualWith\"\n// module id = 418\n// module chunks = ","module.exports = require(\"lodash/slice\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash/slice\"\n// module id = 419\n// module chunks = ","module.exports = require(\"marked\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"marked\"\n// module id = 420\n// module chunks = ","module.exports = require(\"react-markdown\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react-markdown\"\n// module id = 421\n// module chunks = "],"sourceRoot":""}