{"version":3,"sources":["../.././src/routes/ManageBooks/ManageBooks.tsx","../.././src/components/ContentPage/ContentPage.tsx","../.././src/components/ContentPage/index.ts","../.././src/components/FileUploader/FileUploader.tsx","../.././src/components/FileUploader/index.ts","../.././src/components/InfoTable/InfoTable.tsx","../.././src/components/InfoTable/index.ts","../.././src/components/Paginator/Paginator.tsx","../.././src/components/Paginator/index.ts","../.././src/components/InfoTable/InfoTable.scss","../.././src/components/Paginator/Paginator.scss","webpack:///./src/components/InfoTable/InfoTable.scss?5e9b","webpack:///./src/components/Paginator/Paginator.scss?6aab","../.././src/routes/ManageBooks/components/BookMetaForm.tsx"],"names":[],"mappings":"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","file":"chunk.5.js","sourcesContent":["import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport _ from 'lodash'\nimport DocContainer from '../../components/DocContainer'\nimport InfoTable from '../../components/InfoTable'\nimport webAPI from '../../webAPI'\nimport * as selectors from '../../selectors'\nimport { sendNotification, openConfirmModal, closeConfirmModal, openModal, initializeForm, closeModal } from '../../actions'\nimport { loadBooks, loadUsers, removeEntity } from '../../actions/api'\nimport ContentPage from '../../components/ContentPage'\nimport helpers from '../../helpers'\nimport moment from 'moment'\nimport FileUploader from '../../components/FileUploader'\nimport { Button } from '../../components/form'\nimport BookMetaForm from './components/BookMetaForm'\n\ninterface Props {\n  sendNotification?: typeof sendNotification\n  loadBooks?: typeof loadBooks\n  bookListNewest?: SelectedPagination\n  openConfirmModal: typeof openConfirmModal\n  closeConfirmModal: any\n  routing: SelectedRouting\n  removeEntity: typeof removeEntity\n  loadUsers: typeof loadUsers\n  openModal: typeof openModal\n  closeModal: typeof closeModal\n  initializeForm: typeof initializeForm\n}\n\nclass ManageBooks extends Component<Props, { showModal: boolean }> {\n  constructor(props) {\n    super(props)\n    this.state = {\n      showModal: false\n    }\n  }\n\n  deleteBook(id, bookName) {\n    this.props.openConfirmModal({\n      title: '确认删除',\n      content: `将删除《${bookName}》`,\n      onConfirm: () => {\n        webAPI.deleteBook(id).then(res => {\n          this.props.closeConfirmModal()\n          this.props.sendNotification('删除成功！')\n          this.props.removeEntity('books', id)\n        })\n      }\n    })\n  }\n\n  editBookMeta(bookMeta) {\n    this.setState({\n      showModal: true\n    })\n\n    this.props.openModal({\n      title: '编辑书籍信息',\n      content: (\n        <BookMetaForm\n          onSave={data => {\n            webAPI.editBookMeta(bookMeta.id, data).then(result => {\n              this.loadBooks()\n              this.props.closeModal()\n              this.props.sendNotification('修改成功！', 'success')\n            })\n          }}\n        />\n      )\n    })\n    this.props.initializeForm('bookMeta', {\n      title: bookMeta.title,\n      authors: bookMeta.authors.map(item => item.name).join(', '),\n      description: bookMeta.description,\n      cover: bookMeta.cover\n    })\n  }\n\n  loadBooks(props = this.props) {\n    this.props.loadBooks(props.routing.query.page || '1')\n  }\n\n  componentWillReceiveProps(nextProps, nextState) {\n    helpers.onRoutingChange(routing => {\n      document.body.scrollTop = 0\n      this.loadBooks(nextProps)\n    })(nextProps, this.props)\n  }\n\n  componentWillMount() {\n    this.loadBooks()\n    this.props.loadUsers()\n  }\n\n  render() {\n    const { bookListNewest } = this.props\n    const entities = _.get(bookListNewest, ['pages', bookListNewest.currentPage], [])\n    const rows = entities\n      .map((row, index) => {\n        return [\n          row.id,\n          row.title,\n          moment(new Date(row.dateCreated).valueOf()).format('YYYY年MM月DD日'),\n          row.authors ? row.authors.map(author => author.name).join(', ') : '未知作者',\n          (\n            <div>\n              <span className=\"dark-link\" onClick={() => {\n                this.editBookMeta(entities[index])\n              }}>编辑</span>\n              <span className=\"dark-link\" onClick={() => {\n                this.deleteBook(row.id, row.title)\n              }}>删除</span>\n            </div>\n          )\n        ]\n      })\n\n    return (\n      <DocContainer title=\"书籍管理\" bodyClass=\"manage-books\">\n        <ContentPage\n          pagination={{\n            name: 'books'\n          }}\n        >\n          <FileUploader\n            style={{ marginTop: 20 }}\n            url=\"/api/books\"\n            accept=\".txt,.epub\"\n            name=\"book-file\"\n            onSuccess={result => {\n              this.loadBooks()\n            }}\n            onError={error => {\n              this.props.sendNotification(error.message, 'error')\n            }}\n          >\n            <Button color=\"blue\">添加书籍</Button>\n          </FileUploader>\n          <InfoTable\n            rows={rows}\n            header={['ID', '数名', '创建日期', '作者', '操作']}\n          />\n        </ContentPage>\n      </DocContainer>\n    )\n  }\n}\n\nfunction mapStateToProps(state, ownProps) {\n  return {\n    bookListNewest: selectors.pagination.bookList(state),\n    routing: selectors.routing(state)\n  }\n}\n\nexport default connect<{}, {}, {}>(\n  mapStateToProps,\n  { loadBooks, sendNotification, openConfirmModal, closeConfirmModal, removeEntity, loadUsers, openModal, initializeForm, closeModal }\n)(ManageBooks)\n\n\n\n// WEBPACK FOOTER //\n// ./src/routes/ManageBooks/ManageBooks.tsx","import React, { Component } from 'react'\nimport Paginator from '../../components/Paginator'\nimport { connect } from 'react-redux'\nimport * as selectors from '../../selectors'\n\ntype PaginationLink = {\n  page: number\n  url: string\n}\n\ninterface Props {\n  pagination: {\n    name: string\n    key?: string\n  }\n}\n\ninterface AllProps extends Props {\n  routing: any\n  paginationLinks: {\n    next?: PaginationLink\n    last: PaginationLink\n  }\n}\n\nclass ContentPage extends Component<AllProps, {}> {\n\n  constructor(props) {\n    super(props)\n  }\n\n  componentDidMount() {\n  }\n\n  render() {\n    const { children, routing, paginationLinks: { next, last } } = this.props\n    const all = last && last.page || 1\n    const current = next\n      ? next.page - 1\n      : all\n\n    return (\n      <div>\n        {children}\n        <Paginator\n          all={all}\n          current={current}\n          url={{\n            pathname: routing.pathname,\n            query: routing.query || {}\n          }}\n          />\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = (state, ownProps) => {\n  const { pagination: { name, key } } = ownProps\n\n  return {\n    routing: state.routing.locationBeforeTransitions || {},\n    // paginationLinks: selectors.paginationLinks(name, key)(state)\n  }\n}\n\nexport default connect<{}, {}, Props>(\n  mapStateToProps,\n  {}\n)(ContentPage)\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/ContentPage/ContentPage.tsx","import ContentPage from './ContentPage'\nexport default ContentPage\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/ContentPage/index.ts","import React, { Component } from 'react'\nimport $ from 'jquery'\n\ninterface Callback {\n  (data: any): any\n}\n\ninterface Props {\n  url: string\n  noAjax?: boolean\n  onSuccess?: Callback\n  onError?: Callback\n  onComplete?: Callback\n  name?: string\n  multiple?: boolean\n  accept?: string\n  style?: React.CSSProperties\n}\n\ninterface State {\n  value: string\n}\n\nclass FileUploader extends Component<Props, State> {\n\n  fileInput: HTMLInputElement\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      value: null\n    }\n    this.handleFileChange = this.handleFileChange.bind(this)\n  }\n\n  handleFileChange(e) {\n    const { url, onComplete, onSuccess, onError } = this.props\n\n    const files = e.target.files\n    const data = new FormData()\n\n    if (files.length > 1) {\n      $.each(files, function (key, value) {\n        data.append(key, value)\n      })\n    } else {\n      data.append('file', files[0])\n    }\n\n    $.ajax({\n      url,\n      type: 'POST',\n      data,\n      cache: false,\n      processData: false,\n\n      // 如果这么设置 contentType 会导致不存在 boundary 的问题, 需要设置为 false\n      // contentType: 'multipart/form-data',\n      contentType: false,\n\n      xhrFields: {\n        withCredentials: true\n      },\n      complete: data2 => {\n        if (onComplete) {\n          onComplete(data2)\n        }\n      },\n      success: function (data2, textStatus, jqXHR) {\n        if (onSuccess) {\n          onSuccess(data2)\n        }\n      },\n      error: function (jqXHR, textStatus, errorThrown) {\n        if (onError) {\n          onError(jqXHR.responseJSON)\n        }\n      }\n    })\n  }\n\n  componentDidMount() {\n  }\n\n  render() {\n    const { url, accept, noAjax, children, name, multiple, style } = this.props\n\n    // 如果页面上有两个上传组件可能会出错\n    // input value 设为空会使得每次选中文件后都触发 onChange\n    return (\n      <div\n        className=\"file-trigger\"\n        onClick={e => {\n          if (!noAjax) {\n            $(this.fileInput).click()\n          }\n        } }\n        style={\n          {\n            ...{\n              display: 'inline-block'\n            },\n            ...style\n          }\n        }\n        >\n        <form action={url} method=\"post\" encType=\"multipart/form-data\" style={noAjax ? {} : { display: 'none' }}>\n          <input\n            multiple={multiple}\n            type=\"file\"\n            name={name || 'file'}\n            id=\"upload-file\"\n            value={noAjax ? undefined : ''}\n            ref={ref => { this.fileInput = ref } }\n            onChange={e => {\n              if (!noAjax) {\n                this.handleFileChange(e)\n              }\n            } }\n            accept={accept || '.*'}\n            />\n          <input type=\"submit\" value=\"提交\" />\n        </form>\n        {children}\n      </div>\n    )\n  }\n}\n\nexport default FileUploader\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/FileUploader/FileUploader.tsx","import FileUploader from './FileUploader'\nexport default FileUploader\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/FileUploader/index.ts","import React, { Component } from 'react'\nimport _ from 'lodash'\nimport classnames from 'classnames'\nimport CSSModules from 'react-css-modules'\nimport styles from './InfoTable.scss'\n\ninterface IProps {\n  header: (string | JSX.Element)[]\n  style?: React.CSSProperties\n  rows?: ((string | JSX.Element)[])[]\n}\n\n@CSSModules(styles)\nclass InfoTable extends Component<IProps, {}> {\n\n  constructor(props) {\n    super(props)\n  }\n\n  render() {\n    let { header, style, rows } = this.props\n\n    const className = classnames({\n      'info-table': true,\n      'info-table--no-header': !header\n    })\n\n    return (\n      <table styleName={className} style={style || {}}>\n        <tbody>\n          <tr>\n            {header.map((item, index) => <th key={index}>{item}</th>)}\n          </tr>\n          {\n            rows.map((row, index) => {\n              if (row.length !== header.length) {\n                console.warn('Row items should match head items!')\n              }\n\n              return (\n                <tr key={index}>\n                  {_.map(row, (item, key) => <td key={key}>{item}</td>)}\n                </tr>\n              )\n            })\n          }\n        </tbody>\n      </table>\n    )\n  }\n}\n\nexport default InfoTable\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/InfoTable/InfoTable.tsx","import InfoTable from './InfoTable'\nexport default InfoTable\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/InfoTable/index.ts","import React, { Component } from 'react'\nimport { Link } from 'react-router'\nimport _ from 'lodash'\nimport utils from '../../utils'\nimport CSSModules from 'react-css-modules'\nconst styles = require('./Paginator.scss')\n\n/* 栗子 🌰\n * range = 2\n * | range | current | rangge |\n *   2, 3,     [4],     5, 6\n */\n\ntype Ojb = {\n  [key: string]: string\n}\n\ninterface Props {\n  all: number\n  current: number\n  range?: number // default 3\n  url: {\n    pathname: string\n    query: Object\n  }\n  urlStyle?: 'query' | 'slash'\n}\n\n@CSSModules(styles)\nclass Paginator extends Component<Props, {}> {\n\n  constructor(props) {\n    super(props)\n  }\n\n  parseUrl(pathname: string, query: Object, pageNum) {\n    let urlStyle = this.props.urlStyle\n      ? this.props.urlStyle\n      : 'query'\n\n    if (urlStyle === 'query') {\n      let queryPart = utils.parseUrlencoded(_.omit(query, ['page']))\n      return `${pathname}${queryPart ? `?${queryPart}&` : '?'}page=${pageNum}`\n    }\n\n    let queryPart = utils.parseUrlencoded(query)\n    return `${pathname}/page/${pageNum}?${queryPart}`\n  }\n\n  render() {\n    const range = this.props.range ? this.props.range : 3\n    const totalRangeEndIndex = this.props.all - 1\n    const currentIndex = parseInt(this.props.current as any) - 1\n    let rangeStartIndex = currentIndex - range\n    let rangeEndIndex = currentIndex + range\n    let leftSpread = false\n    let rightSpread = false\n    let pages = []\n    let url = this.props.url\n\n    if (typeof this.props.all !== 'number') {\n      throw new Error('all 必须为 number 类型！')\n    }\n\n    // 验证\n    if (typeof currentIndex !== 'number') {\n      console.error(`页码必须为数字，却得到 ${typeof currentIndex}`)\n    }\n    if (currentIndex > rangeEndIndex || currentIndex < 0) {\n      console.error('页码不能大于所有页面数目或小于 1！')\n    }\n\n    if (range * 2 + 1 >= totalRangeEndIndex) {\n      // 总长度小于 range 直径\n      rangeEndIndex = totalRangeEndIndex\n      rangeStartIndex = 0\n    } else {\n      // 处理右侧溢出\n      if (rangeEndIndex >= totalRangeEndIndex) {\n        rangeEndIndex = totalRangeEndIndex\n        rangeStartIndex = totalRangeEndIndex - (range * 2 + 1)\n      } else {\n        rightSpread = true\n      }\n\n      if (rangeStartIndex <= 0) {\n        rangeStartIndex = 0\n        rangeEndIndex = range * 2 + 1\n      } else {\n        leftSpread = true\n      }\n    }\n\n    for (let i = rangeStartIndex; i <= rangeEndIndex; i++) {\n      pages = pages.concat([{\n        pageNum: i + 1,\n        isCurrent: i === currentIndex\n      }])\n    }\n\n    // add spread\n    if (leftSpread) {\n      const spd = [\n        {\n          pageNum: 1\n        },\n        {\n          isSpread: true\n        }\n      ]\n      pages = spd.concat(pages)\n    }\n\n    if (rightSpread) {\n      const spd = [\n        {\n          isSpread: true\n        },\n        {\n          pageNum: totalRangeEndIndex + 1\n        }\n      ]\n      pages = pages.concat(spd)\n    }\n\n    return (\n      this.props.all !== 1 && (\n        <div styleName=\"paginator\">\n          <ul>\n            {\n              pages.map((page, index) => {\n                if (page.isCurrent) {\n                  return (\n                    <li key={index} styleName=\"page-num--current\">{page.pageNum}</li>\n                  )\n                }\n                if (page.isSpread) {\n                  return (\n                    <li key={index} styleName=\"page-spread\">...</li>\n                  )\n                }\n\n                return (\n                  <li key={index} styleName=\"page-num\"><Link to={this.parseUrl(url.pathname, url.query, page.pageNum) }>{page.pageNum}</Link></li>\n                )\n              })\n            }\n          </ul>\n        </div>\n      )\n    )\n  }\n}\n\nexport default Paginator\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/Paginator/Paginator.tsx","import Paginator from './Paginator'\nexport default Paginator\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/Paginator/index.ts","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".info-table--no-header_kMU9t {\\n  position: relative; }\\n\\n.info-table_20Mpg {\\n  margin: 20px 0;\\n  width: 100%;\\n  line-height: 2.5;\\n  font-size: 1rem;\\n  position: relative; }\\n  .info-table_20Mpg > tbody > tr:first-child {\\n    border-bottom: 2px solid #666;\\n    font-weight: bold;\\n    line-height: 2.5; }\\n  .info-table_20Mpg > tbody > tr {\\n    border-bottom: 1px solid #ddd; }\\n    .info-table_20Mpg > tbody > tr > th {\\n      text-align: left;\\n      border-bottom: 1px solid #ddd; }\\n    .info-table_20Mpg > tbody > tr > td, .info-table_20Mpg > tbody > tr th {\\n      padding: 0 10px;\\n      max-width: 250px; }\\n\\n.actions_ApREx {\\n  min-width: 80px; }\\n  .actions_ApREx .action_1te-v {\\n    cursor: pointer;\\n    color: #1B267F;\\n    display: inline-block;\\n    margin-right: 5px; }\\n    .actions_ApREx .action_1te-v:hover {\\n      color: #2e40d2; }\\n    .actions_ApREx .action_1te-v:active {\\n      color: #090d2b; }\\n\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"info-table--no-header\": \"info-table--no-header_kMU9t\",\n\t\"info-table\": \"info-table_20Mpg\",\n\t\"actions\": \"actions_ApREx\",\n\t\"action\": \"action_1te-v\"\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"modules\":true,\"importLoaders\":1,\"localIdentName\":\"[local]_[hash:base64:5]\"}!./~/sass-loader!./src/components/InfoTable/InfoTable.scss\n// module id = 327\n// module chunks = 5 6","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".page-spread_1Zy4Q, .page-num_1fJwI a, .page-num--current_3liok a, .page-num--current_3liok {\\n  display: inline-block;\\n  padding: 8px 12px;\\n  color: #666;\\n  border: 1px solid #ddd;\\n  background: #fff;\\n  min-width: 37px;\\n  text-align: center;\\n  border-radius: 3px;\\n  box-sizing: border-box; }\\n\\n.paginator_1KZC2 {\\n  margin: 20px 0; }\\n\\n.page-spread_1Zy4Q {\\n  display: inline-block;\\n  cursor: default; }\\n\\n.page-num_1fJwI, .page-num--current_3liok {\\n  display: inline-block;\\n  margin: 0 3px; }\\n  .page-num_1fJwI a:hover, .page-num--current_3liok a:hover {\\n    background: #1B267F;\\n    color: #fff; }\\n\\n.page-num--current_3liok {\\n  background: #ddd;\\n  cursor: default; }\\n\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"page-spread\": \"page-spread_1Zy4Q\",\n\t\"page-num\": \"page-num_1fJwI\",\n\t\"page-num--current\": \"page-num--current_3liok\",\n\t\"paginator\": \"paginator_1KZC2\"\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"modules\":true,\"importLoaders\":1,\"localIdentName\":\"[local]_[hash:base64:5]\"}!./~/sass-loader!./src/components/Paginator/Paginator.scss\n// module id = 328\n// module chunks = 5 6","\n    var content = require(\"!!../../../node_modules/css-loader/index.js??ref--2-1!../../../node_modules/sass-loader/index.js!./InfoTable.scss\");\n    var insertCss = require(\"!../../../node_modules/isomorphic-style-loader/lib/insertCss.js\");\n\n    if (typeof content === 'string') {\n      content = [[module.id, content, '']];\n    }\n\n    module.exports = content.locals || {};\n    module.exports._getContent = function() { return content; };\n    module.exports._getCss = function() { return content.toString(); };\n    module.exports._insertCss = function(options) { return insertCss(content, options) };\n    \n    // Hot Module Replacement\n    // https://webpack.github.io/docs/hot-module-replacement\n    // Only activated in browser context\n    if (module.hot && typeof window !== 'undefined' && window.document) {\n      var removeCss = function() {};\n      module.hot.accept(\"!!../../../node_modules/css-loader/index.js??ref--2-1!../../../node_modules/sass-loader/index.js!./InfoTable.scss\", function() {\n        content = require(\"!!../../../node_modules/css-loader/index.js??ref--2-1!../../../node_modules/sass-loader/index.js!./InfoTable.scss\");\n\n        if (typeof content === 'string') {\n          content = [[module.id, content, '']];\n        }\n\n        removeCss = insertCss(content, { replace: true });\n      });\n      module.hot.dispose(function() { removeCss(); });\n    }\n  \n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/InfoTable/InfoTable.scss\n// module id = 332\n// module chunks = 5 6","\n    var content = require(\"!!../../../node_modules/css-loader/index.js??ref--2-1!../../../node_modules/sass-loader/index.js!./Paginator.scss\");\n    var insertCss = require(\"!../../../node_modules/isomorphic-style-loader/lib/insertCss.js\");\n\n    if (typeof content === 'string') {\n      content = [[module.id, content, '']];\n    }\n\n    module.exports = content.locals || {};\n    module.exports._getContent = function() { return content; };\n    module.exports._getCss = function() { return content.toString(); };\n    module.exports._insertCss = function(options) { return insertCss(content, options) };\n    \n    // Hot Module Replacement\n    // https://webpack.github.io/docs/hot-module-replacement\n    // Only activated in browser context\n    if (module.hot && typeof window !== 'undefined' && window.document) {\n      var removeCss = function() {};\n      module.hot.accept(\"!!../../../node_modules/css-loader/index.js??ref--2-1!../../../node_modules/sass-loader/index.js!./Paginator.scss\", function() {\n        content = require(\"!!../../../node_modules/css-loader/index.js??ref--2-1!../../../node_modules/sass-loader/index.js!./Paginator.scss\");\n\n        if (typeof content === 'string') {\n          content = [[module.id, content, '']];\n        }\n\n        removeCss = insertCss(content, { replace: true });\n      });\n      module.hot.dispose(function() { removeCss(); });\n    }\n  \n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Paginator/Paginator.scss\n// module id = 333\n// module chunks = 5 6","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport form from 'better-redux-form'\nimport { sendNotification, closeModal } from '../../../actions'\nimport { Input, Textarea } from '../../../components/form'\nimport ModalFooter from '../../../components/Modal/ModalFooter'\n\ninterface OwnProps {\n  onSave: (data: any) => void\n}\n\ninterface StateProps {\n  fields?: any\n  handleSubmit?: any\n}\n\ninterface DispatchProps {\n  sendNotification?: typeof sendNotification\n  closeModal?: typeof closeModal\n}\n\n@form({\n  form: 'bookMeta',\n  fields: ['title', 'authors', 'description', 'cover']\n})\nclass BookMetaForm extends Component<OwnProps & StateProps & DispatchProps, {}> {\n\n  constructor(props) {\n    super(props)\n  }\n\n  render() {\n    const {\n      fields: { title, authors, description, cover },\n      handleSubmit, closeModal, onSave\n    } = this.props\n\n    return (\n      <div>\n        <Input placeholder=\"书名\" {...title} />\n        <Input placeholder=\"作者\" {...authors} />\n        <Textarea placeholder=\"描述\" {...description} />\n        <Input placeholder=\"封面\" {...cover} />\n        <ModalFooter\n          onConfirm={handleSubmit(data => {\n            onSave(data)\n          })}\n          onCancel={closeModal}\n          />\n      </div>\n    )\n  }\n}\n\nexport default connect<StateProps, DispatchProps, OwnProps> (\n  state => state,\n  { sendNotification, closeModal }\n)(BookMetaForm)\n\n\n\n// WEBPACK FOOTER //\n// ./src/routes/ManageBooks/components/BookMetaForm.tsx"],"sourceRoot":""}